var Calendar=Class.create();Calendar.VERSION="1.2",Calendar.DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"),Calendar.SHORT_DAY_NAMES=new Array("S","M","T","W","T","F","S","S"),Calendar.MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),Calendar.SHORT_MONTH_NAMES=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),Calendar.NAV_PREVIOUS_YEAR=-2,Calendar.NAV_PREVIOUS_MONTH=-1,Calendar.NAV_TODAY=0,Calendar.NAV_NEXT_MONTH=1,Calendar.NAV_NEXT_YEAR=2,Calendar._checkCalendar=function(e){if(!window._popupCalendar)return!1;if(!Element.descendantOf(Event.element(e),window._popupCalendar.container))return window._popupCalendar.callCloseHandler(),Event.stop(e)},Calendar.handleMouseDownEvent=function(e){Event.observe(document,"mouseup",Calendar.handleMouseUpEvent),Event.stop(e)},Calendar.handleMouseUpEvent=function(e){function t(e){var t=s.getDate(),a=s.getMonthDays(e);t>a&&s.setDate(a),s.setMonth(e)}var a=Event.element(e),n=a.calendar,l=!1;if(!n)return!1;if("undefined"==typeof a.navAction){n.currentDateElement&&(Element.removeClassName(n.currentDateElement,"selected"),Element.addClassName(a,"selected"),n.shouldClose=n.currentDateElement==a,n.shouldClose||(n.currentDateElement=a)),n.date.setDateOnly(a.date),l=!0,n.shouldClose=!a.hasClassName("otherDay");var r=!n.shouldClose;r&&n.update(n.date)}else{var s=new Date(n.date);a.navAction==Calendar.NAV_TODAY&&s.setDateOnly(new Date);var d=s.getFullYear(),o=s.getMonth();switch(a.navAction){case Calendar.NAV_PREVIOUS_YEAR:d>n.minYear&&s.setFullYear(d-1);break;case Calendar.NAV_PREVIOUS_MONTH:o>0?t(o-1):d-- >n.minYear&&(s.setFullYear(d),t(11));break;case Calendar.NAV_TODAY:break;case Calendar.NAV_NEXT_MONTH:o<11?t(o+1):d<n.maxYear&&(s.setFullYear(d+1),t(0));break;case Calendar.NAV_NEXT_YEAR:d<n.maxYear&&s.setFullYear(d+1)}s.equalsTo(n.date)?0==a.navAction&&(l=n.shouldClose=!0):(n.setDate(s),l=!0)}return l&&e&&n.callSelectHandler(),n.shouldClose&&e&&n.callCloseHandler(),Event.stopObserving(document,"mouseup",Calendar.handleMouseUpEvent),Event.stop(e)},Calendar.defaultSelectHandler=function(e){return!!e.dateField&&("DIV"==e.dateField.tagName?Element.update(e.dateField,e.date.print(e.dateFormat)):"INPUT"==e.dateField.tagName&&(e.dateField.value=e.date.print(e.dateFormat)),"function"==typeof e.dateField.onchange&&e.dateField.onchange(),void(e.shouldClose&&e.callCloseHandler()))},Calendar.defaultCloseHandler=function(e){e.hide()},Calendar.setup=function(e){function t(t,a){e[t]||(e[t]=a)}if(t("dateField",null),t("triggerElement",null),t("parentElement",null),t("selectHandler",null),t("closeHandler",null),e.parentElement){var a=new Calendar(e.parentElement);return a.setSelectHandler(e.selectHandler||Calendar.defaultSelectHandler),e.dateFormat&&a.setDateFormat(e.dateFormat),e.dateField&&(a.setDateField(e.dateField),a.parseDate(a.dateField.innerHTML||a.dateField.value)),a.show(),a}var n=$(e.triggerElement||e.dateField);n.onclick=function(){var t=new Calendar;return t.setSelectHandler(e.selectHandler||Calendar.defaultSelectHandler),t.setCloseHandler(e.closeHandler||Calendar.defaultCloseHandler),e.dateFormat&&t.setDateFormat(e.dateFormat),e.dateField&&(t.setDateField(e.dateField),t.parseDate(t.dateField.innerHTML||t.dateField.value)),e.dateField&&Date.parseDate(t.dateField.value||t.dateField.innerHTML,t.dateFormat),t.showAtElement(n),t}},Calendar.prototype={container:null,selectHandler:null,closeHandler:null,minYear:1900,maxYear:2100,dateFormat:"%Y-%m-%d",date:new Date,currentDateElement:null,shouldClose:!1,isPopup:!0,dateField:null,initialize:function(e){e?this.create($(e)):this.create()},update:function(e){var t=this,a=new Date,n=a.getFullYear(),l=a.getMonth(),r=a.getDate(),s=e.getMonth(),d=e.getDate();e.getFullYear()<this.minYear?e.setFullYear(this.minYear):e.getFullYear()>this.maxYear&&e.setFullYear(this.maxYear),this.date=new Date(e),e.setDate(1),e.setDate(-e.getDay()+1),Element.getElementsBySelector(this.container,"tbody tr").each(function(a,o){var i=!1;a.immediateDescendants().each(function(a,o){var u=e.getDate(),h=e.getDay(),c=e.getMonth()==s;a.className="",a.date=new Date(e),a.update(u),c?i=!0:a.addClassName("otherDay"),c&&u==d&&(a.addClassName("selected"),t.currentDateElement=a),e.getFullYear()==n&&e.getMonth()==l&&u==r&&a.addClassName("today"),[0,6].indexOf(h)!=-1&&a.addClassName("weekend"),e.setDate(u+1)}),i?a.show():a.hide()}),this.container.getElementsBySelector("td.title")[0].update(Calendar.MONTH_NAMES[s]+" "+this.date.getFullYear())},create:function(e){e?this.isPopup=!1:(e=document.getElementsByTagName("body")[0],this.isPopup=!0);var t=new Element("table"),a=new Element("thead");t.appendChild(a);var n=new Element("tr"),l=new Element("td",{colSpan:7});l.addClassName("title"),n.appendChild(l),a.appendChild(n),n=new Element("tr"),this._drawButtonCell(n,"&#x00ab;",1,Calendar.NAV_PREVIOUS_YEAR),this._drawButtonCell(n,"&#x2039;",1,Calendar.NAV_PREVIOUS_MONTH),this._drawButtonCell(n,"Today",3,Calendar.NAV_TODAY),this._drawButtonCell(n,"&#x203a;",1,Calendar.NAV_NEXT_MONTH),this._drawButtonCell(n,"&#x00bb;",1,Calendar.NAV_NEXT_YEAR),a.appendChild(n),n=new Element("tr");for(var r=0;r<7;++r)l=new Element("th").update(Calendar.SHORT_DAY_NAMES[r]),0!=r&&6!=r||l.addClassName("weekend"),n.appendChild(l);a.appendChild(n);var s=t.appendChild(new Element("tbody"));for(r=6;r>0;--r){n=s.appendChild(new Element("tr")),n.addClassName("days");for(var d=7;d>0;--d)l=n.appendChild(new Element("td")),l.calendar=this}this.container=new Element("div"),this.container.addClassName("calendar"),this.isPopup&&(this.container.setStyle({position:"absolute",display:"none"}),this.container.addClassName("popup")),this.container.appendChild(t),this.update(this.date),Event.observe(this.container,"mousedown",Calendar.handleMouseDownEvent),e.appendChild(this.container)},_drawButtonCell:function(e,t,a,n){var l=new Element("td");return a>1&&(l.colSpan=a),l.className="button",l.calendar=this,l.navAction=n,l.innerHTML=t,l.unselectable="on",e.appendChild(l),l},callSelectHandler:function(){this.selectHandler&&this.selectHandler(this,this.date.print(this.dateFormat))},callCloseHandler:function(){this.closeHandler&&this.closeHandler(this)},show:function(){this.container.show(),this.isPopup&&(window._popupCalendar=this,Event.observe(document,"mousedown",Calendar._checkCalendar))},showAt:function(e,t){this.container.setStyle({left:e+"px",top:t+"px"}),this.show()},showAtElement:function(e){var t=Position.cumulativeOffset(e);this.showAt(t[0],t[1])},hide:function(){this.isPopup&&Event.stopObserving(document,"mousedown",Calendar._checkCalendar),this.container.hide()},parseDate:function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},setSelectHandler:function(e){this.selectHandler=e},setCloseHandler:function(e){this.closeHandler=e},setDate:function(e){e.equalsTo(this.date)||this.update(e)},setDateFormat:function(e){this.dateFormat=e},setDateField:function(e){this.dateField=$(e)},setRange:function(e,t){this.minYear=e,this.maxYear=t}},window._popupCalendar=null,Date.DAYS_IN_MONTH=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date.parseDate=function(e,t){var a=new Date,n=0,l=-1,r=0,s=e.split(/\W+/),d=t.match(/%./g),o=0,i=0,u=0,h=0;for(o=0;o<s.length;++o)if(s[o])switch(d[o]){case"%d":case"%e":r=parseInt(s[o],10);break;case"%m":l=parseInt(s[o],10)-1;break;case"%Y":case"%y":n=parseInt(s[o],10),n<100&&(n+=n>29?1900:2e3);break;case"%b":case"%B":for(i=0;i<12;++i)if(Calendar.MONTH_NAMES[i].substr(0,s[o].length).toLowerCase()==s[o].toLowerCase()){l=i;break}break;case"%H":case"%I":case"%k":case"%l":u=parseInt(s[o],10);break;case"%P":case"%p":/pm/i.test(s[o])&&u<12?u+=12:/am/i.test(s[o])&&u>=12&&(u-=12);break;case"%M":h=parseInt(s[o],10)}if(isNaN(n)&&(n=a.getFullYear()),isNaN(l)&&(l=a.getMonth()),isNaN(r)&&(r=a.getDate()),isNaN(u)&&(u=a.getHours()),isNaN(h)&&(h=a.getMinutes()),0!=n&&l!=-1&&0!=r)return new Date(n,l,r,u,h,0);for(n=0,l=-1,r=0,o=0;o<s.length;++o)if(s[o].search(/[a-zA-Z]+/)!=-1){var c=-1;for(i=0;i<12;++i)if(Calendar.MONTH_NAMES[i].substr(0,s[o].length).toLowerCase()==s[o].toLowerCase()){c=i;break}c!=-1&&(l!=-1&&(r=l+1),l=c)}else parseInt(s[o],10)<=12&&l==-1?l=s[o]-1:parseInt(s[o],10)>31&&0==n?(n=parseInt(s[o],10),n<100&&(n+=n>29?1900:2e3)):0==r&&(r=s[o]);return 0==n&&(n=a.getFullYear()),l!=-1&&0!=r?new Date(n,l,r,u,h,0):a},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return"undefined"==typeof e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date.DAYS_IN_MONTH[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=new Date(this.getFullYear(),0,0,0,0,0),a=e-t;return Math.floor(a/Date.DAY)},Date.prototype.getWeekNumber=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=e.getDay();e.setDate(e.getDate()-(t+6)%7+3);var a=e.valueOf();return e.setMonth(0),e.setDate(4),Math.round((a-e.valueOf())/6048e5)+1},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),a=this.getDate(),n=this.getFullYear(),l=this.getWeekNumber(),r=this.getDay(),s={},d=this.getHours(),o=d>=12,i=o?d-12:d,u=this.getDayOfYear();0==i&&(i=12);var h=this.getMinutes(),c=this.getSeconds();return s["%a"]=Calendar.SHORT_DAY_NAMES[r],s["%A"]=Calendar.DAY_NAMES[r],s["%b"]=Calendar.SHORT_MONTH_NAMES[t],s["%B"]=Calendar.MONTH_NAMES[t],s["%C"]=1+Math.floor(n/100),s["%d"]=a<10?"0"+a:a,s["%e"]=a,s["%H"]=d<10?"0"+d:d,s["%I"]=i<10?"0"+i:i,s["%j"]=u<100?u<10?"00"+u:"0"+u:u,s["%k"]=d,s["%l"]=i,s["%m"]=t<9?"0"+(1+t):1+t,s["%M"]=h<10?"0"+h:h,s["%n"]="\n",s["%p"]=o?"PM":"AM",s["%P"]=o?"pm":"am",s["%s"]=Math.floor(this.getTime()/1e3),s["%S"]=c<10?"0"+c:c,s["%t"]="\t",s["%U"]=s["%W"]=s["%V"]=l<10?"0"+l:l,s["%u"]=r+1,s["%w"]=r,s["%y"]=(""+n).substr(2,2),s["%Y"]=n,s["%%"]="%",e.gsub(/%./,function(e){return s[e]||e})},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(e){var t=new Date(this);t.__msh_oldSetFullYear(e),t.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear(e)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29tbWVuZG9yZGVyL2NhbGVuZGFydmlldy5qcyJdLCJuYW1lcyI6WyJDYWxlbmRhciIsIkNsYXNzIiwiY3JlYXRlIiwiVkVSU0lPTiIsIkRBWV9OQU1FUyIsIkFycmF5IiwiU0hPUlRfREFZX05BTUVTIiwiTU9OVEhfTkFNRVMiLCJTSE9SVF9NT05USF9OQU1FUyIsIk5BVl9QUkVWSU9VU19ZRUFSIiwiTkFWX1BSRVZJT1VTX01PTlRIIiwiTkFWX1RPREFZIiwiTkFWX05FWFRfTU9OVEgiLCJOQVZfTkVYVF9ZRUFSIiwiX2NoZWNrQ2FsZW5kYXIiLCJldmVudCIsIndpbmRvdyIsIl9wb3B1cENhbGVuZGFyIiwiRWxlbWVudCIsImRlc2NlbmRhbnRPZiIsIkV2ZW50IiwiZWxlbWVudCIsImNvbnRhaW5lciIsImNhbGxDbG9zZUhhbmRsZXIiLCJzdG9wIiwiaGFuZGxlTW91c2VEb3duRXZlbnQiLCJvYnNlcnZlIiwiZG9jdW1lbnQiLCJoYW5kbGVNb3VzZVVwRXZlbnQiLCJzZXRNb250aCIsIm0iLCJkYXkiLCJkYXRlIiwiZ2V0RGF0ZSIsIm1heCIsImdldE1vbnRoRGF5cyIsInNldERhdGUiLCJlbCIsImNhbGVuZGFyIiwiaXNOZXdEYXRlIiwibmF2QWN0aW9uIiwiY3VycmVudERhdGVFbGVtZW50IiwicmVtb3ZlQ2xhc3NOYW1lIiwiYWRkQ2xhc3NOYW1lIiwic2hvdWxkQ2xvc2UiLCJzZXREYXRlT25seSIsImhhc0NsYXNzTmFtZSIsImlzT3RoZXJNb250aCIsInVwZGF0ZSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb24iLCJnZXRNb250aCIsIm1pblllYXIiLCJzZXRGdWxsWWVhciIsIm1heFllYXIiLCJlcXVhbHNUbyIsImNhbGxTZWxlY3RIYW5kbGVyIiwic3RvcE9ic2VydmluZyIsImRlZmF1bHRTZWxlY3RIYW5kbGVyIiwiZGF0ZUZpZWxkIiwidGFnTmFtZSIsInByaW50IiwiZGF0ZUZvcm1hdCIsInZhbHVlIiwib25jaGFuZ2UiLCJkZWZhdWx0Q2xvc2VIYW5kbGVyIiwiaGlkZSIsInNldHVwIiwicGFyYW1zIiwicGFyYW1fZGVmYXVsdCIsIm5hbWUiLCJkZWYiLCJwYXJlbnRFbGVtZW50Iiwic2V0U2VsZWN0SGFuZGxlciIsInNlbGVjdEhhbmRsZXIiLCJzZXREYXRlRm9ybWF0Iiwic2V0RGF0ZUZpZWxkIiwicGFyc2VEYXRlIiwiaW5uZXJIVE1MIiwic2hvdyIsInRyaWdnZXJFbGVtZW50IiwiJCIsIm9uY2xpY2siLCJzZXRDbG9zZUhhbmRsZXIiLCJjbG9zZUhhbmRsZXIiLCJzaG93QXRFbGVtZW50IiwicHJvdG90eXBlIiwiaXNQb3B1cCIsImluaXRpYWxpemUiLCJwYXJlbnQiLCJ0aGlzIiwidG9kYXkiLCJ0aGlzWWVhciIsInRoaXNNb250aCIsInRoaXNEYXkiLCJtb250aCIsImRheU9mTW9udGgiLCJnZXREYXkiLCJnZXRFbGVtZW50c0J5U2VsZWN0b3IiLCJlYWNoIiwicm93IiwiaSIsInJvd0hhc0RheXMiLCJpbW1lZGlhdGVEZXNjZW5kYW50cyIsImNlbGwiLCJqIiwiZGF5T2ZXZWVrIiwiaXNDdXJyZW50TW9udGgiLCJjbGFzc05hbWUiLCJpbmRleE9mIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0YWJsZSIsInRoZWFkIiwiYXBwZW5kQ2hpbGQiLCJjb2xTcGFuIiwiX2RyYXdCdXR0b25DZWxsIiwidGJvZHkiLCJzZXRTdHlsZSIsInBvc2l0aW9uIiwiZGlzcGxheSIsInRleHQiLCJ1bnNlbGVjdGFibGUiLCJzaG93QXQiLCJ4IiwieSIsImxlZnQiLCJ0b3AiLCJwb3MiLCJQb3NpdGlvbiIsImN1bXVsYXRpdmVPZmZzZXQiLCJzdHIiLCJmb3JtYXQiLCJmaWVsZCIsInNldFJhbmdlIiwiREFZU19JTl9NT05USCIsIlNFQ09ORCIsIk1JTlVURSIsIkhPVVIiLCJEQVkiLCJXRUVLIiwiZm10IiwiZCIsImEiLCJzcGxpdCIsImIiLCJtYXRjaCIsImhyIiwibWluIiwibGVuZ3RoIiwicGFyc2VJbnQiLCJzdWJzdHIiLCJ0b0xvd2VyQ2FzZSIsInRlc3QiLCJpc05hTiIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInNlYXJjaCIsInQiLCJnZXREYXlPZlllYXIiLCJub3ciLCJ0aGVuIiwidGltZSIsIk1hdGgiLCJmbG9vciIsImdldFdlZWtOdW1iZXIiLCJEb1ciLCJtcyIsInZhbHVlT2YiLCJyb3VuZCIsInRtcCIsInduIiwidyIsInMiLCJwbSIsImlyIiwiZHkiLCJzZWMiLCJnZXRTZWNvbmRzIiwiZ2V0VGltZSIsImdzdWIiLCJfX21zaF9vbGRTZXRGdWxsWWVhciJdLCJtYXBwaW5ncyI6IkFBbUJBLEdBQUlBLFVBQVdDLE1BQU1DLFFBTXJCRixVQUFTRyxRQUFVLE1BRW5CSCxTQUFTSSxVQUFZLEdBQUlDLE9BQ3ZCLFNBQVUsU0FBVSxVQUFXLFlBQWEsV0FBWSxTQUFVLFdBQ2xFLFVBR0ZMLFNBQVNNLGdCQUFrQixHQUFJRCxPQUM3QixJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLEtBR3JDTCxTQUFTTyxZQUFjLEdBQUlGLE9BQ3pCLFVBQVcsV0FBWSxRQUFTLFFBQVMsTUFBTyxPQUFRLE9BQVEsU0FDaEUsWUFBYSxVQUFXLFdBQVksWUFHdENMLFNBQVNRLGtCQUFvQixHQUFJSCxPQUMvQixNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQ3RFLE9BR0ZMLFNBQVNTLHFCQUNUVCxTQUFTVSxzQkFDVFYsU0FBU1csVUFBc0IsRUFDL0JYLFNBQVNZLGVBQXNCLEVBQy9CWixTQUFTYSxjQUFzQixFQVMvQmIsU0FBU2MsZUFBaUIsU0FBU0MsR0FDakMsSUFBS0MsT0FBT0MsZUFDVixPQUFPLENBQ1QsS0FBSUMsUUFBUUMsYUFBYUMsTUFBTUMsUUFBUU4sR0FBUUMsT0FBT0MsZUFBZUssV0FHckUsTUFEQU4sUUFBT0MsZUFBZU0sbUJBQ2ZILE1BQU1JLEtBQUtULElBT3BCZixTQUFTeUIscUJBQXVCLFNBQVNWLEdBRXZDSyxNQUFNTSxRQUFRQyxTQUFVLFVB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QU1BLEVBQ25DRixFQUFFLE1BQVNHLEVBQUssSUFBU0EsRUFBSyxHQUFPLEtBQU9BLEVBQU8sSUFBTUEsRUFBT0EsRUFDaEVILEVBQUUsTUFBUTFCLEVBQ1YwQixFQUFFLE1BQVFFLEVBQ1ZGLEVBQUUsTUFBU2hKLEVBQUksRUFBTSxLQUFPLEVBQUVBLEdBQU8sRUFBRUEsRUFDdkNnSixFQUFFLE1BQVN6QixFQUFNLEdBQU8sSUFBTUEsRUFBT0EsRUFDckN5QixFQUFFLE1BQVEsS0FDVkEsRUFBRSxNQUFRQyxFQUFLLEtBQU8sS0FDdEJELEVBQUUsTUFBUUMsRUFBSyxLQUFPLEtBR3RCRCxFQUFFLE1BQVFWLEtBQUtDLE1BQU16RSxLQUFLd0YsVUFBWSxLQUN0Q04sRUFBRSxNQUFTSSxFQUFNLEdBQU8sSUFBTUEsRUFBT0EsRUFDckNKLEVBQUUsTUFBUSxLQUVWQSxFQUFFLE1BQVFBLEVBQUUsTUFBUUEsRUFBRSxNQUFTRixFQUFLLEdBQU8sSUFBTUEsRUFBTUEsRUFDdkRFLEVBQUUsTUFBUUQsRUFBSSxFQUNkQyxFQUFFLE1BQVFELEVBR1ZDLEVBQUUsT0FBUyxHQUFLaEQsR0FBRzBCLE9BQU8sRUFBRyxHQUM3QnNCLEVBQUUsTUFBUWhELEVBQ1ZnRCxFQUFFLE1BQVEsSUFFSDFDLEVBQUlpRCxLQUFLLEtBQU0sU0FBU2xDLEdBQVMsTUFBTzJCLEdBQUUzQixJQUFVQSxLQUc3RGxHLEtBQUt1QyxVQUFVOEYscUJBQXVCckksS0FBS3VDLFVBQVVqQyxZQUNyRE4sS0FBS3VDLFVBQVVqQyxZQUFjLFNBQVN1RSxHQUNwQyxHQUFJaUIsR0FBSSxHQUFJOUYsTUFBSzJDLEtBQ2pCbUQsR0FBRXVDLHFCQUFxQnhELEdBQ25CaUIsRUFBRTFGLFlBQWN1QyxLQUFLdkMsWUFDdkJ1QyxLQUFLeEQsUUFBUSxJQUNmd0QsS0FBSzBGLHFCQUFxQnhEIiwiZmlsZSI6InJlY29tbWVuZG9yZGVyL2NhbGVuZGFydmlldy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vXG4vLyBDYWxlbmRhclZpZXcgKGZvciBQcm90b3R5cGUpXG4vLyBjYWxlbmRhcnZpZXcub3JnXG4vL1xuLy8gTWFpbnRhaW5lZCBieSBKdXN0aW4gTWVjaGFtIDxqdXN0aW5AYXNwZWN0Lm5ldD5cbi8vXG4vLyBQb3J0aW9ucyBDb3B5cmlnaHQgMjAwMi0yMDA1IE1paGFpIEJhem9uXG4vL1xuLy8gVGhpcyBjYWxlbmRhciBpcyBiYXNlZCB2ZXJ5IGxvb3NlbHkgb24gdGhlIER5bmFyY2ggQ2FsZW5kYXIgaW4gdGhhdCBpdCB3YXNcbi8vIHVzZWQgYXMgYSBiYXNlLCBidXQgY29tcGxldGVseSBndXR0ZWQgYW5kIG1vcmUgb3IgbGVzcyByZXdyaXR0ZW4gaW4gcGxhY2Vcbi8vIHRvIHVzZSB0aGUgUHJvdG90eXBlIEphdmFTY3JpcHQgbGlicmFyeS5cbi8vXG4vLyBBcyBzdWNoLCBDYWxlbmRhclZpZXcgaXMgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWxcbi8vIFB1YmxpYyBMaWNlbnNlIChMR1BMKS4gTW9yZSBpbmZvcm1hdGlvbiBvbiB0aGUgRHluYXJjaCBDYWxlbmRhciBjYW4gYmVcbi8vIGZvdW5kIGF0OlxuLy9cbi8vICAgd3d3LmR5bmFyY2guY29tL3Byb2plY3RzL2NhbGVuZGFyXG4vL1xuXG52YXIgQ2FsZW5kYXIgPSBDbGFzcy5jcmVhdGUoKVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ29uc3RhbnRzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5DYWxlbmRhci5WRVJTSU9OID0gJzEuMidcblxuQ2FsZW5kYXIuREFZX05BTUVTID0gbmV3IEFycmF5KFxuICAnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknLFxuICAnU3VuZGF5J1xuKVxuXG5DYWxlbmRhci5TSE9SVF9EQVlfTkFNRVMgPSBuZXcgQXJyYXkoXG4gICdTJywgJ00nLCAnVCcsICdXJywgJ1QnLCAnRicsICdTJywgJ1MnXG4pXG5cbkNhbGVuZGFyLk1PTlRIX05BTUVTID0gbmV3IEFycmF5KFxuICAnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsXG4gICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlcidcbilcblxuQ2FsZW5kYXIuU0hPUlRfTU9OVEhfTkFNRVMgPSBuZXcgQXJyYXkoXG4gICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JyxcbiAgJ0RlYydcbilcblxuQ2FsZW5kYXIuTkFWX1BSRVZJT1VTX1lFQVIgID0gLTJcbkNhbGVuZGFyLk5BVl9QUkVWSU9VU19NT05USCA9IC0xXG5DYWxlbmRhci5OQVZfVE9EQVkgICAgICAgICAgPSAgMFxuQ2FsZW5kYXIuTkFWX05FWFRfTU9OVEggICAgID0gIDFcbkNhbGVuZGFyLk5BVl9ORVhUX1lFQVIgICAgICA9ICAyXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0aWMgTWV0aG9kc1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gVGhpcyBnZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgYSBtb3VzZSBidXR0b24gYW55d2hlcmUgaW4gdGhlXG4vLyBkb2N1bWVudCwgaWYgdGhlIGNhbGVuZGFyIGlzIHNob3duLiBJZiB0aGUgY2xpY2sgd2FzIG91dHNpZGUgdGhlIG9wZW5cbi8vIGNhbGVuZGFyIHRoaXMgZnVuY3Rpb24gY2xvc2VzIGl0LlxuQ2FsZW5kYXIuX2NoZWNrQ2FsZW5kYXIgPSBmdW5jdGlvbihldmVudCkge1xuICBpZiAoIXdpbmRvdy5fcG9wdXBDYWxlbmRhcilcbiAgICByZXR1cm4gZmFsc2VcbiAgaWYgKEVsZW1lbnQuZGVzY2VuZGFudE9mKEV2ZW50LmVsZW1lbnQoZXZlbnQpLCB3aW5kb3cuX3BvcHVwQ2FsZW5kYXIuY29udGFpbmVyKSlcbiAgICByZXR1cm5cbiAgd2luZG93Ll9wb3B1cENhbGVuZGFyLmNhbGxDbG9zZUhhbmRsZXIoKVxuICByZXR1cm4gRXZlbnQuc3RvcChldmVudClcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEV2ZW50IEhhbmRsZXJzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5DYWxlbmRhci5oYW5kbGVNb3VzZURvd25FdmVudCA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuICBFdmVudC5vYnNlcnZlKGRvY3VtZW50LCAnbW91c2V1cCcsIENhbGVuZGFyLmhhbmRsZU1vdXNlVXBFdmVudClcbiAgRXZlbnQuc3RvcChldmVudClcbn1cblxuLy8gWFhYIEkgYW0gbm90IGhhcHB5IHdpdGggaG93IGNsaWNrcyBvZiBkaWZmZXJlbnQgYWN0aW9ucyBhcmUgaGFuZGxlZC4gTmVlZCB0b1xuLy8gY2xlYW4gdGhpcyB1cCFcbkNhbGVuZGFyLmhhbmRsZU1vdXNlVXBFdmVudCA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuICB2YXIgZWwgICAgICAgID0gRXZlbnQuZWxlbWVudChldmVudClcbiAgdmFyIGNhbGVuZGFyICA9IGVsLmNhbGVuZGFyXG4gIHZhciBpc05ld0RhdGUgPSBmYWxzZVxuXG4gIC8vIElmIHRoZSBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWQgb24gZG9lcyBub3QgaGF2ZSBhbiBhc3NvY2lhdGVkIENhbGVuZGFyXG4gIC8vIG9iamVjdCwgcmV0dXJuIGFzIHdlIGhhdmUgbm90aGluZyB0byBkby5cbiAgaWYgKCFjYWxlbmRhcikgcmV0dXJuIGZhbHNlXG5cbiAgLy8gQ2xpY2tlZCBvbiBhIGRheVxuICBpZiAodHlwZW9mIGVsLm5hdkFjdGlvbiA9PSAndW5kZWZpbmVkJylcbiAge1xuICAgIGlmIChjYWxlbmRhci5jdXJyZW50RGF0ZUVsZW1lbnQpIHtcbiAgICAgIEVsZW1lbnQucmVtb3ZlQ2xhc3NOYW1lKGNhbGVuZGFyLmN1cnJlbnREYXRlRWxlbWVudCwgJ3NlbGVjdGVkJylcbiAgICAgIEVsZW1lbnQuYWRkQ2xhc3NOYW1lKGVsLCAnc2VsZWN0ZWQnKVxuICAgICAgY2FsZW5kYXIuc2hvdWxkQ2xvc2UgPSAoY2FsZW5kYXIuY3VycmVudERhdGVFbGVtZW50ID09IGVsKVxuICAgICAgaWYgKCFjYWxlbmRhci5zaG91bGRDbG9zZSkgY2FsZW5kYXIuY3VycmVudERhdGVFbGVtZW50ID0gZWxcbiAgICB9XG4gICAgY2FsZW5kYXIuZGF0ZS5zZXREYXRlT25seShlbC5kYXRlKVxuICAgIGlzTmV3RGF0ZSA9IHRydWVcbiAgICBjYWxlbmRhci5zaG91bGRDbG9zZSA9ICFlbC5oYXNDbGFzc05hbWUoJ290aGVyRGF5JylcbiAgICB2YXIgaXNPdGhlck1vbnRoICAgICA9ICFjYWxlbmRhci5zaG91bGRDbG9zZVxuICAgIGlmIChpc090aGVyTW9udGgpIGNhbGVuZGFyLnVwZGF0ZShjYWxlbmRhci5kYXRlKVxuICB9XG5cbiAgLy8gQ2xpY2tlZCBvbiBhbiBhY3Rpb24gYnV0dG9uXG4gIGVsc2VcbiAge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoY2FsZW5kYXIuZGF0ZSlcblxuICAgIGlmIChlbC5uYXZBY3Rpb24gPT0gQ2FsZW5kYXIuTkFWX1RPREFZKVxuICAgICAgZGF0ZS5zZXREYXRlT25seShuZXcgRGF0ZSgpKVxuXG4gICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICB2YXIgbW9uID0gZGF0ZS5nZXRNb250aCgpXG4gICAgZnVuY3Rpb24gc2V0TW9udGgobSkge1xuICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF0ZSgpXG4gICAgICB2YXIgbWF4ID0gZGF0ZS5nZXRNb250aERheXMobSlcbiAgICAgIGlmIChkYXkgPiBtYXgpIGRhdGUuc2V0RGF0ZShtYXgpXG4gICAgICBkYXRlLnNldE1vbnRoKG0pXG4gICAgfVxuICAgIHN3aXRjaCAoZWwubmF2QWN0aW9uKSB7XG5cbiAgICAgIC8vIFByZXZpb3VzIFllYXJcbiAgICAgIGNhc2UgQ2FsZW5kYXIuTkFWX1BSRVZJT1VTX1lFQVI6XG4gICAgICAgIGlmICh5ZWFyID4gY2FsZW5kYXIubWluWWVhcilcbiAgICAgICAgICBkYXRlLnNldEZ1bGxZZWFyKHllYXIgLSAxKVxuICAgICAgICBicmVha1xuXG4gICAgICAvLyBQcmV2aW91cyBNb250aFxuICAgICAgY2FzZSBDYWxlbmRhci5OQVZfUFJFVklPVVNfTU9OVEg6XG4gICAgICAgIGlmIChtb24gPiAwKSB7XG4gICAgICAgICAgc2V0TW9udGgobW9uIC0gMSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5ZWFyLS0gPiBjYWxlbmRhci5taW5ZZWFyKSB7XG4gICAgICAgICAgZGF0ZS5zZXRGdWxsWWVhcih5ZWFyKVxuICAgICAgICAgIHNldE1vbnRoKDExKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIC8vIFRvZGF5XG4gICAgICBjYXNlIENhbGVuZGFyLk5BVl9UT0RBWTpcbiAgICAgICAgYnJlYWtcblxuICAgICAgLy8gTmV4dCBNb250aFxuICAgICAgY2FzZSBDYWxlbmRhci5OQVZfTkVYVF9NT05USDpcbiAgICAgICAgaWYgKG1vbiA8IDExKSB7XG4gICAgICAgICAgc2V0TW9udGgobW9uICsgMSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5ZWFyIDwgY2FsZW5kYXIubWF4WWVhcikge1xuICAgICAgICAgIGRhdGUuc2V0RnVsbFllYXIoeWVhciArIDEpXG4gICAgICAgICAgc2V0TW9udGgoMClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICAvLyBOZXh0IFllYXJcbiAgICAgIGNhc2UgQ2FsZW5kYXIuTkFWX05FWFRfWUVBUjpcbiAgICAgICAgaWYgKHllYXIgPCBjYWxlbmRhci5tYXhZZWFyKVxuICAgICAgICAgIGRhdGUuc2V0RnVsbFllYXIoeWVhciArIDEpXG4gICAgICAgIGJyZWFrXG5cbiAgICB9XG5cbiAgICBpZiAoIWRhdGUuZXF1YWxzVG8oY2FsZW5kYXIuZGF0ZSkpIHtcbiAgICAgIGNhbGVuZGFyLnNldERhdGUoZGF0ZSlcbiAgICAgIGlzTmV3RGF0ZSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGVsLm5hdkFjdGlvbiA9PSAwKSB7XG4gICAgICBpc05ld0RhdGUgPSAoY2FsZW5kYXIuc2hvdWxkQ2xvc2UgPSB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGlmIChpc05ld0RhdGUpIGV2ZW50ICYmIGNhbGVuZGFyLmNhbGxTZWxlY3RIYW5kbGVyKClcbiAgaWYgKGNhbGVuZGFyLnNob3VsZENsb3NlKSBldmVudCAmJiBjYWxlbmRhci5jYWxsQ2xvc2VIYW5kbGVyKClcblxuICBFdmVudC5zdG9wT2JzZXJ2aW5nKGRvY3VtZW50LCAnbW91c2V1cCcsIENhbGVuZGFyLmhhbmRsZU1vdXNlVXBFdmVudClcblxuICByZXR1cm4gRXZlbnQuc3RvcChldmVudClcbn1cblxuQ2FsZW5kYXIuZGVmYXVsdFNlbGVjdEhhbmRsZXIgPSBmdW5jdGlvbihjYWxlbmRhcilcbntcbiAgaWYgKCFjYWxlbmRhci5kYXRlRmllbGQpIHJldHVybiBmYWxzZVxuXG4gIC8vIFVwZGF0ZSBkYXRlRmllbGQgdmFsdWVcbiAgaWYgKGNhbGVuZGFyLmRhdGVGaWVsZC50YWdOYW1lID09ICdESVYnKVxuICAgIEVsZW1lbnQudXBkYXRlKGNhbGVuZGFyLmRhdGVGaWVsZCwgY2FsZW5kYXIuZGF0ZS5wcmludChjYWxlbmRhci5kYXRlRm9ybWF0KSlcbiAgZWxzZSBpZiAoY2FsZW5kYXIuZGF0ZUZpZWxkLnRhZ05hbWUgPT0gJ0lOUFVUJykge1xuICAgIGNhbGVuZGFyLmRhdGVGaWVsZC52YWx1ZSA9IGNhbGVuZGFyLmRhdGUucHJpbnQoY2FsZW5kYXIuZGF0ZUZvcm1hdCkgfVxuXG4gIC8vIFRyaWdnZXIgdGhlIG9uY2hhbmdlIGNhbGxiYWNrIG9uIHRoZSBkYXRlRmllbGQsIGlmIG9uZSBoYXMgYmVlbiBkZWZpbmVkXG4gIGlmICh0eXBlb2YgY2FsZW5kYXIuZGF0ZUZpZWxkLm9uY2hhbmdlID09ICdmdW5jdGlvbicpXG4gICAgY2FsZW5kYXIuZGF0ZUZpZWxkLm9uY2hhbmdlKClcblxuICAvLyBDYWxsIHRoZSBjbG9zZSBoYW5kbGVyLCBpZiBuZWNlc3NhcnlcbiAgaWYgKGNhbGVuZGFyLnNob3VsZENsb3NlKSBjYWxlbmRhci5jYWxsQ2xvc2VIYW5kbGVyKClcbn1cblxuQ2FsZW5kYXIuZGVmYXVsdENsb3NlSGFuZGxlciA9IGZ1bmN0aW9uKGNhbGVuZGFyKVxue1xuICBjYWxlbmRhci5oaWRlKClcbn1cblxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ2FsZW5kYXIgU2V0dXBcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkNhbGVuZGFyLnNldHVwID0gZnVuY3Rpb24ocGFyYW1zKVxue1xuXG4gIGZ1bmN0aW9uIHBhcmFtX2RlZmF1bHQobmFtZSwgZGVmKSB7XG4gICAgaWYgKCFwYXJhbXNbbmFtZV0pIHBhcmFtc1tuYW1lXSA9IGRlZlxuICB9XG5cbiAgcGFyYW1fZGVmYXVsdCgnZGF0ZUZpZWxkJywgbnVsbClcbiAgcGFyYW1fZGVmYXVsdCgndHJpZ2dlckVsZW1lbnQnLCBudWxsKVxuICBwYXJhbV9kZWZhdWx0KCdwYXJlbnRFbGVtZW50JywgbnVsbClcbiAgcGFyYW1fZGVmYXVsdCgnc2VsZWN0SGFuZGxlcicsICBudWxsKVxuICBwYXJhbV9kZWZhdWx0KCdjbG9zZUhhbmRsZXInLCBudWxsKVxuXG4gIC8vIEluLVBhZ2UgQ2FsZW5kYXJcbiAgaWYgKHBhcmFtcy5wYXJlbnRFbGVtZW50KVxuICB7XG4gICAgdmFyIGNhbGVuZGFyID0gbmV3IENhbGVuZGFyKHBhcmFtcy5wYXJlbnRFbGVtZW50KVxuICAgIGNhbGVuZGFyLnNldFNlbGVjdEhhbmRsZXIocGFyYW1zLnNlbGVjdEhhbmRsZXIgfHwgQ2FsZW5kYXIuZGVmYXVsdFNlbGVjdEhhbmRsZXIpXG4gICAgaWYgKHBhcmFtcy5kYXRlRm9ybWF0KVxuICAgICAgY2FsZW5kYXIuc2V0RGF0ZUZvcm1hdChwYXJhbXMuZGF0ZUZvcm1hdClcbiAgICBpZiAocGFyYW1zLmRhdGVGaWVsZCkge1xuICAgICAgY2FsZW5kYXIuc2V0RGF0ZUZpZWxkKHBhcmFtcy5kYXRlRmllbGQpXG4gICAgICBjYWxlbmRhci5wYXJzZURhdGUoY2FsZW5kYXIuZGF0ZUZpZWxkLmlubmVySFRNTCB8fCBjYWxlbmRhci5kYXRlRmllbGQudmFsdWUpXG4gICAgfVxuICAgIGNhbGVuZGFyLnNob3coKVxuICAgIHJldHVybiBjYWxlbmRhclxuICB9XG5cbiAgLy8gUG9wdXAgQ2FsZW5kYXJzXG4gIC8vXG4gIC8vIFhYWCBUaGVyZSBpcyBzaWduaWZpY2FudCBvcHRpbWl6YXRpb24gdG8gYmUgaGFkIGhlcmUgYnkgY3JlYXRpbmcgdGhlXG4gIC8vIGNhbGVuZGFyIGFuZCBzdG9yaW5nIGl0IG9uIHRoZSBwYWdlLCBidXQgdGhlbiB5b3Ugd2lsbCBoYXZlIGlzc3VlcyB3aXRoXG4gIC8vIG11bHRpcGxlIGNhbGVuZGFycyBvbiB0aGUgc2FtZSBwYWdlLlxuICBlbHNlXG4gIHtcbiAgICB2YXIgdHJpZ2dlckVsZW1lbnQgPSAkKHBhcmFtcy50cmlnZ2VyRWxlbWVudCB8fCBwYXJhbXMuZGF0ZUZpZWxkKVxuICAgIHRyaWdnZXJFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjYWxlbmRhciA9IG5ldyBDYWxlbmRhcigpXG4gICAgICBjYWxlbmRhci5zZXRTZWxlY3RIYW5kbGVyKHBhcmFtcy5zZWxlY3RIYW5kbGVyIHx8IENhbGVuZGFyLmRlZmF1bHRTZWxlY3RIYW5kbGVyKVxuICAgICAgY2FsZW5kYXIuc2V0Q2xvc2VIYW5kbGVyKHBhcmFtcy5jbG9zZUhhbmRsZXIgfHwgQ2FsZW5kYXIuZGVmYXVsdENsb3NlSGFuZGxlcilcbiAgICAgIGlmIChwYXJhbXMuZGF0ZUZvcm1hdClcbiAgICAgICAgY2FsZW5kYXIuc2V0RGF0ZUZvcm1hdChwYXJhbXMuZGF0ZUZvcm1hdClcbiAgICAgIGlmIChwYXJhbXMuZGF0ZUZpZWxkKSB7XG4gICAgICAgIGNhbGVuZGFyLnNldERhdGVGaWVsZChwYXJhbXMuZGF0ZUZpZWxkKVxuICAgICAgICBjYWxlbmRhci5wYXJzZURhdGUoY2FsZW5kYXIuZGF0ZUZpZWxkLmlubmVySFRNTCB8fCBjYWxlbmRhci5kYXRlRmllbGQudmFsdWUpXG4gICAgICB9XG4gICAgICBpZiAocGFyYW1zLmRhdGVGaWVsZClcbiAgICAgICAgRGF0ZS5wYXJzZURhdGUoY2FsZW5kYXIuZGF0ZUZpZWxkLnZhbHVlIHx8IGNhbGVuZGFyLmRhdGVGaWVsZC5pbm5lckhUTUwsIGNhbGVuZGFyLmRhdGVGb3JtYXQpXG4gICAgICBjYWxlbmRhci5zaG93QXRFbGVtZW50KHRyaWdnZXJFbGVtZW50KVxuICAgICAgcmV0dXJuIGNhbGVuZGFyXG4gICAgfVxuICB9XG5cbn1cblxuXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDYWxlbmRhciBJbnN0YW5jZVxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQ2FsZW5kYXIucHJvdG90eXBlID0ge1xuXG4gIC8vIFRoZSBIVE1MIENvbnRhaW5lciBFbGVtZW50XG4gIGNvbnRhaW5lcjogbnVsbCxcblxuICAvLyBDYWxsYmFja3NcbiAgc2VsZWN0SGFuZGxlcjogbnVsbCxcbiAgY2xvc2VIYW5kbGVyOiBudWxsLFxuXG4gIC8vIENvbmZpZ3VyYXRpb25cbiAgbWluWWVhcjogMTkwMCxcbiAgbWF4WWVhcjogMjEwMCxcbiAgZGF0ZUZvcm1hdDogJyVZLSVtLSVkJyxcblxuICAvLyBEYXRlc1xuICBkYXRlOiBuZXcgRGF0ZSgpLFxuICBjdXJyZW50RGF0ZUVsZW1lbnQ6IG51bGwsXG5cbiAgLy8gU3RhdHVzXG4gIHNob3VsZENsb3NlOiBmYWxzZSxcbiAgaXNQb3B1cDogdHJ1ZSxcblxuICBkYXRlRmllbGQ6IG51bGwsXG5cblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gSW5pdGlhbGl6ZVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBpbml0aWFsaXplOiBmdW5jdGlvbihwYXJlbnQpXG4gIHtcbiAgICBpZiAocGFyZW50KVxuICAgICAgdGhpcy5jcmVhdGUoJChwYXJlbnQpKVxuICAgIGVsc2VcbiAgICAgIHRoaXMuY3JlYXRlKClcbiAgfSxcblxuXG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFVwZGF0ZSAvIChSZSlpbml0aWFsaXplIENhbGVuZGFyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHVwZGF0ZTogZnVuY3Rpb24oZGF0ZSlcbiAge1xuICAgIHZhciBjYWxlbmRhciAgID0gdGhpc1xuICAgIHZhciB0b2RheSAgICAgID0gbmV3IERhdGUoKVxuICAgIHZhciB0aGlzWWVhciAgID0gdG9kYXkuZ2V0RnVsbFllYXIoKVxuICAgIHZhciB0aGlzTW9udGggID0gdG9kYXkuZ2V0TW9udGgoKVxuICAgIHZhciB0aGlzRGF5ICAgID0gdG9kYXkuZ2V0RGF0ZSgpXG4gICAgdmFyIG1vbnRoICAgICAgPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgdmFyIGRheU9mTW9udGggPSBkYXRlLmdldERhdGUoKTtcblxuICAgIC8vIEVuc3VyZSBkYXRlIGlzIHdpdGhpbiB0aGUgZGVmaW5lZCByYW5nZVxuICAgIGlmIChkYXRlLmdldEZ1bGxZZWFyKCkgPCB0aGlzLm1pblllYXIpXG4gICAgICBkYXRlLnNldEZ1bGxZZWFyKHRoaXMubWluWWVhcilcbiAgICBlbHNlIGlmIChkYXRlLmdldEZ1bGxZZWFyKCkgPiB0aGlzLm1heFllYXIpXG4gICAgICBkYXRlLnNldEZ1bGxZZWFyKHRoaXMubWF4WWVhcilcblxuICAgIHRoaXMuZGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIGZpcnN0IGRheSB0byBkaXNwbGF5IChpbmNsdWRpbmcgdGhlIHByZXZpb3VzIG1vbnRoKVxuICAgIGRhdGUuc2V0RGF0ZSgxKVxuICAgIGRhdGUuc2V0RGF0ZSgtKGRhdGUuZ2V0RGF5KCkpICsgMSlcblxuICAgIC8vIEZpbGwgaW4gdGhlIGRheXMgb2YgdGhlIG1vbnRoXG4gICAgRWxlbWVudC5nZXRFbGVtZW50c0J5U2VsZWN0b3IodGhpcy5jb250YWluZXIsICd0Ym9keSB0cicpLmVhY2goXG4gICAgICBmdW5jdGlvbihyb3csIGkpIHtcbiAgICAgICAgdmFyIHJvd0hhc0RheXMgPSBmYWxzZVxuICAgICAgICByb3cuaW1tZWRpYXRlRGVzY2VuZGFudHMoKS5lYWNoKFxuICAgICAgICAgIGZ1bmN0aW9uKGNlbGwsIGopIHtcbiAgICAgICAgICAgIHZhciBkYXkgICAgICAgICAgICA9IGRhdGUuZ2V0RGF0ZSgpXG4gICAgICAgICAgICB2YXIgZGF5T2ZXZWVrICAgICAgPSBkYXRlLmdldERheSgpXG4gICAgICAgICAgICB2YXIgaXNDdXJyZW50TW9udGggPSAoZGF0ZS5nZXRNb250aCgpID09IG1vbnRoKVxuXG4gICAgICAgICAgICAvLyBSZXNldCBjbGFzc2VzIG9uIHRoZSBjZWxsXG4gICAgICAgICAgICBjZWxsLmNsYXNzTmFtZSA9ICcnXG4gICAgICAgICAgICBjZWxsLmRhdGUgPSBuZXcgRGF0ZShkYXRlKVxuICAgICAgICAgICAgY2VsbC51cGRhdGUoZGF5KVxuXG4gICAgICAgICAgICAvLyBBY2NvdW50IGZvciBkYXlzIG9mIHRoZSBtb250aCBvdGhlciB0aGFuIHRoZSBjdXJyZW50IG1vbnRoXG4gICAgICAgICAgICBpZiAoIWlzQ3VycmVudE1vbnRoKVxuICAgICAgICAgICAgICBjZWxsLmFkZENsYXNzTmFtZSgnb3RoZXJEYXknKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICByb3dIYXNEYXlzID0gdHJ1ZVxuXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGN1cnJlbnQgZGF5IGlzIHNlbGVjdGVkXG4gICAgICAgICAgICBpZiAoaXNDdXJyZW50TW9udGggJiYgZGF5ID09IGRheU9mTW9udGgpIHtcbiAgICAgICAgICAgICAgY2VsbC5hZGRDbGFzc05hbWUoJ3NlbGVjdGVkJylcbiAgICAgICAgICAgICAgY2FsZW5kYXIuY3VycmVudERhdGVFbGVtZW50ID0gY2VsbFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUb2RheVxuICAgICAgICAgICAgaWYgKGRhdGUuZ2V0RnVsbFllYXIoKSA9PSB0aGlzWWVhciAmJiBkYXRlLmdldE1vbnRoKCkgPT0gdGhpc01vbnRoICYmIGRheSA9PSB0aGlzRGF5KVxuICAgICAgICAgICAgICBjZWxsLmFkZENsYXNzTmFtZSgndG9kYXknKVxuXG4gICAgICAgICAgICAvLyBXZWVrZW5kXG4gICAgICAgICAgICBpZiAoWzAsIDZdLmluZGV4T2YoZGF5T2ZXZWVrKSAhPSAtMSlcbiAgICAgICAgICAgICAgY2VsbC5hZGRDbGFzc05hbWUoJ3dlZWtlbmQnKVxuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRhdGUgdG8gdG9tbW9ycm93XG4gICAgICAgICAgICBkYXRlLnNldERhdGUoZGF5ICsgMSlcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgLy8gSGlkZSB0aGUgZXh0cmEgcm93IGlmIGl0IGNvbnRhaW5zIG9ubHkgZGF5cyBmcm9tIGFub3RoZXIgbW9udGhcbiAgICAgICAgIXJvd0hhc0RheXMgPyByb3cuaGlkZSgpIDogcm93LnNob3coKVxuICAgICAgfVxuICAgIClcblxuICAgIHRoaXMuY29udGFpbmVyLmdldEVsZW1lbnRzQnlTZWxlY3RvcigndGQudGl0bGUnKVswXS51cGRhdGUoXG4gICAgICBDYWxlbmRhci5NT05USF9OQU1FU1ttb250aF0gKyAnICcgKyB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKVxuICAgIClcbiAgfSxcblxuXG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENyZWF0ZS9EcmF3IHRoZSBDYWxlbmRhciBIVE1MIEVsZW1lbnRzXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIGNyZWF0ZTogZnVuY3Rpb24ocGFyZW50KVxuICB7XG5cbiAgICAvLyBJZiBubyBwYXJlbnQgd2FzIHNwZWNpZmllZCwgYXNzdW1lIHRoYXQgd2UgYXJlIGNyZWF0aW5nIGEgcG9wdXAgY2FsZW5kYXIuXG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgIHBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF1cbiAgICAgIHRoaXMuaXNQb3B1cCA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pc1BvcHVwID0gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBDYWxlbmRhciBUYWJsZVxuICAgIHZhciB0YWJsZSA9IG5ldyBFbGVtZW50KCd0YWJsZScpXG5cbiAgICAvLyBDYWxlbmRhciBIZWFkZXJcbiAgICB2YXIgdGhlYWQgPSBuZXcgRWxlbWVudCgndGhlYWQnKVxuICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoZWFkKVxuXG4gICAgLy8gVGl0bGUgUGxhY2Vob2xkZXJcbiAgICB2YXIgcm93ICA9IG5ldyBFbGVtZW50KCd0cicpXG4gICAgdmFyIGNlbGwgPSBuZXcgRWxlbWVudCgndGQnLCB7IGNvbFNwYW46IDcgfSApXG4gICAgY2VsbC5hZGRDbGFzc05hbWUoJ3RpdGxlJylcbiAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbClcbiAgICB0aGVhZC5hcHBlbmRDaGlsZChyb3cpXG5cbiAgICAvLyBDYWxlbmRhciBOYXZpZ2F0aW9uXG4gICAgcm93ID0gbmV3IEVsZW1lbnQoJ3RyJylcbiAgICB0aGlzLl9kcmF3QnV0dG9uQ2VsbChyb3csICcmI3gwMGFiOycsIDEsIENhbGVuZGFyLk5BVl9QUkVWSU9VU19ZRUFSKVxuICAgIHRoaXMuX2RyYXdCdXR0b25DZWxsKHJvdywgJyYjeDIwMzk7JywgMSwgQ2FsZW5kYXIuTkFWX1BSRVZJT1VTX01PTlRIKVxuICAgIHRoaXMuX2RyYXdCdXR0b25DZWxsKHJvdywgJ1RvZGF5JywgICAgMywgQ2FsZW5kYXIuTkFWX1RPREFZKVxuICAgIHRoaXMuX2RyYXdCdXR0b25DZWxsKHJvdywgJyYjeDIwM2E7JywgMSwgQ2FsZW5kYXIuTkFWX05FWFRfTU9OVEgpXG4gICAgdGhpcy5fZHJhd0J1dHRvbkNlbGwocm93LCAnJiN4MDBiYjsnLCAxLCBDYWxlbmRhci5OQVZfTkVYVF9ZRUFSKVxuICAgIHRoZWFkLmFwcGVuZENoaWxkKHJvdylcblxuICAgIC8vIERheSBOYW1lc1xuICAgIHJvdyA9IG5ldyBFbGVtZW50KCd0cicpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA3OyArK2kpIHtcbiAgICAgIGNlbGwgPSBuZXcgRWxlbWVudCgndGgnKS51cGRhdGUoQ2FsZW5kYXIuU0hPUlRfREFZX05BTUVTW2ldKVxuICAgICAgaWYgKGkgPT0gMCB8fCBpID09IDYpXG4gICAgICAgIGNlbGwuYWRkQ2xhc3NOYW1lKCd3ZWVrZW5kJylcbiAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKVxuICAgIH1cbiAgICB0aGVhZC5hcHBlbmRDaGlsZChyb3cpXG5cbiAgICAvLyBDYWxlbmRhciBEYXlzXG4gICAgdmFyIHRib2R5ID0gdGFibGUuYXBwZW5kQ2hpbGQobmV3IEVsZW1lbnQoJ3Rib2R5JykpXG4gICAgZm9yIChpID0gNjsgaSA+IDA7IC0taSkge1xuICAgICAgcm93ID0gdGJvZHkuYXBwZW5kQ2hpbGQobmV3IEVsZW1lbnQoJ3RyJykpXG4gICAgICByb3cuYWRkQ2xhc3NOYW1lKCdkYXlzJylcbiAgICAgIGZvciAodmFyIGogPSA3OyBqID4gMDsgLS1qKSB7XG4gICAgICAgIGNlbGwgPSByb3cuYXBwZW5kQ2hpbGQobmV3IEVsZW1lbnQoJ3RkJykpXG4gICAgICAgIGNlbGwuY2FsZW5kYXIgPSB0aGlzXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsZW5kYXIgQ29udGFpbmVyIChkaXYpXG4gICAgdGhpcy5jb250YWluZXIgPSBuZXcgRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzc05hbWUoJ2NhbGVuZGFyJylcbiAgICBpZiAodGhpcy5pc1BvcHVwKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zZXRTdHlsZSh7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBkaXNwbGF5OiAnbm9uZScgfSlcbiAgICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzTmFtZSgncG9wdXAnKVxuICAgIH1cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZSlcblxuICAgIC8vIEluaXRpYWxpemUgQ2FsZW5kYXJcbiAgICB0aGlzLnVwZGF0ZSh0aGlzLmRhdGUpXG5cbiAgICAvLyBPYnNlcnZlIHRoZSBjb250YWluZXIgZm9yIG1vdXNlZG93biBldmVudHNcbiAgICBFdmVudC5vYnNlcnZlKHRoaXMuY29udGFpbmVyLCAnbW91c2Vkb3duJywgQ2FsZW5kYXIuaGFuZGxlTW91c2VEb3duRXZlbnQpXG5cbiAgICAvLyBBcHBlbmQgdG8gcGFyZW50IGVsZW1lbnRcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpXG5cbiAgfSxcblxuICBfZHJhd0J1dHRvbkNlbGw6IGZ1bmN0aW9uKHBhcmVudCwgdGV4dCwgY29sU3BhbiwgbmF2QWN0aW9uKVxuICB7XG4gICAgdmFyIGNlbGwgICAgICAgICAgPSBuZXcgRWxlbWVudCgndGQnKVxuICAgIGlmIChjb2xTcGFuID4gMSkgY2VsbC5jb2xTcGFuID0gY29sU3BhblxuICAgIGNlbGwuY2xhc3NOYW1lICAgID0gJ2J1dHRvbidcbiAgICBjZWxsLmNhbGVuZGFyICAgICA9IHRoaXNcbiAgICBjZWxsLm5hdkFjdGlvbiAgICA9IG5hdkFjdGlvblxuICAgIGNlbGwuaW5uZXJIVE1MICAgID0gdGV4dFxuICAgIGNlbGwudW5zZWxlY3RhYmxlID0gJ29uJyAvLyBJRVxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChjZWxsKVxuICAgIHJldHVybiBjZWxsXG4gIH0sXG5cblxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENhbGxiYWNrc1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIENhbGxzIHRoZSBTZWxlY3QgSGFuZGxlciAoaWYgZGVmaW5lZClcbiAgY2FsbFNlbGVjdEhhbmRsZXI6IGZ1bmN0aW9uKClcbiAge1xuICAgIGlmICh0aGlzLnNlbGVjdEhhbmRsZXIpXG4gICAgICB0aGlzLnNlbGVjdEhhbmRsZXIodGhpcywgdGhpcy5kYXRlLnByaW50KHRoaXMuZGF0ZUZvcm1hdCkpXG4gIH0sXG5cbiAgLy8gQ2FsbHMgdGhlIENsb3NlIEhhbmRsZXIgKGlmIGRlZmluZWQpXG4gIGNhbGxDbG9zZUhhbmRsZXI6IGZ1bmN0aW9uKClcbiAge1xuICAgIGlmICh0aGlzLmNsb3NlSGFuZGxlcilcbiAgICAgIHRoaXMuY2xvc2VIYW5kbGVyKHRoaXMpXG4gIH0sXG5cblxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENhbGVuZGFyIERpc3BsYXkgRnVuY3Rpb25zXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gU2hvd3MgdGhlIENhbGVuZGFyXG4gIHNob3c6IGZ1bmN0aW9uKClcbiAge1xuICAgIHRoaXMuY29udGFpbmVyLnNob3coKVxuICAgIGlmICh0aGlzLmlzUG9wdXApIHtcbiAgICAgIHdpbmRvdy5fcG9wdXBDYWxlbmRhciA9IHRoaXNcbiAgICAgIEV2ZW50Lm9ic2VydmUoZG9jdW1lbnQsICdtb3VzZWRvd24nLCBDYWxlbmRhci5fY2hlY2tDYWxlbmRhcilcbiAgICB9XG4gIH0sXG5cbiAgLy8gU2hvd3MgdGhlIGNhbGVuZGFyIGF0IHRoZSBnaXZlbiBhYnNvbHV0ZSBwb3NpdGlvblxuICBzaG93QXQ6IGZ1bmN0aW9uICh4LCB5KVxuICB7XG4gICAgdGhpcy5jb250YWluZXIuc2V0U3R5bGUoeyBsZWZ0OiB4ICsgJ3B4JywgdG9wOiB5ICsgJ3B4JyB9KVxuICAgIHRoaXMuc2hvdygpXG4gIH0sXG5cbiAgLy8gU2hvd3MgdGhlIENhbGVuZGFyIGF0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudFxuICBzaG93QXRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50KVxuICB7XG4gICAgdmFyIHBvcyA9IFBvc2l0aW9uLmN1bXVsYXRpdmVPZmZzZXQoZWxlbWVudClcbiAgICB0aGlzLnNob3dBdChwb3NbMF0sIHBvc1sxXSlcbiAgfSxcblxuICAvLyBIaWRlcyB0aGUgQ2FsZW5kYXJcbiAgaGlkZTogZnVuY3Rpb24oKVxuICB7XG4gICAgaWYgKHRoaXMuaXNQb3B1cClcbiAgICAgIEV2ZW50LnN0b3BPYnNlcnZpbmcoZG9jdW1lbnQsICdtb3VzZWRvd24nLCBDYWxlbmRhci5fY2hlY2tDYWxlbmRhcilcbiAgICB0aGlzLmNvbnRhaW5lci5oaWRlKClcbiAgfSxcblxuXG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gTWlzY2VsbGFuZW91c1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFRyaWVzIHRvIGlkZW50aWZ5IHRoZSBkYXRlIHJlcHJlc2VudGVkIGluIGEgc3RyaW5nLiAgSWYgc3VjY2Vzc2Z1bCBpdCBhbHNvXG4gIC8vIGNhbGxzIHRoaXMuc2V0RGF0ZSB3aGljaCBtb3ZlcyB0aGUgY2FsZW5kYXIgdG8gdGhlIGdpdmVuIGRhdGUuXG4gIHBhcnNlRGF0ZTogZnVuY3Rpb24oc3RyLCBmb3JtYXQpXG4gIHtcbiAgICBpZiAoIWZvcm1hdClcbiAgICAgIGZvcm1hdCA9IHRoaXMuZGF0ZUZvcm1hdFxuICAgIHRoaXMuc2V0RGF0ZShEYXRlLnBhcnNlRGF0ZShzdHIsIGZvcm1hdCkpXG4gIH0sXG5cblxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEdldHRlcnMvU2V0dGVyc1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHNldFNlbGVjdEhhbmRsZXI6IGZ1bmN0aW9uKHNlbGVjdEhhbmRsZXIpXG4gIHtcbiAgICB0aGlzLnNlbGVjdEhhbmRsZXIgPSBzZWxlY3RIYW5kbGVyXG4gIH0sXG5cbiAgc2V0Q2xvc2VIYW5kbGVyOiBmdW5jdGlvbihjbG9zZUhhbmRsZXIpXG4gIHtcbiAgICB0aGlzLmNsb3NlSGFuZGxlciA9IGNsb3NlSGFuZGxlclxuICB9LFxuXG4gIHNldERhdGU6IGZ1bmN0aW9uKGRhdGUpXG4gIHtcbiAgICBpZiAoIWRhdGUuZXF1YWxzVG8odGhpcy5kYXRlKSlcbiAgICAgIHRoaXMudXBkYXRlKGRhdGUpXG4gIH0sXG5cbiAgc2V0RGF0ZUZvcm1hdDogZnVuY3Rpb24oZm9ybWF0KVxuICB7XG4gICAgdGhpcy5kYXRlRm9ybWF0ID0gZm9ybWF0XG4gIH0sXG5cbiAgc2V0RGF0ZUZpZWxkOiBmdW5jdGlvbihmaWVsZClcbiAge1xuICAgIHRoaXMuZGF0ZUZpZWxkID0gJChmaWVsZClcbiAgfSxcblxuICBzZXRSYW5nZTogZnVuY3Rpb24obWluWWVhciwgbWF4WWVhcilcbiAge1xuICAgIHRoaXMubWluWWVhciA9IG1pblllYXJcbiAgICB0aGlzLm1heFllYXIgPSBtYXhZZWFyXG4gIH1cblxufVxuXG4vLyBnbG9iYWwgb2JqZWN0IHRoYXQgcmVtZW1iZXJzIHRoZSBjYWxlbmRhclxud2luZG93Ll9wb3B1cENhbGVuZGFyID0gbnVsbFxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vL1xuLy8gRGF0ZSBPYmplY3QgUGF0Y2hlc1xuLy9cbi8vIFRoaXMgaXMgcHJldHR5IG11Y2ggdW50b3VjaGVkIGZyb20gdGhlIG9yaWdpbmFsLiBJIHJlYWxseSB3b3VsZCBsaWtlIHRvIGdldFxuLy8gcmlkIG9mIHRoZXNlIHBhdGNoZXMgaWYgYXQgYWxsIHBvc3NpYmxlIGFuZCBmaW5kIGEgY2xlYW5lciB3YXkgb2Zcbi8vIGFjY29tcGxpc2hpbmcgdGhlIHNhbWUgdGhpbmdzLiBJdCdzIGEgc2hhbWUgUHJvdG90eXBlIGRvZXNuJ3QgZXh0ZW5kIERhdGUgYXRcbi8vIGFsbC5cbi8vXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5EYXRlLkRBWVNfSU5fTU9OVEggPSBuZXcgQXJyYXkoMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMSlcbkRhdGUuU0VDT05EICAgICAgICA9IDEwMDAgLyogbWlsbGlzZWNvbmRzICovXG5EYXRlLk1JTlVURSAgICAgICAgPSA2MCAqIERhdGUuU0VDT05EXG5EYXRlLkhPVVIgICAgICAgICAgPSA2MCAqIERhdGUuTUlOVVRFXG5EYXRlLkRBWSAgICAgICAgICAgPSAyNCAqIERhdGUuSE9VUlxuRGF0ZS5XRUVLICAgICAgICAgID0gIDcgKiBEYXRlLkRBWVxuXG4vLyBQYXJzZXMgRGF0ZVxuRGF0ZS5wYXJzZURhdGUgPSBmdW5jdGlvbihzdHIsIGZtdCkge1xuICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICB2YXIgeSAgICAgPSAwO1xuICB2YXIgbSAgICAgPSAtMTtcbiAgdmFyIGQgICAgID0gMDtcbiAgdmFyIGEgICAgID0gc3RyLnNwbGl0KC9cXFcrLyk7XG4gIHZhciBiICAgICA9IGZtdC5tYXRjaCgvJS4vZyk7XG4gIHZhciBpICAgICA9IDAsIGogPSAwO1xuICB2YXIgaHIgICAgPSAwO1xuICB2YXIgbWluICAgPSAwO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCFhW2ldKSBjb250aW51ZTtcbiAgICBzd2l0Y2ggKGJbaV0pIHtcbiAgICAgIGNhc2UgXCIlZFwiOlxuICAgICAgY2FzZSBcIiVlXCI6XG4gICAgICAgIGQgPSBwYXJzZUludChhW2ldLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIiVtXCI6XG4gICAgICAgIG0gPSBwYXJzZUludChhW2ldLCAxMCkgLSAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIlWVwiOlxuICAgICAgY2FzZSBcIiV5XCI6XG4gICAgICAgIHkgPSBwYXJzZUludChhW2ldLCAxMCk7XG4gICAgICAgICh5IDwgMTAwKSAmJiAoeSArPSAoeSA+IDI5KSA/IDE5MDAgOiAyMDAwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiJWJcIjpcbiAgICAgIGNhc2UgXCIlQlwiOlxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgMTI7ICsraikge1xuICAgICAgICAgIGlmIChDYWxlbmRhci5NT05USF9OQU1FU1tqXS5zdWJzdHIoMCwgYVtpXS5sZW5ndGgpLnRvTG93ZXJDYXNlKCkgPT0gYVtpXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBtID0gajtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIlSFwiOlxuICAgICAgY2FzZSBcIiVJXCI6XG4gICAgICBjYXNlIFwiJWtcIjpcbiAgICAgIGNhc2UgXCIlbFwiOlxuICAgICAgICBociA9IHBhcnNlSW50KGFbaV0sIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiJVBcIjpcbiAgICAgIGNhc2UgXCIlcFwiOlxuICAgICAgICBpZiAoL3BtL2kudGVzdChhW2ldKSAmJiBociA8IDEyKVxuICAgICAgICAgIGhyICs9IDEyO1xuICAgICAgICBlbHNlIGlmICgvYW0vaS50ZXN0KGFbaV0pICYmIGhyID49IDEyKVxuICAgICAgICAgIGhyIC09IDEyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIlTVwiOlxuICAgICAgICBtaW4gPSBwYXJzZUludChhW2ldLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAoaXNOYU4oeSkpIHkgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuICBpZiAoaXNOYU4obSkpIG0gPSB0b2RheS5nZXRNb250aCgpO1xuICBpZiAoaXNOYU4oZCkpIGQgPSB0b2RheS5nZXREYXRlKCk7XG4gIGlmIChpc05hTihocikpIGhyID0gdG9kYXkuZ2V0SG91cnMoKTtcbiAgaWYgKGlzTmFOKG1pbikpIG1pbiA9IHRvZGF5LmdldE1pbnV0ZXMoKTtcbiAgaWYgKHkgIT0gMCAmJiBtICE9IC0xICYmIGQgIT0gMClcbiAgICByZXR1cm4gbmV3IERhdGUoeSwgbSwgZCwgaHIsIG1pbiwgMCk7XG4gIHkgPSAwOyBtID0gLTE7IGQgPSAwO1xuICBmb3IgKGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkge1xuICAgIGlmIChhW2ldLnNlYXJjaCgvW2EtekEtWl0rLykgIT0gLTEpIHtcbiAgICAgIHZhciB0ID0gLTE7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgMTI7ICsraikge1xuICAgICAgICBpZiAoQ2FsZW5kYXIuTU9OVEhfTkFNRVNbal0uc3Vic3RyKDAsIGFbaV0ubGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09IGFbaV0udG9Mb3dlckNhc2UoKSkgeyB0ID0gajsgYnJlYWs7IH1cbiAgICAgIH1cbiAgICAgIGlmICh0ICE9IC0xKSB7XG4gICAgICAgIGlmIChtICE9IC0xKSB7XG4gICAgICAgICAgZCA9IG0rMTtcbiAgICAgICAgfVxuICAgICAgICBtID0gdDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGFbaV0sIDEwKSA8PSAxMiAmJiBtID09IC0xKSB7XG4gICAgICBtID0gYVtpXS0xO1xuICAgIH0gZWxzZSBpZiAocGFyc2VJbnQoYVtpXSwgMTApID4gMzEgJiYgeSA9PSAwKSB7XG4gICAgICB5ID0gcGFyc2VJbnQoYVtpXSwgMTApO1xuICAgICAgKHkgPCAxMDApICYmICh5ICs9ICh5ID4gMjkpID8gMTkwMCA6IDIwMDApO1xuICAgIH0gZWxzZSBpZiAoZCA9PSAwKSB7XG4gICAgICBkID0gYVtpXTtcbiAgICB9XG4gIH1cbiAgaWYgKHkgPT0gMClcbiAgICB5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgaWYgKG0gIT0gLTEgJiYgZCAhPSAwKVxuICAgIHJldHVybiBuZXcgRGF0ZSh5LCBtLCBkLCBociwgbWluLCAwKTtcbiAgcmV0dXJuIHRvZGF5O1xufTtcblxuLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhlIGN1cnJlbnQgbW9udGhcbkRhdGUucHJvdG90eXBlLmdldE1vbnRoRGF5cyA9IGZ1bmN0aW9uKG1vbnRoKSB7XG4gIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpXG4gIGlmICh0eXBlb2YgbW9udGggPT0gXCJ1bmRlZmluZWRcIilcbiAgICBtb250aCA9IHRoaXMuZ2V0TW9udGgoKVxuICBpZiAoKCgwID09ICh5ZWFyICUgNCkpICYmICggKDAgIT0gKHllYXIgJSAxMDApKSB8fCAoMCA9PSAoeWVhciAlIDQwMCkpKSkgJiYgbW9udGggPT0gMSlcbiAgICByZXR1cm4gMjlcbiAgZWxzZVxuICAgIHJldHVybiBEYXRlLkRBWVNfSU5fTU9OVEhbbW9udGhdXG59O1xuXG4vLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZGF5IGluIHRoZSB5ZWFyXG5EYXRlLnByb3RvdHlwZS5nZXREYXlPZlllYXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIG5vdyA9IG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSwgMCwgMCwgMCk7XG4gIHZhciB0aGVuID0gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLCAwLCAwLCAwLCAwLCAwKTtcbiAgdmFyIHRpbWUgPSBub3cgLSB0aGVuO1xuICByZXR1cm4gTWF0aC5mbG9vcih0aW1lIC8gRGF0ZS5EQVkpO1xufTtcblxuLyoqIFJldHVybnMgdGhlIG51bWJlciBvZiB0aGUgd2VlayBpbiB5ZWFyLCBhcyBkZWZpbmVkIGluIElTTyA4NjAxLiAqL1xuRGF0ZS5wcm90b3R5cGUuZ2V0V2Vla051bWJlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSwgMCwgMCwgMCk7XG4gIHZhciBEb1cgPSBkLmdldERheSgpO1xuICBkLnNldERhdGUoZC5nZXREYXRlKCkgLSAoRG9XICsgNikgJSA3ICsgMyk7IC8vIE5lYXJlc3QgVGh1XG4gIHZhciBtcyA9IGQudmFsdWVPZigpOyAvLyBHTVRcbiAgZC5zZXRNb250aCgwKTtcbiAgZC5zZXREYXRlKDQpOyAvLyBUaHUgaW4gV2VlayAxXG4gIHJldHVybiBNYXRoLnJvdW5kKChtcyAtIGQudmFsdWVPZigpKSAvICg3ICogODY0ZTUpKSArIDE7XG59O1xuXG4vKiogQ2hlY2tzIGRhdGUgYW5kIHRpbWUgZXF1YWxpdHkgKi9cbkRhdGUucHJvdG90eXBlLmVxdWFsc1RvID0gZnVuY3Rpb24oZGF0ZSkge1xuICByZXR1cm4gKCh0aGlzLmdldEZ1bGxZZWFyKCkgPT0gZGF0ZS5nZXRGdWxsWWVhcigpKSAmJlxuICAgKHRoaXMuZ2V0TW9udGgoKSA9PSBkYXRlLmdldE1vbnRoKCkpICYmXG4gICAodGhpcy5nZXREYXRlKCkgPT0gZGF0ZS5nZXREYXRlKCkpICYmXG4gICAodGhpcy5nZXRIb3VycygpID09IGRhdGUuZ2V0SG91cnMoKSkgJiZcbiAgICh0aGlzLmdldE1pbnV0ZXMoKSA9PSBkYXRlLmdldE1pbnV0ZXMoKSkpO1xufTtcblxuLyoqIFNldCBvbmx5IHRoZSB5ZWFyLCBtb250aCwgZGF0ZSBwYXJ0cyAoa2VlcCBleGlzdGluZyB0aW1lKSAqL1xuRGF0ZS5wcm90b3R5cGUuc2V0RGF0ZU9ubHkgPSBmdW5jdGlvbihkYXRlKSB7XG4gIHZhciB0bXAgPSBuZXcgRGF0ZShkYXRlKTtcbiAgdGhpcy5zZXREYXRlKDEpO1xuICB0aGlzLnNldEZ1bGxZZWFyKHRtcC5nZXRGdWxsWWVhcigpKTtcbiAgdGhpcy5zZXRNb250aCh0bXAuZ2V0TW9udGgoKSk7XG4gIHRoaXMuc2V0RGF0ZSh0bXAuZ2V0RGF0ZSgpKTtcbn07XG5cbi8qKiBQcmludHMgdGhlIGRhdGUgaW4gYSBzdHJpbmcgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBmb3JtYXQuICovXG5EYXRlLnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIG0gPSB0aGlzLmdldE1vbnRoKCk7XG4gIHZhciBkID0gdGhpcy5nZXREYXRlKCk7XG4gIHZhciB5ID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuICB2YXIgd24gPSB0aGlzLmdldFdlZWtOdW1iZXIoKTtcbiAgdmFyIHcgPSB0aGlzLmdldERheSgpO1xuICB2YXIgcyA9IHt9O1xuICB2YXIgaHIgPSB0aGlzLmdldEhvdXJzKCk7XG4gIHZhciBwbSA9IChociA+PSAxMik7XG4gIHZhciBpciA9IChwbSkgPyAoaHIgLSAxMikgOiBocjtcbiAgdmFyIGR5ID0gdGhpcy5nZXREYXlPZlllYXIoKTtcbiAgaWYgKGlyID09IDApXG4gICAgaXIgPSAxMjtcbiAgdmFyIG1pbiA9IHRoaXMuZ2V0TWludXRlcygpO1xuICB2YXIgc2VjID0gdGhpcy5nZXRTZWNvbmRzKCk7XG4gIHNbXCIlYVwiXSA9IENhbGVuZGFyLlNIT1JUX0RBWV9OQU1FU1t3XTsgLy8gYWJicmV2aWF0ZWQgd2Vla2RheSBuYW1lIFtGSVhNRTogSTE4Tl1cbiAgc1tcIiVBXCJdID0gQ2FsZW5kYXIuREFZX05BTUVTW3ddOyAvLyBmdWxsIHdlZWtkYXkgbmFtZVxuICBzW1wiJWJcIl0gPSBDYWxlbmRhci5TSE9SVF9NT05USF9OQU1FU1ttXTsgLy8gYWJicmV2aWF0ZWQgbW9udGggbmFtZSBbRklYTUU6IEkxOE5dXG4gIHNbXCIlQlwiXSA9IENhbGVuZGFyLk1PTlRIX05BTUVTW21dOyAvLyBmdWxsIG1vbnRoIG5hbWVcbiAgLy8gRklYTUU6ICVjIDogcHJlZmVycmVkIGRhdGUgYW5kIHRpbWUgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBjdXJyZW50IGxvY2FsZVxuICBzW1wiJUNcIl0gPSAxICsgTWF0aC5mbG9vcih5IC8gMTAwKTsgLy8gdGhlIGNlbnR1cnkgbnVtYmVyXG4gIHNbXCIlZFwiXSA9IChkIDwgMTApID8gKFwiMFwiICsgZCkgOiBkOyAvLyB0aGUgZGF5IG9mIHRoZSBtb250aCAocmFuZ2UgMDEgdG8gMzEpXG4gIHNbXCIlZVwiXSA9IGQ7IC8vIHRoZSBkYXkgb2YgdGhlIG1vbnRoIChyYW5nZSAxIHRvIDMxKVxuICAvLyBGSVhNRTogJUQgOiBhbWVyaWNhbiBkYXRlIHN0eWxlOiAlbS8lZC8leVxuICAvLyBGSVhNRTogJUUsICVGLCAlRywgJWcsICVoIChtYW4gc3RyZnRpbWUpXG4gIHNbXCIlSFwiXSA9IChociA8IDEwKSA/IChcIjBcIiArIGhyKSA6IGhyOyAvLyBob3VyLCByYW5nZSAwMCB0byAyMyAoMjRoIGZvcm1hdClcbiAgc1tcIiVJXCJdID0gKGlyIDwgMTApID8gKFwiMFwiICsgaXIpIDogaXI7IC8vIGhvdXIsIHJhbmdlIDAxIHRvIDEyICgxMmggZm9ybWF0KVxuICBzW1wiJWpcIl0gPSAoZHkgPCAxMDApID8gKChkeSA8IDEwKSA/IChcIjAwXCIgKyBkeSkgOiAoXCIwXCIgKyBkeSkpIDogZHk7IC8vIGRheSBvZiB0aGUgeWVhciAocmFuZ2UgMDAxIHRvIDM2NilcbiAgc1tcIiVrXCJdID0gaHI7ICAgLy8gaG91ciwgcmFuZ2UgMCB0byAyMyAoMjRoIGZvcm1hdClcbiAgc1tcIiVsXCJdID0gaXI7ICAgLy8gaG91ciwgcmFuZ2UgMSB0byAxMiAoMTJoIGZvcm1hdClcbiAgc1tcIiVtXCJdID0gKG0gPCA5KSA/IChcIjBcIiArICgxK20pKSA6ICgxK20pOyAvLyBtb250aCwgcmFuZ2UgMDEgdG8gMTJcbiAgc1tcIiVNXCJdID0gKG1pbiA8IDEwKSA/IChcIjBcIiArIG1pbikgOiBtaW47IC8vIG1pbnV0ZSwgcmFuZ2UgMDAgdG8gNTlcbiAgc1tcIiVuXCJdID0gXCJcXG5cIjsgICAvLyBhIG5ld2xpbmUgY2hhcmFjdGVyXG4gIHNbXCIlcFwiXSA9IHBtID8gXCJQTVwiIDogXCJBTVwiO1xuICBzW1wiJVBcIl0gPSBwbSA/IFwicG1cIiA6IFwiYW1cIjtcbiAgLy8gRklYTUU6ICVyIDogdGhlIHRpbWUgaW4gYW0vcG0gbm90YXRpb24gJUk6JU06JVMgJXBcbiAgLy8gRklYTUU6ICVSIDogdGhlIHRpbWUgaW4gMjQtaG91ciBub3RhdGlvbiAlSDolTVxuICBzW1wiJXNcIl0gPSBNYXRoLmZsb29yKHRoaXMuZ2V0VGltZSgpIC8gMTAwMCk7XG4gIHNbXCIlU1wiXSA9IChzZWMgPCAxMCkgPyAoXCIwXCIgKyBzZWMpIDogc2VjOyAvLyBzZWNvbmRzLCByYW5nZSAwMCB0byA1OVxuICBzW1wiJXRcIl0gPSBcIlxcdFwiOyAgIC8vIGEgdGFiIGNoYXJhY3RlclxuICAvLyBGSVhNRTogJVQgOiB0aGUgdGltZSBpbiAyNC1ob3VyIG5vdGF0aW9uICglSDolTTolUylcbiAgc1tcIiVVXCJdID0gc1tcIiVXXCJdID0gc1tcIiVWXCJdID0gKHduIDwgMTApID8gKFwiMFwiICsgd24pIDogd247XG4gIHNbXCIldVwiXSA9IHcgKyAxOyAgLy8gdGhlIGRheSBvZiB0aGUgd2VlayAocmFuZ2UgMSB0byA3LCAxID0gTU9OKVxuICBzW1wiJXdcIl0gPSB3OyAgICAvLyB0aGUgZGF5IG9mIHRoZSB3ZWVrIChyYW5nZSAwIHRvIDYsIDAgPSBTVU4pXG4gIC8vIEZJWE1FOiAleCA6IHByZWZlcnJlZCBkYXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgY3VycmVudCBsb2NhbGUgd2l0aG91dCB0aGUgdGltZVxuICAvLyBGSVhNRTogJVggOiBwcmVmZXJyZWQgdGltZSByZXByZXNlbnRhdGlvbiBmb3IgdGhlIGN1cnJlbnQgbG9jYWxlIHdpdGhvdXQgdGhlIGRhdGVcbiAgc1tcIiV5XCJdID0gKCcnICsgeSkuc3Vic3RyKDIsIDIpOyAvLyB5ZWFyIHdpdGhvdXQgdGhlIGNlbnR1cnkgKHJhbmdlIDAwIHRvIDk5KVxuICBzW1wiJVlcIl0gPSB5OyAgICAvLyB5ZWFyIHdpdGggdGhlIGNlbnR1cnlcbiAgc1tcIiUlXCJdID0gXCIlXCI7ICAgIC8vIGEgbGl0ZXJhbCAnJScgY2hhcmFjdGVyXG5cbiAgcmV0dXJuIHN0ci5nc3ViKC8lLi8sIGZ1bmN0aW9uKG1hdGNoKSB7IHJldHVybiBzW21hdGNoXSB8fCBtYXRjaCB9KTtcbn07XG5cbkRhdGUucHJvdG90eXBlLl9fbXNoX29sZFNldEZ1bGxZZWFyID0gRGF0ZS5wcm90b3R5cGUuc2V0RnVsbFllYXI7XG5EYXRlLnByb3RvdHlwZS5zZXRGdWxsWWVhciA9IGZ1bmN0aW9uKHkpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZSh0aGlzKTtcbiAgZC5fX21zaF9vbGRTZXRGdWxsWWVhcih5KTtcbiAgaWYgKGQuZ2V0TW9udGgoKSAhPSB0aGlzLmdldE1vbnRoKCkpXG4gICAgdGhpcy5zZXREYXRlKDI4KTtcbiAgdGhpcy5fX21zaF9vbGRTZXRGdWxsWWVhcih5KTtcbn1cbiJdfQ==
