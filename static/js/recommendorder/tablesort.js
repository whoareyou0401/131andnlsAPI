!function(t){t.tablesort=function(e,s){var i=this;this.$table=e,this.settings=t.extend({},t.tablesort.defaults,s),this.$table.find("thead th").bind("click.tablesort",function(){t(this).hasClass("disabled")||i.sort(t(this))}),this.index=null,this.$th=null,this.direction=[]},t.tablesort.prototype={sort:function(e,s){var i=new Date,a=this,n=this.$table,r=n.find("tbody tr"),o=e.index(),l=[],d=t("<div/>"),c=function(t,e,s){var i;return t.data().sortBy?(i=t.data().sortBy,"function"==typeof i?i(t,e,s):i):e.data("sort")?e.data("sort"):e.text()},h=function(t,e){var s,i,a,n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,r=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,d=/^0/,c=function(t){return(""+t).toLowerCase().replace(",","")},h=c(t).replace(r,"")||"",u=c(e).replace(r,"")||"",f=h.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=Math.max(f.length,b.length),p=parseInt(h.match(l),10)||1!=f.length&&h.match(o)&&Date.parse(h),$=parseInt(u.match(l),10)||p&&u.match(o)&&Date.parse(u)||null;if($){if(p<$)return-1;if(p>$)return 1}for(a=0;a<g;a++){if(s=!(f[a]||"").match(d)&&parseFloat(f[a])||f[a]||0,i=!(b[a]||"").match(d)&&parseFloat(b[a])||b[a]||0,isNaN(s)!==isNaN(i))return isNaN(s)?1:-1;if(typeof s!=typeof i&&(s+="",i+=""),s<i)return-1;if(s>i)return 1}return 0};0!==r.length&&(a.$table.find("thead th").removeClass(a.settings.asc+" "+a.settings.desc),this.$th=e,this.index!=o?this.direction[o]="desc":"asc"!==s&&"desc"!==s?this.direction[o]="desc"===this.direction[o]?"asc":"desc":this.direction[o]=s,this.index=o,s="asc"==this.direction[o]?1:-1,a.$table.trigger("tablesort:start",[a]),a.log("Sorting by "+this.index+" "+this.direction[o]),r.sort(function(i,n){var r=t(i),o=t(n),d=r.index(),u=o.index();return l[d]?i=l[d]:(i=c(e,a.cellToSort(i),a),l[d]=i),l[u]?n=l[u]:(n=c(e,a.cellToSort(n),a),l[u]=n),h(i,n)*s}),r.each(function(t,e){d.append(e)}),n.append(d.html()),e.addClass(a.settings[a.direction[o]]),a.log("Sort finished in "+((new Date).getTime()-i.getTime())+"ms"),a.$table.trigger("tablesort:complete",[a]))},cellToSort:function(e){return t(t(e).find("td").get(this.index))},log:function(e){(t.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+e)},destroy:function(){return this.$table.find("thead th").unbind("click.tablesort"),this.$table.data("tablesort",null),null}},t.tablesort.DEBUG=!1,t.tablesort.defaults={debug:t.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending"},t.fn.tablesort=function(e){var s,i;return this.each(function(){s=t(this),i=s.data("tablesort"),i&&i.destroy(),s.data("tablesort",new t.tablesort(s,e))})}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29tbWVuZG9yZGVyL3RhYmxlc29ydC5qcyJdLCJuYW1lcyI6WyIkIiwidGFibGVzb3J0IiwiJHRhYmxlIiwic2V0dGluZ3MiLCJzZWxmIiwidGhpcyIsImV4dGVuZCIsImRlZmF1bHRzIiwiZmluZCIsImJpbmQiLCJoYXNDbGFzcyIsInNvcnQiLCJpbmRleCIsIiR0aCIsImRpcmVjdGlvbiIsInByb3RvdHlwZSIsInRoIiwic3RhcnQiLCJEYXRlIiwidGFibGUiLCJyb3dzIiwiY2FjaGUiLCJmcmFnbWVudCIsInNvcnRWYWx1ZUZvckNlbGwiLCJ0ZCIsInNvcnRlciIsInNvcnRCeSIsImRhdGEiLCJ0ZXh0IiwibmF0dXJhbFNvcnQiLCJhIiwiYiIsInhIZXhWYWx1ZSIsInlIZXhWYWx1ZSIsImNodW5rUmVnRXhwIiwic3RyaXBSZWdFeHAiLCJkYXRlUmVnRXhwIiwibnVtZXJpY1JlZ0V4cCIsIm9SZWdFeHAiLCJ1c2VJbnNlbnNpdGl2ZSIsInN0cmluZyIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIngiLCJ5IiwieENodW5rZWQiLCJzcGxpdCIsInlDaHVua2VkIiwiY2h1bmtMZW5ndGgiLCJNYXRoIiwibWF4IiwibGVuZ3RoIiwieERhdGUiLCJwYXJzZUludCIsIm1hdGNoIiwicGFyc2UiLCJ5RGF0ZSIsInBhcnNlRmxvYXQiLCJpc05hTiIsInJlbW92ZUNsYXNzIiwiYXNjIiwiZGVzYyIsInRyaWdnZXIiLCJsb2ciLCJhUm93IiwiYlJvdyIsImFJbmRleCIsImJJbmRleCIsImNlbGxUb1NvcnQiLCJlYWNoIiwiaSIsInRyIiwiYXBwZW5kIiwiaHRtbCIsImFkZENsYXNzIiwiZ2V0VGltZSIsInJvdyIsImdldCIsIm1zZyIsIkRFQlVHIiwiZGVidWciLCJjb25zb2xlIiwiZGVzdHJveSIsInVuYmluZCIsImZuIiwicHJldmlvdXMiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQU1DLFNBQVVBLEdBRVRBLEVBQUVDLFVBQVksU0FBVUMsRUFBUUMsR0FD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QVNlLElBQ1I5RSxFQUFFQyxVQUFVOEUsT0FBUzFFLEtBQUtGLFNBQVM2RSxRQUFVQyxTQUFXQSxRQUFRbEIsS0FDbEVrQixRQUFRbEIsSUFBSSxlQUFpQmUsSUFJakNJLFFBQVMsV0FHUCxNQUZBN0UsTUFBS0gsT0FBT00sS0FBSyxZQUFZMkUsT0FBTyxtQkFDcEM5RSxLQUFLSCxPQUFPeUIsS0FBSyxZQUFhLE1BQ3ZCLE9BS1gzQixFQUFFQyxVQUFVOEUsT0FBUSxFQUVwQi9FLEVBQUVDLFVBQVVNLFVBQ1Z5RSxNQUFPaEYsRUFBRUMsVUFBVThFLE1BQ25CbkIsSUFBSyxtQkFDTEMsS0FBTSxxQkFHUjdELEVBQUVvRixHQUFHbkYsVUFBWSxTQUFTRSxHQUN4QixHQUFJZ0IsR0FBaUJrRSxDQUNyQixPQUFPaEYsTUFBS2dFLEtBQUssV0FDZmxELEVBQVFuQixFQUFFSyxNQUNWZ0YsRUFBV2xFLEVBQU1RLEtBQUssYUFDbkIwRCxHQUNEQSxFQUFTSCxVQUVYL0QsRUFBTVEsS0FBSyxZQUFhLEdBQUkzQixHQUFFQyxVQUFVa0IsRUFBT2hCLFFBSWxEbUYiLCJmaWxlIjoicmVjb21tZW5kb3JkZXIvdGFibGVzb3J0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgQSBzaW1wbGUsIGxpZ2h0d2VpZ2h0IGpRdWVyeSBwbHVnaW4gZm9yIGNyZWF0aW5nIHNvcnRhYmxlIHRhYmxlcy5cbiAgaHR0cHM6Ly9naXRodWIuY29tL2t5bGVmb3gvanF1ZXJ5LXRhYmxlc29ydFxuICBWZXJzaW9uIDAuMC4xXG4qL1xuXG47KGZ1bmN0aW9uKCQpIHtcblxuICAkLnRhYmxlc29ydCA9IGZ1bmN0aW9uICgkdGFibGUsIHNldHRpbmdzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuJHRhYmxlID0gJHRhYmxlO1xuICAgIHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgJC50YWJsZXNvcnQuZGVmYXVsdHMsIHNldHRpbmdzKTtcbiAgICB0aGlzLiR0YWJsZS5maW5kKCd0aGVhZCB0aCcpLmJpbmQoJ2NsaWNrLnRhYmxlc29ydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYoICEkKHRoaXMpLmhhc0NsYXNzKCdkaXNhYmxlZCcpICkge1xuICAgICAgICBzZWxmLnNvcnQoJCh0aGlzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5pbmRleCA9IG51bGw7XG4gICAgdGhpcy4kdGggPSBudWxsO1xuICAgIHRoaXMuZGlyZWN0aW9uID0gW107XG4gIH07XG5cbiAgJC50YWJsZXNvcnQucHJvdG90eXBlID0ge1xuXG4gICAgc29ydDogZnVuY3Rpb24odGgsIGRpcmVjdGlvbikge1xuICAgICAgdmFyIHN0YXJ0ID0gbmV3IERhdGUoKSxcbiAgICAgICAgc2VsZiAgICAgICAgPSB0aGlzLFxuICAgICAgICB0YWJsZSAgICAgICA9IHRoaXMuJHRhYmxlLFxuICAgICAgICByb3dzICAgICAgICA9IHRhYmxlLmZpbmQoJ3Rib2R5IHRyJyksXG4gICAgICAgIGluZGV4ICAgICAgID0gdGguaW5kZXgoKSxcbiAgICAgICAgY2FjaGUgICAgICAgPSBbXSxcbiAgICAgICAgZnJhZ21lbnQgICAgPSAkKCc8ZGl2Lz4nKSxcbiAgICAgICAgc29ydFZhbHVlRm9yQ2VsbCA9IGZ1bmN0aW9uKHRoLCB0ZCwgc29ydGVyKSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBzb3J0QnlcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYodGguZGF0YSgpLnNvcnRCeSkge1xuICAgICAgICAgICAgc29ydEJ5ID0gdGguZGF0YSgpLnNvcnRCeTtcbiAgICAgICAgICAgIHJldHVybiAodHlwZW9mIHNvcnRCeSA9PT0gJ2Z1bmN0aW9uJykgPyBzb3J0QnkodGgsIHRkLCBzb3J0ZXIpIDogc29ydEJ5IDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICggdGQuZGF0YSgnc29ydCcpICkgPyB0ZC5kYXRhKCdzb3J0JykgOiB0ZC50ZXh0KCkgO1xuICAgICAgICB9LFxuICAgICAgICBuYXR1cmFsU29ydCA9ICBmdW5jdGlvbiBuYXR1cmFsU29ydCAoYSwgYikge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgY2h1bmtSZWdFeHAgICAgPSAvKF4tP1swLTldKyhcXC4/WzAtOV0qKVtkZl0/ZT9bMC05XT8kfF4weFswLTlhLWZdKyR8WzAtOV0rKS9naSxcbiAgICAgICAgICAgIHN0cmlwUmVnRXhwICAgID0gLyheWyBdKnxbIF0qJCkvZyxcbiAgICAgICAgICAgIGRhdGVSZWdFeHAgICAgID0gLyheKFtcXHcgXSssP1tcXHcgXSspP1tcXHcgXSssP1tcXHcgXStcXGQrOlxcZCsoOlxcZCspP1tcXHcgXT98XlxcZHsxLDR9W1xcL1xcLV1cXGR7MSw0fVtcXC9cXC1dXFxkezEsNH18XlxcdyssIFxcdysgXFxkKywgXFxkezR9KS8sXG4gICAgICAgICAgICBudW1lcmljUmVnRXhwICA9IC9eMHhbMC05YS1mXSskL2ksXG4gICAgICAgICAgICBvUmVnRXhwICAgICAgICA9IC9eMC8sXG4gICAgICAgICAgICBjTG9jICAgICAgICAgICA9IDAsXG4gICAgICAgICAgICB1c2VJbnNlbnNpdGl2ZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICAgICAgICByZXR1cm4gKCcnICsgc3RyaW5nKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJywnLCAnJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gY29udmVydCBhbGwgdG8gc3RyaW5ncyBzdHJpcCB3aGl0ZXNwYWNlXG4gICAgICAgICAgICB4ICAgICAgICAgICAgICA9IHVzZUluc2Vuc2l0aXZlKGEpLnJlcGxhY2Uoc3RyaXBSZWdFeHAsICcnKSB8fCAnJyxcbiAgICAgICAgICAgIHkgICAgICAgICAgICAgID0gdXNlSW5zZW5zaXRpdmUoYikucmVwbGFjZShzdHJpcFJlZ0V4cCwgJycpIHx8ICcnLFxuICAgICAgICAgICAgLy8gY2h1bmsvdG9rZW5pemVcbiAgICAgICAgICAgIHhDaHVua2VkICAgICAgID0geC5yZXBsYWNlKGNodW5rUmVnRXhwLCAnXFwwJDFcXDAnKS5yZXBsYWNlKC9cXDAkLywnJykucmVwbGFjZSgvXlxcMC8sJycpLnNwbGl0KCdcXDAnKSxcbiAgICAgICAgICAgIHlDaHVua2VkICAgICAgID0geS5yZXBsYWNlKGNodW5rUmVnRXhwLCAnXFwwJDFcXDAnKS5yZXBsYWNlKC9cXDAkLywnJykucmVwbGFjZSgvXlxcMC8sJycpLnNwbGl0KCdcXDAnKSxcbiAgICAgICAgICAgIGNodW5rTGVuZ3RoICAgID0gTWF0aC5tYXgoeENodW5rZWQubGVuZ3RoLCB5Q2h1bmtlZC5sZW5ndGgpLFxuICAgICAgICAgICAgLy8gbnVtZXJpYywgaGV4IG9yIGRhdGUgZGV0ZWN0aW9uXG4gICAgICAgICAgICB4RGF0ZSAgICAgICAgICA9IHBhcnNlSW50KHgubWF0Y2gobnVtZXJpY1JlZ0V4cCksIDEwKSB8fCAoeENodW5rZWQubGVuZ3RoICE9IDEgJiYgeC5tYXRjaChkYXRlUmVnRXhwKSAmJiBEYXRlLnBhcnNlKHgpKSxcbiAgICAgICAgICAgIHlEYXRlICAgICAgICAgID0gcGFyc2VJbnQoeS5tYXRjaChudW1lcmljUmVnRXhwKSwgMTApIHx8IHhEYXRlICYmIHkubWF0Y2goZGF0ZVJlZ0V4cCkgJiYgRGF0ZS5wYXJzZSh5KSB8fCBudWxsLFxuICAgICAgICAgICAgeEhleFZhbHVlLFxuICAgICAgICAgICAgeUhleFZhbHVlLFxuICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICA7XG4gICAgICAgICAgLy8gZmlyc3QgdHJ5IGFuZCBzb3J0IEhleCBjb2RlcyBvciBEYXRlc1xuICAgICAgICAgIGlmICh5RGF0ZSkge1xuICAgICAgICAgICAgaWYoIHhEYXRlIDwgeURhdGUgKSB7XG4gICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCB4RGF0ZSA+IHlEYXRlICkge1xuICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gbmF0dXJhbCBzb3J0aW5nIHRocm91Z2ggc3BsaXQgbnVtZXJpYyBzdHJpbmdzIGFuZCBkZWZhdWx0IHN0cmluZ3NcbiAgICAgICAgICBmb3IoaW5kZXggPSAwOyBpbmRleCA8IGNodW5rTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIC8vIGZpbmQgZmxvYXRzIG5vdCBzdGFydGluZyB3aXRoICcwJywgc3RyaW5nIG9yIDAgaWYgbm90IGRlZmluZWQgKENsaW50IFByaWVzdClcbiAgICAgICAgICAgICAgeEhleFZhbHVlID0gISh4Q2h1bmtlZFtpbmRleF0gfHwgJycpLm1hdGNoKG9SZWdFeHApICYmIHBhcnNlRmxvYXQoeENodW5rZWRbaW5kZXhdKSB8fCB4Q2h1bmtlZFtpbmRleF0gfHwgMDtcbiAgICAgICAgICAgICAgeUhleFZhbHVlID0gISh5Q2h1bmtlZFtpbmRleF0gfHwgJycpLm1hdGNoKG9SZWdFeHApICYmIHBhcnNlRmxvYXQoeUNodW5rZWRbaW5kZXhdKSB8fCB5Q2h1bmtlZFtpbmRleF0gfHwgMDtcbiAgICAgICAgICAgICAgLy8gaGFuZGxlIG51bWVyaWMgdnMgc3RyaW5nIGNvbXBhcmlzb24gLSBudW1iZXIgPCBzdHJpbmcgLSAoS3lsZSBBZGFtcylcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHhIZXhWYWx1ZSkgIT09IGlzTmFOKHlIZXhWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCBpc05hTih4SGV4VmFsdWUpICkgPyAxOiAtMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyByZWx5IG9uIHN0cmluZyBjb21wYXJpc29uIGlmIGRpZmZlcmVudCB0eXBlcyAtIGkuZS4gJzAyJyA8IDIgIT0gJzAyJyA8ICcyJ1xuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgeEhleFZhbHVlICE9PSB0eXBlb2YgeUhleFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgeEhleFZhbHVlICs9ICcnO1xuICAgICAgICAgICAgICAgIHlIZXhWYWx1ZSArPSAnJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoeEhleFZhbHVlIDwgeUhleFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh4SGV4VmFsdWUgPiB5SGV4VmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgO1xuXG4gICAgICBpZihyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuJHRhYmxlLmZpbmQoJ3RoZWFkIHRoJykucmVtb3ZlQ2xhc3Moc2VsZi5zZXR0aW5ncy5hc2MgKyAnICcgKyBzZWxmLnNldHRpbmdzLmRlc2MpO1xuXG4gICAgICB0aGlzLiR0aCA9IHRoO1xuICAgICAgaWYodGhpcy5pbmRleCAhPSBpbmRleCkge1xuICAgICAgICB0aGlzLmRpcmVjdGlvbltpbmRleF0gPSAnZGVzYyc7XG4gICAgICB9XG4gICAgICBlbHNlIGlmKGRpcmVjdGlvbiAhPT0gJ2FzYycgJiYgZGlyZWN0aW9uICE9PSAnZGVzYycpIHtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25baW5kZXhdID0gdGhpcy5kaXJlY3Rpb25baW5kZXhdID09PSAnZGVzYycgPyAnYXNjJyA6ICdkZXNjJztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRpcmVjdGlvbltpbmRleF0gPSBkaXJlY3Rpb247XG4gICAgICB9XG4gICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbltpbmRleF0gPT0gJ2FzYycgPyAxIDogLTE7XG5cbiAgICAgIHNlbGYuJHRhYmxlLnRyaWdnZXIoJ3RhYmxlc29ydDpzdGFydCcsIFtzZWxmXSk7XG4gICAgICBzZWxmLmxvZyhcIlNvcnRpbmcgYnkgXCIgKyB0aGlzLmluZGV4ICsgJyAnICsgdGhpcy5kaXJlY3Rpb25baW5kZXhdKTtcblxuICAgICAgcm93cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgdmFyIGFSb3cgPSAkKGEpO1xuICAgICAgICB2YXIgYlJvdyA9ICQoYik7XG4gICAgICAgIHZhciBhSW5kZXggPSBhUm93LmluZGV4KCk7XG4gICAgICAgIHZhciBiSW5kZXggPSBiUm93LmluZGV4KCk7XG5cbiAgICAgICAgLy8gU29ydCB2YWx1ZSBBXG4gICAgICAgIGlmKGNhY2hlW2FJbmRleF0pIHtcbiAgICAgICAgICBhID0gY2FjaGVbYUluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBhID0gc29ydFZhbHVlRm9yQ2VsbCh0aCwgc2VsZi5jZWxsVG9Tb3J0KGEpLCBzZWxmKTtcbiAgICAgICAgICBjYWNoZVthSW5kZXhdID0gYTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTb3J0IFZhbHVlIEJcbiAgICAgICAgaWYoY2FjaGVbYkluZGV4XSkge1xuICAgICAgICAgIGIgPSBjYWNoZVtiSW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGIgPSBzb3J0VmFsdWVGb3JDZWxsKHRoLCBzZWxmLmNlbGxUb1NvcnQoYiksIHNlbGYpO1xuICAgICAgICAgIGNhY2hlW2JJbmRleF09IGI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuYXR1cmFsU29ydChhLCBiKSAqIGRpcmVjdGlvbik7XG4gICAgICB9KTtcblxuICAgICAgcm93cy5lYWNoKGZ1bmN0aW9uKGksIHRyKSB7XG4gICAgICAgIGZyYWdtZW50LmFwcGVuZCh0cik7XG4gICAgICB9KTtcbiAgICAgIHRhYmxlLmFwcGVuZChmcmFnbWVudC5odG1sKCkpO1xuXG4gICAgICB0aC5hZGRDbGFzcyhzZWxmLnNldHRpbmdzW3NlbGYuZGlyZWN0aW9uW2luZGV4XV0pO1xuXG4gICAgICBzZWxmLmxvZygnU29ydCBmaW5pc2hlZCBpbiAnICsgKChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLSBzdGFydC5nZXRUaW1lKCkpICsgJ21zJyk7XG4gICAgICBzZWxmLiR0YWJsZS50cmlnZ2VyKCd0YWJsZXNvcnQ6Y29tcGxldGUnLCBbc2VsZl0pO1xuXG4gICAgfSxcblxuICAgIGNlbGxUb1NvcnQ6IGZ1bmN0aW9uKHJvdykge1xuICAgICAgcmV0dXJuICQoJChyb3cpLmZpbmQoJ3RkJykuZ2V0KHRoaXMuaW5kZXgpKTtcbiAgICB9LFxuXG5cbiAgICBsb2c6IGZ1bmN0aW9uKG1zZykge1xuICAgICAgaWYoKCQudGFibGVzb3J0LkRFQlVHIHx8IHRoaXMuc2V0dGluZ3MuZGVidWcpICYmIGNvbnNvbGUgJiYgY29uc29sZS5sb2cpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1t0YWJsZXNvcnRdICcgKyBtc2cpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuJHRhYmxlLmZpbmQoJ3RoZWFkIHRoJykudW5iaW5kKCdjbGljay50YWJsZXNvcnQnKTtcbiAgICAgIHRoaXMuJHRhYmxlLmRhdGEoJ3RhYmxlc29ydCcsIG51bGwpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gIH07XG5cbiAgJC50YWJsZXNvcnQuREVCVUcgPSBmYWxzZTtcblxuICAkLnRhYmxlc29ydC5kZWZhdWx0cyA9IHtcbiAgICBkZWJ1ZzogJC50YWJsZXNvcnQuREVCVUcsXG4gICAgYXNjOiAnc29ydGVkIGFzY2VuZGluZycsXG4gICAgZGVzYzogJ3NvcnRlZCBkZXNjZW5kaW5nJ1xuICB9O1xuXG4gICQuZm4udGFibGVzb3J0ID0gZnVuY3Rpb24oc2V0dGluZ3MpIHtcbiAgICB2YXIgdGFibGUsIHNvcnRhYmxlLCBwcmV2aW91cztcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdGFibGUgPSAkKHRoaXMpO1xuICAgICAgcHJldmlvdXMgPSB0YWJsZS5kYXRhKCd0YWJsZXNvcnQnKTtcbiAgICAgIGlmKHByZXZpb3VzKSB7XG4gICAgICAgIHByZXZpb3VzLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRhYmxlLmRhdGEoJ3RhYmxlc29ydCcsIG5ldyAkLnRhYmxlc29ydCh0YWJsZSwgc2V0dGluZ3MpKTtcbiAgICB9KTtcbiAgfTtcblxufSkoalF1ZXJ5KTtcbiJdfQ==
