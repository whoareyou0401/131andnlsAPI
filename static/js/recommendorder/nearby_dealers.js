!function(e){"use strict";function o(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){i.init({lat:e.coords.latitude,lng:e.coords.longitude})}):alert("该浏览器不支持获取地理位置。")}var r,t;r=new AMap.Map("null",{}),r.plugin("AMap.Geolocation",function(){t=new AMap.Geolocation({enableHighAccuracy:!0,convert:!0})});var n=window.location.href,a=Number(n.match(/(customer\/)\d+\//)[0].split("/")[1]);Vue.filter("toFixed",function(e,o){return Number(Number(e).toFixed(o))}),n="/api/v1.1/recommendorder/customer/"+a+"/nearby-dealers";var i=new Vue({el:"#main",data:{dealers:[],recommendUrl:"/recommendorder/customer/"+a+"/recommend",customerProfile:"/recommendorder/customer/"+a+"/profile",historyUrl:"/recommendorder/customer/"+a+"/history"},methods:{init:function(e){var o=this;$.ajax({url:n,data:e,type:"get",success:function(e){o.dealers=e.dealers;for(var r in o.dealers)o.dealers[r].status===-1&&(o.dealers.length-=1);0===o.dealers.length?$(".blank").show():$(".list-con").show();getCookie("user_role")}})},toDealerPage:function(e){e.orderable?window.location.href="/recommendorder/dealer/"+e.id+"/customer/"+a+"/add-item":alert("商户"+e.name+"正在维护，请稍后再试。")},dealerUrl:function(e){return"/recommendorder/dealer/"+e+"/customer/"+a+"/add-item"},applyDealer:function(e){window.location.href="/recommendorder/customer/"+a+"/dealer/"+e.id+"/apply-dealer"},backOff:function(){window.location.href="/recommendorder/customer/"+a+"/dealer-list"}}});try{t.getCurrentPosition(function(e,o){"complete"===e?i.init({lat:o.position.lat,lng:o.position.lng}):alert("定位失败，请刷新后再试。"),console.log(e,o)})}catch(l){console.log(l),o()}}(window.cmApp=window.cmApp||{});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29tbWVuZG9yZGVyL25lYXJieV9kZWFsZXJzLmpzIl0sIm5hbWVzIjpbImNtQXBwIiwiZ2V0TG9jYXRpb24iLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsImdldEN1cnJlbnRQb3NpdGlvbiIsInBvc2l0aW9uIiwiYmluZCIsImluaXQiLCJsYXQiLCJjb29yZHMiLCJsYXRpdHVkZSIsImxuZyIsImxvbmdpdHVkZSIsImFsZXJ0IiwibWFwIiwiQU1hcCIsIk1hcCIsInBsdWdpbiIsIkdlb2xvY2F0aW9uIiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwiY29udmVydCIsInVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImN1c3RvbWVyX2lkIiwiTnVtYmVyIiwibWF0Y2giLCJzcGxpdCIsIlZ1ZSIsImZpbHRlciIsIm51bSIsInByZWNpc2lvbiIsInRvRml4ZWQiLCJlbCIsImRhdGEiLCJkZWFsZXJzIiwicmVjb21tZW5kVXJsIiwiY3VzdG9tZXJQcm9maWxlIiwiaGlzdG9yeVVybCIsIm1ldGhvZHMiLCJfdGhpcyIsInRoaXMiLCIkIiwiYWpheCIsInR5cGUiLCJzdWNjZXNzIiwiZGVhbGVySXRlbSIsInN0YXR1cyIsImxlbmd0aCIsInNob3ciLCJnZXRDb29raWUiLCJ0b0RlYWxlclBhZ2UiLCJkZWFsZXIiLCJvcmRlcmFibGUiLCJpZCIsIm5hbWUiLCJkZWFsZXJVcmwiLCJkaWQiLCJhcHBseURlYWxlciIsImJhY2tPZmYiLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwiZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0FFTixZQXFFQSxTQUFTQyxLQUVEQyxVQUFVQyxZQUVWRCxVQUFVQyxZQUFZQyxtQkFBbUIsU0FBU0MsR0FDOUNDLEVBQUtDLE1BQ0RDLElBQUtILEVBQVNJLE9BQU9DLFNBQ3JCQyxJQUFLTixFQUFTSSxPQUFPRyxjQU03QkMsTUFBTSxrQkFqRmQsR0FBSUMsR0FBS1gsQ0FDVFcsR0FBTSxHQUFJQyxNQUFLQyxJQUFJLFdBRW5CRixFQUFJRyxPQUFPLG1CQUFvQixXQUMzQmQsRUFBYyxHQUFJWSxNQUFLRyxhQUNuQkMsb0JBQW9CLEVBQ3BCQyxTQUFTLEtBSWpCLElBQUlDLEdBQU1DLE9BQU9DLFNBQVNDLEtBQ3RCQyxFQUFjQyxPQUFPTCxFQUFJTSxNQUFNLHFCQUFxQixHQUFHQyxNQUFNLEtBQUssR0FFdEVDLEtBQUlDLE9BQU8sVUFBVyxTQUFTQyxFQUFLQyxHQUNoQyxNQUFPTixRQUFPQSxPQUFPSyxHQUFLRSxRQUFRRCxNQUd0Q1gsRUFBTSxxQ0FBdUNJLEVBQWMsaUJBRTNELElBQUluQixHQUFPLEdBQUl1QixNQUNYSyxHQUFJLFFBQ0pDLE1BQ0lDLFdBQ0FDLGFBQWMsNEJBQThCWixFQUFjLGFBQzFEYSxnQkFBaUIsNEJBQThCYixFQUFjLFdBQzdEYyxXQUFZLDRCQUE4QmQsRUFBYyxZQUU1RGUsU0FDSWpDLEtBQU0sU0FBU0YsR0FDWCxHQUFJb0MsR0FBUUMsSUFDWkMsR0FBRUMsTUFDRXZCLElBQUtBLEVBQ0xjLEtBQU05QixFQUNOd0MsS0FBTSxNQUNOQyxRQUFTLFNBQVNYLEdBQ2RNLEVBQU1MLFFBQVVELEVBQUtDLE9BQ3JCLEtBQUksR0FBSVcsS0FBY04sR0FBTUwsUUFDckJLLEVBQU1MLFFBQVFXLEdBQVlDLGNBQ3pCUCxFQUFNTCxRQUFRYSxRQUFRLEVBR0YsS0FBekJSLEVBQU1MLFFBQVFhLE9BQ2JOLEVBQUUsVUFBVU8sT0FFWlAsRUFBRSxhQUFhTyxNQUVMQyxXQUFVLGlCQUlwQ0MsYUFBYyxTQUFTQyxHQUNmQSxFQUFPQyxVQUNQaEMsT0FBT0MsU0FBU0MsS0FBTywwQkFBNEI2QixFQUFPRSxHQUFLLGFBQWU5QixFQUFjLFlBRTVGWixNQUFNLEtBQU93QyxFQUFPRyxLQUFPLGdCQUduQ0MsVUFBVyxTQUFTQyxHQUNoQixNQUFPLDBCQUE0QkEsRUFBTSxhQUFlakMsRUFBYyxhQUUxRWtDLFlBQWEsU0FBU04sR0FDbEIvQixPQUFPQyxTQUFTQyxLQUFPLDRCQUE4QkMsRUFBYSxXQUFhNEIsRUFBT0UsR0FBSyxpQkFFL0ZLLFFBQVMsV0FDTHRDLE9BQU9DLFNBQVNDLEtBQU8sNEJBQThCQyxFQUFjLGtCQXFCL0UsS0FDSXRCLEVBQVlDLG1CQUFtQixTQUFTNEMsRUFBUWEsR0FDN0IsYUFBWGIsRUFDQTFDLEVBQUtDLE1BQ0RDLElBQUtxRCxFQUFPeEQsU0FBU0csSUFDckJHLElBQUtrRCxFQUFPeEQsU0FBU00sTUFHekJFLE1BQU0sZ0JBR1ZpRCxRQUFRQyxJQUFJZixFQUFRYSxLQUUxQixNQUFPRyxHQUNMRixRQUFRQyxJQUFJQyxHQUNaL0QsTUFHTHFCLE9BQU90QixNQUFRc0IsT0FBT3RCIiwiZmlsZSI6InJlY29tbWVuZG9yZGVyL25lYXJieV9kZWFsZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGNtQXBwKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgbWFwLCBnZW9sb2NhdGlvbjtcbiAgICBtYXAgPSBuZXcgQU1hcC5NYXAoXCJudWxsXCIsIHtcbiAgICB9KTtcbiAgICBtYXAucGx1Z2luKCdBTWFwLkdlb2xvY2F0aW9uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGdlb2xvY2F0aW9uID0gbmV3IEFNYXAuR2VvbG9jYXRpb24oe1xuICAgICAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLCAvL+aYr+WQpuS9v+eUqOmrmOeyvuW6puWumuS9je+8jOm7mOiupDp0cnVlXG4gICAgICAgICAgICBjb252ZXJ0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIHZhciBjdXN0b21lcl9pZCA9IE51bWJlcih1cmwubWF0Y2goLyhjdXN0b21lclxcLylcXGQrXFwvLylbMF0uc3BsaXQoXCIvXCIpWzFdKTtcblxuICAgIFZ1ZS5maWx0ZXIoXCJ0b0ZpeGVkXCIsIGZ1bmN0aW9uKG51bSwgcHJlY2lzaW9uKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIoTnVtYmVyKG51bSkudG9GaXhlZChwcmVjaXNpb24pKTtcbiAgICB9KTtcblxuICAgIHVybCA9IFwiL2FwaS92MS4xL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyL1wiICsgY3VzdG9tZXJfaWQgKyBcIi9uZWFyYnktZGVhbGVyc1wiO1xuXG4gICAgdmFyIGJpbmQgPSBuZXcgVnVlKHtcbiAgICAgICAgZWw6IFwiI21haW5cIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZGVhbGVyczogW10sXG4gICAgICAgICAgICByZWNvbW1lbmRVcmw6IFwiL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyL1wiICsgY3VzdG9tZXJfaWQgKyBcIi9yZWNvbW1lbmRcIixcbiAgICAgICAgICAgIGN1c3RvbWVyUHJvZmlsZTogXCIvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvXCIgKyBjdXN0b21lcl9pZCArIFwiL3Byb2ZpbGVcIixcbiAgICAgICAgICAgIGhpc3RvcnlVcmw6IFwiL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyL1wiICsgY3VzdG9tZXJfaWQgKyBcIi9oaXN0b3J5XCJcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kczoge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dldCcsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlYWxlcnMgPSBkYXRhLmRlYWxlcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGRlYWxlckl0ZW0gaW4gX3RoaXMuZGVhbGVycyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoX3RoaXMuZGVhbGVyc1tkZWFsZXJJdGVtXS5zdGF0dXMgPT09IC0xKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVhbGVycy5sZW5ndGgtPTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoX3RoaXMuZGVhbGVycy5sZW5ndGggPT09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5ibGFuaycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5saXN0LWNvbicpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb29raWVzID0gZ2V0Q29va2llKCd1c2VyX3JvbGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvRGVhbGVyUGFnZTogZnVuY3Rpb24oZGVhbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYWxlci5vcmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9yZWNvbW1lbmRvcmRlci9kZWFsZXIvXCIgKyBkZWFsZXIuaWQgKyBcIi9jdXN0b21lci9cIiArIGN1c3RvbWVyX2lkICsgXCIvYWRkLWl0ZW1cIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuWVhuaIt1wiICsgZGVhbGVyLm5hbWUgKyBcIuato+WcqOe7tOaKpO+8jOivt+eojeWQjuWGjeivleOAglwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVhbGVyVXJsOiBmdW5jdGlvbihkaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIvcmVjb21tZW5kb3JkZXIvZGVhbGVyL1wiICsgZGlkICsgXCIvY3VzdG9tZXIvXCIgKyBjdXN0b21lcl9pZCArIFwiL2FkZC1pdGVtXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXBwbHlEZWFsZXI6IGZ1bmN0aW9uKGRlYWxlcikge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvXCIgKyBjdXN0b21lcl9pZCsgXCIvZGVhbGVyL1wiICsgZGVhbGVyLmlkICsgXCIvYXBwbHktZGVhbGVyXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmFja09mZjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9yZWNvbW1lbmRvcmRlci9jdXN0b21lci9cIiArIGN1c3RvbWVyX2lkICsgXCIvZGVhbGVyLWxpc3RcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGdldExvY2F0aW9uKClcbiAgICB7XG4gICAgICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZnVuY3Rpb24ocG9zaXRpb24pe1xuICAgICAgICAgICAgICAgIGJpbmQuaW5pdCh7XG4gICAgICAgICAgICAgICAgICAgIGxhdDogcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgICBsbmc6IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgYWxlcnQoXCLor6XmtY/op4jlmajkuI3mlK/mjIHojrflj5blnLDnkIbkvY3nva7jgIJcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBnZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZnVuY3Rpb24oc3RhdHVzLCByZXN1bHQpe1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJyl7XG4gICAgICAgICAgICAgICAgYmluZC5pbml0KHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiByZXN1bHQucG9zaXRpb24ubGF0LFxuICAgICAgICAgICAgICAgICAgICBsbmc6IHJlc3VsdC5wb3NpdGlvbi5sbmdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCLlrprkvY3lpLHotKXvvIzor7fliLfmlrDlkI7lho3or5XjgIJcIilcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICBnZXRMb2NhdGlvbigpO1xuICAgIH1cblxufSkod2luZG93LmNtQXBwID0gd2luZG93LmNtQXBwIHx8IHt9KTsiXX0=
