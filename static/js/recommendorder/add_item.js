$(function(){"use strict";function e(e,t,i,c){var n={};n[e.id]=t,$.ajax({url:"/api/v1.1/recommendorder/customer/"+r+"/cart",type:i,datatype:"jsonp",data:n,success:function(e){0===e.code?c(e):alert(e.error_msg),$.ajax({url:"/recommendorder/api/v1/customer/"+r+"/cart",type:"get",datatype:"jsonp",success:function(e){var t=[];if(0!==e.items.length)if(0!==e.items.items.length)for(var i in e.items.items)s==e.items.items[i].id&&(0===e.items.items[i].items.length?($("#place-order i").html("(0)"),t=e.items):$("#place-order i").html("("+e.items.items[i].items.length+")"));else $("#place-order i").html("(0)")}})}})}function t(){var e=$("#search").val();0===e.length?($(".search-box label.no").css({display:"none"}),$(".show").css({display:"block"}),$(".hide").css({display:"none"})):($(".search-box label.no").css({display:"block"}),$(".show").css({display:"none"}),$(".hide").css({display:"block"})),a.query=e}var i=window.location.href,s=Number(i.match(/(dealer\/)\d+\//)[0].split("/")[1]),r=Number(i.match(/(customer\/)\d+\//)[0].split("/")[1]);setupCSRF();var c=new Vue({el:"#footer",data:{total:0},computed:{display_total:function(){return""+this.total.toFixed(2)}},methods:{recommendUrl:function(){zhuge.track("个性推荐（经销商店铺）",function(){window.location.href="/recommendorder/customer/"+r+"/recommend"})},customerProfile:function(){zhuge.track("个人中心（经销商店铺）",function(){window.location.href="/recommendorder/customer/"+r+"/profile"})}}}),n=new Vue({el:"#item-list",data:{sort:0,series:{},series_num:{},series_id:"",items:[],selected_items:{},source:$("#source").attr("name"),customer_id:$("#source").attr("customer_id"),cat_id:0,order:"-score",isGiftPage:i.search("add-gift")===-1,dealer_id:s,list:[],info:{}},methods:{bannerjump:function(){null!==n.info.bannerjumpimage&&""!==n.info.bannerjumpimage&&(window.location.href="/recommendorder/dealer/"+s+"/customer/"+r+"/active-regulation")},funtofixed:function(e){return""===e?e:isNaN(Number(e))?e:Number(e)},allseries:function(e){var t=this;t.series_id="",$(e.currentTarget).addClass("series-active"),$(e.currentTarget).siblings().removeClass("series-active")},seriesChange:function(e,t){var i=this;i.series_id=t,$(e.currentTarget).addClass("series-active"),$(e.currentTarget).siblings().removeClass("series-active")},refreshSelectedItems:function(e){var t=this;e.forEach(function(e){e.items.forEach(function(e){0!==e.selected_num?t.selected_items[e.id]={item_id:e.id,num:Number(e.selected_num).toFixed(0),price:e.price}:e.id in t.selected_items&&(t.selected_items[e.id].num=0)})}),c.total=0;for(var i in t.selected_items){var s=t.selected_items[i];c.total+=s.num*s.price}},numChange:function(t){""===t.selected_num?t.selected_num=0:isNaN(Number(t.selected_num))&&(t.selected_num=0),t.selected_num=parseInt(t.selected_num);var i=this;e(t,t.selected_num,"POST",function(e){t.selected_num=Number(e.num).toFixed(0),i.refreshSelectedItems(i.items)})},reduceClicked:function(t){var i=this;t.selected_num<=0?t.selected_num=0:e(t,-1,"PUT",function(e){t.selected_num=Number(e.num).toFixed(0),i.refreshSelectedItems(i.items)})},plusClicked:function(t){var i=this;e(t,1,"PUT",function(e){t.selected_num=Number(e.num).toFixed(0),i.refreshSelectedItems(i.items)})},itemFilter:function(e){var t=this;return e.forEach(function(e){e.items.forEach(function(e){e.id in t.selected_items?e.selected_num=t.selected_items[e.id].num:e.selected_num=0,e.price=parseFloat(e.price),i.search("add-gift")!==-1&&(e.id="gift:"+e.id,e.price=0,e.id in t.selected_items?e.selected_num=t.selected_items[e.id].num:e.selected_num=0),e.display_price=e.price.toFixed(2),e.quantity=e.quantity.toFixed(0)})}),e},loadItems:function(e,t,i){i=parseInt(i);var c=this;c.items=[],0===i?($(".product-series").css("display","none"),$.ajax({url:"/api/v1.2/recommendorder/customer/"+r+"/dealer/"+s+"/items",type:"get",datatype:"jsonp",data:{sort:e},success:function(e){c.items=c.itemFilter(e.items)},error:function(e){}})):($(".product-series").css("display","block"),""===t?$.ajax({url:"/api/v1.2/recommendorder/customer/"+r+"/dealer/"+s+"/items",type:"get",datatype:"jsonp",data:{cat_id:i,sort:e},success:function(e){c.items=c.itemFilter(e.items)}}):$.ajax({url:"/api/v1.2/recommendorder/customer/"+r+"/dealer/"+s+"/items",type:"get",datatype:"jsonp",data:{series_id:t,sort:e},success:function(e){c.items=c.itemFilter(e.items)}}))}},mounted:function(){var e=this;$.ajax({url:"/api/v1.2/recommendorder/customer/"+r+"/dealer/"+s+"/activity",type:"get",success:function(t){e.info=t}}),$.ajax({url:"/api/v1.1/recommendorder/customer/"+r+"/dealer-list",type:"get",success:function(e){for(var t=!1,i=0;i<e.dealers.length;i++)e.dealers[i].id==s&&e.dealers[i].orderable&&(t=!0);t||(window.location.href="/recommendorder/customer/"+r+"/dealer-list")}}),$.ajax({url:"/api/v1.2/recommendorder/customer/"+r+"/dealer/"+s+"/categories",type:"get",datatype:"jsonp",success:function(e){n.series=e.categories,n.list=e.categories}}),$.ajax({url:"/recommendorder/api/v1/customer/"+r+"/cart",type:"get",datatype:"jsonp",success:function(t){e.selected_items={};var i=[];if(0!==t.items.items.length)for(var r in t.items.items)s===t.items.items[r].id&&(0===t.items.items[0].items.length?($("#place-order i").html("(0)"),i=t.items.items[0].items):($("#place-order i").html("("+t.items.items[0].items.length+")"),i=t.items.items[0].items,i.forEach(function(i){t.items.items[0].items[r].is_giveaway||(e.selected_items[i.item_id]={num:Number(i.num).toFixed(0),price:i.price})})));e.loadItems(e.sort,e.series_id,e.cat_id),e.refreshSelectedItems(e.items)}})},watch:{cat_id:function(){var e=this;e.loadItems(e.sort,e.series_id,e.cat_id)},series_id:function(){var e=this;e.loadItems(e.sort,e.series_id,e.cat_id)},sort:function(){var e=this;2==e.sort?$("#by-price .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow_down.png) no-repeat center",backgroundSize:"65%"}):1==e.sort&&$("#by-price .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow_up.png) no-repeat center",backgroundSize:"65%"}),e.loadItems(e.sort,e.series_id,e.cat_id)}}}),a=(new Vue({el:"#bd",data:{dealerid:s,info:{},passflag:!1},beforeCreate:function(){var e=getCookie("user_role");this.isSalesman="salesman"===e},methods:{activityjump:function(){null!==n.info.popupjumpimage&&""!==n.info.popupjumpimage&&($(".activity").css("display","none"),$(".activitysec").css("display","block"))},pass:function(){var e=this;e.passflag=!1,document.referrer.indexOf("dealer-list")!==-1&&1===e.info.popupenabled&&null!==e.info.popupimage&&""!==e.info.popupimage&&e.passflag===!1&&$(".activity").css("display","block"),$.ajax({url:"/api/v1.3/recommendorder/customers/"+r+"/validation",type:"PATCH",success:function(e){}})},passhref:function(){window.location.href="/recommendorder/customer/"+r+"/setting",$.ajax({url:"/api/v1.3/recommendorder/customers/"+r+"/validation",type:"PATCH",success:function(e){}})}},mounted:function(){var e=this;$.ajax({url:"/api/v1.2/recommendorder/customer/"+r+"/dealer/"+s+"/activity",type:"get",success:function(t){e.info=t,document.referrer.indexOf("dealer-list")!==-1&&1===e.info.popupenabled&&null!==e.info.popupimage&&""!==e.info.popupimage&&e.passflag===!1&&$(".activity").css("display","block")}}),this.isSalesman===!1&&$.ajax({url:"/api/v1.3/recommendorder/customers/"+r+"/validation",type:"GET",success:function(t){t.validation_status===!1?e.passflag=!0:e.passflag=!1}})}}),new Vue({el:"#search-results",data:{items:[],query:"",dealer_id:s},methods:{numChange:function(t){var i=this;""===t.selected_num?t.selected_num=0:isNaN(Number(t.selected_num))&&(t.selected_num=0),t.selected_num=parseInt(t.selected_num),e(t,t.selected_num,"POST",function(e){t.selected_num=Number(e.num).toFixed(0),n.refreshSelectedItems(i.items)})},reduceClicked:function(t){var i=this;t.selected_num<=0?t.selected_num=0:e(t,-1,"PUT",function(e){t.selected_num=Number(e.num).toFixed(0),n.refreshSelectedItems(i.items)})},plusClicked:function(t){var i=this;e(t,1,"PUT",function(e){t.selected_num=Number(e.num).toFixed(0),n.refreshSelectedItems(i.items)})}},watch:{query:function(){var e=this;e.query.length>1&&$.ajax({url:"/api/v1.2/recommendorder/customer/"+r+"/dealer/"+s+"/items",type:"get",datatype:"jsonp",data:{key:e.query},success:function(t){e.items=n.itemFilter(t.items),console.log(e.items)}})}}}));$("#by-price").click(function(){$("#by-num .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow.png) no-repeat center",backgroundSize:"65%"})}),$("#by-score").click(function(){$(".ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow.png) no-repeat center",backgroundSize:"65%"})}),$("#by-num").click(function(){$("#by-price .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow.png) no-repeat center",backgroundSize:"65%"})}),$(".home-info-nav-b").click(function(){$(".model").css({display:"block"}),$(".model .call").css({display:"block"})}),$(".cancel").click(function(){$(".model").css({display:"none"}),$(".model .call").css({display:"none"})}),$(".money").click(function(){$(".add").css({display:"block"}),$(".add .call").css({display:"block"})}),$("#place-order").click(function(){var e="/recommendorder/customer/"+r+"/cart";window.location.href=e});var o=$(".search").val().length;$(".home-info-nav-a").click(function(){0===o&&(window.location.href="/recommendorder/customer/"+r+"/dealer-list")}),$(".list").click(function(){$(this).addClass("active"),$(this).parent().siblings().children(".list").removeClass("active")}),$(".list").on("click",".imgBig",function(e){var t;t=null===$(e.target).attr("bigsrc")?"/static/images/recommendorder/Bmr.png":$(e.target).attr("bigsrc"),$(".imgBigShow img").attr("src",t),$(".modelImg").css({display:"block"}),$(".imgBigShow img").css({display:"block"})}),$(".modelImg").click(function(){$(this).css({display:"none"})}),$(".activity").on("touchmove",function(e){e.preventDefault()}),$(".modelImg").on("touchmove",function(e){e.preventDefault()}),$(".activitybutton").click(function(){$(".activity").css("display","none")}),$(".activityhead-img").click(function(){$(".activitysec").css("display","none")}),$("#search").bind("input propertychange",function(){t()}),$(".no").click(function(){$("#search").val(""),t()}),$("#banner-img").click(function(){$(".search").val("燕京"),t()}),$("#banner-img1").click(function(){$(".search").val("偷吃熊"),t()}),$(document).ready(function(){$("#item-list").on("click",".size",function(){$(this).addClass("series-active"),$(this).siblings().removeClass("series-active"),$(this).parent().parent().parent().children(".list-con").eq($(this).index()).css("display","block"),$(this).parent().parent().parent().children(".list-con").eq($(this).index()).siblings(".list-con").css("display","none")}),$(".list").on("click",".nav-item",function(){$("#by-price .ic-arrow").css("background",""),$(this).addClass("active"),$(this).siblings().removeClass("active"),$("#by-score span").addClass("active"),$("#by-score").siblings().children().removeClass("active"),$(".product-series .series-select").removeClass("series-active"),$(".product-series .series-select").eq(0).addClass("series-active"),n.sort=0,n.cat_id=$(this).attr("cat_id"),n.series_id="","0"!=$(this).attr("cat_id")&&(n.series_num=n.series[Number($(this).index())-1])}),$("#by-score").click(function(){n.sort=0}),$("#by-price").click(function(){1==n.sort?n.sort=2:n.sort=1}),$("#by-num").click(function(){n.sort=3}),$(".list").on("click",".category-list",function(){$("#banner").hide()}),$(".list").on("click","#rec",function(){$("#banner").show()}),$.ajax({url:"/api/v1.1/recommendorder/dealer/"+s,type:"get",datatype:"JSONP",success:function(e){$("#dealer_name").html(e.data.dealer_name),$(".model .call .phone-number").html(e.data.phone),$(".model .sure").click(function(){window.location.href="tel:"+e.data.phone})}})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY29tbWVuZG9yZGVyL2FkZF9pdGVtLmpzIl0sIm5hbWVzIjpbIiQiLCJzZXRJdGVtQ2FydE51bSIsIml0ZW0iLCJudW0iLCJyZXFUeXBlIiwiY2IiLCJwYXJhbXMiLCJpZCIsImFqYXgiLCJ1cmwiLCJjdXN0b21lcl9pZCIsInR5cGUiLCJkYXRhdHlwZSIsImRhdGEiLCJzdWNjZXNzIiwicmVzIiwiY29kZSIsImFsZXJ0IiwiZXJyb3JfbXNnIiwiaXRlbXMiLCJsZW5ndGgiLCJpIiwiZGVhbGVyX2lkIiwiaHRtbCIsInF1ZXJ5X2NoYW5nZWQiLCJxdWVyeSIsInZhbCIsImNzcyIsImRpc3BsYXkiLCJzZWFyY2hWdWUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJOdW1iZXIiLCJtYXRjaCIsInNwbGl0Iiwic2V0dXBDU1JGIiwiZm9vdGVyIiwiVnVlIiwiZWwiLCJ0b3RhbCIsImNvbXB1dGVkIiwiZGlzcGxheV90b3RhbCIsInRoaXMiLCJ0b0ZpeGVkIiwibWV0aG9kcyIsInJlY29tbWVuZFVybCIsInpodWdlIiwidHJhY2siLCJjdXN0b21lclByb2ZpbGUiLCJhcHAiLCJzb3J0Iiwic2VyaWVzIiwic2VyaWVzX251bSIsInNlcmllc19pZCIsInNlbGVjdGVkX2l0ZW1zIiwic291cmNlIiwiYXR0ciIsImNhdF9pZCIsIm9yZGVyIiwiaXNHaWZ0UGFnZSIsInNlYXJjaCIsImxpc3QiLCJpbmZvIiwiYmFubmVyanVtcCIsImJhbm5lcmp1bXBpbWFnZSIsImZ1bnRvZml4ZWQiLCJpc05hTiIsImFsbHNlcmllcyIsImUiLCJzZWxmIiwiY3VycmVudFRhcmdldCIsImFkZENsYXNzIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInNlcmllc0NoYW5nZSIsInJlZnJlc2hTZWxlY3RlZEl0ZW1zIiwiZm9yRWFjaCIsImRhdCIsImVsZSIsInNlbGVjdGVkX251bSIsIml0ZW1faWQiLCJwcmljZSIsImtleSIsIm51bUNoYW5nZSIsInYiLCJwYXJzZUludCIsInJlZHVjZUNsaWNrZWQiLCJwbHVzQ2xpY2tlZCIsIml0ZW1GaWx0ZXIiLCJwYXJzZUZsb2F0IiwiZGlzcGxheV9wcmljZSIsInF1YW50aXR5IiwibG9hZEl0ZW1zIiwiZXJyb3IiLCJtb3VudGVkIiwib3JkZXJhYmxlIiwiZGVhbGVycyIsImNhdGVnb3JpZXMiLCJkIiwiaXNfZ2l2ZWF3YXkiLCJ3YXRjaCIsImJhY2tncm91bmQiLCJiYWNrZ3JvdW5kU2l6ZSIsImRlYWxlcmlkIiwicGFzc2ZsYWciLCJiZWZvcmVDcmVhdGUiLCJ1c2VyX3JvbGUiLCJnZXRDb29raWUiLCJpc1NhbGVzbWFuIiwiYWN0aXZpdHlqdW1wIiwicG9wdXBqdW1waW1hZ2UiLCJwYXNzIiwiZG9jdW1lbnQiLCJyZWZlcnJlciIsImluZGV4T2YiLCJwb3B1cGVuYWJsZWQiLCJwb3B1cGltYWdlIiwicGFzc2hyZWYiLCJ2YWxpZGF0aW9uX3N0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJjbGljayIsIm5ld19ocmVmIiwic2VhcmNoVmFsTGVuIiwicGFyZW50IiwiY2hpbGRyZW4iLCJvbiIsImV2IiwiYmlnSW1nU3JjIiwidGFyZ2V0IiwicHJldmVudERlZmF1bHQiLCJiaW5kIiwicmVhZHkiLCJlcSIsImluZGV4IiwiaGlkZSIsInNob3ciLCJkZWFsZXJfbmFtZSIsInBob25lIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRSxXQUNFLFlBWUEsU0FBU0MsR0FBZUMsRUFBTUMsRUFBS0MsRUFBU0MsR0FDeEMsR0FBSUMsS0FDSkEsR0FBT0osRUFBS0ssSUFBTUosRUFDbEJILEVBQUVRLE1BQ0VDLElBQUsscUNBQXVDQyxFQUFjLFFBQzFEQyxLQUFNUCxFQUNOUSxTQUFVLFFBQ1ZDLEtBQU1QLEVBQ05RLFFBQVMsU0FBU0MsR0FDRSxJQUFiQSxFQUFJQyxLQUNIWCxFQUFHVSxHQUVIRSxNQUFNRixFQUFJRyxXQUVkbEIsRUFBRVEsTUFDRUMsSUFBSyxtQ0FBcUNDLEVBQWMsUUFDeERDLEtBQU0sTUFDTkMsU0FBVSxRQUNWRSxRQUFTLFNB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LFNBRWpCeEksRUFBRSxTQUFTK0gsR0FBRyxRQUFTLE9BQVEsV0FDM0IvSCxFQUFFLFdBQVd5SSxTQUdqQnpJLEVBQUVRLE1BQ0VDLElBQUssbUNBQXFDYSxFQUMxQ1gsS0FBTSxNQUNOQyxTQUFVLFFBQ1ZFLFFBQVMsU0FBU0QsR0FFZGIsRUFBRSxnQkFBZ0J1QixLQUFLVixFQUFLQSxLQUFLNkgsYUFDakMxSSxFQUFFLDhCQUE4QnVCLEtBQUtWLEVBQUtBLEtBQUs4SCxPQUUvQzNJLEVBQUUsZ0JBQWdCMEgsTUFBTSxXQUNwQjVGLE9BQU9DLFNBQVNDLEtBQU8sT0FBU25CLEVBQUtBLEtBQUs4SCIsImZpbGUiOiJyZWNvbW1lbmRvcmRlci9hZGRfaXRlbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICB2YXIgZGVhbGVyX2lkID0gTnVtYmVyKHVybC5tYXRjaCgvKGRlYWxlclxcLylcXGQrXFwvLylbMF0uc3BsaXQoJy8nKVsxXSk7XG4gICAgdmFyIGN1c3RvbWVyX2lkID0gTnVtYmVyKHVybC5tYXRjaCgvKGN1c3RvbWVyXFwvKVxcZCtcXC8vKVswXS5zcGxpdCgnLycpWzFdKTtcblxuICAgIHNldHVwQ1NSRigpO1xuICAgIC8qKlxuICAgICAqIHJlcVR5cGU6XG4gICAgICogICBQT1NUIC0tIHNldCBudW1iZXJcbiAgICAgKiAgIFBVVCAtLSBpbmNyZW1lbnQvZGVjcmVtZW50IGRhdGFcbiAgICAgKi9cbiAgICAvL+eCueWHu+aUueWPmOi+k+WFpeahhuS4reeahOaVsOWQjOaXtuWKoOWFpVxuICAgIGZ1bmN0aW9uIHNldEl0ZW1DYXJ0TnVtKGl0ZW0sIG51bSwgcmVxVHlwZSwgY2IpIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHt9O1xuICAgICAgICBwYXJhbXNbaXRlbS5pZF0gPSBudW07XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcvYXBpL3YxLjEvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvJyArIGN1c3RvbWVyX2lkICsgJy9jYXJ0JyxcbiAgICAgICAgICAgIHR5cGU6IHJlcVR5cGUsXG4gICAgICAgICAgICBkYXRhdHlwZTogJ2pzb25wJyxcbiAgICAgICAgICAgIGRhdGE6IHBhcmFtcyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAgIGlmKHJlcy5jb2RlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKHJlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzLmVycm9yX21zZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9yZWNvbW1lbmRvcmRlci9hcGkvdjEvY3VzdG9tZXIvJyArIGN1c3RvbWVyX2lkICsgJy9jYXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dldCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbnAnLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuaXRlbXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5pdGVtcy5pdGVtcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIGRhdGEuaXRlbXMuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRlYWxlcl9pZCA9PSBkYXRhLml0ZW1zLml0ZW1zW2ldLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5pdGVtcy5pdGVtc1tpXS5pdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3BsYWNlLW9yZGVyIGknKS5odG1sKCcoMCknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBkYXRhLml0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwbGFjZS1vcmRlciBpJykuaHRtbCgnKCcgKyBkYXRhLml0ZW1zLml0ZW1zW2ldLml0ZW1zLmxlbmd0aCArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3BsYWNlLW9yZGVyIGknKS5odG1sKCcoMCknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBmb290ZXIgPSBuZXcgVnVlKHtcbiAgICAgICAgZWw6ICcjZm9vdGVyJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG90YWw6IDBcbiAgICAgICAgfSxcbiAgICAgICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgICAgIGRpc3BsYXlfdG90YWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJyArIHRoaXMudG90YWwudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kczoge1xuICAgICAgICAgICAgcmVjb21tZW5kVXJsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgemh1Z2UudHJhY2soJ+S4quaAp+aOqOiNkO+8iOe7j+mUgOWVhuW6l+mTuu+8iScsZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvJyArIGN1c3RvbWVyX2lkICsgJy9yZWNvbW1lbmQnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1c3RvbWVyUHJvZmlsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHpodWdlLnRyYWNrKCfkuKrkurrkuK3lv4PvvIjnu4/plIDllYblupfpk7rvvIknLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvcHJvZmlsZSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgYXBwID0gbmV3IFZ1ZSh7XG4gICAgICAgIGVsOiAnI2l0ZW0tbGlzdCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIC8vIHNvcnTlgLxcbiAgICAgICAgICAgIHNvcnQ6IDAsXG4gICAgICAgICAgICAvLyDns7vliJfmlbDmja5cbiAgICAgICAgICAgIHNlcmllczoge30sXG4gICAgICAgICAgICBzZXJpZXNfbnVtOiB7fSxcbiAgICAgICAgICAgIHNlcmllc19pZDogJycsXG4gICAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgICBzZWxlY3RlZF9pdGVtczoge30sXG4gICAgICAgICAgICBzb3VyY2U6ICQoJyNzb3VyY2UnKS5hdHRyKCduYW1lJyksXG4gICAgICAgICAgICBjdXN0b21lcl9pZDogJCgnI3NvdXJjZScpLmF0dHIoJ2N1c3RvbWVyX2lkJyksXG4gICAgICAgICAgICBjYXRfaWQ6IDAsXG4gICAgICAgICAgICBvcmRlcjogJy1zY29yZScsXG4gICAgICAgICAgICBpc0dpZnRQYWdlOiB1cmwuc2VhcmNoKCdhZGQtZ2lmdCcpID09PSAtMSxcbiAgICAgICAgICAgIGRlYWxlcl9pZDogZGVhbGVyX2lkLFxuICAgICAgICAgICAgbGlzdDogW10sXG4gICAgICAgICAgICBpbmZvOnt9XG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZHM6IHtcbiAgICAgICAgICAgIGJhbm5lcmp1bXA6ZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgaWYoYXBwLmluZm8uYmFubmVyanVtcGltYWdlICE9PSBudWxsICYmIGFwcC5pbmZvLmJhbm5lcmp1bXBpbWFnZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3JlY29tbWVuZG9yZGVyL2RlYWxlci8nICsgZGVhbGVyX2lkICsgJy9jdXN0b21lci8nICsgY3VzdG9tZXJfaWQgKyAnL2FjdGl2ZS1yZWd1bGF0aW9uJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVudG9maXhlZDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmKGRhdGEgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihpc05hTihOdW1iZXIoZGF0YSkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihkYXRhKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxzZXJpZXM6ZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICBzZWxmLnNlcmllc19pZCA9ICcnO1xuICAgICAgICAgICAgICAgIC8vIOezu+WIl+agt+W8j+WIh+aNolxuICAgICAgICAgICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygnc2VyaWVzLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdzZXJpZXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VyaWVzQ2hhbmdlOiBmdW5jdGlvbihlLCBudW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXJpZXNfaWQgPSBudW07XG4gICAgICAgICAgICAgICAgLy8g57O75YiX5qC35byP5YiH5o2iXG4gICAgICAgICAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKCdzZXJpZXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ3Nlcmllcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWZyZXNoU2VsZWN0ZWRJdGVtczogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihkYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0Lml0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihlbGUuc2VsZWN0ZWRfbnVtICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZF9pdGVtc1tlbGUuaWRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBlbGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bTogTnVtYmVyKGVsZS5zZWxlY3RlZF9udW0pLnRvRml4ZWQoMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBlbGUucHJpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGVsZS5pZCBpbiBzZWxmLnNlbGVjdGVkX2l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZF9pdGVtc1tlbGUuaWRdLm51bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZvb3Rlci50b3RhbCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gc2VsZi5zZWxlY3RlZF9pdGVtcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHNlbGYuc2VsZWN0ZWRfaXRlbXNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgZm9vdGVyLnRvdGFsICs9IGl0ZW0ubnVtICogaXRlbS5wcmljZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbnVtQ2hhbmdlOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgaWYodi5zZWxlY3RlZF9udW0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoaXNOYU4oTnVtYmVyKHYuc2VsZWN0ZWRfbnVtKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2LnNlbGVjdGVkX251bSA9IHBhcnNlSW50KHYuc2VsZWN0ZWRfbnVtKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2V0SXRlbUNhcnROdW0odiwgdi5zZWxlY3RlZF9udW0sICdQT1NUJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2LnNlbGVjdGVkX251bSA9IE51bWJlcihkYXRhLm51bSkudG9GaXhlZCgwKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWR1Y2VDbGlja2VkOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlmKHYuc2VsZWN0ZWRfbnVtIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSAwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEl0ZW1DYXJ0TnVtKHYsIC0xLCAnUFVUJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSBOdW1iZXIoZGF0YS5udW0pLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2hTZWxlY3RlZEl0ZW1zKHNlbGYuaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGx1c0NsaWNrZWQ6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2V0SXRlbUNhcnROdW0odiwgMSwgJ1BVVCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSBOdW1iZXIoZGF0YS5udW0pLnRvRml4ZWQoMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpdGVtRmlsdGVyOiBmdW5jdGlvbihpdGVtcykge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxmLnNlbGVjdGVkX2l0ZW1zKVxuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZGF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdC5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlLmlkIGluIHNlbGYuc2VsZWN0ZWRfaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuc2VsZWN0ZWRfbnVtID0gc2VsZi5zZWxlY3RlZF9pdGVtc1tlbGUuaWRdLm51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnNlbGVjdGVkX251bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUucHJpY2UgPSBwYXJzZUZsb2F0KGVsZS5wcmljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih1cmwuc2VhcmNoKCdhZGQtZ2lmdCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5pZCA9ICdnaWZ0OicgKyBlbGUuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnByaWNlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGUuaWQgaW4gc2VsZi5zZWxlY3RlZF9pdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuc2VsZWN0ZWRfbnVtID0gc2VsZi5zZWxlY3RlZF9pdGVtc1tlbGUuaWRdLm51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuc2VsZWN0ZWRfbnVtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuZGlzcGxheV9wcmljZSA9IGVsZS5wcmljZS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnF1YW50aXR5ID0gZWxlLnF1YW50aXR5LnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbGUucGFja2luZ19zcGVjaWZpY2F0aW9uID0gTnVtYmVyKGVsZS5wYWNraW5nX3NwZWNpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsb2FkSXRlbXM6IGZ1bmN0aW9uKHNvcnQsIHNlcmllc19pZCwgY2F0X2lkKSB7XG4gICAgICAgICAgICAgICAgY2F0X2lkID0gcGFyc2VJbnQoY2F0X2lkKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmKGNhdF9pZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZHVjdC1zZXJpZXMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS92MS4yL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvZGVhbGVyLycgKyBkZWFsZXJfaWQgKyAnL2l0ZW1zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29ucCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NvcnQnOiBzb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IHNlbGYuaXRlbUZpbHRlcihkYXRhLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkge31cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb2R1Y3Qtc2VyaWVzJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKHNlcmllc19pZCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS92MS4yL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvZGVhbGVyLycgKyBkZWFsZXJfaWQgKyAnL2l0ZW1zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ2pzb25wJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYXRfaWQnOiBjYXRfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzb3J0Jzogc29ydFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXRlbXMgPSBzZWxmLml0ZW1GaWx0ZXIoZGF0YS5pdGVtcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3YxLjIvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvJyArIGN1c3RvbWVyX2lkICsgJy9kZWFsZXIvJyArIGRlYWxlcl9pZCArICcvaXRlbXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbnAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Nlcmllc19pZCc6IHNlcmllc19pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NvcnQnOiBzb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXRlbXMgPSBzZWxmLml0ZW1GaWx0ZXIoZGF0YS5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbW91bnRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAvLyBiYW5uZXJcbiAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdjEuMi9yZWNvbW1lbmRvcmRlci9jdXN0b21lci8nICsgY3VzdG9tZXJfaWQgKyAnL2RlYWxlci8nICsgZGVhbGVyX2lkICsgJy9hY3Rpdml0eScsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2dldCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZm8gPSBkYXRhO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS92MS4xL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvZGVhbGVyLWxpc3QnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGF0YS5kZWFsZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmRlYWxlcnNbaV0uaWQgPT0gZGVhbGVyX2lkICYmIGRhdGEuZGVhbGVyc1tpXS5vcmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCFvcmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9yZWNvbW1lbmRvcmRlci9jdXN0b21lci8nICsgY3VzdG9tZXJfaWQgKyAnL2RlYWxlci1saXN0JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3YxLjIvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvJyArIGN1c3RvbWVyX2lkICsgJy9kZWFsZXIvJyArIGRlYWxlcl9pZCArICcvY2F0ZWdvcmllcycsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2dldCcsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29ucCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWtmOWCqOezu+WIl+aVsOaNrlxuICAgICAgICAgICAgICAgICAgICBhcHAuc2VyaWVzID0gcmVzLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5saXN0ID0gcmVzLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogJy9yZWNvbW1lbmRvcmRlci9hcGkvdjEvY3VzdG9tZXIvJyArIGN1c3RvbWVyX2lkICsgJy9jYXJ0JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ2pzb25wJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRfaXRlbXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLml0ZW1zLml0ZW1zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIGRhdGEuaXRlbXMuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkZWFsZXJfaWQgPT09IGRhdGEuaXRlbXMuaXRlbXNbaV0uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5pdGVtcy5pdGVtc1swXS5pdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwbGFjZS1vcmRlciBpJykuaHRtbCgnKDApJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGRhdGEuaXRlbXMuaXRlbXNbMF0uaXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcGxhY2Utb3JkZXIgaScpLmh0bWwoJygnICsgZGF0YS5pdGVtcy5pdGVtc1swXS5pdGVtcy5sZW5ndGggKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBkYXRhLml0ZW1zLml0ZW1zWzBdLml0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWRhdGEuaXRlbXMuaXRlbXNbMF0uaXRlbXNbaV0uaXNfZ2l2ZWF3YXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VsZi5zZWxlY3RlZF9pdGVtcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZF9pdGVtc1tkLml0ZW1faWRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtOiBOdW1iZXIoZC5udW0pLnRvRml4ZWQoMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogZC5wcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEl0ZW1zKHNlbGYuc29ydCwgc2VsZi5zZXJpZXNfaWQsIHNlbGYuY2F0X2lkKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgd2F0Y2g6IHtcbiAgICAgICAgICAgIGNhdF9pZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2VsZi5sb2FkSXRlbXMoc2VsZi5zb3J0LCBzZWxmLnNlcmllc19pZCwgc2VsZi5jYXRfaWQpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VyaWVzX2lkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2VsZi5sb2FkSXRlbXMoc2VsZi5zb3J0LCBzZWxmLnNlcmllc19pZCwgc2VsZi5jYXRfaWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZihzZWxmLnNvcnQgPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAkKCcjYnktcHJpY2UgLmljLWFycm93JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJzogJ3VybCgvc3RhdGljL2ltYWdlcy9yZWNvbW1lbmRvcmRlci9pY19hcnJvd19kb3duLnBuZykgbm8tcmVwZWF0IGNlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZFNpemUnOiAnNjUlJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoc2VsZi5zb3J0ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2J5LXByaWNlIC5pYy1hcnJvdycpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6ICd1cmwoL3N0YXRpYy9pbWFnZXMvcmVjb21tZW5kb3JkZXIvaWNfYXJyb3dfdXAucG5nKSBuby1yZXBlYXQgY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kU2l6ZSc6ICc2NSUnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYubG9hZEl0ZW1zKHNlbGYuc29ydCwgc2VsZi5zZXJpZXNfaWQsIHNlbGYuY2F0X2lkKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGJkID0gbmV3IFZ1ZSh7XG4gICAgICAgIGVsOiAnI2JkJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZGVhbGVyaWQ6IGRlYWxlcl9pZCxcbiAgICAgICAgICAgIGluZm86e30sXG4gICAgICAgICAgICAvL+S/ruaUueWvhueggeaPkOekumZsYWdcbiAgICAgICAgICAgIHBhc3NmbGFnOmZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciB1c2VyX3JvbGUgPSBnZXRDb29raWUoJ3VzZXJfcm9sZScpO1xuICAgICAgICAgICAgdGhpcy5pc1NhbGVzbWFuID0gdXNlcl9yb2xlID09PSBcInNhbGVzbWFuXCI7XG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZHM6e1xuICAgICAgICAgICAgYWN0aXZpdHlqdW1wOmZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYoYXBwLmluZm8ucG9wdXBqdW1waW1hZ2UgIT09IG51bGwgJiYgYXBwLmluZm8ucG9wdXBqdW1waW1hZ2UgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgJCgnLmFjdGl2aXR5JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAkKCcuYWN0aXZpdHlzZWMnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXNzOmZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHNlbGYucGFzc2ZsYWc9ZmFsc2U7XG4gICAgICBcbiAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5yZWZlcnJlci5pbmRleE9mKCdkZWFsZXItbGlzdCcpICE9PSAtMSAmJiBzZWxmLmluZm8ucG9wdXBlbmFibGVkID09PSAxICYmIHNlbGYuaW5mby5wb3B1cGltYWdlICE9PSBudWxsICYmIHNlbGYuaW5mby5wb3B1cGltYWdlICE9PSAnJyAmJiBzZWxmLnBhc3NmbGFnID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjdGl2aXR5JykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogXCIvYXBpL3YxLjMvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXJzL1wiICsgY3VzdG9tZXJfaWQgKyBcIi92YWxpZGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFzc2hyZWY6ZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj0nL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvc2V0dGluZyc7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9hcGkvdjEuMy9yZWNvbW1lbmRvcmRlci9jdXN0b21lcnMvXCIgKyBjdXN0b21lcl9pZCArIFwiL3ZhbGlkYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQQVRDSFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICBtb3VudGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS92MS4yL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvZGVhbGVyLycgKyBkZWFsZXJfaWQgKyAnL2FjdGl2aXR5JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5mbyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJhbm5lcuWbvui3s+i9rOWbniDpmLvmraLmtLvliqjpobXpnaLlvLnlh7pcbiAgICAgICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQucmVmZXJyZXIuaW5kZXhPZignZGVhbGVyLWxpc3QnKSAhPT0gLTEgJiYgc2VsZi5pbmZvLnBvcHVwZW5hYmxlZCA9PT0gMSAmJiBzZWxmLmluZm8ucG9wdXBpbWFnZSAhPT0gbnVsbCAmJiBzZWxmLmluZm8ucG9wdXBpbWFnZSAhPT0gJycgJiYgc2VsZi5wYXNzZmxhZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hY3Rpdml0eScpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyDlr4bnoIHkv67mlLnmj5DnpLpcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2FsZXNtYW49PT1mYWxzZSkge1xuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogXCIvYXBpL3YxLjMvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXJzL1wiICsgY3VzdG9tZXJfaWQgKyBcIi92YWxpZGF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudmFsaWRhdGlvbl9zdGF0dXM9PT1mYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc2ZsYWc9dHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc2ZsYWc9ZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTsgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgc2VhcmNoVnVlID0gbmV3IFZ1ZSh7XG4gICAgICAgIGVsOiAnI3NlYXJjaC1yZXN1bHRzJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICAgICAgcXVlcnk6ICcnLFxuICAgICAgICAgICAgZGVhbGVyX2lkOiBkZWFsZXJfaWRcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kczoge1xuXG4gICAgICAgICAgICBudW1DaGFuZ2U6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYodi5zZWxlY3RlZF9udW0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoaXNOYU4oTnVtYmVyKHYuc2VsZWN0ZWRfbnVtKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2LnNlbGVjdGVkX251bSA9IHBhcnNlSW50KHYuc2VsZWN0ZWRfbnVtKTtcbiAgICAgICAgICAgICAgICBzZXRJdGVtQ2FydE51bSh2LCB2LnNlbGVjdGVkX251bSwgJ1BPU1QnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtID0gTnVtYmVyKGRhdGEubnVtKS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICBhcHAucmVmcmVzaFNlbGVjdGVkSXRlbXMoc2VsZi5pdGVtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVkdWNlQ2xpY2tlZDogZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZih2LnNlbGVjdGVkX251bSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRJdGVtQ2FydE51bSh2LCAtMSwgJ1BVVCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtID0gTnVtYmVyKGRhdGEubnVtKS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnJlZnJlc2hTZWxlY3RlZEl0ZW1zKHNlbGYuaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGx1c0NsaWNrZWQ6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2V0SXRlbUNhcnROdW0odiwgMSwgJ1BVVCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSBOdW1iZXIoZGF0YS5udW0pLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvL+aQnOe0ouaVsOaNrlxuICAgICAgICB3YXRjaDoge1xuICAgICAgICAgICAgcXVlcnk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZihzZWxmLnF1ZXJ5Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdjEuMi9yZWNvbW1lbmRvcmRlci9jdXN0b21lci8nICsgY3VzdG9tZXJfaWQgKyAnL2RlYWxlci8nICsgZGVhbGVyX2lkICsgJy9pdGVtcycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbnAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdrZXknOiBzZWxmLnF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IGFwcC5pdGVtRmlsdGVyKGRhdGEuaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYuaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0pO1xuICAgICQoJyNieS1wcmljZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjYnktbnVtIC5pYy1hcnJvdycpLmNzcyh7XG4gICAgICAgICAgICAnYmFja2dyb3VuZCc6ICd1cmwoL3N0YXRpYy9pbWFnZXMvcmVjb21tZW5kb3JkZXIvaWNfYXJyb3cucG5nKSBuby1yZXBlYXQgY2VudGVyJyxcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kU2l6ZSc6ICc2NSUnXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgICQoJyNieS1zY29yZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuaWMtYXJyb3cnKS5jc3Moe1xuICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAndXJsKC9zdGF0aWMvaW1hZ2VzL3JlY29tbWVuZG9yZGVyL2ljX2Fycm93LnBuZykgbm8tcmVwZWF0IGNlbnRlcicsXG4gICAgICAgICAgICAnYmFja2dyb3VuZFNpemUnOiAnNjUlJ1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAkKCcjYnktbnVtJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJyNieS1wcmljZSAuaWMtYXJyb3cnKS5jc3Moe1xuICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAndXJsKC9zdGF0aWMvaW1hZ2VzL3JlY29tbWVuZG9yZGVyL2ljX2Fycm93LnBuZykgbm8tcmVwZWF0IGNlbnRlcicsXG4gICAgICAgICAgICAnYmFja2dyb3VuZFNpemUnOiAnNjUlJ1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvL+eCueWHu+eUteivneaMiemSrlxuXG4gICAgJCgnLmhvbWUtaW5mby1uYXYtYicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcubW9kZWwnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXG4gICAgICAgIH0pO1xuICAgICAgICAkKCcubW9kZWwgLmNhbGwnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8v54K55Ye75Y+W5raI5oyJ6ZKu5qih5oCB5raI5aSxXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcubW9kZWwnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5tb2RlbCAuY2FsbCcpLmNzcyh7XG4gICAgICAgICAgICAnZGlzcGxheSc6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvL+eCueWHu+a3u+WKoOaooeaAgeWHuueOsFxuICAgICQoJy5tb25leScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuYWRkJykuY3NzKHtcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJ1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLmFkZCAuY2FsbCcpLmNzcyh7XG4gICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy/ngrnlh7vljrvotK3nianovabmjInpkq7pobXpnaLot7PovazlnKjotK3nianovabpobXpnaLlkIzml7bllYblk4Hlh7rnjrDlnKjotK3nianovabkuK1cbiAgICAkKCcjcGxhY2Utb3JkZXInKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5ld19ocmVmID0gJy9yZWNvbW1lbmRvcmRlci9jdXN0b21lci8nICsgY3VzdG9tZXJfaWQgKyAnL2NhcnQnO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld19ocmVmO1xuICAgIH0pO1xuICAgIC8v54K55Ye76L+U5Zue5oyJ6ZKuKOe7meWQjOS4gOS4qui/lOWbnuaMiemSruS9huS4jeWQjOeahOaDheWGteS4i+e7meS4jeWQjOeahOi/lOWbnueVjOmdoilcbiAgICB2YXIgc2VhcmNoVmFsTGVuID0gJCgnLnNlYXJjaCcpLnZhbCgpLmxlbmd0aDtcbiAgICAkKCcuaG9tZS1pbmZvLW5hdi1hJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKHNlYXJjaFZhbExlbiA9PT0gMCkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvZGVhbGVyLWxpc3QnO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLmxpc3QnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoKS5jaGlsZHJlbignLmxpc3QnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAvL+eCueWHu+WbvueJh+WHuueOsOaooeaAgeaYvuekuuWkp+WbvlxuICAgICQoJy5saXN0Jykub24oJ2NsaWNrJywgJy5pbWdCaWcnLCBmdW5jdGlvbihldikge1xuICAgICAgICB2YXIgYmlnSW1nU3JjO1xuICAgICAgICBpZigkKGV2LnRhcmdldCkuYXR0cignYmlnc3JjJykgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGJpZ0ltZ1NyYyA9ICcvc3RhdGljL2ltYWdlcy9yZWNvbW1lbmRvcmRlci9CbXIucG5nJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJpZ0ltZ1NyYyA9ICQoZXYudGFyZ2V0KS5hdHRyKCdiaWdzcmMnKTtcbiAgICAgICAgfVxuICAgICAgICAkKCcuaW1nQmlnU2hvdyBpbWcnKS5hdHRyKCdzcmMnLCBiaWdJbWdTcmMpO1xuICAgICAgICAkKCcubW9kZWxJbWcnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuaW1nQmlnU2hvdyBpbWcnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8v54K55Ye75Lu75oSP5oyJ6ZKu5qih5oCB5raI5aSxXG4gICAgJCgnLm1vZGVsSW1nJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykuY3NzKHtcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIOmYu+atoum7mOiupOa7keWKqFxuICAgICQoJy5hY3Rpdml0eScpLm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIH0pO1xuICAgICQoJy5tb2RlbEltZycpLm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIH0pO1xuICAgIC8v54K55Ye75rS75Yqo6aG16Z2i5raI5aSxXG4gICAgJCgnLmFjdGl2aXR5YnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5hY3Rpdml0eScpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgfSk7XG4gICAgJCgnLmFjdGl2aXR5aGVhZC1pbWcnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLmFjdGl2aXR5c2VjJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICB9KTtcbiAgXG5cbiAgICBmdW5jdGlvbiBxdWVyeV9jaGFuZ2VkKCkge1xuICAgICAgICB2YXIgcXVlcnkgPSAkKCcjc2VhcmNoJykudmFsKCk7XG4gICAgICAgIGlmKHF1ZXJ5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJCgnLnNlYXJjaC1ib3ggbGFiZWwubm8nKS5jc3Moe1xuICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5zaG93JykuY3NzKHtcbiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLmhpZGUnKS5jc3Moe1xuICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5zZWFyY2gtYm94IGxhYmVsLm5vJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLnNob3cnKS5jc3Moe1xuICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5oaWRlJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNlYXJjaFZ1ZS5xdWVyeSA9IHF1ZXJ5O1xuICAgIH1cbiAgICAvL+agueaNruaQnOe0ouahhueahOWGheWuueWIpOaWreaYr+WQpuWHuueOsOaQnOe0ouWVhuWTgVxuICAgICQoJyNzZWFyY2gnKS5iaW5kKCdpbnB1dCBwcm9wZXJ0eWNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBxdWVyeV9jaGFuZ2VkKCk7XG4gICAgfSk7XG4gICAgLy/lvZPngrnlh7tY5pe25paH5pys5qGG55qE5YC85Li6MO+8m1xuICAgICQoJy5ubycpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjc2VhcmNoJykudmFsKCcnKTtcbiAgICAgICAgcXVlcnlfY2hhbmdlZCgpO1xuICAgIH0pO1xuICAgICQoJyNiYW5uZXItaW1nJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5zZWFyY2gnKS52YWwoJ+eHleS6rCcpO1xuICAgICAgICBxdWVyeV9jaGFuZ2VkKCk7XG4gICAgfSk7XG4gICAgJCgnI2Jhbm5lci1pbWcxJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5zZWFyY2gnKS52YWwoJ+WBt+WQg+eGiicpO1xuICAgICAgICBxdWVyeV9jaGFuZ2VkKCk7XG4gICAgfSk7XG5cbiAgICAvLyDlt6bkvqfliJfooahcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgLy/op4TmoLzliIfmjaJcbiAgICAgICAgJCgnI2l0ZW0tbGlzdCcpLm9uKCdjbGljaycsICcuc2l6ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VyaWVzLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdzZXJpZXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmNoaWxkcmVuKCcubGlzdC1jb24nKS5lcSgkKHRoaXMpLmluZGV4KCkpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5jaGlsZHJlbignLmxpc3QtY29uJykuZXEoJCh0aGlzKS5pbmRleCgpKS5zaWJsaW5ncygnLmxpc3QtY29uJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmxpc3QnKS5vbignY2xpY2snLCAnLm5hdi1pdGVtJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyDmuIXnqbrlsJblpLTlm77niYdcbiAgICAgICAgICAgICQoJyNieS1wcmljZSAuaWMtYXJyb3cnKS5jc3MoJ2JhY2tncm91bmQnLCAnJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAvLyDmjpLluo/moLflvI9cbiAgICAgICAgICAgICQoJyNieS1zY29yZSBzcGFuJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnI2J5LXNjb3JlJykuc2libGluZ3MoKS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIC8vIOagt+W8j+m7mOiupOWFqOmDqOWVhuWTgVxuICAgICAgICAgICAgJCgnLnByb2R1Y3Qtc2VyaWVzIC5zZXJpZXMtc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ3Nlcmllcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5wcm9kdWN0LXNlcmllcyAuc2VyaWVzLXNlbGVjdCcpLmVxKDApLmFkZENsYXNzKCdzZXJpZXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAvL+m7mOiupOe7vOWQiOaOkuW6j3Nlcmllc1xuICAgICAgICAgICAgYXBwLnNvcnQgPSAwO1xuICAgICAgICAgICAgYXBwLmNhdF9pZCA9ICQodGhpcykuYXR0cignY2F0X2lkJyk7XG4gICAgICAgICAgICBhcHAuc2VyaWVzX2lkID0gJyc7XG4gICAgICAgICAgICBpZigkKHRoaXMpLmF0dHIoJ2NhdF9pZCcpICE9ICcwJykge1xuICAgICAgICAgICAgICAgIGFwcC5zZXJpZXNfbnVtID0gYXBwLnNlcmllc1tOdW1iZXIoJCh0aGlzKS5pbmRleCgpKSAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvL+aOkuWIl+mhuuW6j1xuICAgICAgICAkKCcjYnktc2NvcmUnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFwcC5zb3J0ID0gMDtcblxuICAgICAgICB9KTtcbiAgICAgICAgJCgnI2J5LXByaWNlJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZihhcHAuc29ydCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgYXBwLnNvcnQgPSAyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcHAuc29ydCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcjYnktbnVtJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhcHAuc29ydCA9IDM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5saXN0Jykub24oJ2NsaWNrJywgJy5jYXRlZ29yeS1saXN0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjYmFubmVyJykuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLmxpc3QnKS5vbignY2xpY2snLCAnI3JlYycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI2Jhbm5lcicpLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGxvYWQgZGVhbGVyIGluZm9cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogJy9hcGkvdjEuMS9yZWNvbW1lbmRvcmRlci9kZWFsZXIvJyArIGRlYWxlcl9pZCxcbiAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgZGF0YXR5cGU6ICdKU09OUCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAkKCcjZGVhbGVyX25hbWUnKS5odG1sKGRhdGEuZGF0YS5kZWFsZXJfbmFtZSk7XG4gICAgICAgICAgICAgICAgJCgnLm1vZGVsIC5jYWxsIC5waG9uZS1udW1iZXInKS5odG1sKGRhdGEuZGF0YS5waG9uZSk7XG4gICAgICAgICAgICAgICAgLy/ngrnlh7vnoa7lrprmjInpkq7lj6/ku6XmiZPnlLXor51cbiAgICAgICAgICAgICAgICAkKCcubW9kZWwgLnN1cmUnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAndGVsOicgKyBkYXRhLmRhdGEucGhvbmU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59KTsiXX0=
