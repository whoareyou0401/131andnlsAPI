!function(o){"use strict";o.toast=new Vue({el:"#error",data:{isHidden:!0,isError:!0,message:""},computed:{isSuccess:function(){return!this.isError}},methods:{dismiss:function(){this.isHidden=!0},show:function(){this.isError=!1,this.isHidden=!1},showError:function(){this.isError=!0,this.isHidden=!1}}}),o.dbInfo=new Vue({el:"#dbinfo",data:{dbinfo:null,tableNames:[],permission_code:"",statusCode:0,posted:!1},computed:{tableNum:function(){return this.tableNames.length},hasPermission:function(){for(var o=!0,s=0;s<this.permission_code.length;s++)if("0"!==this.permission_code[s]){o=!1;break}return o}}}),$(document).ready(function(){$(".ui.dropdown").dropdown(),$("#db_info").submit(function(){console.log("Submitting db info form");var s={url:"/api/v1/thirdpartydb",type:"post",dataType:"json",beforeSumit:function(){$($("#db_info .submit")[0]).addClass("loading")},success:function(s){o.dbInfo.posted=!0,console.log(s),$($("#db_info .submit")[0]).removeClass("loading"),o.dbInfo.statusCode=s.code,0===s.code?(console.log("success"),o.dbInfo.dbinfo=s.data.dbinfo,o.dbInfo.tableNames=s.data.table_names,o.dbInfo.permission_code=s.data.permission_code,o.dbInfo.hasPermission?(o.toast.message="连接数据库成功",o.toast.show(),$("#nav-btn").removeClass("disabled")):(o.toast.message="权限不全 Err("+o.dbInfo.permission_code+")",o.toast.showError())):(o.dbInfo.dbinfo=null,o.dbInfo.tableNames=[],o.dbInfo.permission_code="22222",o.toast.message=s.message+":"+s.errors,o.toast.showError())}};return $(this).ajaxSubmit(s),!1})})}(window.cmApp=window.cmApp||{});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0b3JlL3RoaXJkX3BhcnR5X2RiX2luZm8uanMiXSwibmFtZXMiOlsiY21BcHAiLCJ0b2FzdCIsIlZ1ZSIsImVsIiwiZGF0YSIsImlzSGlkZGVuIiwiaXNFcnJvciIsIm1lc3NhZ2UiLCJjb21wdXRlZCIsImlzU3VjY2VzcyIsInRoaXMiLCJtZXRob2RzIiwiZGlzbWlzcyIsInNob3ciLCJzaG93RXJyb3IiLCJkYkluZm8iLCJkYmluZm8iLCJ0YWJsZU5hbWVzIiwicGVybWlzc2lvbl9jb2RlIiwic3RhdHVzQ29kZSIsInBvc3RlZCIsInRhYmxlTnVtIiwibGVuZ3RoIiwiaGFzUGVybWlzc2lvbiIsImkiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImRyb3Bkb3duIiwic3VibWl0IiwiY29uc29sZSIsImxvZyIsIm9wdGlvbnMiLCJ1cmwiLCJ0eXBlIiwiZGF0YVR5cGUiLCJiZWZvcmVTdW1pdCIsImFkZENsYXNzIiwic3VjY2VzcyIsImUiLCJyZW1vdmVDbGFzcyIsImNvZGUiLCJ0YWJsZV9uYW1lcyIsImVycm9ycyIsImFqYXhTdWJtaXQiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBQ04sWUFFQUEsR0FBTUMsTUFBUSxHQUFJQyxNQUNkQyxHQUFJLFNBQ0pDLE1BQ0lDLFVBQVUsRUFDVkMsU0FBUyxFQUNUQyxRQUFTLElBRWJDLFVBQ0lDLFVBQVcsV0FDUCxPQUFRQyxLQUFLSixVQUdyQkssU0FDSUMsUUFBUyxXQUNMRixLQUFLTCxVQUFXLEdBRXBCUSxLQUFNLFdBQ0ZILEtBQUtKLFNBQVUsRUFDZkksS0FBS0wsVUFBVyxHQUVwQlMsVUFBVyxXQUNQSixLQUFLSixTQUFVLEVBQ2ZJLEtBQUtMLFVBQVcsTUFLNUJMLEVBQU1lLE9BQVMsR0FBSWIsTUFDZkMsR0FBSSxVQUNKQyxNQUNJWSxPQUFRLEtBQ1JDLGNBQ0FDLGdCQUFpQixHQUNqQkMsV0FBWSxFQUNaQyxRQUFRLEdBRVpaLFVBQ0lhLFNBQVUsV0FDTixNQUFPWCxNQUFLTyxXQUFXSyxRQUUzQkMsY0FBZSxXQUVYLElBQUssR0FEREEsSUFBZ0IsRUFDWEMsRUFBRSxFQUFHQSxFQUFJZCxLQUFLUSxnQkFBZ0JJLE9BQVFFLElBQzNDLEdBQWdDLE1BQTVCZCxLQUFLUSxnQkFBZ0JNLEdBQVksQ0FDakNELEdBQWdCLENBQ2hCLE9BR1IsTUFBT0EsT0FLbkJFLEVBQUVDLFVBQVVDLE1BQU0sV0FDZEYsRUFBRSxnQkFBZ0JHLFdBRWxCSCxFQUFFLFlBQVlJLE9BQU8sV0FDakJDLFFBQVFDLElBQUksMEJBQ1osSUFBSUMsSUFDQUMsSUFBSyx1QkFDTEMsS0FBTSxPQUNOQyxTQUFVLE9BQ1ZDLFlBQWEsV0FDVFgsRUFBRUEsRUFBRSxvQkFBb0IsSUFBSVksU0FBUyxZQUV6Q0MsUUFBUyxTQUFTQyxHQUNkdkMsRUFBTWUsT0FBT0ssUUFBUyxFQUN0QlUsUUFBUUMsSUFBSVEsR0FDWmQsRUFBRUEsRUFBRSxvQkFBb0IsSUFBSWUsWUFBWSxXQUN4Q3hDLEVBQU1lLE9BQU9JLFdBQWFvQixFQUFFRSxLQUNiLElBQVhGLEVBQUVFLE1BQ0ZYLFFBQVFDLElBQUksV0FDWi9CLEVBQU1lLE9BQU9DLE9BQVN1QixFQUFFbkMsS0FBS1ksT0FDN0JoQixFQUFNZSxPQUFPRSxXQUFZc0IsRUFBRW5DLEtBQUtzQyxZQUNoQzFDLEVBQU1lLE9BQU9HLGdCQUFrQnFCLEVBQUVuQyxLQUFLYyxnQkFDbENsQixFQUFNZSxPQUFPUSxlQUNidkIsRUFBTUMsTUFBTU0sUUFBVSxVQUN0QlAsRUFBTUMsTUFBTVksT0FDWlksRUFBRSxZQUFZZSxZQUFZLGNBRTFCeEMsRUFBTUMsTUFBTU0sUUFBVSxZQUFjUCxFQUFNZSxPQUFPRyxnQkFBa0IsSUFDbkVsQixFQUFNQyxNQUFNYSxlQUdoQmQsRUFBTWUsT0FBT0MsT0FBUyxLQUN0QmhCLEVBQU1lLE9BQU9FLGNBQ2JqQixFQUFNZSxPQUFPRyxnQkFBa0IsUUFDL0JsQixFQUFNQyxNQUFNTSxRQUFVZ0MsRUFBRWhDLFFBQVUsSUFBTWdDLEVBQUVJLE9BQzFDM0MsRUFBTUMsTUFBTWEsY0FLeEIsT0FEQVcsR0FBRWYsTUFBTWtDLFdBQVdaLElBQ1osT0FHaEJhLE9BQU83QyxNQUFRNkMsT0FBTzdDIiwiZmlsZSI6InN0b3JlL3RoaXJkX3BhcnR5X2RiX2luZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oY21BcHApIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGNtQXBwLnRvYXN0ID0gbmV3IFZ1ZSh7XG4gICAgICAgIGVsOiAnI2Vycm9yJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaXNIaWRkZW46IHRydWUsXG4gICAgICAgICAgICBpc0Vycm9yOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogJydcbiAgICAgICAgfSxcbiAgICAgICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgICAgIGlzU3VjY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmlzRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZHM6IHtcbiAgICAgICAgICAgIGRpc21pc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaG93RXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0hpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjbUFwcC5kYkluZm8gPSBuZXcgVnVlKHtcbiAgICAgICAgZWw6ICcjZGJpbmZvJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZGJpbmZvOiBudWxsLFxuICAgICAgICAgICAgdGFibGVOYW1lczogW10sXG4gICAgICAgICAgICBwZXJtaXNzaW9uX2NvZGU6ICcnLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogMCxcbiAgICAgICAgICAgIHBvc3RlZDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgICAgIHRhYmxlTnVtOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YWJsZU5hbWVzLmxlbmd0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXNQZXJtaXNzaW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFzUGVybWlzc2lvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpIDwgdGhpcy5wZXJtaXNzaW9uX2NvZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVybWlzc2lvbl9jb2RlW2ldICE9PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Blcm1pc3Npb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBoYXNQZXJtaXNzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnVpLmRyb3Bkb3duJykuZHJvcGRvd24oKTtcblxuICAgICAgICAkKCcjZGJfaW5mbycpLnN1Ym1pdChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3VibWl0dGluZyBkYiBpbmZvIGZvcm1cIik7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3YxL3RoaXJkcGFydHlkYicsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgYmVmb3JlU3VtaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCQoJyNkYl9pbmZvIC5zdWJtaXQnKVswXSkuYWRkQ2xhc3MoJ2xvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY21BcHAuZGJJbmZvLnBvc3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgICAgICAkKCQoJyNkYl9pbmZvIC5zdWJtaXQnKVswXSkucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgY21BcHAuZGJJbmZvLnN0YXR1c0NvZGUgPSBlLmNvZGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmNvZGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtQXBwLmRiSW5mby5kYmluZm8gPSBlLmRhdGEuZGJpbmZvO1xuICAgICAgICAgICAgICAgICAgICAgICAgY21BcHAuZGJJbmZvLnRhYmxlTmFtZXM9IGUuZGF0YS50YWJsZV9uYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtQXBwLmRiSW5mby5wZXJtaXNzaW9uX2NvZGUgPSBlLmRhdGEucGVybWlzc2lvbl9jb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNtQXBwLmRiSW5mby5oYXNQZXJtaXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY21BcHAudG9hc3QubWVzc2FnZSA9ICfov57mjqXmlbDmja7lupPmiJDlip8nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtQXBwLnRvYXN0LnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjbmF2LWJ0bicpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbUFwcC50b2FzdC5tZXNzYWdlID0gJ+adg+mZkOS4jeWFqCBFcnIoJyArIGNtQXBwLmRiSW5mby5wZXJtaXNzaW9uX2NvZGUgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY21BcHAudG9hc3Quc2hvd0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbUFwcC5kYkluZm8uZGJpbmZvID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtQXBwLmRiSW5mby50YWJsZU5hbWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBjbUFwcC5kYkluZm8ucGVybWlzc2lvbl9jb2RlID0gJzIyMjIyJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtQXBwLnRvYXN0Lm1lc3NhZ2UgPSBlLm1lc3NhZ2UgKyAnOicgKyBlLmVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtQXBwLnRvYXN0LnNob3dFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICQodGhpcykuYWpheFN1Ym1pdChvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KSh3aW5kb3cuY21BcHAgPSB3aW5kb3cuY21BcHAgfHwge30pO1xuIl19
