!function(e,t,s,n){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(r){var i,a=e(this),o=a.selector||"",c=(new Date).getTime(),u=[],l=arguments[0],d="string"==typeof l,f=[].slice.call(arguments,1);return e(this).each(function(){var g,h=e.isPlainObject(r)?e.extend(!0,{},e.fn.search.settings,r):e.extend({},e.fn.search.settings),p=h.className,v=h.metadata,m=h.regExp,b=h.fields,y=h.selector,R=h.error,C=h.namespace,w="."+C,x=C+"-module",j=e(this),k=j.find(y.prompt),A=j.find(y.searchButton),E=j.find(y.results),q=j.find(y.result),F=j.find(y.category),S=this,T=j.data(x),D=!1;g={initialize:function(){g.verbose("Initializing module"),g.determine.searchFields(),g.bind.events(),g.set.type(),g.create.results(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),T=g,j.data(x,g)},destroy:function(){g.verbose("Destroying instance"),j.off(w).removeData(x)},refresh:function(){g.debug("Refreshing selector cache"),k=j.find(y.prompt),A=j.find(y.searchButton),F=j.find(y.category),E=j.find(y.results),q=j.find(y.result)},refreshResults:function(){E=j.find(y.results),q=j.find(y.result)},bind:{events:function(){g.verbose("Binding events to search"),h.automatic&&(j.on(g.get.inputEvent()+w,y.prompt,g.event.input),k.attr("autocomplete","off")),j.on("focus"+w,y.prompt,g.event.focus).on("blur"+w,y.prompt,g.event.blur).on("keydown"+w,y.prompt,g.handleKeyboard).on("click"+w,y.searchButton,g.query).on("mousedown"+w,y.results,g.event.result.mousedown).on("mouseup"+w,y.results,g.event.result.mouseup).on("click"+w,y.result,g.event.result.click)}},determine:{searchFields:function(){r&&r.searchFields!==n&&(h.searchFields=r.searchFields)}},event:{input:function(){clearTimeout(g.timer),g.timer=setTimeout(g.query,h.searchDelay)},focus:function(){g.set.focus(),g.has.minimumCharacters()&&(g.query(),g.can.show()&&g.showResults())},blur:function(e){var t=s.activeElement===this,n=function(){g.cancel.query(),g.remove.focus(),g.timer=setTimeout(g.hideResults,h.hideDelay)};t||(g.resultsClicked?(g.debug("Determining if user action caused search to close"),j.one("click.close"+w,y.results,function(e){return g.is.inMessage(e)||D?void k.focus():(D=!1,void(g.is.animating()||g.is.hidden()||n()))})):(g.debug("Input blurred without user action, closing results"),n()))},result:{mousedown:function(){g.resultsClicked=!0},mouseup:function(){g.resultsClicked=!1},click:function(s){g.debug("Search result selected");var n=e(this),r=n.find(y.title).eq(0),i=n.is("a[href]")?n:n.find("a[href]").eq(0),a=i.attr("href")||!1,o=i.attr("target")||!1,c=(r.html(),r.length>0&&r.text()),u=g.get.results(),l=n.data(v.result)||g.get.result(c,u);return e.isFunction(h.onSelect)&&h.onSelect.call(S,l,u)===!1?(g.debug("Custom onSelect callback cancelled default select action"),void(D=!0)):(g.hideResults(),c&&g.set.value(c),void(a&&(g.verbose("Opening search link found in result",i),"_blank"==o||s.ctrlKey?t.open(a):t.location.href=a)))}}},handleKeyboard:function(e){var t,s=j.find(y.result),n=j.find(y.category),r=s.filter("."+p.active),i=s.index(r),a=s.length,o=r.length>0,c=e.which,u={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40};if(c==u.escape&&(g.verbose("Escape key pressed, blurring search field"),g.trigger.blur()),g.is.visible())if(c==u.enter){if(g.verbose("Enter key pressed, selecting active result"),s.filter("."+p.active).length>0)return g.event.result.click.call(s.filter("."+p.active),e),e.preventDefault(),!1}else c==u.upArrow&&o?(g.verbose("Up key pressed, changing active result"),t=i-1<0?i:i-1,n.removeClass(p.active),s.removeClass(p.active).eq(t).addClass(p.active).closest(n).addClass(p.active),e.preventDefault()):c==u.downArrow&&(g.verbose("Down key pressed, changing active result"),t=i+1>=a?i:i+1,n.removeClass(p.active),s.removeClass(p.active).eq(t).addClass(p.active).closest(n).addClass(p.active),e.preventDefault());else c==u.enter&&(g.verbose("Enter key pressed, executing query"),g.query(),g.set.buttonPressed(),k.one("keyup",g.remove.buttonFocus))},setup:{api:function(t){var s={debug:h.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){g.parse.response.call(S,e,t)},onAbort:function(e){},onFailure:function(){g.displayMessage(R.serverError)},onError:g.error};e.extend(!0,s,h.apiSettings),g.verbose("Setting up API request",s),j.api(s)}},can:{useAPI:function(){return e.fn.api!==n},show:function(){return g.is.focused()&&!g.is.visible()&&!g.is.empty()},transition:function(){return h.transition&&e.fn.transition!==n&&j.transition("is supported")}},is:{animating:function(){return E.hasClass(p.animating)},hidden:function(){return E.hasClass(p.hidden)},inMessage:function(t){if(t.target){var n=e(t.target),r=e.contains(s.documentElement,t.target);return r&&n.closest(y.message).length>0}},empty:function(){return""===E.html()},visible:function(){return E.filter(":visible").length>0},focused:function(){return k.filter(":focus").length>0}},trigger:{blur:function(){var e=s.createEvent("HTMLEvents"),t=k[0];t&&(g.verbose("Triggering native blur event"),e.initEvent("blur",!1,!1),t.dispatchEvent(e))}},get:{inputEvent:function(){var e=k[0],t=e!==n&&e.oninput!==n?"input":e!==n&&e.onpropertychange!==n?"propertychange":"keyup";return t},value:function(){return k.val()},results:function(){var e=j.data(v.results);return e},result:function(t,s){var r=["title","id"],i=!1;return t=t!==n?t:g.get.value(),s=s!==n?s:g.get.results(),"category"===h.type?(g.debug("Finding result that matches",t),e.each(s,function(s,n){if(e.isArray(n.results)&&(i=g.search.object(t,n.results,r)[0]))return!1})):(g.debug("Finding result in results object",t),i=g.search.object(t,s,r)[0]),i||!1}},select:{firstResult:function(){g.verbose("Selecting first result"),q.first().addClass(p.active)}},set:{focus:function(){j.addClass(p.focus)},loading:function(){j.addClass(p.loading)},value:function(e){g.verbose("Setting search input value",e),k.val(e)},type:function(e){e=e||h.type,"category"==h.type&&j.addClass(h.type)},buttonPressed:function(){A.addClass(p.pressed)}},remove:{loading:function(){j.removeClass(p.loading)},focus:function(){j.removeClass(p.focus)},buttonPressed:function(){A.removeClass(p.pressed)}},query:function(){var t=g.get.value(),s=g.read.cache(t);g.has.minimumCharacters()?(s?(g.debug("Reading result from cache",t),g.save.results(s.results),g.addResults(s.html),g.inject.id(s.results)):(g.debug("Querying for",t),e.isPlainObject(h.source)||e.isArray(h.source)?g.search.local(t):g.can.useAPI()?g.search.remote(t):g.error(R.source)),h.onSearchQuery.call(S,t)):g.hideResults()},search:{local:function(e){var t,s=g.search.object(e,h.content);g.set.loading(),g.save.results(s),g.debug("Returned local search results",s),t=g.generateResults({results:s}),g.remove.loading(),g.addResults(t),g.inject.id(s),g.write.cache(e,{html:t,results:s})},remote:function(e){j.api("is loading")&&j.api("abort"),g.setup.api(e),j.api("query")},object:function(t,s,r){var i=[],a=[],o=t.toString().replace(m.escape,"\\$&"),c=new RegExp(m.beginsWith+o,"i"),u=function(t,s){var n=e.inArray(s,i)==-1,r=e.inArray(s,a)==-1;n&&r&&t.push(s)};return s=s||h.source,r=r!==n?r:h.searchFields,e.isArray(r)||(r=[r]),s===n||s===!1?(g.error(R.source),[]):(e.each(r,function(n,r){e.each(s,function(e,s){var n="string"==typeof s[r];n&&(s[r].search(c)!==-1?u(i,s):h.searchFullText&&g.fuzzySearch(t,s[r])&&u(a,s))})}),e.merge(i,a))}},fuzzySearch:function(e,t){var s=t.length,n=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),n>s)return!1;if(n===s)return e===t;e:for(var r=0,i=0;r<n;r++){for(var a=e.charCodeAt(r);i<s;)if(t.charCodeAt(i++)===a)continue e;return!1}return!0},parse:{response:function(e,t){var s=g.generateResults(e);g.verbose("Parsing server response",e),e!==n&&t!==n&&e[b.results]!==n&&(g.addResults(s),g.inject.id(e[b.results]),g.write.cache(t,{html:s,results:e[b.results]}),g.save.results(e[b.results]))}},cancel:{query:function(){g.can.useAPI()&&j.api("abort")}},has:{minimumCharacters:function(){var e=g.get.value(),t=e.length;return t>=h.minCharacters}},clear:{cache:function(e){var t=j.data(v.cache);e?e&&t&&t[e]&&(g.debug("Removing value from cache",e),delete t[e],j.data(v.cache,t)):(g.debug("Clearing cache",e),j.removeData(v.cache))}},read:{cache:function(e){var t=j.data(v.cache);return!!h.cache&&(g.verbose("Checking cache for generated html for query",e),"object"==typeof t&&t[e]!==n&&t[e])}},create:{id:function(e,t){var s,r,i=e+1;return t!==n?(s=String.fromCharCode(97+t),r=s+i,g.verbose("Creating category result id",r)):(r=i,g.verbose("Creating result id",r)),r},results:function(){0===E.length&&(E=e("<div />").addClass(p.results).appendTo(j))}},inject:{result:function(e,t,s){g.verbose("Injecting result into results");var r=s!==n?E.children().eq(s).children(y.result).eq(t):E.children(y.result).eq(t);g.verbose("Injecting results metadata",r),r.data(v.result,e)},id:function(t){g.debug("Injecting unique ids into results");var s=0,r=0;return"category"===h.type?e.each(t,function(t,i){r=0,e.each(i.results,function(e,t){var a=i.results[e];a.id===n&&(a.id=g.create.id(r,s)),g.inject.result(a,r,s),r++}),s++}):e.each(t,function(e,s){var i=t[e];i.id===n&&(i.id=g.create.id(r)),g.inject.result(i,r),r++}),t}},save:{results:function(e){g.verbose("Saving current search results to metadata",e),j.data(v.results,e)}},write:{cache:function(e,t){var s=j.data(v.cache)!==n?j.data(v.cache):{};h.cache&&(g.verbose("Writing generated html to cache",e,t),s[e]=t,j.data(v.cache,s))}},addResults:function(t){return e.isFunction(h.onResultsAdd)&&h.onResultsAdd.call(E,t)===!1?(g.debug("onResultsAdd callback cancelled default action"),!1):void(t?(E.html(t),g.refreshResults(),h.selectFirstResult&&g.select.firstResult(),g.showResults()):g.hideResults())},showResults:function(){g.is.visible()||(g.can.transition()?(g.debug("Showing results with css animations"),E.transition({animation:h.transition+" in",debug:h.debug,verbose:h.verbose,duration:h.duration,queue:!0})):(g.debug("Showing results with javascript"),E.stop().fadeIn(h.duration,h.easing)),h.onResultsOpen.call(E))},hideResults:function(){g.is.visible()&&(g.can.transition()?(g.debug("Hiding results with css animations"),E.transition({animation:h.transition+" out",debug:h.debug,verbose:h.verbose,duration:h.duration,queue:!0})):(g.debug("Hiding results with javascript"),E.stop().fadeOut(h.duration,h.easing)),h.onResultsClose.call(E))},generateResults:function(t){g.debug("Generating html from response",t);var s=h.templates[h.type],n=e.isPlainObject(t[b.results])&&!e.isEmptyObject(t[b.results]),r=e.isArray(t[b.results])&&t[b.results].length>0,i="";return n||r?(h.maxResults>0&&(n?"standard"==h.type&&g.error(R.maxResults):t[b.results]=t[b.results].slice(0,h.maxResults)),e.isFunction(s)?i=s(t,b):g.error(R.noTemplate,!1)):h.showNoResults&&(i=g.displayMessage(R.noResults,"empty")),h.onResults.call(S,t),i},displayMessage:function(e,t){return t=t||"standard",g.debug("Displaying message",e,t),g.addResults(h.templates.message(e,t)),h.templates.message(e,t)},setting:function(t,s){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(s===n)return h[t];h[t]=s}},internal:function(t,s){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(s===n)return g[t];g[t]=s}},debug:function(){!h.silent&&h.debug&&(h.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,h.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),g.verbose.apply(console,arguments)))},error:function(){h.silent||(g.error=Function.prototype.bind.call(console.error,console,h.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,s,n;h.performance&&(t=(new Date).getTime(),n=c||t,s=t-n,c=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":s})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=h.name+":",s=0;c=!1,clearTimeout(g.performance.timer),e.each(u,function(e,t){s+=t["Execution Time"]}),t+=" "+s+"ms",o&&(t+=" '"+o+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==n||console.table!==n)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,s,r){var a,o,c,u=T;return s=s||f,r=S||r,"string"==typeof t&&u!==n&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(s,r){var i=s!=a?r+t[s+1].charAt(0).toUpperCase()+t[s+1].slice(1):t;if(e.isPlainObject(u[i])&&s!=a)u=u[i];else{if(u[i]!==n)return o=u[i],!1;if(!e.isPlainObject(u[r])||s==a)return u[r]!==n&&(o=u[r],!1);u=u[r]}})),e.isFunction(o)?c=o.apply(r,s):o!==n&&(c=o),e.isArray(i)?i.push(c):i!==n?i=[i,c]:c!==n&&(i=c),o}},d?(T===n&&g.initialize(),g.invoke(l)):(T!==n&&T.invoke("destroy"),g.initialize())}),i!==n?i:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t=/[&<>"'`]/g,s=/[&<>"'`]/,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=function(e){return n[e]};return s.test(e)?e.replace(t,r):e},message:function(e,t){var s="";return e!==n&&t!==n&&(s+='<div class="message '+t+'">',s+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",s+="</div>"),s},category:function(t,s){var r="";e.fn.search.settings.templates.escape;return t[s.categoryResults]!==n&&(e.each(t[s.categoryResults],function(t,i){i[s.results]!==n&&i.results.length>0&&(r+='<div class="category">',i[s.categoryName]!==n&&(r+='<div class="name">'+i[s.categoryName]+"</div>"),e.each(i.results,function(e,t){r+=t[s.url]?'<a class="result" href="'+t[s.url]+'">':'<a class="result">',t[s.image]!==n&&(r+='<div class="image"> <img src="'+t[s.image]+'"></div>'),r+='<div class="content">',t[s.price]!==n&&(r+='<div class="price">'+t[s.price]+"</div>"),t[s.title]!==n&&(r+='<div class="title">'+t[s.title]+"</div>"),t[s.description]!==n&&(r+='<div class="description">'+t[s.description]+"</div>"),r+="</div>",r+="</a>"}),r+="</div>")}),t[s.action]&&(r+='<a href="'+t[s.action][s.actionURL]+'" class="action">'+t[s.action][s.actionText]+"</a>"),r)},standard:function(t,s){var r="";return t[s.results]!==n&&(e.each(t[s.results],function(e,t){r+=t[s.url]?'<a class="result" href="'+t[s.url]+'">':'<a class="result">',t[s.image]!==n&&(r+='<div class="image"> <img src="'+t[s.image]+'"></div>'),r+='<div class="content">',t[s.price]!==n&&(r+='<div class="price">'+t[s.price]+"</div>"),t[s.title]!==n&&(r+='<div class="title">'+t[s.title]+"</div>"),t[s.description]!==n&&(r+='<div class="description">'+t[s.description]+"</div>"),r+="</div>",r+="</a>"}),t[s.action]&&(r+='<a href="'+t[s.action][s.actionURL]+'" class="action">'+t[s.action][s.actionText]+"</a>"),r)}}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9zZWFyY2guanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwiTWF0aCIsInNlbGYiLCJGdW5jdGlvbiIsImZuIiwic2VhcmNoIiwicGFyYW1ldGVycyIsInJldHVybmVkVmFsdWUiLCIkYWxsTW9kdWxlcyIsInRoaXMiLCJtb2R1bGVTZWxlY3RvciIsInNlbGVjdG9yIiwidGltZSIsIkRhdGUiLCJnZXRUaW1lIiwicGVyZm9ybWFuY2UiLCJxdWVyeSIsImFyZ3VtZW50cyIsIm1ldGhvZEludm9rZWQiLCJxdWVyeUFyZ3VtZW50cyIsInNsaWNlIiwiY2FsbCIsImVhY2giLCJtb2R1bGUiLCJzZXR0aW5ncyIsImlzUGxhaW5PYmplY3QiLCJleHRlbmQiLCJjbGFzc05hbWUiLCJtZXRhZGF0YSIsInJlZ0V4cCIsImZpZWxkcyIsImVycm9yIiwibmFtZXNwYWNlIiwiZXZlbnROYW1lc3BhY2UiLCJtb2R1bGVOYW1lc3BhY2UiLCIkbW9kdWxlIiwiJHByb21wdCIsImZpbmQiLCJwcm9tcHQiLCIkc2VhcmNoQnV0dG9uIiwic2VhcmNoQnV0dG9uIiwiJHJlc3VsdHMiLCJyZXN1bHRzIiwiJHJlc3VsdCIsInJlc3VsdCIsIiRjYXRlZ29yeSIsImNhdGVnb3J5IiwiZWxlbWVudCIsImluc3RhbmNlIiwiZGF0YSIsImRpc2FibGVkQnViYmxlZCIsImluaXRpYWxpemUiLCJ2ZXJib3NlIiwiZGV0ZXJtaW5lIiwic2VhcmNoRmllbGRzIiwiYmluZCIsImV2ZW50cyIsInNldCIsInR5cGUiLCJjcmVhdGUiLCJpbnN0YW50aWF0ZSIsImRlc3Ryb3kiLCJvZmYiLCJyZW1vdmVEYXRhIiwicmVmcmVzaCIsImRlYnVnIiwicmVmcmVzaFJlc3VsdHMiLCJhdXRvbWF0aWMiLCJvbiIsImdldCIsImlucHV0RXZlbnQiLCJldmVudCIsImlucHV0IiwiYXR0ciIsImZvY3VzIiwiYmx1ciIsImhhbmRsZUtleWJvYXJkIiwibW91c2Vkb3duIiwibW91c2V1cCIsImNsaWNrIiwiY2xlYXJUaW1lb3V0IiwidGltZXIiLCJzZXRUaW1lb3V0Iiwic2VhcmNoRGVsYXkiLCJoYXMiLCJtaW5pbXVtQ2hhcmFjdGVycyIsImNhbiIsInNob3ciLCJzaG93UmVzdWx0cyIsInBhZ2VMb3N0Rm9jdXMiLCJhY3RpdmVFbGVtZW50IiwiY2FsbGJhY2siLCJjYW5jZWwiLCJyZW1vdmUiLCJoaWRlUmVzdWx0cyIsImhpZGVEZWxheSIsInJlc3VsdHNDbGlja2VkIiwib25lIiwiaXMiLCJpbk1lc3NhZ2UiLCJhbmltYXRpbmciLCJoaWRkZW4iLCIkdGl0bGUiLCJ0aXRsZSIsImVxIiwiJGxpbmsiLCJocmVmIiwidGFyZ2V0IiwidmFsdWUiLCJodG1sIiwibGVuZ3RoIiwidGV4dCIsImlzRnVuY3Rpb24iLCJvblNlbGVjdCIsImN0cmxLZXkiLCJvcGVuIiwibG9jYXRpb24iLCJuZXdJbmRleCIsIiRhY3RpdmVSZXN1bHQiLCJmaWx0ZXIiLCJhY3RpdmUiLCJjdXJyZW50SW5kZXgiLCJpbmRleCIsInJlc3VsdFNpemUiLCJoYXNBY3RpdmVSZXN1bHQiLCJrZXlDb2RlIiwid2hpY2giLCJrZXlzIiwiYmFja3NwYWNlIiwiZW50ZXIiLCJlc2NhcGUiLCJ1cEFycm93IiwiZG93bkFycm93IiwidHJpZ2dlciIsInZpc2libGUiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjbG9zZXN0IiwiYnV0dG9uUHJlc3NlZCIsImJ1dHRvbkZvY3VzIiwic2V0dXAiLCJhcGkiLCJzZWFyY2hUZXJtIiwiYXBpU2V0dGluZ3MiLCJjYWNoZSIsImFjdGlvbiIsInVybERhdGEiLCJvblN1Y2Nlc3MiLCJyZXNwb25zZSIsInBhcnNlIiwib25BYm9ydCIsIm9uRmFpbHVyZSIsImRpc3BsYXlNZXNzYWdlIiwic2VydmVyRXJyb3IiLCJvbkVycm9yIiwidXNlQVBJIiwiZm9jdXNlZCIsImVtcHR5IiwidHJhbnNpdGlvbiIsImhhc0NsYXNzIiwiJHRhcmdldCIsImlzSW5ET00iLCJjb250YWlucyIsImRvY3VtZW50RWxlbWVudCIsIm1lc3NhZ2UiLCJjcmVhdGVFdmVudCIsInByb21wdEVsZW1lbnQiLCJpbml0RXZlbnQiLCJkaXNwYXRjaEV2ZW50Iiwib25pbnB1dCIsIm9ucHJvcGVydHljaGFuZ2UiLCJ2YWwiLCJsb29rdXBGaWVsZHMiLCJpc0FycmF5Iiwib2JqZWN0Iiwic2VsZWN0IiwiZmlyc3RSZXN1bHQiLCJmaXJzdCIsImxvYWRpbmciLCJwcmVzc2VkIiwicmVhZCIsInNhdmUiLCJhZGRSZXN1bHRzIiwiaW5qZWN0IiwiaWQiLCJzb3VyY2UiLCJsb2NhbCIsInJlbW90ZSIsIm9uU2VhcmNoUXVlcnkiLCJzZWFyY2hIVE1MIiwiY29udGVudCIsImdlbmVyYXRlUmVzdWx0cyIsIndyaXRlIiwiZnV6enlSZXN1bHRzIiwic2VhcmNoRXhwIiwidG9TdHJpbmciLCJyZXBsYWNlIiwibWF0Y2hSZWdFeHAiLCJSZWdFeHAiLCJiZWdpbnNXaXRoIiwiYWRkUmVzdWx0IiwiYXJyYXkiLCJub3RSZXN1bHQiLCJpbkFycmF5Iiwibm90RnV6enlSZXN1bHQiLCJwdXNoIiwiZmllbGQiLCJsYWJlbCIsImZpZWxkRXhpc3RzIiwic2VhcmNoRnVsbFRleHQiLCJmdXp6eVNlYXJjaCIsIm1lcmdlIiwidGVybSIsInRlcm1MZW5ndGgiLCJxdWVyeUxlbmd0aCIsInRvTG93ZXJDYXNlIiwiY2hhcmFjdGVySW5kZXgiLCJuZXh0Q2hhcmFjdGVySW5kZXgiLCJxdWVyeUNoYXJhY3RlciIsImNoYXJDb2RlQXQiLCJudW1DaGFyYWN0ZXJzIiwibWluQ2hhcmFjdGVycyIsImNsZWFyIiwibmFtZSIsInJlc3VsdEluZGV4IiwiY2F0ZWdvcnlJbmRleCIsImxldHRlcklEIiwicmVzdWx0SUQiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJhcHBlbmRUbyIsIiRzZWxlY3RlZFJlc3VsdCIsImNoaWxkcmVuIiwib25SZXN1bHRzQWRkIiwic2VsZWN0Rmlyc3RSZXN1bHQiLCJhbmltYXRpb24iLCJkdXJhdGlvbiIsInF1ZXVlIiwic3RvcCIsImZhZGVJbiIsImVhc2luZyIsIm9uUmVzdWx0c09wZW4iLCJmYWRlT3V0Iiwib25SZXN1bHRzQ2xvc2UiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlcyIsImlzUHJvcGVyT2JqZWN0IiwiaXNFbXB0eU9iamVjdCIsImlzUHJvcGVyQXJyYXkiLCJtYXhSZXN1bHRzIiwibm9UZW1wbGF0ZSIsInNob3dOb1Jlc3VsdHMiLCJub1Jlc3VsdHMiLCJvblJlc3VsdHMiLCJzZXR0aW5nIiwiaW50ZXJuYWwiLCJzaWxlbnQiLCJsb2ciLCJwcm90b3R5cGUiLCJjb25zb2xlIiwiaW5mbyIsImFwcGx5IiwiY3VycmVudFRpbWUiLCJleGVjdXRpb25UaW1lIiwicHJldmlvdXNUaW1lIiwiTmFtZSIsIkFyZ3VtZW50cyIsIkVsZW1lbnQiLCJFeGVjdXRpb24gVGltZSIsImRpc3BsYXkiLCJ0b3RhbFRpbWUiLCJncm91cCIsInRhYmxlIiwiZ3JvdXBDb2xsYXBzZWQiLCJncm91cEVuZCIsImludm9rZSIsInBhc3NlZEFyZ3VtZW50cyIsImNvbnRleHQiLCJtYXhEZXB0aCIsImZvdW5kIiwic3BsaXQiLCJkZXB0aCIsImNhbWVsQ2FzZVZhbHVlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJkaXNwbGF5RmllbGQiLCJsb2dnaW5nIiwibm9FbmRwb2ludCIsIm1ldGhvZCIsImNhdGVnb3JpZXMiLCJjYXRlZ29yeU5hbWUiLCJjYXRlZ29yeVJlc3VsdHMiLCJkZXNjcmlwdGlvbiIsImltYWdlIiwicHJpY2UiLCJ1cmwiLCJhY3Rpb25UZXh0IiwiYWN0aW9uVVJMIiwic3RyaW5nIiwiYmFkQ2hhcnMiLCJzaG91bGRFc2NhcGUiLCImIiwiPCIsIj4iLCJcIiIsIiciLCJgIiwiZXNjYXBlZENoYXIiLCJjaHIiLCJ0ZXN0Iiwic3RhbmRhcmQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQVVDLFNBQVdBLEVBQUdDLEVBQVFDLEVBQVVDLEdBRWpDLFlBRUFGLEdBQTJCLG1CQUFW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LEVBQU9kLEVBQU91USxlQUFpQnJTLElBQ2hDNkcsR0FBUSw0QkFBOEJqRSxFQUFPZCxFQUFPdVEsYUFBZSxVQUVyRXhMLEdBQVMsU0FHVEEsR0FBUSxTQUdQd0MsRUFBU3ZILEVBQU9vSCxVQUNqQnJDLEdBQVEsWUFDUXdDLEVBQVN2SCxFQUFPb0gsUUFBUXBILEVBQU80USxXQUFhLG9CQUN4RHJKLEVBQVN2SCxFQUFPb0gsUUFBUXBILEVBQU8yUSxZQUNqQyxRQUVHNUwsT0FPWDJNLE9BQVExVCxPQUFRQyIsImZpbGUiOiJ2ZW5kb3Ivc2VhcmNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAjIFNlbWFudGljIFVJIDIuMi43IC0gU2VhcmNoXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9zZW1hbnRpYy1vcmcvc2VtYW50aWMtdWkvXG4gKlxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICpcbiAqL1xuXG47KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbndpbmRvdyA9ICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGgpXG4gID8gd2luZG93XG4gIDogKHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoKVxuICAgID8gc2VsZlxuICAgIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKVxuO1xuXG4kLmZuLnNlYXJjaCA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgdmFyXG4gICAgJGFsbE1vZHVsZXMgICAgID0gJCh0aGlzKSxcbiAgICBtb2R1bGVTZWxlY3RvciAgPSAkYWxsTW9kdWxlcy5zZWxlY3RvciB8fCAnJyxcblxuICAgIHRpbWUgICAgICAgICAgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgIHBlcmZvcm1hbmNlICAgICA9IFtdLFxuXG4gICAgcXVlcnkgICAgICAgICAgID0gYXJndW1lbnRzWzBdLFxuICAgIG1ldGhvZEludm9rZWQgICA9ICh0eXBlb2YgcXVlcnkgPT0gJ3N0cmluZycpLFxuICAgIHF1ZXJ5QXJndW1lbnRzICA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcbiAgICByZXR1cm5lZFZhbHVlXG4gIDtcbiAgJCh0aGlzKVxuICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyXG4gICAgICAgIHNldHRpbmdzICAgICAgICAgID0gKCAkLmlzUGxhaW5PYmplY3QocGFyYW1ldGVycykgKVxuICAgICAgICAgID8gJC5leHRlbmQodHJ1ZSwge30sICQuZm4uc2VhcmNoLnNldHRpbmdzLCBwYXJhbWV0ZXJzKVxuICAgICAgICAgIDogJC5leHRlbmQoe30sICQuZm4uc2VhcmNoLnNldHRpbmdzKSxcblxuICAgICAgICBjbGFzc05hbWUgICAgICAgPSBzZXR0aW5ncy5jbGFzc05hbWUsXG4gICAgICAgIG1ldGFkYXRhICAgICAgICA9IHNldHRpbmdzLm1ldGFkYXRhLFxuICAgICAgICByZWdFeHAgICAgICAgICAgPSBzZXR0aW5ncy5yZWdFeHAsXG4gICAgICAgIGZpZWxkcyAgICAgICAgICA9IHNldHRpbmdzLmZpZWxkcyxcbiAgICAgICAgc2VsZWN0b3IgICAgICAgID0gc2V0dGluZ3Muc2VsZWN0b3IsXG4gICAgICAgIGVycm9yICAgICAgICAgICA9IHNldHRpbmdzLmVycm9yLFxuICAgICAgICBuYW1lc3BhY2UgICAgICAgPSBzZXR0aW5ncy5uYW1lc3BhY2UsXG5cbiAgICAgICAgZXZlbnROYW1lc3BhY2UgID0gJy4nICsgbmFtZXNwYWNlLFxuICAgICAgICBtb2R1bGVOYW1lc3BhY2UgPSBuYW1lc3BhY2UgKyAnLW1vZHVsZScsXG5cbiAgICAgICAgJG1vZHVsZSAgICAgICAgID0gJCh0aGlzKSxcbiAgICAgICAgJHByb21wdCAgICAgICAgID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLnByb21wdCksXG4gICAgICAgICRzZWFyY2hCdXR0b24gICA9ICRtb2R1bGUuZmluZChzZWxlY3Rvci5zZWFyY2hCdXR0b24pLFxuICAgICAgICAkcmVzdWx0cyAgICAgICAgPSAkbW9kdWxlLmZpbmQoc2VsZWN0b3IucmVzdWx0cyksXG4gICAgICAgICRyZXN1bHQgICAgICAgICA9ICRtb2R1bGUuZmluZChzZWxlY3Rvci5yZXN1bHQpLFxuICAgICAgICAkY2F0ZWdvcnkgICAgICAgPSAkbW9kdWxlLmZpbmQoc2VsZWN0b3IuY2F0ZWdvcnkpLFxuXG4gICAgICAgIGVsZW1lbnQgICAgICAgICA9IHRoaXMsXG4gICAgICAgIGluc3RhbmNlICAgICAgICA9ICRtb2R1bGUuZGF0YShtb2R1bGVOYW1lc3BhY2UpLFxuXG4gICAgICAgIGRpc2FibGVkQnViYmxlZCA9IGZhbHNlLFxuXG4gICAgICAgIG1vZHVsZVxuICAgICAgO1xuXG4gICAgICBtb2R1bGUgPSB7XG5cbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0luaXRpYWxpemluZyBtb2R1bGUnKTtcbiAgICAgICAgICBtb2R1bGUuZGV0ZXJtaW5lLnNlYXJjaEZpZWxkcygpO1xuICAgICAgICAgIG1vZHVsZS5iaW5kLmV2ZW50cygpO1xuICAgICAgICAgIG1vZHVsZS5zZXQudHlwZSgpO1xuICAgICAgICAgIG1vZHVsZS5jcmVhdGUucmVzdWx0cygpO1xuICAgICAgICAgIG1vZHVsZS5pbnN0YW50aWF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBpbnN0YW50aWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1N0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlJywgbW9kdWxlKTtcbiAgICAgICAgICBpbnN0YW5jZSA9IG1vZHVsZTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAuZGF0YShtb2R1bGVOYW1lc3BhY2UsIG1vZHVsZSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdEZXN0cm95aW5nIGluc3RhbmNlJyk7XG4gICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgLm9mZihldmVudE5hbWVzcGFjZSlcbiAgICAgICAgICAgIC5yZW1vdmVEYXRhKG1vZHVsZU5hbWVzcGFjZSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdSZWZyZXNoaW5nIHNlbGVjdG9yIGNhY2hlJyk7XG4gICAgICAgICAgJHByb21wdCAgICAgICAgID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLnByb21wdCk7XG4gICAgICAgICAgJHNlYXJjaEJ1dHRvbiAgID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLnNlYXJjaEJ1dHRvbik7XG4gICAgICAgICAgJGNhdGVnb3J5ICAgICAgID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLmNhdGVnb3J5KTtcbiAgICAgICAgICAkcmVzdWx0cyAgICAgICAgPSAkbW9kdWxlLmZpbmQoc2VsZWN0b3IucmVzdWx0cyk7XG4gICAgICAgICAgJHJlc3VsdCAgICAgICAgID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLnJlc3VsdCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVmcmVzaFJlc3VsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRyZXN1bHRzID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLnJlc3VsdHMpO1xuICAgICAgICAgICRyZXN1bHQgID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLnJlc3VsdCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYmluZDoge1xuICAgICAgICAgIGV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQmluZGluZyBldmVudHMgdG8gc2VhcmNoJyk7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5hdXRvbWF0aWMpIHtcbiAgICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAgIC5vbihtb2R1bGUuZ2V0LmlucHV0RXZlbnQoKSArIGV2ZW50TmFtZXNwYWNlLCBzZWxlY3Rvci5wcm9tcHQsIG1vZHVsZS5ldmVudC5pbnB1dClcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAkcHJvbXB0XG4gICAgICAgICAgICAgICAgLmF0dHIoJ2F1dG9jb21wbGV0ZScsICdvZmYnKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC8vIHByb21wdFxuICAgICAgICAgICAgICAub24oJ2ZvY3VzJyAgICAgKyBldmVudE5hbWVzcGFjZSwgc2VsZWN0b3IucHJvbXB0LCBtb2R1bGUuZXZlbnQuZm9jdXMpXG4gICAgICAgICAgICAgIC5vbignYmx1cicgICAgICArIGV2ZW50TmFtZXNwYWNlLCBzZWxlY3Rvci5wcm9tcHQsIG1vZHVsZS5ldmVudC5ibHVyKVxuICAgICAgICAgICAgICAub24oJ2tleWRvd24nICAgKyBldmVudE5hbWVzcGFjZSwgc2VsZWN0b3IucHJvbXB0LCBtb2R1bGUuaGFuZGxlS2V5Ym9hcmQpXG4gICAgICAgICAgICAgIC8vIHNlYXJjaCBidXR0b25cbiAgICAgICAgICAgICAgLm9uKCdjbGljaycgICAgICsgZXZlbnROYW1lc3BhY2UsIHNlbGVjdG9yLnNlYXJjaEJ1dHRvbiwgbW9kdWxlLnF1ZXJ5KVxuICAgICAgICAgICAgICAvLyByZXN1bHRzXG4gICAgICAgICAgICAgIC5vbignbW91c2Vkb3duJyArIGV2ZW50TmFtZXNwYWNlLCBzZWxlY3Rvci5yZXN1bHRzLCBtb2R1bGUuZXZlbnQucmVzdWx0Lm1vdXNlZG93bilcbiAgICAgICAgICAgICAgLm9uKCdtb3VzZXVwJyAgICsgZXZlbnROYW1lc3BhY2UsIHNlbGVjdG9yLnJlc3VsdHMsIG1vZHVsZS5ldmVudC5yZXN1bHQubW91c2V1cClcbiAgICAgICAgICAgICAgLm9uKCdjbGljaycgICAgICsgZXZlbnROYW1lc3BhY2UsIHNlbGVjdG9yLnJlc3VsdCwgIG1vZHVsZS5ldmVudC5yZXN1bHQuY2xpY2spXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRldGVybWluZToge1xuICAgICAgICAgIHNlYXJjaEZpZWxkczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyB0aGlzIG1ha2VzIHN1cmUgJC5leHRlbmQgZG9lcyBub3QgYWRkIHNwZWNpZmllZCBzZWFyY2ggZmllbGRzIHRvIGRlZmF1bHQgZmllbGRzXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBvbmx5IHNldHRpbmcgd2hpY2ggc2hvdWxkIG5vdCBleHRlbmQgZGVmYXVsdHNcbiAgICAgICAgICAgIGlmKHBhcmFtZXRlcnMgJiYgcGFyYW1ldGVycy5zZWFyY2hGaWVsZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBzZXR0aW5ncy5zZWFyY2hGaWVsZHMgPSBwYXJhbWV0ZXJzLnNlYXJjaEZpZWxkcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnRpbWVyKTtcbiAgICAgICAgICAgIG1vZHVsZS50aW1lciA9IHNldFRpbWVvdXQobW9kdWxlLnF1ZXJ5LCBzZXR0aW5ncy5zZWFyY2hEZWxheSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb2N1czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUuc2V0LmZvY3VzKCk7XG4gICAgICAgICAgICBpZiggbW9kdWxlLmhhcy5taW5pbXVtQ2hhcmFjdGVycygpICkge1xuICAgICAgICAgICAgICBtb2R1bGUucXVlcnkoKTtcbiAgICAgICAgICAgICAgaWYoIG1vZHVsZS5jYW4uc2hvdygpICkge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5zaG93UmVzdWx0cygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBibHVyOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHBhZ2VMb3N0Rm9jdXMgPSAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrICAgICAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuY2FuY2VsLnF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIG1vZHVsZS50aW1lciA9IHNldFRpbWVvdXQobW9kdWxlLmhpZGVSZXN1bHRzLCBzZXR0aW5ncy5oaWRlRGVsYXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihwYWdlTG9zdEZvY3VzKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKG1vZHVsZS5yZXN1bHRzQ2xpY2tlZCkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0RldGVybWluaW5nIGlmIHVzZXIgYWN0aW9uIGNhdXNlZCBzZWFyY2ggdG8gY2xvc2UnKTtcbiAgICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAgIC5vbmUoJ2NsaWNrLmNsb3NlJyArIGV2ZW50TmFtZXNwYWNlLCBzZWxlY3Rvci5yZXN1bHRzLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgaWYobW9kdWxlLmlzLmluTWVzc2FnZShldmVudCkgfHwgZGlzYWJsZWRCdWJibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICRwcm9tcHQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWRCdWJibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBpZiggIW1vZHVsZS5pcy5hbmltYXRpbmcoKSAmJiAhbW9kdWxlLmlzLmhpZGRlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnSW5wdXQgYmx1cnJlZCB3aXRob3V0IHVzZXIgYWN0aW9uLCBjbG9zaW5nIHJlc3VsdHMnKTtcbiAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgbW91c2Vkb3duOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlc3VsdHNDbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3VzZXVwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlc3VsdHNDbGlja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2VhcmNoIHJlc3VsdCBzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAkdGl0bGUgID0gJHJlc3VsdC5maW5kKHNlbGVjdG9yLnRpdGxlKS5lcSgwKSxcbiAgICAgICAgICAgICAgICAkbGluayAgID0gJHJlc3VsdC5pcygnYVtocmVmXScpXG4gICAgICAgICAgICAgICAgICA/ICRyZXN1bHRcbiAgICAgICAgICAgICAgICAgIDogJHJlc3VsdC5maW5kKCdhW2hyZWZdJykuZXEoMCksXG4gICAgICAgICAgICAgICAgaHJlZiAgICA9ICRsaW5rLmF0dHIoJ2hyZWYnKSAgIHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRhcmdldCAgPSAkbGluay5hdHRyKCd0YXJnZXQnKSB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICB0aXRsZSAgID0gJHRpdGxlLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAvLyB0aXRsZSBpcyB1c2VkIGZvciByZXN1bHQgbG9va3VwXG4gICAgICAgICAgICAgICAgdmFsdWUgICA9ICgkdGl0bGUubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgID8gJHRpdGxlLnRleHQoKVxuICAgICAgICAgICAgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gbW9kdWxlLmdldC5yZXN1bHRzKCksXG4gICAgICAgICAgICAgICAgcmVzdWx0ICA9ICRyZXN1bHQuZGF0YShtZXRhZGF0YS5yZXN1bHQpIHx8IG1vZHVsZS5nZXQucmVzdWx0KHZhbHVlLCByZXN1bHRzKSxcbiAgICAgICAgICAgICAgICByZXR1cm5lZFZhbHVlXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgaWYoICQuaXNGdW5jdGlvbihzZXR0aW5ncy5vblNlbGVjdCkgKSB7XG4gICAgICAgICAgICAgICAgaWYoc2V0dGluZ3Mub25TZWxlY3QuY2FsbChlbGVtZW50LCByZXN1bHQsIHJlc3VsdHMpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdDdXN0b20gb25TZWxlY3QgY2FsbGJhY2sgY2FuY2VsbGVkIGRlZmF1bHQgc2VsZWN0IGFjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgZGlzYWJsZWRCdWJibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbW9kdWxlLmhpZGVSZXN1bHRzKCk7XG4gICAgICAgICAgICAgIGlmKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnNldC52YWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYoaHJlZikge1xuICAgICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdPcGVuaW5nIHNlYXJjaCBsaW5rIGZvdW5kIGluIHJlc3VsdCcsICRsaW5rKTtcbiAgICAgICAgICAgICAgICBpZih0YXJnZXQgPT0gJ19ibGFuaycgfHwgZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oaHJlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAoaHJlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVLZXlib2FyZDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIC8vIGZvcmNlIHNlbGVjdG9yIHJlZnJlc2hcbiAgICAgICAgICAgICRyZXN1bHQgICAgICAgICA9ICRtb2R1bGUuZmluZChzZWxlY3Rvci5yZXN1bHQpLFxuICAgICAgICAgICAgJGNhdGVnb3J5ICAgICAgID0gJG1vZHVsZS5maW5kKHNlbGVjdG9yLmNhdGVnb3J5KSxcbiAgICAgICAgICAgICRhY3RpdmVSZXN1bHQgICA9ICRyZXN1bHQuZmlsdGVyKCcuJyArIGNsYXNzTmFtZS5hY3RpdmUpLFxuICAgICAgICAgICAgY3VycmVudEluZGV4ICAgID0gJHJlc3VsdC5pbmRleCggJGFjdGl2ZVJlc3VsdCApLFxuICAgICAgICAgICAgcmVzdWx0U2l6ZSAgICAgID0gJHJlc3VsdC5sZW5ndGgsXG4gICAgICAgICAgICBoYXNBY3RpdmVSZXN1bHQgPSAkYWN0aXZlUmVzdWx0Lmxlbmd0aCA+IDAsXG5cbiAgICAgICAgICAgIGtleUNvZGUgICAgICAgICA9IGV2ZW50LndoaWNoLFxuICAgICAgICAgICAga2V5cyAgICAgICAgICAgID0ge1xuICAgICAgICAgICAgICBiYWNrc3BhY2UgOiA4LFxuICAgICAgICAgICAgICBlbnRlciAgICAgOiAxMyxcbiAgICAgICAgICAgICAgZXNjYXBlICAgIDogMjcsXG4gICAgICAgICAgICAgIHVwQXJyb3cgICA6IDM4LFxuICAgICAgICAgICAgICBkb3duQXJyb3cgOiA0MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5ld0luZGV4XG4gICAgICAgICAgO1xuICAgICAgICAgIC8vIHNlYXJjaCBzaG9ydGN1dHNcbiAgICAgICAgICBpZihrZXlDb2RlID09IGtleXMuZXNjYXBlKSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRXNjYXBlIGtleSBwcmVzc2VkLCBibHVycmluZyBzZWFyY2ggZmllbGQnKTtcbiAgICAgICAgICAgIG1vZHVsZS50cmlnZ2VyLmJsdXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoIG1vZHVsZS5pcy52aXNpYmxlKCkgKSB7XG4gICAgICAgICAgICBpZihrZXlDb2RlID09IGtleXMuZW50ZXIpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0VudGVyIGtleSBwcmVzc2VkLCBzZWxlY3RpbmcgYWN0aXZlIHJlc3VsdCcpO1xuICAgICAgICAgICAgICBpZiggJHJlc3VsdC5maWx0ZXIoJy4nICsgY2xhc3NOYW1lLmFjdGl2ZSkubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZXZlbnQucmVzdWx0LmNsaWNrLmNhbGwoJHJlc3VsdC5maWx0ZXIoJy4nICsgY2xhc3NOYW1lLmFjdGl2ZSksIGV2ZW50KTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihrZXlDb2RlID09IGtleXMudXBBcnJvdyAmJiBoYXNBY3RpdmVSZXN1bHQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1VwIGtleSBwcmVzc2VkLCBjaGFuZ2luZyBhY3RpdmUgcmVzdWx0Jyk7XG4gICAgICAgICAgICAgIG5ld0luZGV4ID0gKGN1cnJlbnRJbmRleCAtIDEgPCAwKVxuICAgICAgICAgICAgICAgID8gY3VycmVudEluZGV4XG4gICAgICAgICAgICAgICAgOiBjdXJyZW50SW5kZXggLSAxXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgJGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5hY3RpdmUpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgJHJlc3VsdFxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgICAgIC5lcShuZXdJbmRleClcbiAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgICAgICAgLmNsb3Nlc3QoJGNhdGVnb3J5KVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSlcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihrZXlDb2RlID09IGtleXMuZG93bkFycm93KSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdEb3duIGtleSBwcmVzc2VkLCBjaGFuZ2luZyBhY3RpdmUgcmVzdWx0Jyk7XG4gICAgICAgICAgICAgIG5ld0luZGV4ID0gKGN1cnJlbnRJbmRleCArIDEgPj0gcmVzdWx0U2l6ZSlcbiAgICAgICAgICAgICAgICA/IGN1cnJlbnRJbmRleFxuICAgICAgICAgICAgICAgIDogY3VycmVudEluZGV4ICsgMVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICRjYXRlZ29yeVxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICRyZXN1bHRcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICAuZXEobmV3SW5kZXgpXG4gICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICAgIC5jbG9zZXN0KCRjYXRlZ29yeSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5hY3RpdmUpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBxdWVyeSBzaG9ydGN1dHNcbiAgICAgICAgICAgIGlmKGtleUNvZGUgPT0ga2V5cy5lbnRlcikge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRW50ZXIga2V5IHByZXNzZWQsIGV4ZWN1dGluZyBxdWVyeScpO1xuICAgICAgICAgICAgICBtb2R1bGUucXVlcnkoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnNldC5idXR0b25QcmVzc2VkKCk7XG4gICAgICAgICAgICAgICRwcm9tcHQub25lKCdrZXl1cCcsIG1vZHVsZS5yZW1vdmUuYnV0dG9uRm9jdXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cDoge1xuICAgICAgICAgIGFwaTogZnVuY3Rpb24oc2VhcmNoVGVybSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGFwaVNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIGRlYnVnICAgICAgICAgICAgIDogc2V0dGluZ3MuZGVidWcsXG4gICAgICAgICAgICAgICAgb24gICAgICAgICAgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjYWNoZSAgICAgICAgICAgICA6IHRydWUsXG4gICAgICAgICAgICAgICAgYWN0aW9uICAgICAgICAgICAgOiAnc2VhcmNoJyxcbiAgICAgICAgICAgICAgICB1cmxEYXRhICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5IDogc2VhcmNoVGVybVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25TdWNjZXNzICAgICAgICAgOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLnBhcnNlLnJlc3BvbnNlLmNhbGwoZWxlbWVudCwgcmVzcG9uc2UsIHNlYXJjaFRlcm0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25BYm9ydCAgICAgICAgICAgOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25GYWlsdXJlICAgICAgICAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS5kaXNwbGF5TWVzc2FnZShlcnJvci5zZXJ2ZXJFcnJvcik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkVycm9yICAgICAgICAgICA6IG1vZHVsZS5lcnJvclxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzZWFyY2hIVE1MXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBhcGlTZXR0aW5ncywgc2V0dGluZ3MuYXBpU2V0dGluZ3MpO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NldHRpbmcgdXAgQVBJIHJlcXVlc3QnLCBhcGlTZXR0aW5ncyk7XG4gICAgICAgICAgICAkbW9kdWxlLmFwaShhcGlTZXR0aW5ncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNhbjoge1xuICAgICAgICAgIHVzZUFQSTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5mbi5hcGkgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNob3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5pcy5mb2N1c2VkKCkgJiYgIW1vZHVsZS5pcy52aXNpYmxlKCkgJiYgIW1vZHVsZS5pcy5lbXB0eSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MudHJhbnNpdGlvbiAmJiAkLmZuLnRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCAmJiAkbW9kdWxlLnRyYW5zaXRpb24oJ2lzIHN1cHBvcnRlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpczoge1xuICAgICAgICAgIGFuaW1hdGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHJlc3VsdHMuaGFzQ2xhc3MoY2xhc3NOYW1lLmFuaW1hdGluZyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBoaWRkZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRyZXN1bHRzLmhhc0NsYXNzKGNsYXNzTmFtZS5oaWRkZW4pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5NZXNzYWdlOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYoIWV2ZW50LnRhcmdldCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgJHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KSxcbiAgICAgICAgICAgICAgaXNJbkRPTSA9ICQuY29udGFpbnMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBldmVudC50YXJnZXQpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICByZXR1cm4gKGlzSW5ET00gJiYgJHRhcmdldC5jbG9zZXN0KHNlbGVjdG9yLm1lc3NhZ2UpLmxlbmd0aCA+IDApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW1wdHk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICgkcmVzdWx0cy5odG1sKCkgPT09ICcnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZpc2libGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICgkcmVzdWx0cy5maWx0ZXIoJzp2aXNpYmxlJykubGVuZ3RoID4gMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb2N1c2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoJHByb21wdC5maWx0ZXIoJzpmb2N1cycpLmxlbmd0aCA+IDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB0cmlnZ2VyOiB7XG4gICAgICAgICAgYmx1cjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgZXZlbnRzICAgICAgICA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyksXG4gICAgICAgICAgICAgIHByb21wdEVsZW1lbnQgPSAkcHJvbXB0WzBdXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihwcm9tcHRFbGVtZW50KSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdUcmlnZ2VyaW5nIG5hdGl2ZSBibHVyIGV2ZW50Jyk7XG4gICAgICAgICAgICAgIGV2ZW50cy5pbml0RXZlbnQoJ2JsdXInLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgICBwcm9tcHRFbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgaW5wdXRFdmVudDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgcHJvbXB0ID0gJHByb21wdFswXSxcbiAgICAgICAgICAgICAgaW5wdXRFdmVudCAgID0gKHByb21wdCAhPT0gdW5kZWZpbmVkICYmIHByb21wdC5vbmlucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgPyAnaW5wdXQnXG4gICAgICAgICAgICAgICAgOiAocHJvbXB0ICE9PSB1bmRlZmluZWQgJiYgcHJvbXB0Lm9ucHJvcGVydHljaGFuZ2UgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgID8gJ3Byb3BlcnR5Y2hhbmdlJ1xuICAgICAgICAgICAgICAgICAgOiAna2V5dXAnXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRFdmVudDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkcHJvbXB0LnZhbCgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzdWx0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgcmVzdWx0cyA9ICRtb2R1bGUuZGF0YShtZXRhZGF0YS5yZXN1bHRzKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXN1bHQ6IGZ1bmN0aW9uKHZhbHVlLCByZXN1bHRzKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgbG9va3VwRmllbGRzID0gWyd0aXRsZScsICdpZCddLFxuICAgICAgICAgICAgICByZXN1bHQgICAgICAgPSBmYWxzZVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgdmFsdWUgPSAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgPyB2YWx1ZVxuICAgICAgICAgICAgICA6IG1vZHVsZS5nZXQudmFsdWUoKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgcmVzdWx0cyA9IChyZXN1bHRzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgID8gcmVzdWx0c1xuICAgICAgICAgICAgICA6IG1vZHVsZS5nZXQucmVzdWx0cygpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy50eXBlID09PSAnY2F0ZWdvcnknKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnRmluZGluZyByZXN1bHQgdGhhdCBtYXRjaGVzJywgdmFsdWUpO1xuICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0cywgZnVuY3Rpb24oaW5kZXgsIGNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICAgaWYoJC5pc0FycmF5KGNhdGVnb3J5LnJlc3VsdHMpKSB7XG4gICAgICAgICAgICAgICAgICByZXN1bHQgPSBtb2R1bGUuc2VhcmNoLm9iamVjdCh2YWx1ZSwgY2F0ZWdvcnkucmVzdWx0cywgbG9va3VwRmllbGRzKVswXTtcbiAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGNvbnRpbnVlIHNlYXJjaGluZyBpZiBhIHJlc3VsdCBpcyBmb3VuZFxuICAgICAgICAgICAgICAgICAgaWYocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnRmluZGluZyByZXN1bHQgaW4gcmVzdWx0cyBvYmplY3QnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IG1vZHVsZS5zZWFyY2gub2JqZWN0KHZhbHVlLCByZXN1bHRzLCBsb29rdXBGaWVsZHMpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBmYWxzZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGZpcnN0UmVzdWx0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZWxlY3RpbmcgZmlyc3QgcmVzdWx0Jyk7XG4gICAgICAgICAgICAkcmVzdWx0LmZpcnN0KCkuYWRkQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldDoge1xuICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2R1bGUuYWRkQ2xhc3MoY2xhc3NOYW1lLmZvY3VzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZS5hZGRDbGFzcyhjbGFzc05hbWUubG9hZGluZyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZXR0aW5nIHNlYXJjaCBpbnB1dCB2YWx1ZScsIHZhbHVlKTtcbiAgICAgICAgICAgICRwcm9tcHRcbiAgICAgICAgICAgICAgLnZhbCh2YWx1ZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IHNldHRpbmdzLnR5cGU7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy50eXBlID09ICdjYXRlZ29yeScpIHtcbiAgICAgICAgICAgICAgJG1vZHVsZS5hZGRDbGFzcyhzZXR0aW5ncy50eXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGJ1dHRvblByZXNzZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNlYXJjaEJ1dHRvbi5hZGRDbGFzcyhjbGFzc05hbWUucHJlc3NlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZToge1xuICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZS5yZW1vdmVDbGFzcyhjbGFzc05hbWUubG9hZGluZyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb2N1czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5mb2N1cyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBidXR0b25QcmVzc2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzZWFyY2hCdXR0b24ucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLnByZXNzZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBxdWVyeTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBzZWFyY2hUZXJtID0gbW9kdWxlLmdldC52YWx1ZSgpLFxuICAgICAgICAgICAgY2FjaGUgPSBtb2R1bGUucmVhZC5jYWNoZShzZWFyY2hUZXJtKVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiggbW9kdWxlLmhhcy5taW5pbXVtQ2hhcmFjdGVycygpICkgIHtcbiAgICAgICAgICAgIGlmKGNhY2hlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnUmVhZGluZyByZXN1bHQgZnJvbSBjYWNoZScsIHNlYXJjaFRlcm0pO1xuICAgICAgICAgICAgICBtb2R1bGUuc2F2ZS5yZXN1bHRzKGNhY2hlLnJlc3VsdHMpO1xuICAgICAgICAgICAgICBtb2R1bGUuYWRkUmVzdWx0cyhjYWNoZS5odG1sKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmluamVjdC5pZChjYWNoZS5yZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1F1ZXJ5aW5nIGZvcicsIHNlYXJjaFRlcm0pO1xuICAgICAgICAgICAgICBpZigkLmlzUGxhaW5PYmplY3Qoc2V0dGluZ3Muc291cmNlKSB8fCAkLmlzQXJyYXkoc2V0dGluZ3Muc291cmNlKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5zZWFyY2gubG9jYWwoc2VhcmNoVGVybSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggbW9kdWxlLmNhbi51c2VBUEkoKSApIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuc2VhcmNoLnJlbW90ZShzZWFyY2hUZXJtKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZXJyb3IoZXJyb3Iuc291cmNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGluZ3Mub25TZWFyY2hRdWVyeS5jYWxsKGVsZW1lbnQsIHNlYXJjaFRlcm0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1vZHVsZS5oaWRlUmVzdWx0cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZWFyY2g6IHtcbiAgICAgICAgICBsb2NhbDogZnVuY3Rpb24oc2VhcmNoVGVybSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHJlc3VsdHMgPSBtb2R1bGUuc2VhcmNoLm9iamVjdChzZWFyY2hUZXJtLCBzZXR0aW5ncy5jb250ZW50KSxcbiAgICAgICAgICAgICAgc2VhcmNoSFRNTFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnNldC5sb2FkaW5nKCk7XG4gICAgICAgICAgICBtb2R1bGUuc2F2ZS5yZXN1bHRzKHJlc3VsdHMpO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdSZXR1cm5lZCBsb2NhbCBzZWFyY2ggcmVzdWx0cycsIHJlc3VsdHMpO1xuXG4gICAgICAgICAgICBzZWFyY2hIVE1MID0gbW9kdWxlLmdlbmVyYXRlUmVzdWx0cyh7XG4gICAgICAgICAgICAgIHJlc3VsdHM6IHJlc3VsdHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5sb2FkaW5nKCk7XG4gICAgICAgICAgICBtb2R1bGUuYWRkUmVzdWx0cyhzZWFyY2hIVE1MKTtcbiAgICAgICAgICAgIG1vZHVsZS5pbmplY3QuaWQocmVzdWx0cyk7XG4gICAgICAgICAgICBtb2R1bGUud3JpdGUuY2FjaGUoc2VhcmNoVGVybSwge1xuICAgICAgICAgICAgICBodG1sICAgIDogc2VhcmNoSFRNTCxcbiAgICAgICAgICAgICAgcmVzdWx0cyA6IHJlc3VsdHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3RlOiBmdW5jdGlvbihzZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICBpZigkbW9kdWxlLmFwaSgnaXMgbG9hZGluZycpKSB7XG4gICAgICAgICAgICAgICRtb2R1bGUuYXBpKCdhYm9ydCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLnNldHVwLmFwaShzZWFyY2hUZXJtKTtcbiAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgLmFwaSgncXVlcnknKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb2JqZWN0OiBmdW5jdGlvbihzZWFyY2hUZXJtLCBzb3VyY2UsIHNlYXJjaEZpZWxkcykge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHJlc3VsdHMgICAgICA9IFtdLFxuICAgICAgICAgICAgICBmdXp6eVJlc3VsdHMgPSBbXSxcbiAgICAgICAgICAgICAgc2VhcmNoRXhwICAgID0gc2VhcmNoVGVybS50b1N0cmluZygpLnJlcGxhY2UocmVnRXhwLmVzY2FwZSwgJ1xcXFwkJicpLFxuICAgICAgICAgICAgICBtYXRjaFJlZ0V4cCAgPSBuZXcgUmVnRXhwKHJlZ0V4cC5iZWdpbnNXaXRoICsgc2VhcmNoRXhwLCAnaScpLFxuXG4gICAgICAgICAgICAgIC8vIGF2b2lkIGR1cGxpY2F0ZXMgd2hlbiBwdXNoaW5nIHJlc3VsdHNcbiAgICAgICAgICAgICAgYWRkUmVzdWx0ID0gZnVuY3Rpb24oYXJyYXksIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgbm90UmVzdWx0ICAgICAgPSAoJC5pbkFycmF5KHJlc3VsdCwgcmVzdWx0cykgPT0gLTEpLFxuICAgICAgICAgICAgICAgICAgbm90RnV6enlSZXN1bHQgPSAoJC5pbkFycmF5KHJlc3VsdCwgZnV6enlSZXN1bHRzKSA9PSAtMSlcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgaWYobm90UmVzdWx0ICYmIG5vdEZ1enp5UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBzb3VyY2UgPSBzb3VyY2UgfHwgc2V0dGluZ3Muc291cmNlO1xuICAgICAgICAgICAgc2VhcmNoRmllbGRzID0gKHNlYXJjaEZpZWxkcyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICA/IHNlYXJjaEZpZWxkc1xuICAgICAgICAgICAgICA6IHNldHRpbmdzLnNlYXJjaEZpZWxkc1xuICAgICAgICAgICAgO1xuXG4gICAgICAgICAgICAvLyBzZWFyY2ggZmllbGRzIHNob3VsZCBiZSBhcnJheSB0byBsb29wIGNvcnJlY3RseVxuICAgICAgICAgICAgaWYoISQuaXNBcnJheShzZWFyY2hGaWVsZHMpKSB7XG4gICAgICAgICAgICAgIHNlYXJjaEZpZWxkcyA9IFtzZWFyY2hGaWVsZHNdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBleGl0IGNvbmRpdGlvbnMgaWYgbm8gc291cmNlXG4gICAgICAgICAgICBpZihzb3VyY2UgPT09IHVuZGVmaW5lZCB8fCBzb3VyY2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5zb3VyY2UpO1xuICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBzZWFyY2ggZmllbGRzIGxvb2tpbmcgZm9yIG1hdGNoZXNcbiAgICAgICAgICAgICQuZWFjaChzZWFyY2hGaWVsZHMsIGZ1bmN0aW9uKGluZGV4LCBmaWVsZCkge1xuICAgICAgICAgICAgICAkLmVhY2goc291cmNlLCBmdW5jdGlvbihsYWJlbCwgY29udGVudCkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgZmllbGRFeGlzdHMgPSAodHlwZW9mIGNvbnRlbnRbZmllbGRdID09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBpZihmaWVsZEV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgaWYoIGNvbnRlbnRbZmllbGRdLnNlYXJjaChtYXRjaFJlZ0V4cCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnQgc3RhcnRzIHdpdGggdmFsdWUgKGZpcnN0IGluIHJlc3VsdHMpXG4gICAgICAgICAgICAgICAgICAgIGFkZFJlc3VsdChyZXN1bHRzLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc2V0dGluZ3Muc2VhcmNoRnVsbFRleHQgJiYgbW9kdWxlLmZ1enp5U2VhcmNoKHNlYXJjaFRlcm0sIGNvbnRlbnRbZmllbGRdKSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGVudCBmdXp6eSBtYXRjaGVzIChsYXN0IGluIHJlc3VsdHMpXG4gICAgICAgICAgICAgICAgICAgIGFkZFJlc3VsdChmdXp6eVJlc3VsdHMsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAkLm1lcmdlKHJlc3VsdHMsIGZ1enp5UmVzdWx0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGZ1enp5U2VhcmNoOiBmdW5jdGlvbihxdWVyeSwgdGVybSkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgdGVybUxlbmd0aCAgPSB0ZXJtLmxlbmd0aCxcbiAgICAgICAgICAgIHF1ZXJ5TGVuZ3RoID0gcXVlcnkubGVuZ3RoXG4gICAgICAgICAgO1xuICAgICAgICAgIGlmKHR5cGVvZiBxdWVyeSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIHRlcm0gID0gdGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmKHF1ZXJ5TGVuZ3RoID4gdGVybUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihxdWVyeUxlbmd0aCA9PT0gdGVybUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIChxdWVyeSA9PT0gdGVybSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlYXJjaDogZm9yICh2YXIgY2hhcmFjdGVySW5kZXggPSAwLCBuZXh0Q2hhcmFjdGVySW5kZXggPSAwOyBjaGFyYWN0ZXJJbmRleCA8IHF1ZXJ5TGVuZ3RoOyBjaGFyYWN0ZXJJbmRleCsrKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgcXVlcnlDaGFyYWN0ZXIgPSBxdWVyeS5jaGFyQ29kZUF0KGNoYXJhY3RlckluZGV4KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgd2hpbGUobmV4dENoYXJhY3RlckluZGV4IDwgdGVybUxlbmd0aCkge1xuICAgICAgICAgICAgICBpZih0ZXJtLmNoYXJDb2RlQXQobmV4dENoYXJhY3RlckluZGV4KyspID09PSBxdWVyeUNoYXJhY3Rlcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlIHNlYXJjaDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICBwYXJzZToge1xuICAgICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSwgc2VhcmNoVGVybSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHNlYXJjaEhUTUwgPSBtb2R1bGUuZ2VuZXJhdGVSZXN1bHRzKHJlc3BvbnNlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1BhcnNpbmcgc2VydmVyIHJlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgaWYocmVzcG9uc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBpZihzZWFyY2hUZXJtICE9PSB1bmRlZmluZWQgJiYgcmVzcG9uc2VbZmllbGRzLnJlc3VsdHNdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuYWRkUmVzdWx0cyhzZWFyY2hIVE1MKTtcbiAgICAgICAgICAgICAgICBtb2R1bGUuaW5qZWN0LmlkKHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXSk7XG4gICAgICAgICAgICAgICAgbW9kdWxlLndyaXRlLmNhY2hlKHNlYXJjaFRlcm0sIHtcbiAgICAgICAgICAgICAgICAgIGh0bWwgICAgOiBzZWFyY2hIVE1MLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0cyA6IHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG1vZHVsZS5zYXZlLnJlc3VsdHMocmVzcG9uc2VbZmllbGRzLnJlc3VsdHNdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjYW5jZWw6IHtcbiAgICAgICAgICBxdWVyeTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiggbW9kdWxlLmNhbi51c2VBUEkoKSApIHtcbiAgICAgICAgICAgICAgJG1vZHVsZS5hcGkoJ2Fib3J0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGhhczoge1xuICAgICAgICAgIG1pbmltdW1DaGFyYWN0ZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBzZWFyY2hUZXJtICAgID0gbW9kdWxlLmdldC52YWx1ZSgpLFxuICAgICAgICAgICAgICBudW1DaGFyYWN0ZXJzID0gc2VhcmNoVGVybS5sZW5ndGhcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHJldHVybiAobnVtQ2hhcmFjdGVycyA+PSBzZXR0aW5ncy5taW5DaGFyYWN0ZXJzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xlYXI6IHtcbiAgICAgICAgICBjYWNoZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBjYWNoZSA9ICRtb2R1bGUuZGF0YShtZXRhZGF0YS5jYWNoZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKCF2YWx1ZSkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NsZWFyaW5nIGNhY2hlJywgdmFsdWUpO1xuICAgICAgICAgICAgICAkbW9kdWxlLnJlbW92ZURhdGEobWV0YWRhdGEuY2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih2YWx1ZSAmJiBjYWNoZSAmJiBjYWNoZVt2YWx1ZV0pIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdSZW1vdmluZyB2YWx1ZSBmcm9tIGNhY2hlJywgdmFsdWUpO1xuICAgICAgICAgICAgICBkZWxldGUgY2FjaGVbdmFsdWVdO1xuICAgICAgICAgICAgICAkbW9kdWxlLmRhdGEobWV0YWRhdGEuY2FjaGUsIGNhY2hlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVhZDoge1xuICAgICAgICAgIGNhY2hlOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY2FjaGUgPSAkbW9kdWxlLmRhdGEobWV0YWRhdGEuY2FjaGUpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5jYWNoZSkge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQ2hlY2tpbmcgY2FjaGUgZm9yIGdlbmVyYXRlZCBodG1sIGZvciBxdWVyeScsIG5hbWUpO1xuICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBjYWNoZSA9PSAnb2JqZWN0JykgJiYgKGNhY2hlW25hbWVdICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgPyBjYWNoZVtuYW1lXVxuICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBpZDogZnVuY3Rpb24ocmVzdWx0SW5kZXgsIGNhdGVnb3J5SW5kZXgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICByZXN1bHRJRCAgICAgID0gKHJlc3VsdEluZGV4ICsgMSksIC8vIG5vdCB6ZXJvIGluZGV4ZWRcbiAgICAgICAgICAgICAgY2F0ZWdvcnlJRCAgICA9IChjYXRlZ29yeUluZGV4ICsgMSksXG4gICAgICAgICAgICAgIGZpcnN0Q2hhckNvZGUsXG4gICAgICAgICAgICAgIGxldHRlcklELFxuICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoY2F0ZWdvcnlJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIC8vIHN0YXJ0IGNoYXIgY29kZSBmb3IgXCJBXCJcbiAgICAgICAgICAgICAgbGV0dGVySUQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDk3ICsgY2F0ZWdvcnlJbmRleCk7XG4gICAgICAgICAgICAgIGlkICAgICAgICAgID0gbGV0dGVySUQgKyByZXN1bHRJRDtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0NyZWF0aW5nIGNhdGVnb3J5IHJlc3VsdCBpZCcsIGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBpZCA9IHJlc3VsdElEO1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQ3JlYXRpbmcgcmVzdWx0IGlkJywgaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzdWx0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZigkcmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgJHJlc3VsdHMgPSAkKCc8ZGl2IC8+JylcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLnJlc3VsdHMpXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRtb2R1bGUpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5qZWN0OiB7XG4gICAgICAgICAgcmVzdWx0OiBmdW5jdGlvbihyZXN1bHQsIHJlc3VsdEluZGV4LCBjYXRlZ29yeUluZGV4KSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnSW5qZWN0aW5nIHJlc3VsdCBpbnRvIHJlc3VsdHMnKTtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAkc2VsZWN0ZWRSZXN1bHQgPSAoY2F0ZWdvcnlJbmRleCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgID8gJHJlc3VsdHNcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkcmVuKCkuZXEoY2F0ZWdvcnlJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oc2VsZWN0b3IucmVzdWx0KS5lcShyZXN1bHRJbmRleClcbiAgICAgICAgICAgICAgICA6ICRyZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZHJlbihzZWxlY3Rvci5yZXN1bHQpLmVxKHJlc3VsdEluZGV4KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0luamVjdGluZyByZXN1bHRzIG1ldGFkYXRhJywgJHNlbGVjdGVkUmVzdWx0KTtcbiAgICAgICAgICAgICRzZWxlY3RlZFJlc3VsdFxuICAgICAgICAgICAgICAuZGF0YShtZXRhZGF0YS5yZXN1bHQsIHJlc3VsdClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlkOiBmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0luamVjdGluZyB1bmlxdWUgaWRzIGludG8gcmVzdWx0cycpO1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIC8vIHNpbmNlIHJlc3VsdHMgbWF5IGJlIG9iamVjdCwgd2UgbXVzdCB1c2UgY291bnRlcnNcbiAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleCA9IDAsXG4gICAgICAgICAgICAgIHJlc3VsdEluZGV4ICAgPSAwXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy50eXBlID09PSAnY2F0ZWdvcnknKSB7XG4gICAgICAgICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBlYWNoIGNhdGVnb3J5IHJlc3VsdFxuICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0cywgZnVuY3Rpb24oaW5kZXgsIGNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICQuZWFjaChjYXRlZ29yeS5yZXN1bHRzLCBmdW5jdGlvbihpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjYXRlZ29yeS5yZXN1bHRzW2luZGV4XVxuICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmlkID0gbW9kdWxlLmNyZWF0ZS5pZChyZXN1bHRJbmRleCwgY2F0ZWdvcnlJbmRleCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBtb2R1bGUuaW5qZWN0LnJlc3VsdChyZXN1bHQsIHJlc3VsdEluZGV4LCBjYXRlZ29yeUluZGV4KTtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleCsrO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAvLyB0b3AgbGV2ZWxcbiAgICAgICAgICAgICAgJC5lYWNoKHJlc3VsdHMsIGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0c1tpbmRleF1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0LmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdC5pZCA9IG1vZHVsZS5jcmVhdGUuaWQocmVzdWx0SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtb2R1bGUuaW5qZWN0LnJlc3VsdChyZXN1bHQsIHJlc3VsdEluZGV4KTtcbiAgICAgICAgICAgICAgICByZXN1bHRJbmRleCsrO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzYXZlOiB7XG4gICAgICAgICAgcmVzdWx0czogZnVuY3Rpb24ocmVzdWx0cykge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NhdmluZyBjdXJyZW50IHNlYXJjaCByZXN1bHRzIHRvIG1ldGFkYXRhJywgcmVzdWx0cyk7XG4gICAgICAgICAgICAkbW9kdWxlLmRhdGEobWV0YWRhdGEucmVzdWx0cywgcmVzdWx0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHdyaXRlOiB7XG4gICAgICAgICAgY2FjaGU6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY2FjaGUgPSAoJG1vZHVsZS5kYXRhKG1ldGFkYXRhLmNhY2hlKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgID8gJG1vZHVsZS5kYXRhKG1ldGFkYXRhLmNhY2hlKVxuICAgICAgICAgICAgICAgIDoge31cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLmNhY2hlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdXcml0aW5nIGdlbmVyYXRlZCBodG1sIHRvIGNhY2hlJywgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgICAgLmRhdGEobWV0YWRhdGEuY2FjaGUsIGNhY2hlKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFkZFJlc3VsdHM6IGZ1bmN0aW9uKGh0bWwpIHtcbiAgICAgICAgICBpZiggJC5pc0Z1bmN0aW9uKHNldHRpbmdzLm9uUmVzdWx0c0FkZCkgKSB7XG4gICAgICAgICAgICBpZiggc2V0dGluZ3Mub25SZXN1bHRzQWRkLmNhbGwoJHJlc3VsdHMsIGh0bWwpID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdvblJlc3VsdHNBZGQgY2FsbGJhY2sgY2FuY2VsbGVkIGRlZmF1bHQgYWN0aW9uJyk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoaHRtbCkge1xuICAgICAgICAgICAgJHJlc3VsdHNcbiAgICAgICAgICAgICAgLmh0bWwoaHRtbClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS5yZWZyZXNoUmVzdWx0cygpO1xuICAgICAgICAgICAgaWYoc2V0dGluZ3Muc2VsZWN0Rmlyc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnNlbGVjdC5maXJzdFJlc3VsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLnNob3dSZXN1bHRzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbW9kdWxlLmhpZGVSZXN1bHRzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dSZXN1bHRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighbW9kdWxlLmlzLnZpc2libGUoKSkge1xuICAgICAgICAgICAgaWYoIG1vZHVsZS5jYW4udHJhbnNpdGlvbigpICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Nob3dpbmcgcmVzdWx0cyB3aXRoIGNzcyBhbmltYXRpb25zJyk7XG4gICAgICAgICAgICAgICRyZXN1bHRzXG4gICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oe1xuICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uICA6IHNldHRpbmdzLnRyYW5zaXRpb24gKyAnIGluJyxcbiAgICAgICAgICAgICAgICAgIGRlYnVnICAgICAgOiBzZXR0aW5ncy5kZWJ1ZyxcbiAgICAgICAgICAgICAgICAgIHZlcmJvc2UgICAgOiBzZXR0aW5ncy52ZXJib3NlLFxuICAgICAgICAgICAgICAgICAgZHVyYXRpb24gICA6IHNldHRpbmdzLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgcXVldWUgICAgICA6IHRydWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTaG93aW5nIHJlc3VsdHMgd2l0aCBqYXZhc2NyaXB0Jyk7XG4gICAgICAgICAgICAgICRyZXN1bHRzXG4gICAgICAgICAgICAgICAgLnN0b3AoKVxuICAgICAgICAgICAgICAgIC5mYWRlSW4oc2V0dGluZ3MuZHVyYXRpb24sIHNldHRpbmdzLmVhc2luZylcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGluZ3Mub25SZXN1bHRzT3Blbi5jYWxsKCRyZXN1bHRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGhpZGVSZXN1bHRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiggbW9kdWxlLmlzLnZpc2libGUoKSApIHtcbiAgICAgICAgICAgIGlmKCBtb2R1bGUuY2FuLnRyYW5zaXRpb24oKSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdIaWRpbmcgcmVzdWx0cyB3aXRoIGNzcyBhbmltYXRpb25zJyk7XG4gICAgICAgICAgICAgICRyZXN1bHRzXG4gICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oe1xuICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uICA6IHNldHRpbmdzLnRyYW5zaXRpb24gKyAnIG91dCcsXG4gICAgICAgICAgICAgICAgICBkZWJ1ZyAgICAgIDogc2V0dGluZ3MuZGVidWcsXG4gICAgICAgICAgICAgICAgICB2ZXJib3NlICAgIDogc2V0dGluZ3MudmVyYm9zZSxcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uICAgOiBzZXR0aW5ncy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgIHF1ZXVlICAgICAgOiB0cnVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnSGlkaW5nIHJlc3VsdHMgd2l0aCBqYXZhc2NyaXB0Jyk7XG4gICAgICAgICAgICAgICRyZXN1bHRzXG4gICAgICAgICAgICAgICAgLnN0b3AoKVxuICAgICAgICAgICAgICAgIC5mYWRlT3V0KHNldHRpbmdzLmR1cmF0aW9uLCBzZXR0aW5ncy5lYXNpbmcpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHRpbmdzLm9uUmVzdWx0c0Nsb3NlLmNhbGwoJHJlc3VsdHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBnZW5lcmF0ZVJlc3VsdHM6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdHZW5lcmF0aW5nIGh0bWwgZnJvbSByZXNwb25zZScsIHJlc3BvbnNlKTtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIHRlbXBsYXRlICAgICAgID0gc2V0dGluZ3MudGVtcGxhdGVzW3NldHRpbmdzLnR5cGVdLFxuICAgICAgICAgICAgaXNQcm9wZXJPYmplY3QgPSAoJC5pc1BsYWluT2JqZWN0KHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXSkgJiYgISQuaXNFbXB0eU9iamVjdChyZXNwb25zZVtmaWVsZHMucmVzdWx0c10pKSxcbiAgICAgICAgICAgIGlzUHJvcGVyQXJyYXkgID0gKCQuaXNBcnJheShyZXNwb25zZVtmaWVsZHMucmVzdWx0c10pICYmIHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXS5sZW5ndGggPiAwKSxcbiAgICAgICAgICAgIGh0bWwgICAgICAgICAgID0gJydcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYoaXNQcm9wZXJPYmplY3QgfHwgaXNQcm9wZXJBcnJheSApIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLm1heFJlc3VsdHMgPiAwKSB7XG4gICAgICAgICAgICAgIGlmKGlzUHJvcGVyT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MudHlwZSA9PSAnc3RhbmRhcmQnKSB7XG4gICAgICAgICAgICAgICAgICBtb2R1bGUuZXJyb3IoZXJyb3IubWF4UmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXSA9IHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXS5zbGljZSgwLCBzZXR0aW5ncy5tYXhSZXN1bHRzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoJC5pc0Z1bmN0aW9uKHRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICBodG1sID0gdGVtcGxhdGUocmVzcG9uc2UsIGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm5vVGVtcGxhdGUsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihzZXR0aW5ncy5zaG93Tm9SZXN1bHRzKSB7XG4gICAgICAgICAgICBodG1sID0gbW9kdWxlLmRpc3BsYXlNZXNzYWdlKGVycm9yLm5vUmVzdWx0cywgJ2VtcHR5Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldHRpbmdzLm9uUmVzdWx0cy5jYWxsKGVsZW1lbnQsIHJlc3BvbnNlKTtcbiAgICAgICAgICByZXR1cm4gaHRtbDtcbiAgICAgICAgfSxcblxuICAgICAgICBkaXNwbGF5TWVzc2FnZTogZnVuY3Rpb24odGV4dCwgdHlwZSkge1xuICAgICAgICAgIHR5cGUgPSB0eXBlIHx8ICdzdGFuZGFyZCc7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdEaXNwbGF5aW5nIG1lc3NhZ2UnLCB0ZXh0LCB0eXBlKTtcbiAgICAgICAgICBtb2R1bGUuYWRkUmVzdWx0cyggc2V0dGluZ3MudGVtcGxhdGVzLm1lc3NhZ2UodGV4dCwgdHlwZSkgKTtcbiAgICAgICAgICByZXR1cm4gc2V0dGluZ3MudGVtcGxhdGVzLm1lc3NhZ2UodGV4dCwgdHlwZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dGluZzogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICBpZiggJC5pc1BsYWluT2JqZWN0KG5hbWUpICkge1xuICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgc2V0dGluZ3MsIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNldHRpbmdzW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzW25hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW50ZXJuYWw6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChuYW1lKSApIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIG1vZHVsZSwgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbW9kdWxlW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVtuYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlYnVnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50ICYmIHNldHRpbmdzLmRlYnVnKSB7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHZlcmJvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQgJiYgc2V0dGluZ3MudmVyYm9zZSAmJiBzZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZS5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQpIHtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvciA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvciwgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICBtb2R1bGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgICAgbG9nOiBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUsXG4gICAgICAgICAgICAgIGV4ZWN1dGlvblRpbWUsXG4gICAgICAgICAgICAgIHByZXZpb3VzVGltZVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICBwcmV2aW91c1RpbWUgID0gdGltZSB8fCBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZSA9IGN1cnJlbnRUaW1lIC0gcHJldmlvdXNUaW1lO1xuICAgICAgICAgICAgICB0aW1lICAgICAgICAgID0gY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIHBlcmZvcm1hbmNlLnB1c2goe1xuICAgICAgICAgICAgICAgICdOYW1lJyAgICAgICAgICAgOiBtZXNzYWdlWzBdLFxuICAgICAgICAgICAgICAgICdBcmd1bWVudHMnICAgICAgOiBbXS5zbGljZS5jYWxsKG1lc3NhZ2UsIDEpIHx8ICcnLFxuICAgICAgICAgICAgICAgICdFbGVtZW50JyAgICAgICAgOiBlbGVtZW50LFxuICAgICAgICAgICAgICAgICdFeGVjdXRpb24gVGltZScgOiBleGVjdXRpb25UaW1lXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lcik7XG4gICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UudGltZXIgPSBzZXRUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS5kaXNwbGF5LCA1MDApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzcGxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgdGl0bGUgPSBzZXR0aW5ncy5uYW1lICsgJzonLFxuICAgICAgICAgICAgICB0b3RhbFRpbWUgPSAwXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICB0aW1lID0gZmFsc2U7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyKTtcbiAgICAgICAgICAgICQuZWFjaChwZXJmb3JtYW5jZSwgZnVuY3Rpb24oaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgICAgICAgdG90YWxUaW1lICs9IGRhdGFbJ0V4ZWN1dGlvbiBUaW1lJ107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpdGxlICs9ICcgJyArIHRvdGFsVGltZSArICdtcyc7XG4gICAgICAgICAgICBpZihtb2R1bGVTZWxlY3Rvcikge1xuICAgICAgICAgICAgICB0aXRsZSArPSAnIFxcJycgKyBtb2R1bGVTZWxlY3RvciArICdcXCcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoJGFsbE1vZHVsZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICB0aXRsZSArPSAnICcgKyAnKCcgKyAkYWxsTW9kdWxlcy5sZW5ndGggKyAnKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggKGNvbnNvbGUuZ3JvdXAgIT09IHVuZGVmaW5lZCB8fCBjb25zb2xlLnRhYmxlICE9PSB1bmRlZmluZWQpICYmIHBlcmZvcm1hbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZCh0aXRsZSk7XG4gICAgICAgICAgICAgIGlmKGNvbnNvbGUudGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKHBlcmZvcm1hbmNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLmVhY2gocGVyZm9ybWFuY2UsIGZ1bmN0aW9uKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhWydOYW1lJ10gKyAnOiAnICsgZGF0YVsnRXhlY3V0aW9uIFRpbWUnXSsnbXMnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZXJmb3JtYW5jZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52b2tlOiBmdW5jdGlvbihxdWVyeSwgcGFzc2VkQXJndW1lbnRzLCBjb250ZXh0KSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBvYmplY3QgPSBpbnN0YW5jZSxcbiAgICAgICAgICAgIG1heERlcHRoLFxuICAgICAgICAgICAgZm91bmQsXG4gICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgIDtcbiAgICAgICAgICBwYXNzZWRBcmd1bWVudHMgPSBwYXNzZWRBcmd1bWVudHMgfHwgcXVlcnlBcmd1bWVudHM7XG4gICAgICAgICAgY29udGV4dCAgICAgICAgID0gZWxlbWVudCAgICAgICAgIHx8IGNvbnRleHQ7XG4gICAgICAgICAgaWYodHlwZW9mIHF1ZXJ5ID09ICdzdHJpbmcnICYmIG9iamVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeSAgICA9IHF1ZXJ5LnNwbGl0KC9bXFwuIF0vKTtcbiAgICAgICAgICAgIG1heERlcHRoID0gcXVlcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICQuZWFjaChxdWVyeSwgZnVuY3Rpb24oZGVwdGgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgIHZhciBjYW1lbENhc2VWYWx1ZSA9IChkZXB0aCAhPSBtYXhEZXB0aClcbiAgICAgICAgICAgICAgICA/IHZhbHVlICsgcXVlcnlbZGVwdGggKyAxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHF1ZXJ5W2RlcHRoICsgMV0uc2xpY2UoMSlcbiAgICAgICAgICAgICAgICA6IHF1ZXJ5XG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdCggb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXSApICYmIChkZXB0aCAhPSBtYXhEZXB0aCkgKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCBvYmplY3RbY2FtZWxDYXNlVmFsdWVdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSBvYmplY3RbY2FtZWxDYXNlVmFsdWVdO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCAkLmlzUGxhaW5PYmplY3QoIG9iamVjdFt2YWx1ZV0gKSAmJiAoZGVwdGggIT0gbWF4RGVwdGgpICkge1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IG9iamVjdFt2YWx1ZV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggb2JqZWN0W3ZhbHVlXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gb2JqZWN0W3ZhbHVlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoICQuaXNGdW5jdGlvbiggZm91bmQgKSApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQuYXBwbHkoY29udGV4dCwgcGFzc2VkQXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihmb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGZvdW5kO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZigkLmlzQXJyYXkocmV0dXJuZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUucHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYocmV0dXJuZWRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gW3JldHVybmVkVmFsdWUsIHJlc3BvbnNlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gcmVzcG9uc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmKG1ldGhvZEludm9rZWQpIHtcbiAgICAgICAgaWYoaW5zdGFuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG1vZHVsZS5pbml0aWFsaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgbW9kdWxlLmludm9rZShxdWVyeSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYoaW5zdGFuY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGluc3RhbmNlLmludm9rZSgnZGVzdHJveScpO1xuICAgICAgICB9XG4gICAgICAgIG1vZHVsZS5pbml0aWFsaXplKCk7XG4gICAgICB9XG5cbiAgICB9KVxuICA7XG5cbiAgcmV0dXJuIChyZXR1cm5lZFZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgPyByZXR1cm5lZFZhbHVlXG4gICAgOiB0aGlzXG4gIDtcbn07XG5cbiQuZm4uc2VhcmNoLnNldHRpbmdzID0ge1xuXG4gIG5hbWUgICAgICAgICAgICAgIDogJ1NlYXJjaCcsXG4gIG5hbWVzcGFjZSAgICAgICAgIDogJ3NlYXJjaCcsXG5cbiAgc2lsZW50ICAgICAgICAgICAgOiBmYWxzZSxcbiAgZGVidWcgICAgICAgICAgICAgOiBmYWxzZSxcbiAgdmVyYm9zZSAgICAgICAgICAgOiBmYWxzZSxcbiAgcGVyZm9ybWFuY2UgICAgICAgOiB0cnVlLFxuXG4gIC8vIHRlbXBsYXRlIHRvIHVzZSAoc3BlY2lmaWVkIGluIHNldHRpbmdzLnRlbXBsYXRlcylcbiAgdHlwZSAgICAgICAgICAgICAgOiAnc3RhbmRhcmQnLFxuXG4gIC8vIG1pbmltdW0gY2hhcmFjdGVycyByZXF1aXJlZCB0byBzZWFyY2hcbiAgbWluQ2hhcmFjdGVycyAgICAgOiAxLFxuXG4gIC8vIHdoZXRoZXIgdG8gc2VsZWN0IGZpcnN0IHJlc3VsdCBhZnRlciBzZWFyY2hpbmcgYXV0b21hdGljYWxseVxuICBzZWxlY3RGaXJzdFJlc3VsdCA6IGZhbHNlLFxuXG4gIC8vIEFQSSBjb25maWdcbiAgYXBpU2V0dGluZ3MgICAgICAgOiBmYWxzZSxcblxuICAvLyBvYmplY3QgdG8gc2VhcmNoXG4gIHNvdXJjZSAgICAgICAgICAgIDogZmFsc2UsXG5cbiAgLy8gZmllbGRzIHRvIHNlYXJjaFxuICBzZWFyY2hGaWVsZHMgICA6IFtcbiAgICAndGl0bGUnLFxuICAgICdkZXNjcmlwdGlvbidcbiAgXSxcblxuICAvLyBmaWVsZCB0byBkaXNwbGF5IGluIHN0YW5kYXJkIHJlc3VsdHMgdGVtcGxhdGVcbiAgZGlzcGxheUZpZWxkICAgOiAnJyxcblxuICAvLyB3aGV0aGVyIHRvIGluY2x1ZGUgZnV6enkgcmVzdWx0cyBpbiBsb2NhbCBzZWFyY2hcbiAgc2VhcmNoRnVsbFRleHQgOiB0cnVlLFxuXG4gIC8vIHdoZXRoZXIgdG8gYWRkIGV2ZW50cyB0byBwcm9tcHQgYXV0b21hdGljYWxseVxuICBhdXRvbWF0aWMgICAgICA6IHRydWUsXG5cbiAgLy8gZGVsYXkgYmVmb3JlIGhpZGluZyBtZW51IGFmdGVyIGJsdXJcbiAgaGlkZURlbGF5ICAgICAgOiAwLFxuXG4gIC8vIGRlbGF5IGJlZm9yZSBzZWFyY2hpbmdcbiAgc2VhcmNoRGVsYXkgICAgOiAyMDAsXG5cbiAgLy8gbWF4aW11bSByZXN1bHRzIHJldHVybmVkIGZyb20gbG9jYWxcbiAgbWF4UmVzdWx0cyAgICAgOiA3LFxuXG4gIC8vIHdoZXRoZXIgdG8gc3RvcmUgbG9va3VwcyBpbiBsb2NhbCBjYWNoZVxuICBjYWNoZSAgICAgICAgICA6IHRydWUsXG5cbiAgLy8gd2hldGhlciBubyByZXN1bHRzIGVycm9ycyBzaG91bGQgYmUgc2hvd25cbiAgc2hvd05vUmVzdWx0cyAgOiB0cnVlLFxuXG4gIC8vIHRyYW5zaXRpb24gc2V0dGluZ3NcbiAgdHJhbnNpdGlvbiAgICAgOiAnc2NhbGUnLFxuICBkdXJhdGlvbiAgICAgICA6IDIwMCxcbiAgZWFzaW5nICAgICAgICAgOiAnZWFzZU91dEV4cG8nLFxuXG4gIC8vIGNhbGxiYWNrc1xuICBvblNlbGVjdCAgICAgICA6IGZhbHNlLFxuICBvblJlc3VsdHNBZGQgICA6IGZhbHNlLFxuXG4gIG9uU2VhcmNoUXVlcnkgIDogZnVuY3Rpb24ocXVlcnkpe30sXG4gIG9uUmVzdWx0cyAgICAgIDogZnVuY3Rpb24ocmVzcG9uc2Upe30sXG5cbiAgb25SZXN1bHRzT3BlbiAgOiBmdW5jdGlvbigpe30sXG4gIG9uUmVzdWx0c0Nsb3NlIDogZnVuY3Rpb24oKXt9LFxuXG4gIGNsYXNzTmFtZToge1xuICAgIGFuaW1hdGluZyA6ICdhbmltYXRpbmcnLFxuICAgIGFjdGl2ZSAgICA6ICdhY3RpdmUnLFxuICAgIGVtcHR5ICAgICA6ICdlbXB0eScsXG4gICAgZm9jdXMgICAgIDogJ2ZvY3VzJyxcbiAgICBoaWRkZW4gICAgOiAnaGlkZGVuJyxcbiAgICBsb2FkaW5nICAgOiAnbG9hZGluZycsXG4gICAgcmVzdWx0cyAgIDogJ3Jlc3VsdHMnLFxuICAgIHByZXNzZWQgICA6ICdkb3duJ1xuICB9LFxuXG4gIGVycm9yIDoge1xuICAgIHNvdXJjZSAgICAgIDogJ0Nhbm5vdCBzZWFyY2guIE5vIHNvdXJjZSB1c2VkLCBhbmQgU2VtYW50aWMgQVBJIG1vZHVsZSB3YXMgbm90IGluY2x1ZGVkJyxcbiAgICBub1Jlc3VsdHMgICA6ICdZb3VyIHNlYXJjaCByZXR1cm5lZCBubyByZXN1bHRzJyxcbiAgICBsb2dnaW5nICAgICA6ICdFcnJvciBpbiBkZWJ1ZyBsb2dnaW5nLCBleGl0aW5nLicsXG4gICAgbm9FbmRwb2ludCAgOiAnTm8gc2VhcmNoIGVuZHBvaW50IHdhcyBzcGVjaWZpZWQnLFxuICAgIG5vVGVtcGxhdGUgIDogJ0EgdmFsaWQgdGVtcGxhdGUgbmFtZSB3YXMgbm90IHNwZWNpZmllZC4nLFxuICAgIHNlcnZlckVycm9yIDogJ1RoZXJlIHdhcyBhbiBpc3N1ZSBxdWVyeWluZyB0aGUgc2VydmVyLicsXG4gICAgbWF4UmVzdWx0cyAgOiAnUmVzdWx0cyBtdXN0IGJlIGFuIGFycmF5IHRvIHVzZSBtYXhSZXN1bHRzIHNldHRpbmcnLFxuICAgIG1ldGhvZCAgICAgIDogJ1RoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZC4nXG4gIH0sXG5cbiAgbWV0YWRhdGE6IHtcbiAgICBjYWNoZSAgIDogJ2NhY2hlJyxcbiAgICByZXN1bHRzIDogJ3Jlc3VsdHMnLFxuICAgIHJlc3VsdCAgOiAncmVzdWx0J1xuICB9LFxuXG4gIHJlZ0V4cDoge1xuICAgIGVzY2FwZSAgICAgOiAvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csXG4gICAgYmVnaW5zV2l0aCA6ICcoPzpcXHN8XiknXG4gIH0sXG5cbiAgLy8gbWFwcyBhcGkgcmVzcG9uc2UgYXR0cmlidXRlcyB0byBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICBmaWVsZHM6IHtcbiAgICBjYXRlZ29yaWVzICAgICAgOiAncmVzdWx0cycsICAgICAvLyBhcnJheSBvZiBjYXRlZ29yaWVzIChjYXRlZ29yeSB2aWV3KVxuICAgIGNhdGVnb3J5TmFtZSAgICA6ICduYW1lJywgICAgICAgIC8vIG5hbWUgb2YgY2F0ZWdvcnkgKGNhdGVnb3J5IHZpZXcpXG4gICAgY2F0ZWdvcnlSZXN1bHRzIDogJ3Jlc3VsdHMnLCAgICAgLy8gYXJyYXkgb2YgcmVzdWx0cyAoY2F0ZWdvcnkgdmlldylcbiAgICBkZXNjcmlwdGlvbiAgICAgOiAnZGVzY3JpcHRpb24nLCAvLyByZXN1bHQgZGVzY3JpcHRpb25cbiAgICBpbWFnZSAgICAgICAgICAgOiAnaW1hZ2UnLCAgICAgICAvLyByZXN1bHQgaW1hZ2VcbiAgICBwcmljZSAgICAgICAgICAgOiAncHJpY2UnLCAgICAgICAvLyByZXN1bHQgcHJpY2VcbiAgICByZXN1bHRzICAgICAgICAgOiAncmVzdWx0cycsICAgICAvLyBhcnJheSBvZiByZXN1bHRzIChzdGFuZGFyZClcbiAgICB0aXRsZSAgICAgICAgICAgOiAndGl0bGUnLCAgICAgICAvLyByZXN1bHQgdGl0bGVcbiAgICB1cmwgICAgICAgICAgICAgOiAndXJsJywgICAgICAgICAvLyByZXN1bHQgdXJsXG4gICAgYWN0aW9uICAgICAgICAgIDogJ2FjdGlvbicsICAgICAgLy8gXCJ2aWV3IG1vcmVcIiBvYmplY3QgbmFtZVxuICAgIGFjdGlvblRleHQgICAgICA6ICd0ZXh0JywgICAgICAgIC8vIFwidmlldyBtb3JlXCIgdGV4dFxuICAgIGFjdGlvblVSTCAgICAgICA6ICd1cmwnICAgICAgICAgIC8vIFwidmlldyBtb3JlXCIgdXJsXG4gIH0sXG5cbiAgc2VsZWN0b3IgOiB7XG4gICAgcHJvbXB0ICAgICAgIDogJy5wcm9tcHQnLFxuICAgIHNlYXJjaEJ1dHRvbiA6ICcuc2VhcmNoLmJ1dHRvbicsXG4gICAgcmVzdWx0cyAgICAgIDogJy5yZXN1bHRzJyxcbiAgICBtZXNzYWdlICAgICAgOiAnLnJlc3VsdHMgPiAubWVzc2FnZScsXG4gICAgY2F0ZWdvcnkgICAgIDogJy5jYXRlZ29yeScsXG4gICAgcmVzdWx0ICAgICAgIDogJy5yZXN1bHQnLFxuICAgIHRpdGxlICAgICAgICA6ICcudGl0bGUsIC5uYW1lJ1xuICB9LFxuXG4gIHRlbXBsYXRlczoge1xuICAgIGVzY2FwZTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICB2YXJcbiAgICAgICAgYmFkQ2hhcnMgICAgID0gL1smPD5cIidgXS9nLFxuICAgICAgICBzaG91bGRFc2NhcGUgPSAvWyY8PlwiJ2BdLyxcbiAgICAgICAgZXNjYXBlICAgICAgID0ge1xuICAgICAgICAgIFwiJlwiOiBcIiZhbXA7XCIsXG4gICAgICAgICAgXCI8XCI6IFwiJmx0O1wiLFxuICAgICAgICAgIFwiPlwiOiBcIiZndDtcIixcbiAgICAgICAgICAnXCInOiBcIiZxdW90O1wiLFxuICAgICAgICAgIFwiJ1wiOiBcIiYjeDI3O1wiLFxuICAgICAgICAgIFwiYFwiOiBcIiYjeDYwO1wiXG4gICAgICAgIH0sXG4gICAgICAgIGVzY2FwZWRDaGFyICA9IGZ1bmN0aW9uKGNocikge1xuICAgICAgICAgIHJldHVybiBlc2NhcGVbY2hyXTtcbiAgICAgICAgfVxuICAgICAgO1xuICAgICAgaWYoc2hvdWxkRXNjYXBlLnRlc3Qoc3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoYmFkQ2hhcnMsIGVzY2FwZWRDaGFyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfSxcbiAgICBtZXNzYWdlOiBmdW5jdGlvbihtZXNzYWdlLCB0eXBlKSB7XG4gICAgICB2YXJcbiAgICAgICAgaHRtbCA9ICcnXG4gICAgICA7XG4gICAgICBpZihtZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgdHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGh0bWwgKz0gICcnXG4gICAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1lc3NhZ2UgJyArIHR5cGUgKyAnXCI+J1xuICAgICAgICA7XG4gICAgICAgIC8vIG1lc3NhZ2UgdHlwZVxuICAgICAgICBpZih0eXBlID09ICdlbXB0eScpIHtcbiAgICAgICAgICBodG1sICs9ICcnXG4gICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+Tm8gUmVzdWx0czwvZGl2IGNsYXNzPVwiaGVhZGVyXCI+J1xuICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImRlc2NyaXB0aW9uXCI+JyArIG1lc3NhZ2UgKyAnPC9kaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiPidcbiAgICAgICAgICA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaHRtbCArPSAnIDxkaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiPicgKyBtZXNzYWdlICsgJzwvZGl2Pic7XG4gICAgICAgIH1cbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICAgIH1cbiAgICAgIHJldHVybiBodG1sO1xuICAgIH0sXG4gICAgY2F0ZWdvcnk6IGZ1bmN0aW9uKHJlc3BvbnNlLCBmaWVsZHMpIHtcbiAgICAgIHZhclxuICAgICAgICBodG1sID0gJycsXG4gICAgICAgIGVzY2FwZSA9ICQuZm4uc2VhcmNoLnNldHRpbmdzLnRlbXBsYXRlcy5lc2NhcGVcbiAgICAgIDtcbiAgICAgIGlmKHJlc3BvbnNlW2ZpZWxkcy5jYXRlZ29yeVJlc3VsdHNdICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAvLyBlYWNoIGNhdGVnb3J5XG4gICAgICAgICQuZWFjaChyZXNwb25zZVtmaWVsZHMuY2F0ZWdvcnlSZXN1bHRzXSwgZnVuY3Rpb24oaW5kZXgsIGNhdGVnb3J5KSB7XG4gICAgICAgICAgaWYoY2F0ZWdvcnlbZmllbGRzLnJlc3VsdHNdICE9PSB1bmRlZmluZWQgJiYgY2F0ZWdvcnkucmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgIGh0bWwgICs9ICc8ZGl2IGNsYXNzPVwiY2F0ZWdvcnlcIj4nO1xuXG4gICAgICAgICAgICBpZihjYXRlZ29yeVtmaWVsZHMuY2F0ZWdvcnlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJuYW1lXCI+JyArIGNhdGVnb3J5W2ZpZWxkcy5jYXRlZ29yeU5hbWVdICsgJzwvZGl2Pic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGVhY2ggaXRlbSBpbnNpZGUgY2F0ZWdvcnlcbiAgICAgICAgICAgICQuZWFjaChjYXRlZ29yeS5yZXN1bHRzLCBmdW5jdGlvbihpbmRleCwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgIGlmKHJlc3VsdFtmaWVsZHMudXJsXSkge1xuICAgICAgICAgICAgICAgIGh0bWwgICs9ICc8YSBjbGFzcz1cInJlc3VsdFwiIGhyZWY9XCInICsgcmVzdWx0W2ZpZWxkcy51cmxdICsgJ1wiPic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaHRtbCAgKz0gJzxhIGNsYXNzPVwicmVzdWx0XCI+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZihyZXN1bHRbZmllbGRzLmltYWdlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnJ1xuICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImltYWdlXCI+J1xuICAgICAgICAgICAgICAgICAgKyAnIDxpbWcgc3JjPVwiJyArIHJlc3VsdFtmaWVsZHMuaW1hZ2VdICsgJ1wiPidcbiAgICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNvbnRlbnRcIj4nO1xuICAgICAgICAgICAgICBpZihyZXN1bHRbZmllbGRzLnByaWNlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInByaWNlXCI+JyArIHJlc3VsdFtmaWVsZHMucHJpY2VdICsgJzwvZGl2Pic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYocmVzdWx0W2ZpZWxkcy50aXRsZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJ0aXRsZVwiPicgKyByZXN1bHRbZmllbGRzLnRpdGxlXSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmKHJlc3VsdFtmaWVsZHMuZGVzY3JpcHRpb25dICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj4nICsgcmVzdWx0W2ZpZWxkcy5kZXNjcmlwdGlvbl0gKyAnPC9kaXY+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBodG1sICArPSAnJ1xuICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICBodG1sICs9ICc8L2E+JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaHRtbCAgKz0gJydcbiAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmKHJlc3BvbnNlW2ZpZWxkcy5hY3Rpb25dKSB7XG4gICAgICAgICAgaHRtbCArPSAnJ1xuICAgICAgICAgICsgJzxhIGhyZWY9XCInICsgcmVzcG9uc2VbZmllbGRzLmFjdGlvbl1bZmllbGRzLmFjdGlvblVSTF0gKyAnXCIgY2xhc3M9XCJhY3Rpb25cIj4nXG4gICAgICAgICAgKyAgIHJlc3BvbnNlW2ZpZWxkcy5hY3Rpb25dW2ZpZWxkcy5hY3Rpb25UZXh0XVxuICAgICAgICAgICsgJzwvYT4nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodG1sO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgc3RhbmRhcmQ6IGZ1bmN0aW9uKHJlc3BvbnNlLCBmaWVsZHMpIHtcbiAgICAgIHZhclxuICAgICAgICBodG1sID0gJydcbiAgICAgIDtcbiAgICAgIGlmKHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgLy8gZWFjaCByZXN1bHRcbiAgICAgICAgJC5lYWNoKHJlc3BvbnNlW2ZpZWxkcy5yZXN1bHRzXSwgZnVuY3Rpb24oaW5kZXgsIHJlc3VsdCkge1xuICAgICAgICAgIGlmKHJlc3VsdFtmaWVsZHMudXJsXSkge1xuICAgICAgICAgICAgaHRtbCAgKz0gJzxhIGNsYXNzPVwicmVzdWx0XCIgaHJlZj1cIicgKyByZXN1bHRbZmllbGRzLnVybF0gKyAnXCI+JztcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBodG1sICArPSAnPGEgY2xhc3M9XCJyZXN1bHRcIj4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihyZXN1bHRbZmllbGRzLmltYWdlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBodG1sICs9ICcnXG4gICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJpbWFnZVwiPidcbiAgICAgICAgICAgICAgKyAnIDxpbWcgc3JjPVwiJyArIHJlc3VsdFtmaWVsZHMuaW1hZ2VdICsgJ1wiPidcbiAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiY29udGVudFwiPic7XG4gICAgICAgICAgaWYocmVzdWx0W2ZpZWxkcy5wcmljZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInByaWNlXCI+JyArIHJlc3VsdFtmaWVsZHMucHJpY2VdICsgJzwvZGl2Pic7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHJlc3VsdFtmaWVsZHMudGl0bGVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJ0aXRsZVwiPicgKyByZXN1bHRbZmllbGRzLnRpdGxlXSArICc8L2Rpdj4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihyZXN1bHRbZmllbGRzLmRlc2NyaXB0aW9uXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj4nICsgcmVzdWx0W2ZpZWxkcy5kZXNjcmlwdGlvbl0gKyAnPC9kaXY+JztcbiAgICAgICAgICB9XG4gICAgICAgICAgaHRtbCAgKz0gJydcbiAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICA7XG4gICAgICAgICAgaHRtbCArPSAnPC9hPic7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKHJlc3BvbnNlW2ZpZWxkcy5hY3Rpb25dKSB7XG4gICAgICAgICAgaHRtbCArPSAnJ1xuICAgICAgICAgICsgJzxhIGhyZWY9XCInICsgcmVzcG9uc2VbZmllbGRzLmFjdGlvbl1bZmllbGRzLmFjdGlvblVSTF0gKyAnXCIgY2xhc3M9XCJhY3Rpb25cIj4nXG4gICAgICAgICAgKyAgIHJlc3BvbnNlW2ZpZWxkcy5hY3Rpb25dW2ZpZWxkcy5hY3Rpb25UZXh0XVxuICAgICAgICAgICsgJzwvYT4nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodG1sO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufTtcblxufSkoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCApO1xuIl19
