!function(e,i,n,t){"use strict";i="undefined"!=typeof i&&i.Math==Math?i:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(o){var r,s=e(this),a=e(i),l=e(n),c=e("html"),d=e("head"),u=s.selector||"",f=(new Date).getTime(),b=[],h=arguments[0],m="string"==typeof h,g=[].slice.call(arguments,1),v=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame||function(e){setTimeout(e,0)};return s.each(function(){var s,p,y,C,k,w,T=e.isPlainObject(o)?e.extend(!0,{},e.fn.sidebar.settings,o):e.extend({},e.fn.sidebar.settings),x=T.selector,S=T.className,A=T.namespace,F=T.regExp,O=T.error,P="."+A,E="module-"+A,H=e(this),M=e(T.context),D=H.children(x.sidebar),j=M.children(x.fixed),R=M.children(x.pusher),z=this,B=H.data(E);w={initialize:function(){w.debug("Initializing sidebar",o),w.create.id(),k=w.get.transitionEvent(),w.is.ios()&&w.set.ios(),T.delaySetup?v(w.setup.layout):w.setup.layout(),v(function(){w.setup.cache()}),w.instantiate()},instantiate:function(){w.verbose("Storing instance of module",w),B=w,H.data(E,w)},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),p="."+y,w.verbose("Creating unique id for element",y)}},destroy:function(){w.verbose("Destroying previous module for",H),H.off(P).removeData(E),w.is.ios()&&w.remove.ios(),M.off(p),a.off(p),l.off(p)},event:{clickaway:function(e){var i=R.find(e.target).length>0||R.is(e.target),n=M.is(e.target);i&&(w.verbose("User clicked on dimmed page"),w.hide()),n&&(w.verbose("User clicked on dimmable context (scaled out page)"),w.hide())},touch:function(e){},containScroll:function(e){z.scrollTop<=0&&(z.scrollTop=1),z.scrollTop+z.offsetHeight>=z.scrollHeight&&(z.scrollTop=z.scrollHeight-z.offsetHeight-1)},scroll:function(i){0===e(i.target).closest(x.sidebar).length&&i.preventDefault()}},bind:{clickaway:function(){w.verbose("Adding clickaway events to context",M),T.closable&&M.on("click"+p,w.event.clickaway).on("touchend"+p,w.event.clickaway)},scrollLock:function(){T.scrollLock&&(w.debug("Disabling page scroll"),a.on("DOMMouseScroll"+p,w.event.scroll)),w.verbose("Adding events to contain sidebar scroll"),l.on("touchmove"+p,w.event.touch),H.on("scroll"+P,w.event.containScroll)}},unbind:{clickaway:function(){w.verbose("Removing clickaway events from context",M),M.off(p)},scrollLock:function(){w.verbose("Removing scroll lock from page"),l.off(p),a.off(p),H.off("scroll"+P)}},add:{inlineCSS:function(){var i,n=w.cache.width||H.outerWidth(),t=w.cache.height||H.outerHeight(),o=w.is.rtl(),r=w.get.direction(),a={left:n,right:-n,top:t,bottom:-t};o&&(w.verbose("RTL detected, flipping widths"),a.left=-n,a.right=n),i="<style>","left"===r||"right"===r?(w.debug("Adding CSS rules for animation distance",n),i+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(i+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),w.is.ie()&&("left"===r||"right"===r?(w.debug("Adding CSS rules for animation distance",n),i+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(i+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),i+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),i+="</style>",s=e(i).appendTo(d),w.debug("Adding sizing css to head",s)}},refresh:function(){w.verbose("Refreshing selector cache"),M=e(T.context),D=M.children(x.sidebar),R=M.children(x.pusher),j=M.children(x.fixed),w.clear.cache()},refreshSidebars:function(){w.verbose("Refreshing other sidebars"),D=M.children(x.sidebar)},repaint:function(){w.verbose("Forcing repaint event"),z.style.display="none";z.offsetHeight;z.scrollTop=z.scrollTop,z.style.display=""},setup:{cache:function(){w.cache={width:H.outerWidth(),height:H.outerHeight(),rtl:"rtl"==H.css("direction")}},layout:function(){0===M.children(x.pusher).length&&(w.debug("Adding wrapper element for sidebar"),w.error(O.pusher),R=e('<div class="pusher" />'),M.children().not(x.omitted).not(D).wrapAll(R),w.refresh()),0!==H.nextAll(x.pusher).length&&H.nextAll(x.pusher)[0]===R[0]||(w.debug("Moved sidebar to correct parent element"),w.error(O.movedSidebar,z),H.detach().prependTo(M),w.refresh()),w.clear.cache(),w.set.pushable(),w.set.direction()}},attachEvents:function(i,n){var t=e(i);n=e.isFunction(w[n])?w[n]:w.toggle,t.length>0?(w.debug("Attaching sidebar events to element",i,n),t.on("click"+P,n)):w.error(O.notFound,i)},show:function(i){if(i=e.isFunction(i)?i:function(){},w.is.hidden()){if(w.refreshSidebars(),T.overlay&&(w.error(O.overlay),T.transition="overlay"),w.refresh(),w.othersActive())if(w.debug("Other sidebars currently visible"),T.exclusive){if("overlay"!=T.transition)return void w.hideOthers(w.show);w.hideOthers()}else T.transition="overlay";w.pushPage(function(){i.call(z),T.onShow.call(z)}),T.onChange.call(z),T.onVisible.call(z)}else w.debug("Sidebar is already visible")},hide:function(i){i=e.isFunction(i)?i:function(){},(w.is.visible()||w.is.animating())&&(w.debug("Hiding sidebar",i),w.refreshSidebars(),w.pullPage(function(){i.call(z),T.onHidden.call(z)}),T.onChange.call(z),T.onHide.call(z))},othersAnimating:function(){return D.not(H).filter("."+S.animating).length>0},othersVisible:function(){return D.not(H).filter("."+S.visible).length>0},othersActive:function(){return w.othersVisible()||w.othersAnimating()},hideOthers:function(e){var i=D.not(H).filter("."+S.visible),n=i.length,t=0;e=e||function(){},i.sidebar("hide",function(){t++,t==n&&e()})},toggle:function(){w.verbose("Determining toggled direction"),w.is.hidden()?w.show():w.hide()},pushPage:function(i){var n,t,o,r=w.get.transition(),s="overlay"===r||w.othersActive()?H:R;i=e.isFunction(i)?i:function(){},"scale down"==T.transition&&w.scrollToTop(),w.set.transition(r),w.repaint(),n=function(){w.bind.clickaway(),w.add.inlineCSS(),w.set.animating(),w.set.visible()},t=function(){w.set.dimmed()},o=function(e){e.target==s[0]&&(s.off(k+p,o),w.remove.animating(),w.bind.scrollLock(),i.call(z))},s.off(k+p),s.on(k+p,o),v(n),T.dimPage&&!w.othersVisible()&&v(t)},pullPage:function(i){var n,t,o=w.get.transition(),r="overlay"==o||w.othersActive()?H:R;i=e.isFunction(i)?i:function(){},w.verbose("Removing context push state",w.get.direction()),w.unbind.clickaway(),w.unbind.scrollLock(),n=function(){w.set.transition(o),w.set.animating(),w.remove.visible(),T.dimPage&&!w.othersVisible()&&R.removeClass(S.dimmed)},t=function(e){e.target==r[0]&&(r.off(k+p,t),w.remove.animating(),w.remove.transition(),w.remove.inlineCSS(),("scale down"==o||T.returnScroll&&w.is.mobile())&&w.scrollBack(),i.call(z))},r.off(k+p),r.on(k+p,t),v(n)},scrollToTop:function(){w.verbose("Scrolling to top of page to avoid animation issues"),C=e(i).scrollTop(),H.scrollTop(0),i.scrollTo(0,0)},scrollBack:function(){w.verbose("Scrolling back to original page position"),i.scrollTo(0,C)},clear:{cache:function(){w.verbose("Clearing cached dimensions"),w.cache={}}},set:{ios:function(){c.addClass(S.ios)},pushed:function(){M.addClass(S.pushed)},pushable:function(){M.addClass(S.pushable)},dimmed:function(){R.addClass(S.dimmed)},active:function(){H.addClass(S.active)},animating:function(){H.addClass(S.animating)},transition:function(e){e=e||w.get.transition(),H.addClass(e)},direction:function(e){e=e||w.get.direction(),H.addClass(S[e])},visible:function(){H.addClass(S.visible)},overlay:function(){H.addClass(S.overlay)}},remove:{inlineCSS:function(){w.debug("Removing inline css styles",s),s&&s.length>0&&s.remove()},ios:function(){c.removeClass(S.ios)},pushed:function(){M.removeClass(S.pushed)},pushable:function(){M.removeClass(S.pushable)},active:function(){H.removeClass(S.active)},animating:function(){H.removeClass(S.animating)},transition:function(e){e=e||w.get.transition(),H.removeClass(e)},direction:function(e){e=e||w.get.direction(),H.removeClass(S[e])},visible:function(){H.removeClass(S.visible)},overlay:function(){H.removeClass(S.overlay)}},get:{direction:function(){return H.hasClass(S.top)?S.top:H.hasClass(S.right)?S.right:H.hasClass(S.bottom)?S.bottom:S.left},transition:function(){var e,i=w.get.direction();return e=w.is.mobile()?"auto"==T.mobileTransition?T.defaultTransition.mobile[i]:T.mobileTransition:"auto"==T.transition?T.defaultTransition.computer[i]:T.transition,w.verbose("Determined transition",e),e},transitionEvent:function(){var e,i=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(i.style[e]!==t)return o[e]}},is:{ie:function(){var e=!i.ActiveXObject&&"ActiveXObject"in i,n="ActiveXObject"in i;return e||n},ios:function(){var e=navigator.userAgent,i=e.match(F.ios),n=e.match(F.mobileChrome);return!(!i||n)&&(w.verbose("Browser was found to be iOS",e),!0)},mobile:function(){var e=navigator.userAgent,i=e.match(F.mobile);return i?(w.verbose("Browser was found to be mobile",e),!0):(w.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!w.is.visible()},visible:function(){return H.hasClass(S.visible)},open:function(){return w.is.visible()},closed:function(){return w.is.hidden()},vertical:function(){return H.hasClass(S.top)},animating:function(){return M.hasClass(S.animating)},rtl:function(){return w.cache.rtl===t&&(w.cache.rtl="rtl"==H.css("direction")),w.cache.rtl}},setting:function(i,n){if(w.debug("Changing setting",i,n),e.isPlainObject(i))e.extend(!0,T,i);else{if(n===t)return T[i];e.isPlainObject(T[i])?e.extend(!0,T[i],n):T[i]=n}},internal:function(i,n){if(e.isPlainObject(i))e.extend(!0,w,i);else{if(n===t)return w[i];w[i]=n}},debug:function(){!T.silent&&T.debug&&(T.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,T.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!T.silent&&T.verbose&&T.debug&&(T.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,T.name+":"),w.verbose.apply(console,arguments)))},error:function(){T.silent||(w.error=Function.prototype.bind.call(console.error,console,T.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var i,n,t;T.performance&&(i=(new Date).getTime(),t=f||i,n=i-t,f=i,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:z,"Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var i=T.name+":",n=0;f=!1,clearTimeout(w.performance.timer),e.each(b,function(e,i){n+=i["Execution Time"]}),i+=" "+n+"ms",u&&(i+=" '"+u+"'"),(console.group!==t||console.table!==t)&&b.length>0&&(console.groupCollapsed(i),console.table?console.table(b):e.each(b,function(e,i){console.log(i.Name+": "+i["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(i,n,o){var s,a,l,c=B;return n=n||g,o=z||o,"string"==typeof i&&c!==t&&(i=i.split(/[\. ]/),s=i.length-1,e.each(i,function(n,o){var r=n!=s?o+i[n+1].charAt(0).toUpperCase()+i[n+1].slice(1):i;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==t)return a=c[r],!1;if(!e.isPlainObject(c[o])||n==s)return c[o]!==t?(a=c[o],!1):(w.error(O.method,i),!1);c=c[o]}})),e.isFunction(a)?l=a.apply(o,n):a!==t&&(l=a),e.isArray(r)?r.push(l):r!==t?r=[r,l]:l!==t&&(r=l),a}},m?(B===t&&w.initialize(),w.invoke(h)):(B!==t&&w.invoke("destroy"),w.initialize())}),r!==t?r:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9zaWRlYmFyLmpzIl0sIm5hbWVzIjpbIiQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsInVuZGVmaW5lZCIsIk1hdGgiLCJzZWxmIiwiRnVuY3Rpb24iLCJmbiIsInNpZGViYXIiLCJwYXJhbWV0ZXJzIiwicmV0dXJuZWRWYWx1ZSIsIiRhbGxNb2R1bGVzIiwidGhpcyIsIiR3aW5kb3ciLCIkZG9jdW1lbnQiLCIkaHRtbCIsIiRoZWFkIiwibW9kdWxlU2VsZWN0b3IiLCJzZWxlY3RvciIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInBlcmZvcm1hbmNlIiwicXVlcnkiLCJhcmd1bWVudHMiLCJtZXRob2RJbnZva2VkIiwicXVlcnlBcmd1bWVudHMiLCJzbGljZSIsImNhbGwiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtc1JlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwic2V0VGltZW91dCIsImVhY2giLCIkc3R5bGUiLCJlbGVtZW50TmFtZXNwYWNlIiwiaWQiLCJjdXJyZW50U2Nyb2xsIiwidHJhbnNpdGlvbkV2ZW50IiwibW9kdWxlIiwic2V0dGluZ3MiLCJpc1BsYWluT2JqZWN0IiwiZXh0ZW5kIiwiY2xhc3NOYW1lIiwibmFtZXNwYWNlIiwicmVnRXhwIiwiZXJyb3IiLCJldmVudE5hbWVzcGFjZSIsIm1vZHVsZU5hbWVzcGFjZSIsIiRtb2R1bGUiLCIkY29udGV4dCIsImNvbnRleHQiLCIkc2lkZWJhcnMiLCJjaGlsZHJlbiIsIiRmaXhlZCIsImZpeGVkIiwiJHB1c2hlciIsInB1c2hlciIsImVsZW1lbnQiLCJpbnN0YW5jZSIsImRhdGEiLCJpbml0aWFsaXplIiwiZGVidWciLCJjcmVhdGUiLCJnZXQiLCJpcyIsImlvcyIsInNldCIsImRlbGF5U2V0dXAiLCJzZXR1cCIsImxheW91dCIsImNhY2hlIiwiaW5zdGFudGlhdGUiLCJ2ZXJib3NlIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJkZXN0cm95Iiwib2ZmIiwicmVtb3ZlRGF0YSIsInJlbW92ZSIsImV2ZW50IiwiY2xpY2thd2F5IiwiY2xpY2tlZEluUHVzaGVyIiwiZmluZCIsInRhcmdldCIsImxlbmd0aCIsImNsaWNrZWRDb250ZXh0IiwiaGlkZSIsInRvdWNoIiwiY29udGFpblNjcm9sbCIsInNjcm9sbFRvcCIsIm9mZnNldEhlaWdodCIsInNjcm9sbEhlaWdodCIsInNjcm9sbCIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsImJpbmQiLCJjbG9zYWJsZSIsIm9uIiwic2Nyb2xsTG9jayIsInVuYmluZCIsImFkZCIsImlubGluZUNTUyIsInN0eWxlIiwid2lkdGgiLCJvdXRlcldpZHRoIiwiaGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJpc1JUTCIsInJ0bCIsImRpcmVjdGlvbiIsImRpc3RhbmNlIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiaWUiLCJhcHBlbmRUbyIsInJlZnJlc2giLCJjbGVhciIsInJlZnJlc2hTaWRlYmFycyIsInJlcGFpbnQiLCJkaXNwbGF5IiwiY3NzIiwibm90Iiwib21pdHRlZCIsIndyYXBBbGwiLCJuZXh0QWxsIiwibW92ZWRTaWRlYmFyIiwiZGV0YWNoIiwicHJlcGVuZFRvIiwicHVzaGFibGUiLCJhdHRhY2hFdmVudHMiLCIkdG9nZ2xlIiwiaXNGdW5jdGlvbiIsInRvZ2dsZSIsIm5vdEZvdW5kIiwic2hvdyIsImhpZGRlbiIsIm92ZXJsYXkiLCJ0cmFuc2l0aW9uIiwib3RoZXJzQWN0aXZlIiwiZXhjbHVzaXZlIiwiaGlkZU90aGVycyIsInB1c2hQYWdlIiwib25TaG93Iiwib25DaGFuZ2UiLCJvblZpc2libGUiLCJ2aXNpYmxlIiwiYW5pbWF0aW5nIiwicHVsbFBhZ2UiLCJvbkhpZGRlbiIsIm9uSGlkZSIsIm90aGVyc0FuaW1hdGluZyIsImZpbHRlciIsIm90aGVyc1Zpc2libGUiLCIkb3RoZXJTaWRlYmFycyIsInNpZGViYXJDb3VudCIsImNhbGxiYWNrQ291bnQiLCJhbmltYXRlIiwiZGltIiwidHJhbnNpdGlvbkVuZCIsIiR0cmFuc2l0aW9uIiwic2Nyb2xsVG9Ub3AiLCJkaW1tZWQiLCJkaW1QYWdlIiwicmVtb3ZlQ2xhc3MiLCJyZXR1cm5TY3JvbGwiLCJtb2JpbGUiLCJzY3JvbGxCYWNrIiwic2Nyb2xsVG8iLCJhZGRDbGFzcyIsInB1c2hlZCIsImFjdGl2ZSIsImhhc0NsYXNzIiwibW9iaWxlVHJhbnNpdGlvbiIsImRlZmF1bHRUcmFuc2l0aW9uIiwiY29tcHV0ZXIiLCJjcmVhdGVFbGVtZW50IiwidHJhbnNpdGlvbnMiLCJPVHJhbnNpdGlvbiIsIk1velRyYW5zaXRpb24iLCJXZWJraXRUcmFuc2l0aW9uIiwiaXNJRTExIiwiaXNJRSIsInVzZXJBZ2VudCIsIm5hdmlnYXRvciIsImlzSU9TIiwibWF0Y2giLCJpc01vYmlsZUNocm9tZSIsIm1vYmlsZUNocm9tZSIsImlzTW9iaWxlIiwib3BlbiIsImNsb3NlZCIsInZlcnRpY2FsIiwic2V0dGluZyIsIm5hbWUiLCJ2YWx1ZSIsImludGVybmFsIiwic2lsZW50IiwibG9nIiwicHJvdG90eXBlIiwiY29uc29sZSIsImluZm8iLCJhcHBseSIsIm1lc3NhZ2UiLCJjdXJyZW50VGltZSIsImV4ZWN1dGlvblRpbWUiLCJwcmV2aW91c1RpbWUiLCJwdXNoIiwiTmFtZSIsIkFyZ3VtZW50cyIsIkVsZW1lbnQiLCJFeGVjdXRpb24gVGltZSIsImNsZWFyVGltZW91dCIsInRpbWVyIiwidGl0bGUiLCJ0b3RhbFRpbWUiLCJpbmRleCIsImdyb3VwIiwidGFibGUiLCJncm91cENvbGxhcHNlZCIsImdyb3VwRW5kIiwiaW52b2tlIiwicGFzc2VkQXJndW1lbnRzIiwibWF4RGVwdGgiLCJmb3VuZCIsInJlc3BvbnNlIiwib2JqZWN0Iiwic3BsaXQiLCJkZXB0aCIsImNhbWVsQ2FzZVZhbHVlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJtZXRob2QiLCJpc0FycmF5IiwiZHVyYXRpb24iLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQVVDLFNBQVdBLEVBQUdDLEVBQVFDLEVBQVVDLEdBRWpDLFlBRUFGLEdBQTJCLG1CQUFWQSxJQUF5QkEsRUFBT0csTUFBUUEsS0FDckRILEVBQ2dCLG1CQUFSSSxPQUF1QkEsS0FBS0QsTUFBUUEsS0FDMUNDLEtBQ0FDLFNBQVMsaUJBR2ZOLEVBQUVPLEdBQUdDLFFBQVUsU0FBU0MsR0FDdEIsR0FzQkVDLEdBckJBQyxFQUFrQlgsRUFBRVksTUFDcEJDLEVBQWtCYixFQUFFQyxHQUNwQmEsRUFBa0JkLEVBQUVFLEdBQ3BCYSxFQUFrQmYsRUFBRSxRQUNwQmdCLEVBQWtCaEIsRUFBRSxRQUVwQmlCLEVBQWtCTixFQUFZTyxVQUFZLEdBRTFDQyxHQUFrQixHQUFJQyxPQUFPQyxVQUM3QkMsS0FFQUMsRUFBa0JDLFVBQVUsR0FDNUJDLEVBQW1DLGdCQUFURixHQUMxQkcsS0FBcUJDLE1BQU1DLEtBQUtKLFVBQVcsR0FFM0NLLEVBQXdCNUIsRUFBTzRCLHVCQUMxQjVCLEVBQU82QiwwQkFDUDdCLEVBQU84Qiw2QkFDUDlCLEVBQU8rQix5QkFDUCxTQUFTQyxHQUFZQyxXQUFXRCxFQUFVLEdBdzRCakQsT0FuNEJBdEIsR0FDR3dCLEtBQUssV0FDSixHQW9CRUMsR0FLQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFFQUMsRUE3QkFDLEVBQW9CMUMsRUFBRTJDLGNBQWNsQyxHQUNoQ1QsRUFBRTRDLFFBQU8sS0FBVTVDLEVBQUVPLEdBQUdDLFFBQVFrQyxTQUFVakMsR0FDMUNULEVBQUU0QyxVQUFXNUMsRUFBRU8sR0FBR0MsUUFBUWtDLFVBRTlCeEIsRUFBa0J3QixFQUFTeEIsU0FDM0IyQixFQUFrQkgsRUFBU0csVUFDM0JDLEVBQWtCSixFQUFTSSxVQUMzQkMsRUFBa0JMLEVBQVNLLE9BQzNCQyxFQUFrQk4sRUFBU00sTUFFM0JDLEVBQWtCLElBQU1ILEVBQ3hCSSxFQUFrQixVQUFZSixFQUU5QkssRUFBa0JuRCxFQUFFWSxNQUNwQndDLEVBQWtCcEQsRUFBRTBDLEVBQVNXLFNBRTdCQyxFQUFrQkgsRUFBUUksU0FBU3JDLEVBQVNWLFNBQzVDZ0QsRUFBa0JKLEVBQVNHLFNBQVNyQyxFQUFTdUMsT0FDN0NDLEVBQWtCTixFQUFTRyxTQUFTckMsRUFBU3lDLFFBRzdDQyxFQUFrQmhELEtBQ2xCaUQsRUFBa0JWLEVBQVFXLEtBQUtaLEVBVWpDVCxJQUVFc0IsV0FBWSxXQUNWdEIsRUFBT3VCLE1BQU0sdUJBQXdCdkQsR0FFckNnQyxFQUFPd0IsT0FBTzNCLEtBRWRFLEVBQWtCQyxFQUFPeUIsSUFBSTFCLGtCQUUxQkMsRUFBTzBCLEdBQUdDLE9BQ1gzQixFQUFPNEIsSUFBSUQsTUFJVjFCLEVBQVM0QixXQUNWekMsRUFBc0JZLEVBQU84QixNQUFNQyxRQUduQy9CLEVBQU84QixNQUFNQyxTQUdmM0MsRUFBc0IsV0FDcEJZLEVBQU84QixNQUFNRSxVQUdmaEMsRUFBT2lDLGVBR1RBLFlBQWEsV0FDWGpDLEVBQU9rQyxRQUFRLDZCQUE4QmxDLEdBQzdDb0IsRUFBV3BCLEVBQ1hVLEVBQ0dXLEtBQUtaLEVBQWlCVCxJQUkzQndCLFFBQ0UzQixHQUFJLFdBQ0ZBLEdBQU1sQyxLQUFLd0UsU0FBU0MsU0FBUyxJQUFNLGFBQWFDLE9BQU8sRUFBRSxHQUN6RHpDLEVBQW1CLElBQU1DLEVBQ3pCRyxFQUFPa0MsUUFBUSxpQ0FBa0NyQyxLQUlyRHlDLFFBQVMsV0FDUHRDLEVBQU9rQyxRQUFRLGlDQUFrQ3hCLEdBQ2pEQSxFQUNHNkIsSUFBSS9CLEdBQ0pnQyxXQUFXL0IsR0FFWFQsRUFBTzBCLEdBQUdDLE9BQ1gzQixFQUFPeUMsT0FBT2QsTUFHaEJoQixFQUFTNEIsSUFBSTNDLEdBQ2J4QixFQUFRbUUsSUFBSTNDLEdBQ1p2QixFQUFVa0UsSUFBSTNDLElBR2hCOEMsT0FDRUMsVUFBVyxTQUFTRCxHQUNsQixHQUNFRSxHQUFtQjNCLEVBQVE0QixLQUFLSCxFQUFNSSxRQUFRQyxPQUFTLEdBQUs5QixFQUFRUyxHQUFHZ0IsRUFBTUksUUFDN0VFLEVBQW1CckMsRUFBU2UsR0FBR2dCLEVBQU1JLE9BRXBDRixLQUNENUMsRUFBT2tDLFFBQVEsK0JBQ2ZsQyxFQUFPaUQsUUFFTkQsSUFDRGhELEVBQU9rQyxRQUFRLHNEQUNmbEMsRUFBT2lELFNBR1hDLE1BQU8sU0FBU1IsS0FHaEJTLGNBQWUsU0FBU1QsR0FDbkJ2QixFQUFRaUMsV0FBYSxJQUN0QmpDLEVBQVFpQyxVQUFZLEdBRWxCakMsRUFBUWlDLFVBQVlqQyxFQUFRa0MsY0FBaUJsQyxFQUFRbUMsZUFDdkRuQyxFQUFRaUMsVUFBWWpDLEVBQVFtQyxhQUFlbkMsRUFBUWtDLGFBQWUsSUFHdEVFLE9BQVEsU0FBU2IsR0FDMEMsSUFBckRuRixFQUFFbUYsRUFBTUksUUFBUVUsUUFBUS9FLEVBQVNWLFNBQVNnRixRQUM1Q0wsRUFBTWUsbUJBS1pDLE1BQ0VmLFVBQVcsV0FDVDNDLEVBQU9rQyxRQUFRLHFDQUFzQ3ZCLEdBQ2xEVixFQUFTMEQsVUFDVmhELEVBQ0dpRCxHQUFHLFFBQWFoRSxFQUFrQkksRUFBTzBDLE1BQU1DLFdBQy9DaUIsR0FBRyxXQUFhaEUsRUFBa0JJLEVBQU8wQyxNQUFNQyxZQUl0RGtCLFdBQVksV0FDUDVELEVBQVM0RCxhQUNWN0QsRUFBT3VCLE1BQU0seUJBQ2JuRCxFQUNHd0YsR0FBRyxpQkFBbUJoRSxFQUFrQkksRUFBTzBDLE1BQU1hLFNBRzFEdkQsRUFBT2tDLFFBQVEsMkNBQ2Y3RCxFQUNHdUYsR0FBRyxZQUFjaEUsRUFBa0JJLEVBQU8wQyxNQUFNUSxPQUVuRHhDLEVBQ0drRCxHQUFHLFNBQVdwRCxFQUFnQlIsRUFBTzBDLE1BQU1TLGlCQUlsRFcsUUFDRW5CLFVBQVcsV0FDVDNDLEVBQU9rQyxRQUFRLHlDQUEwQ3ZCLEdBQ3pEQSxFQUFTNEIsSUFBSTNDLElBRWZpRSxXQUFZLFdBQ1Y3RCxFQUFPa0MsUUFBUSxrQ0FDZjdELEVBQVVrRSxJQUFJM0MsR0FDZHhCLEVBQVFtRSxJQUFJM0MsR0FDWmMsRUFBUTZCLElBQUksU0FBVy9CLEtBSTNCdUQsS0FDRUMsVUFBVyxXQUNULEdBV0VDLEdBVkFDLEVBQVlsRSxFQUFPZ0MsTUFBTWtDLE9BQVV4RCxFQUFReUQsYUFDM0NDLEVBQVlwRSxFQUFPZ0MsTUFBTW9DLFFBQVUxRCxFQUFRMkQsY0FDM0NDLEVBQVl0RSxFQUFPMEIsR0FBRzZDLE1BQ3RCQyxFQUFZeEUsRUFBT3lCLElBQUkrQyxZQUN2QkMsR0FDRUMsS0FBU1IsRUFDVFMsT0FBVVQsRUFDVlUsSUFBU1IsRUFDVFMsUUFBVVQsRUFLWEUsS0FDRHRFLEVBQU9rQyxRQUFRLGlDQUNmdUMsRUFBU0MsTUFBUVIsRUFDakJPLEVBQVNFLE1BQVFULEdBR25CRCxFQUFTLFVBRVEsU0FBZE8sR0FBc0MsVUFBZEEsR0FDekJ4RSxFQUFPdUIsTUFBTSwwQ0FBMkMyQyxHQUN4REQsR0FBVSxnQkFDWU8sRUFBWSxrQ0FDWkEsRUFBWSx5REFDUUMsRUFBU0QsR0FBYSwrQ0FDdEJDLEVBQVNELEdBQWEsZ0JBSTVDLFFBQWRBLEdBQW9DLFVBQWJBLElBQzdCUCxHQUFVLGdCQUNZTyxFQUFZLGtDQUNaQSxFQUFZLDREQUNZQyxFQUFTRCxHQUFhLCtDQUN0QkMsRUFBU0QsR0FBYSxhQU9sRXhFLEVBQU8wQixHQUFHb0QsT0FDSyxTQUFkTixHQUFzQyxVQUFkQSxHQUN6QnhFLEVBQU91QixNQUFNLDBDQUEyQzJDLEdBQ3hERCxHQUFVLGdDQUM0Qk8sRUFBWSwrREFDUkMsRUFBU0QsR0FBYSwrQ0FDdEJDLEVBQVNELEdBQWEsZ0JBSTVDLFFBQWRBLEdBQW9DLFVBQWJBLElBQzdCUCxHQUFVLGdDQUM0Qk8sRUFBWSxrRUFDSkMsRUFBU0QsR0FBYSwrQ0FDdEJDLEVBQVNELEdBQWEsYUFLdEVQLEdBQVMsNlFBUVhBLEdBQVMsV0FDVHRFLEVBQVNwQyxFQUFFMEcsR0FDUmMsU0FBU3hHLEdBRVp5QixFQUFPdUIsTUFBTSw0QkFBNkI1QixLQUk5Q3FGLFFBQVMsV0FDUGhGLEVBQU9rQyxRQUFRLDZCQUNmdkIsRUFBWXBELEVBQUUwQyxFQUFTVyxTQUN2QkMsRUFBWUYsRUFBU0csU0FBU3JDLEVBQVNWLFNBQ3ZDa0QsRUFBWU4sRUFBU0csU0FBU3JDLEVBQVN5QyxRQUN2Q0gsRUFBWUosRUFBU0csU0FBU3JDLEVBQVN1QyxPQUN2Q2hCLEVBQU9pRixNQUFNakQsU0FHZmtELGdCQUFpQixXQUNmbEYsRUFBT2tDLFFBQVEsNkJBQ2ZyQixFQUFZRixFQUFTRyxTQUFTckMsRUFBU1YsVUFHekNvSCxRQUFTLFdBQ1BuRixFQUFPa0MsUUFBUSx5QkFDZmYsRUFBUThDLE1BQU1tQixRQUFVLE1BQ1ZqRSxHQUFRa0MsWUFDdEJsQyxHQUFRaUMsVUFBWWpDLEVBQVFpQyxVQUM1QmpDLEVBQVE4QyxNQUFNbUIsUUFBVSxJQUcxQnRELE9BQ0VFLE1BQU8sV0FDTGhDLEVBQU9nQyxPQUNMa0MsTUFBU3hELEVBQVF5RCxhQUNqQkMsT0FBUzFELEVBQVEyRCxjQUNqQkUsSUFBc0MsT0FBNUI3RCxFQUFRMkUsSUFBSSxlQUcxQnRELE9BQVEsV0FDNEMsSUFBOUNwQixFQUFTRyxTQUFTckMsRUFBU3lDLFFBQVE2QixTQUNyQy9DLEVBQU91QixNQUFNLHNDQUNidkIsRUFBT08sTUFBTUEsRUFBTVcsUUFDbkJELEVBQVUxRCxFQUFFLDBCQUNab0QsRUFDR0csV0FDRXdFLElBQUk3RyxFQUFTOEcsU0FDYkQsSUFBSXpFLEdBQ0oyRSxRQUFRdkUsR0FFYmpCLEVBQU9nRixXQUVzQyxJQUE1Q3RFLEVBQVErRSxRQUFRaEgsRUFBU3lDLFFBQVE2QixRQUFnQnJDLEVBQVErRSxRQUFRaEgsRUFBU3lDLFFBQVEsS0FBT0QsRUFBUSxLQUNsR2pCLEVBQU91QixNQUFNLDJDQUNidkIsRUFBT08sTUFBTUEsRUFBTW1GLGFBQWN2RSxHQUNqQ1QsRUFBUWlGLFNBQVNDLFVBQVVqRixHQUMzQlgsRUFBT2dGLFdBRVRoRixFQUFPaUYsTUFBTWpELFFBQ2JoQyxFQUFPNEIsSUFBSWlFLFdBQ1g3RixFQUFPNEIsSUFBSTRDLGNBSWZzQixhQUFjLFNBQVNySCxFQUFVaUUsR0FDL0IsR0FDRXFELEdBQVV4SSxFQUFFa0IsRUFFZGlFLEdBQVFuRixFQUFFeUksV0FBV2hHLEVBQU8wQyxJQUN4QjFDLEVBQU8wQyxHQUNQMUMsRUFBT2lHLE9BRVJGLEVBQVFoRCxPQUFTLEdBQ2xCL0MsRUFBT3VCLE1BQU0sc0NBQXVDOUMsRUFBVWlFLEdBQzlEcUQsRUFDR25DLEdBQUcsUUFBVXBELEVBQWdCa0MsSUFJaEMxQyxFQUFPTyxNQUFNQSxFQUFNMkYsU0FBVXpILElBSWpDMEgsS0FBTSxTQUFTM0csR0FLYixHQUpBQSxFQUFXakMsRUFBRXlJLFdBQVd4RyxHQUNwQkEsRUFDQSxhQUVEUSxFQUFPMEIsR0FBRzBFLFNBQVUsQ0FPckIsR0FOQXBHLEVBQU9rRixrQkFDSmpGLEVBQVNvRyxVQUNWckcsRUFBT08sTUFBTUEsRUFBTThGLFNBQ25CcEcsRUFBU3FHLFdBQWEsV0FFeEJ0RyxFQUFPZ0YsVUFDSmhGLEVBQU91RyxlQUVSLEdBREF2RyxFQUFPdUIsTUFBTSxvQ0FDVnRCLEVBQVN1RyxVQUFXLENBRXJCLEdBQTBCLFdBQXZCdkcsRUFBU3FHLFdBRVYsV0FEQXRHLEdBQU95RyxXQUFXekcsRUFBT21HLEtBSXpCbkcsR0FBT3lHLGlCQUlUeEcsR0FBU3FHLFdBQWEsU0FHMUJ0RyxHQUFPMEcsU0FBUyxXQUNkbEgsRUFBU0wsS0FBS2dDLEdBQ2RsQixFQUFTMEcsT0FBT3hILEtBQUtnQyxLQUV2QmxCLEVBQVMyRyxTQUFTekgsS0FBS2dDLEdBQ3ZCbEIsRUFBUzRHLFVBQVUxSCxLQUFLZ0MsT0FHeEJuQixHQUFPdUIsTUFBTSwrQkFJakIwQixLQUFNLFNBQVN6RCxHQUNiQSxFQUFXakMsRUFBRXlJLFdBQVd4RyxHQUNwQkEsRUFDQSxjQUVEUSxFQUFPMEIsR0FBR29GLFdBQWE5RyxFQUFPMEIsR0FBR3FGLGVBQ2xDL0csRUFBT3VCLE1BQU0saUJBQWtCL0IsR0FDL0JRLEVBQU9rRixrQkFDUGxGLEVBQU9nSCxTQUFTLFdBQ2R4SCxFQUFTTCxLQUFLZ0MsR0FDZGxCLEVBQVNnSCxTQUFTOUgsS0FBS2dDLEtBRXpCbEIsRUFBUzJHLFNBQVN6SCxLQUFLZ0MsR0FDdkJsQixFQUFTaUgsT0FBTy9ILEtBQUtnQyxLQUl6QmdHLGdCQUFpQixXQUNmLE1BQVF0RyxHQUFVeUUsSUFBSTVFLEdBQVMwRyxPQUFPLElBQU1oSCxFQUFVMkcsV0FBV2hFLE9BQVMsR0FFNUVzRSxjQUFlLFdBQ2IsTUFBUXhHLEdBQVV5RSxJQUFJNUUsR0FBUzBHLE9BQU8sSUFBTWhILEVBQVUwRyxTQUFTL0QsT0FBUyxHQUUxRXdELGFBQWMsV0FDWixNQUFPdkcsR0FBT3FILGlCQUFtQnJILEVBQU9tSCxtQkFHMUNWLFdBQVksU0FBU2pILEdBQ25CLEdBQ0U4SCxHQUFpQnpHLEVBQVV5RSxJQUFJNUUsR0FBUzBHLE9BQU8sSUFBTWhILEVBQVUwRyxTQUMvRFMsRUFBaUJELEVBQWV2RSxPQUNoQ3lFLEVBQWlCLENBRW5CaEksR0FBV0EsR0FBWSxhQUN2QjhILEVBQ0d2SixRQUFRLE9BQVEsV0FDZnlKLElBQ0dBLEdBQWlCRCxHQUNsQi9ILE9BTVJ5RyxPQUFRLFdBQ05qRyxFQUFPa0MsUUFBUSxpQ0FDWmxDLEVBQU8wQixHQUFHMEUsU0FDWHBHLEVBQU9tRyxPQUdQbkcsRUFBT2lELFFBSVh5RCxTQUFVLFNBQVNsSCxHQUNqQixHQUtFaUksR0FDQUMsRUFDQUMsRUFOQXJCLEVBQWF0RyxFQUFPeUIsSUFBSTZFLGFBQ3hCc0IsRUFBOEIsWUFBZnRCLEdBQTRCdEcsRUFBT3VHLGVBQzlDN0YsRUFDQU8sQ0FLTnpCLEdBQVdqQyxFQUFFeUksV0FBV3hHLEdBQ3BCQSxFQUNBLGFBRXNCLGNBQXZCUyxFQUFTcUcsWUFDVnRHLEVBQU82SCxjQUVUN0gsRUFBTzRCLElBQUkwRSxXQUFXQSxHQUN0QnRHLEVBQU9tRixVQUNQc0MsRUFBVSxXQUNSekgsRUFBTzBELEtBQUtmLFlBQ1ozQyxFQUFPK0QsSUFBSUMsWUFDWGhFLEVBQU80QixJQUFJbUYsWUFDWC9HLEVBQU80QixJQUFJa0YsV0FFYlksRUFBTSxXQUNKMUgsRUFBTzRCLElBQUlrRyxVQUViSCxFQUFnQixTQUFTakYsR0FDbkJBLEVBQU1JLFFBQVU4RSxFQUFZLEtBQzlCQSxFQUFZckYsSUFBSXhDLEVBQWtCSCxFQUFrQitILEdBQ3BEM0gsRUFBT3lDLE9BQU9zRSxZQUNkL0csRUFBTzBELEtBQUtHLGFBQ1pyRSxFQUFTTCxLQUFLZ0MsS0FHbEJ5RyxFQUFZckYsSUFBSXhDLEVBQWtCSCxHQUNsQ2dJLEVBQVloRSxHQUFHN0QsRUFBa0JILEVBQWtCK0gsR0FDbkR2SSxFQUFzQnFJLEdBQ25CeEgsRUFBUzhILFVBQVkvSCxFQUFPcUgsaUJBQzdCakksRUFBc0JzSSxJQUkxQlYsU0FBVSxTQUFTeEgsR0FDakIsR0FLRWlJLEdBQ0FFLEVBTEFyQixFQUFhdEcsRUFBT3lCLElBQUk2RSxhQUN4QnNCLEVBQTZCLFdBQWR0QixHQUEyQnRHLEVBQU91RyxlQUM3QzdGLEVBQ0FPLENBSU56QixHQUFXakMsRUFBRXlJLFdBQVd4RyxHQUNwQkEsRUFDQSxhQUVKUSxFQUFPa0MsUUFBUSw4QkFBK0JsQyxFQUFPeUIsSUFBSStDLGFBRXpEeEUsRUFBTzhELE9BQU9uQixZQUNkM0MsRUFBTzhELE9BQU9ELGFBRWQ0RCxFQUFVLFdBQ1J6SCxFQUFPNEIsSUFBSTBFLFdBQVdBLEdBQ3RCdEcsRUFBTzRCLElBQUltRixZQUNYL0csRUFBT3lDLE9BQU9xRSxVQUNYN0csRUFBUzhILFVBQVkvSCxFQUFPcUgsaUJBQzdCcEcsRUFBUStHLFlBQVk1SCxFQUFVMEgsU0FHbENILEVBQWdCLFNBQVNqRixHQUNuQkEsRUFBTUksUUFBVThFLEVBQVksS0FDOUJBLEVBQVlyRixJQUFJeEMsRUFBa0JILEVBQWtCK0gsR0FDcEQzSCxFQUFPeUMsT0FBT3NFLFlBQ2QvRyxFQUFPeUMsT0FBTzZELGFBQ2R0RyxFQUFPeUMsT0FBT3VCLGFBQ0csY0FBZHNDLEdBQStCckcsRUFBU2dJLGNBQWdCakksRUFBTzBCLEdBQUd3RyxXQUNuRWxJLEVBQU9tSSxhQUVUM0ksRUFBU0wsS0FBS2dDLEtBR2xCeUcsRUFBWXJGLElBQUl4QyxFQUFrQkgsR0FDbENnSSxFQUFZaEUsR0FBRzdELEVBQWtCSCxFQUFrQitILEdBQ25EdkksRUFBc0JxSSxJQUd4QkksWUFBYSxXQUNYN0gsRUFBT2tDLFFBQVEsc0RBQ2ZwQyxFQUFnQnZDLEVBQUVDLEdBQVE0RixZQUMxQjFDLEVBQVEwQyxVQUFVLEdBQ2xCNUYsRUFBTzRLLFNBQVMsRUFBRyxJQUdyQkQsV0FBWSxXQUNWbkksRUFBT2tDLFFBQVEsNENBQ2YxRSxFQUFPNEssU0FBUyxFQUFHdEksSUFHckJtRixPQUNFakQsTUFBTyxXQUNMaEMsRUFBT2tDLFFBQVEsOEJBQ2ZsQyxFQUFPZ0MsV0FJWEosS0FHRUQsSUFBSyxXQUNIckQsRUFBTStKLFNBQVNqSSxFQUFVdUIsTUFJM0IyRyxPQUFRLFdBQ04zSCxFQUFTMEgsU0FBU2pJLEVBQVVrSSxTQUU5QnpDLFNBQVUsV0FDUmxGLEVBQVMwSCxTQUFTakksRUFBVXlGLFdBSTlCaUMsT0FBUSxXQUNON0csRUFBUW9ILFNBQVNqSSxFQUFVMEgsU0FJN0JTLE9BQVEsV0FDTjdILEVBQVEySCxTQUFTakksRUFBVW1JLFNBRTdCeEIsVUFBVyxXQUNUckcsRUFBUTJILFNBQVNqSSxFQUFVMkcsWUFFN0JULFdBQVksU0FBU0EsR0FDbkJBLEVBQWFBLEdBQWN0RyxFQUFPeUIsSUFBSTZFLGFBQ3RDNUYsRUFBUTJILFNBQVMvQixJQUVuQjlCLFVBQVcsU0FBU0EsR0FDbEJBLEVBQVlBLEdBQWF4RSxFQUFPeUIsSUFBSStDLFlBQ3BDOUQsRUFBUTJILFNBQVNqSSxFQUFVb0UsS0FFN0JzQyxRQUFTLFdBQ1BwRyxFQUFRMkgsU0FBU2pJLEVBQVUwRyxVQUU3QlQsUUFBUyxXQUNQM0YsRUFBUTJILFNBQVNqSSxFQUFVaUcsV0FHL0I1RCxRQUVFdUIsVUFBVyxXQUNUaEUsRUFBT3VCLE1BQU0sNkJBQThCNUIsR0FDeENBLEdBQVVBLEVBQU9vRCxPQUFTLEdBQzNCcEQsRUFBTzhDLFVBS1hkLElBQUssV0FDSHJELEVBQU0wSixZQUFZNUgsRUFBVXVCLE1BSTlCMkcsT0FBUSxXQUNOM0gsRUFBU3FILFlBQVk1SCxFQUFVa0ksU0FFakN6QyxTQUFVLFdBQ1JsRixFQUFTcUgsWUFBWTVILEVBQVV5RixXQUlqQzBDLE9BQVEsV0FDTjdILEVBQVFzSCxZQUFZNUgsRUFBVW1JLFNBRWhDeEIsVUFBVyxXQUNUckcsRUFBUXNILFlBQVk1SCxFQUFVMkcsWUFFaENULFdBQVksU0FBU0EsR0FDbkJBLEVBQWFBLEdBQWN0RyxFQUFPeUIsSUFBSTZFLGFBQ3RDNUYsRUFBUXNILFlBQVkxQixJQUV0QjlCLFVBQVcsU0FBU0EsR0FDbEJBLEVBQVlBLEdBQWF4RSxFQUFPeUIsSUFBSStDLFlBQ3BDOUQsRUFBUXNILFlBQVk1SCxFQUFVb0UsS0FFaENzQyxRQUFTLFdBQ1BwRyxFQUFRc0gsWUFBWTVILEVBQVUwRyxVQUVoQ1QsUUFBUyxXQUNQM0YsRUFBUXNILFlBQVk1SCxFQUFVaUcsV0FJbEM1RSxLQUNFK0MsVUFBVyxXQUNULE1BQUc5RCxHQUFROEgsU0FBU3BJLEVBQVV3RSxLQUNyQnhFLEVBQVV3RSxJQUVYbEUsRUFBUThILFNBQVNwSSxFQUFVdUUsT0FDMUJ2RSxFQUFVdUUsTUFFWGpFLEVBQVE4SCxTQUFTcEksRUFBVXlFLFFBQzFCekUsRUFBVXlFLE9BRVp6RSxFQUFVc0UsTUFFbkI0QixXQUFZLFdBQ1YsR0FFRUEsR0FEQTlCLEVBQVl4RSxFQUFPeUIsSUFBSStDLFdBWXpCLE9BVEE4QixHQUFldEcsRUFBTzBCLEdBQUd3RyxTQUNTLFFBQTdCakksRUFBU3dJLGlCQUNSeEksRUFBU3lJLGtCQUFrQlIsT0FBTzFELEdBQ2xDdkUsRUFBU3dJLGlCQUNhLFFBQXZCeEksRUFBU3FHLFdBQ1JyRyxFQUFTeUksa0JBQWtCQyxTQUFTbkUsR0FDcEN2RSxFQUFTcUcsV0FFZnRHLEVBQU9rQyxRQUFRLHdCQUF5Qm9FLEdBQ2pDQSxHQUVUdkcsZ0JBQWlCLFdBQ2YsR0FRRXVHLEdBUEFuRixFQUFjMUQsRUFBU21MLGNBQWMsV0FDckNDLEdBQ0V2QyxXQUFvQixnQkFDcEJ3QyxZQUFvQixpQkFDcEJDLGNBQW9CLGdCQUNwQkMsaUJBQW9CLHNCQUl4QixLQUFJMUMsSUFBY3VDLEdBQ2hCLEdBQUkxSCxFQUFROEMsTUFBTXFDLEtBQWdCNUksRUFDaEMsTUFBT21MLEdBQVl2QyxLQU0zQjVFLElBRUVvRCxHQUFJLFdBQ0YsR0FDRW1FLElBQVl6TCxFQUFvQixlQUFLLGlCQUFtQkEsR0FDeEQwTCxFQUFVLGlCQUFtQjFMLEVBRS9CLE9BQVF5TCxJQUFVQyxHQUdwQnZILElBQUssV0FDSCxHQUNFd0gsR0FBaUJDLFVBQVVELFVBQzNCRSxFQUFpQkYsRUFBVUcsTUFBTWhKLEVBQU9xQixLQUN4QzRILEVBQWlCSixFQUFVRyxNQUFNaEosRUFBT2tKLGFBRTFDLFVBQUdILEdBQVVFLEtBQ1h2SixFQUFPa0MsUUFBUSw4QkFBK0JpSCxJQUN2QyxJQU1YakIsT0FBUSxXQUNOLEdBQ0VpQixHQUFlQyxVQUFVRCxVQUN6Qk0sRUFBZU4sRUFBVUcsTUFBTWhKLEVBQU80SCxPQUV4QyxPQUFHdUIsSUFDRHpKLEVBQU9rQyxRQUFRLGlDQUFrQ2lILElBQzFDLElBR1BuSixFQUFPa0MsUUFBUSxrREFBbURpSCxJQUMzRCxJQUdYL0MsT0FBUSxXQUNOLE9BQVFwRyxFQUFPMEIsR0FBR29GLFdBRXBCQSxRQUFTLFdBQ1AsTUFBT3BHLEdBQVE4SCxTQUFTcEksRUFBVTBHLFVBR3BDNEMsS0FBTSxXQUNKLE1BQU8xSixHQUFPMEIsR0FBR29GLFdBRW5CNkMsT0FBUSxXQUNOLE1BQU8zSixHQUFPMEIsR0FBRzBFLFVBRW5Cd0QsU0FBVSxXQUNSLE1BQU9sSixHQUFROEgsU0FBU3BJLEVBQVV3RSxNQUVwQ21DLFVBQVcsV0FDVCxNQUFPcEcsR0FBUzZILFNBQVNwSSxFQUFVMkcsWUFFckN4QyxJQUFLLFdBSUgsTUFIR3ZFLEdBQU9nQyxNQUFNdUMsTUFBUTdHLElBQ3RCc0MsRUFBT2dDLE1BQU11QyxJQUFtQyxPQUE1QjdELEVBQVEyRSxJQUFJLGNBRTNCckYsRUFBT2dDLE1BQU11QyxNQUl4QnNGLFFBQVMsU0FBU0MsRUFBTUMsR0FFdEIsR0FEQS9KLEVBQU91QixNQUFNLG1CQUFvQnVJLEVBQU1DLEdBQ25DeE0sRUFBRTJDLGNBQWM0SixHQUNsQnZNLEVBQUU0QyxRQUFPLEVBQU1GLEVBQVU2SixPQUV0QixDQUFBLEdBQUdDLElBQVVyTSxFQVNoQixNQUFPdUMsR0FBUzZKLEVBUmJ2TSxHQUFFMkMsY0FBY0QsRUFBUzZKLElBQzFCdk0sRUFBRTRDLFFBQU8sRUFBTUYsRUFBUzZKLEdBQU9DLEdBRy9COUosRUFBUzZKLEdBQVFDLElBT3ZCQyxTQUFVLFNBQVNGLEVBQU1DLEdBQ3ZCLEdBQUl4TSxFQUFFMkMsY0FBYzRKLEdBQ2xCdk0sRUFBRTRDLFFBQU8sRUFBTUgsRUFBUThKLE9BRXBCLENBQUEsR0FBR0MsSUFBVXJNLEVBSWhCLE1BQU9zQyxHQUFPOEosRUFIZDlKLEdBQU84SixHQUFRQyxJQU1uQnhJLE1BQU8sWUFDRHRCLEVBQVNnSyxRQUFVaEssRUFBU3NCLFFBQzNCdEIsRUFBU3BCLFlBQ1ZtQixFQUFPbkIsWUFBWXFMLElBQUluTCxZQUd2QmlCLEVBQU91QixNQUFRMUQsU0FBU3NNLFVBQVV6RyxLQUFLdkUsS0FBS2lMLFFBQVFDLEtBQU1ELFFBQVNuSyxFQUFTNkosS0FBTyxLQUNuRjlKLEVBQU91QixNQUFNK0ksTUFBTUYsUUFBU3JMLGNBSWxDbUQsUUFBUyxZQUNIakMsRUFBU2dLLFFBQVVoSyxFQUFTaUMsU0FBV2pDLEVBQVNzQixRQUMvQ3RCLEVBQVNwQixZQUNWbUIsRUFBT25CLFlBQVlxTCxJQUFJbkwsWUFHdkJpQixFQUFPa0MsUUFBVXJFLFNBQVNzTSxVQUFVekcsS0FBS3ZFLEtBQUtpTCxRQUFRQyxLQUFNRCxRQUFTbkssRUFBUzZKLEtBQU8sS0FDckY5SixFQUFPa0MsUUFBUW9JLE1BQU1GLFFBQVNyTCxjQUlwQ3dCLE1BQU8sV0FDRE4sRUFBU2dLLFNBQ1hqSyxFQUFPTyxNQUFRMUMsU0FBU3NNLFVBQVV6RyxLQUFLdkUsS0FBS2lMLFFBQVE3SixNQUFPNkosUUFBU25LLEVBQVM2SixLQUFPLEtBQ3BGOUosRUFBT08sTUFBTStKLE1BQU1GLFFBQVNyTCxhQUdoQ0YsYUFDRXFMLElBQUssU0FBU0ssR0FDWixHQUNFQyxHQUNBQyxFQUNBQyxDQUVDekssR0FBU3BCLGNBQ1YyTCxHQUFnQixHQUFJN0wsT0FBT0MsVUFDM0I4TCxFQUFnQmhNLEdBQVE4TCxFQUN4QkMsRUFBZ0JELEVBQWNFLEVBQzlCaE0sRUFBZ0I4TCxFQUNoQjNMLEVBQVk4TCxNQUNWQyxLQUFtQkwsRUFBUSxHQUMzQk0sYUFBc0IzTCxNQUFNQyxLQUFLb0wsRUFBUyxJQUFNLEdBQ2hETyxRQUFtQjNKLEVBQ25CNEosaUJBQW1CTixLQUd2Qk8sYUFBYWhMLEVBQU9uQixZQUFZb00sT0FDaENqTCxFQUFPbkIsWUFBWW9NLE1BQVF4TCxXQUFXTyxFQUFPbkIsWUFBWXVHLFFBQVMsTUFFcEVBLFFBQVMsV0FDUCxHQUNFOEYsR0FBUWpMLEVBQVM2SixLQUFPLElBQ3hCcUIsRUFBWSxDQUVkek0sSUFBTyxFQUNQc00sYUFBYWhMLEVBQU9uQixZQUFZb00sT0FDaEMxTixFQUFFbUMsS0FBS2IsRUFBYSxTQUFTdU0sRUFBTy9KLEdBQ2xDOEosR0FBYTlKLEVBQUssb0JBRXBCNkosR0FBUyxJQUFNQyxFQUFZLEtBQ3hCM00sSUFDRDBNLEdBQVMsS0FBUTFNLEVBQWlCLE1BRS9CNEwsUUFBUWlCLFFBQVUzTixHQUFhME0sUUFBUWtCLFFBQVU1TixJQUFjbUIsRUFBWWtFLE9BQVMsSUFDdkZxSCxRQUFRbUIsZUFBZUwsR0FDcEJkLFFBQVFrQixNQUNUbEIsUUFBUWtCLE1BQU16TSxHQUdkdEIsRUFBRW1DLEtBQUtiLEVBQWEsU0FBU3VNLEVBQU8vSixHQUNsQytJLFFBQVFGLElBQUk3SSxFQUFXLEtBQUksS0FBT0EsRUFBSyxrQkFBa0IsUUFHN0QrSSxRQUFRb0IsWUFFVjNNLE9BR0o0TSxPQUFRLFNBQVMzTSxFQUFPNE0sRUFBaUI5SyxHQUN2QyxHQUVFK0ssR0FDQUMsRUFDQUMsRUFIQUMsRUFBUzFLLENBa0RYLE9BN0NBc0ssR0FBa0JBLEdBQW1Cek0sRUFDckMyQixFQUFrQk8sR0FBbUJQLEVBQ2xCLGdCQUFUOUIsSUFBcUJnTixJQUFXcE8sSUFDeENvQixFQUFXQSxFQUFNaU4sTUFBTSxTQUN2QkosRUFBVzdNLEVBQU1pRSxPQUFTLEVBQzFCeEYsRUFBRW1DLEtBQUtaLEVBQU8sU0FBU2tOLEVBQU9qQyxHQUM1QixHQUFJa0MsR0FBa0JELEdBQVNMLEVBQzNCNUIsRUFBUWpMLEVBQU1rTixFQUFRLEdBQUdFLE9BQU8sR0FBR0MsY0FBZ0JyTixFQUFNa04sRUFBUSxHQUFHOU0sTUFBTSxHQUMxRUosQ0FFSixJQUFJdkIsRUFBRTJDLGNBQWU0TCxFQUFPRyxLQUFzQkQsR0FBU0wsRUFDekRHLEVBQVNBLEVBQU9HLE9BRWIsQ0FBQSxHQUFJSCxFQUFPRyxLQUFvQnZPLEVBRWxDLE1BREFrTyxHQUFRRSxFQUFPRyxJQUNSLENBRUosS0FBSTFPLEVBQUUyQyxjQUFlNEwsRUFBTy9CLEtBQWFpQyxHQUFTTCxFQUdsRCxNQUFJRyxHQUFPL0IsS0FBV3JNLEdBQ3pCa08sRUFBUUUsRUFBTy9CLElBQ1IsSUFHUC9KLEVBQU9PLE1BQU1BLEVBQU02TCxPQUFRdE4sSUFDcEIsRUFSUGdOLEdBQVNBLEVBQU8vQixPQVlqQnhNLEVBQUV5SSxXQUFZNEYsR0FDakJDLEVBQVdELEVBQU10QixNQUFNMUosRUFBUzhLLEdBRTFCRSxJQUFVbE8sSUFDaEJtTyxFQUFXRCxHQUVWck8sRUFBRThPLFFBQVFwTyxHQUNYQSxFQUFjME0sS0FBS2tCLEdBRWI1TixJQUFrQlAsRUFDeEJPLEdBQWlCQSxFQUFlNE4sR0FFMUJBLElBQWFuTyxJQUNuQk8sRUFBZ0I0TixHQUVYRCxJQUtWNU0sR0FDRW9DLElBQWExRCxHQUNkc0MsRUFBT3NCLGFBRVR0QixFQUFPeUwsT0FBTzNNLEtBR1hzQyxJQUFhMUQsR0FDZHNDLEVBQU95TCxPQUFPLFdBRWhCekwsRUFBT3NCLGdCQUlIckQsSUFBa0JQLEVBQ3RCTyxFQUNBRSxNQUlOWixFQUFFTyxHQUFHQyxRQUFRa0MsVUFFWDZKLEtBQW9CLFVBQ3BCekosVUFBb0IsVUFFcEI0SixRQUFvQixFQUNwQjFJLE9BQW9CLEVBQ3BCVyxTQUFvQixFQUNwQnJELGFBQW9CLEVBRXBCeUgsV0FBb0IsT0FDcEJtQyxpQkFBb0IsT0FFcEJDLG1CQUNFQyxVQUNFakUsS0FBUyxVQUNUQyxNQUFTLFVBQ1RDLElBQVMsVUFDVEMsT0FBUyxXQUVYcUQsUUFDRXhELEtBQVMsVUFDVEMsTUFBUyxVQUNUQyxJQUFTLFVBQ1RDLE9BQVMsWUFJYmpFLFFBQW9CLE9BQ3BCNEYsV0FBb0IsRUFDcEI3QyxVQUFvQixFQUNwQm9FLFNBQW9CLEVBQ3BCbEUsWUFBb0IsRUFDcEJvRSxjQUFvQixFQUNwQnBHLFlBQW9CLEVBRXBCeUssU0FBb0IsSUFFcEIxRixTQUFvQixhQUNwQkQsT0FBb0IsYUFDcEJPLE9BQW9CLGFBRXBCRCxTQUFvQixhQUNwQkosVUFBb0IsYUFFcEJ6RyxXQUNFbUksT0FBWSxTQUNaeEIsVUFBWSxZQUNaZSxPQUFZLFNBQ1puRyxJQUFZLE1BQ1prRSxTQUFZLFdBQ1p5QyxPQUFZLFNBQ1ozRCxNQUFZLFFBQ1pDLElBQVksTUFDWkYsS0FBWSxPQUNaRyxPQUFZLFNBQ1ppQyxRQUFZLFdBR2RySSxVQUNFdUMsTUFBVSxTQUNWdUUsUUFBVSxpRUFDVnJFLE9BQVUsVUFDVm5ELFFBQVUsZUFHWnVDLFFBQ0VxQixJQUFlLHNCQUNmNkgsYUFBZSxXQUNmdEIsT0FBZSxxS0FHakIzSCxPQUNFNkwsT0FBZSx3Q0FDZmxMLE9BQWUsdUdBQ2Z3RSxhQUFlLGlIQUNmVyxRQUFlLHFFQUNmSCxTQUFlLGdFQU1mcUcsT0FBUS9PLE9BQVFDIiwiZmlsZSI6InZlbmRvci9zaWRlYmFyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAjIFNlbWFudGljIFVJIDIuMi43IC0gU2lkZWJhclxuICogaHR0cDovL2dpdGh1Yi5jb20vc2VtYW50aWMtb3JnL3NlbWFudGljLXVpL1xuICpcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqXG4gKi9cblxuOyhmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG53aW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoKVxuICA/IHdpbmRvd1xuICA6ICh0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aClcbiAgICA/IHNlbGZcbiAgICA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKClcbjtcblxuJC5mbi5zaWRlYmFyID0gZnVuY3Rpb24ocGFyYW1ldGVycykge1xuICB2YXJcbiAgICAkYWxsTW9kdWxlcyAgICAgPSAkKHRoaXMpLFxuICAgICR3aW5kb3cgICAgICAgICA9ICQod2luZG93KSxcbiAgICAkZG9jdW1lbnQgICAgICAgPSAkKGRvY3VtZW50KSxcbiAgICAkaHRtbCAgICAgICAgICAgPSAkKCdodG1sJyksXG4gICAgJGhlYWQgICAgICAgICAgID0gJCgnaGVhZCcpLFxuXG4gICAgbW9kdWxlU2VsZWN0b3IgID0gJGFsbE1vZHVsZXMuc2VsZWN0b3IgfHwgJycsXG5cbiAgICB0aW1lICAgICAgICAgICAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICBwZXJmb3JtYW5jZSAgICAgPSBbXSxcblxuICAgIHF1ZXJ5ICAgICAgICAgICA9IGFyZ3VtZW50c1swXSxcbiAgICBtZXRob2RJbnZva2VkICAgPSAodHlwZW9mIHF1ZXJ5ID09ICdzdHJpbmcnKSxcbiAgICBxdWVyeUFyZ3VtZW50cyAgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG5cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICB8fCB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgIHx8IGZ1bmN0aW9uKGNhbGxiYWNrKSB7IHNldFRpbWVvdXQoY2FsbGJhY2ssIDApOyB9LFxuXG4gICAgcmV0dXJuZWRWYWx1ZVxuICA7XG5cbiAgJGFsbE1vZHVsZXNcbiAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhclxuICAgICAgICBzZXR0aW5ncyAgICAgICAgPSAoICQuaXNQbGFpbk9iamVjdChwYXJhbWV0ZXJzKSApXG4gICAgICAgICAgPyAkLmV4dGVuZCh0cnVlLCB7fSwgJC5mbi5zaWRlYmFyLnNldHRpbmdzLCBwYXJhbWV0ZXJzKVxuICAgICAgICAgIDogJC5leHRlbmQoe30sICQuZm4uc2lkZWJhci5zZXR0aW5ncyksXG5cbiAgICAgICAgc2VsZWN0b3IgICAgICAgID0gc2V0dGluZ3Muc2VsZWN0b3IsXG4gICAgICAgIGNsYXNzTmFtZSAgICAgICA9IHNldHRpbmdzLmNsYXNzTmFtZSxcbiAgICAgICAgbmFtZXNwYWNlICAgICAgID0gc2V0dGluZ3MubmFtZXNwYWNlLFxuICAgICAgICByZWdFeHAgICAgICAgICAgPSBzZXR0aW5ncy5yZWdFeHAsXG4gICAgICAgIGVycm9yICAgICAgICAgICA9IHNldHRpbmdzLmVycm9yLFxuXG4gICAgICAgIGV2ZW50TmFtZXNwYWNlICA9ICcuJyArIG5hbWVzcGFjZSxcbiAgICAgICAgbW9kdWxlTmFtZXNwYWNlID0gJ21vZHVsZS0nICsgbmFtZXNwYWNlLFxuXG4gICAgICAgICRtb2R1bGUgICAgICAgICA9ICQodGhpcyksXG4gICAgICAgICRjb250ZXh0ICAgICAgICA9ICQoc2V0dGluZ3MuY29udGV4dCksXG5cbiAgICAgICAgJHNpZGViYXJzICAgICAgID0gJG1vZHVsZS5jaGlsZHJlbihzZWxlY3Rvci5zaWRlYmFyKSxcbiAgICAgICAgJGZpeGVkICAgICAgICAgID0gJGNvbnRleHQuY2hpbGRyZW4oc2VsZWN0b3IuZml4ZWQpLFxuICAgICAgICAkcHVzaGVyICAgICAgICAgPSAkY29udGV4dC5jaGlsZHJlbihzZWxlY3Rvci5wdXNoZXIpLFxuICAgICAgICAkc3R5bGUsXG5cbiAgICAgICAgZWxlbWVudCAgICAgICAgID0gdGhpcyxcbiAgICAgICAgaW5zdGFuY2UgICAgICAgID0gJG1vZHVsZS5kYXRhKG1vZHVsZU5hbWVzcGFjZSksXG5cbiAgICAgICAgZWxlbWVudE5hbWVzcGFjZSxcbiAgICAgICAgaWQsXG4gICAgICAgIGN1cnJlbnRTY3JvbGwsXG4gICAgICAgIHRyYW5zaXRpb25FdmVudCxcblxuICAgICAgICBtb2R1bGVcbiAgICAgIDtcblxuICAgICAgbW9kdWxlICAgICAgPSB7XG5cbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdJbml0aWFsaXppbmcgc2lkZWJhcicsIHBhcmFtZXRlcnMpO1xuXG4gICAgICAgICAgbW9kdWxlLmNyZWF0ZS5pZCgpO1xuXG4gICAgICAgICAgdHJhbnNpdGlvbkV2ZW50ID0gbW9kdWxlLmdldC50cmFuc2l0aW9uRXZlbnQoKTtcblxuICAgICAgICAgIGlmKG1vZHVsZS5pcy5pb3MoKSkge1xuICAgICAgICAgICAgbW9kdWxlLnNldC5pb3MoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBhdm9pZHMgbG9ja2luZyByZW5kZXJpbmcgaWYgaW5pdGlhbGl6ZWQgaW4gb25SZWFkeVxuICAgICAgICAgIGlmKHNldHRpbmdzLmRlbGF5U2V0dXApIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShtb2R1bGUuc2V0dXAubGF5b3V0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtb2R1bGUuc2V0dXAubGF5b3V0KCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnNldHVwLmNhY2hlKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtb2R1bGUuaW5zdGFudGlhdGUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbnN0YW50aWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1N0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlJywgbW9kdWxlKTtcbiAgICAgICAgICBpbnN0YW5jZSA9IG1vZHVsZTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAuZGF0YShtb2R1bGVOYW1lc3BhY2UsIG1vZHVsZSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgaWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWQgPSAoTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikgKyAnMDAwMDAwMDAwJykuc3Vic3RyKDIsOCk7XG4gICAgICAgICAgICBlbGVtZW50TmFtZXNwYWNlID0gJy4nICsgaWQ7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQ3JlYXRpbmcgdW5pcXVlIGlkIGZvciBlbGVtZW50JywgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRGVzdHJveWluZyBwcmV2aW91cyBtb2R1bGUgZm9yJywgJG1vZHVsZSk7XG4gICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgLm9mZihldmVudE5hbWVzcGFjZSlcbiAgICAgICAgICAgIC5yZW1vdmVEYXRhKG1vZHVsZU5hbWVzcGFjZSlcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYobW9kdWxlLmlzLmlvcygpKSB7XG4gICAgICAgICAgICBtb2R1bGUucmVtb3ZlLmlvcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBib3VuZCBieSB1dWlkXG4gICAgICAgICAgJGNvbnRleHQub2ZmKGVsZW1lbnROYW1lc3BhY2UpO1xuICAgICAgICAgICR3aW5kb3cub2ZmKGVsZW1lbnROYW1lc3BhY2UpO1xuICAgICAgICAgICRkb2N1bWVudC5vZmYoZWxlbWVudE5hbWVzcGFjZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICBjbGlja2F3YXk6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY2xpY2tlZEluUHVzaGVyID0gKCRwdXNoZXIuZmluZChldmVudC50YXJnZXQpLmxlbmd0aCA+IDAgfHwgJHB1c2hlci5pcyhldmVudC50YXJnZXQpKSxcbiAgICAgICAgICAgICAgY2xpY2tlZENvbnRleHQgID0gKCRjb250ZXh0LmlzKGV2ZW50LnRhcmdldCkpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihjbGlja2VkSW5QdXNoZXIpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1VzZXIgY2xpY2tlZCBvbiBkaW1tZWQgcGFnZScpO1xuICAgICAgICAgICAgICBtb2R1bGUuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoY2xpY2tlZENvbnRleHQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1VzZXIgY2xpY2tlZCBvbiBkaW1tYWJsZSBjb250ZXh0IChzY2FsZWQgb3V0IHBhZ2UpJyk7XG4gICAgICAgICAgICAgIG1vZHVsZS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b3VjaDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250YWluU2Nyb2xsOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYoZWxlbWVudC5zY3JvbGxUb3AgPD0gMCkgIHtcbiAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoKGVsZW1lbnQuc2Nyb2xsVG9wICsgZWxlbWVudC5vZmZzZXRIZWlnaHQpID49IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0KSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxIZWlnaHQgLSBlbGVtZW50Lm9mZnNldEhlaWdodCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiggJChldmVudC50YXJnZXQpLmNsb3Nlc3Qoc2VsZWN0b3Iuc2lkZWJhcikubGVuZ3RoID09PSAwICkge1xuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBiaW5kOiB7XG4gICAgICAgICAgY2xpY2thd2F5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdBZGRpbmcgY2xpY2thd2F5IGV2ZW50cyB0byBjb250ZXh0JywgJGNvbnRleHQpO1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MuY2xvc2FibGUpIHtcbiAgICAgICAgICAgICAgJGNvbnRleHRcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJyAgICArIGVsZW1lbnROYW1lc3BhY2UsIG1vZHVsZS5ldmVudC5jbGlja2F3YXkpXG4gICAgICAgICAgICAgICAgLm9uKCd0b3VjaGVuZCcgKyBlbGVtZW50TmFtZXNwYWNlLCBtb2R1bGUuZXZlbnQuY2xpY2thd2F5KVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzY3JvbGxMb2NrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnNjcm9sbExvY2spIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdEaXNhYmxpbmcgcGFnZSBzY3JvbGwnKTtcbiAgICAgICAgICAgICAgJHdpbmRvd1xuICAgICAgICAgICAgICAgIC5vbignRE9NTW91c2VTY3JvbGwnICsgZWxlbWVudE5hbWVzcGFjZSwgbW9kdWxlLmV2ZW50LnNjcm9sbClcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0FkZGluZyBldmVudHMgdG8gY29udGFpbiBzaWRlYmFyIHNjcm9sbCcpO1xuICAgICAgICAgICAgJGRvY3VtZW50XG4gICAgICAgICAgICAgIC5vbigndG91Y2htb3ZlJyArIGVsZW1lbnROYW1lc3BhY2UsIG1vZHVsZS5ldmVudC50b3VjaClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgLm9uKCdzY3JvbGwnICsgZXZlbnROYW1lc3BhY2UsIG1vZHVsZS5ldmVudC5jb250YWluU2Nyb2xsKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdW5iaW5kOiB7XG4gICAgICAgICAgY2xpY2thd2F5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZW1vdmluZyBjbGlja2F3YXkgZXZlbnRzIGZyb20gY29udGV4dCcsICRjb250ZXh0KTtcbiAgICAgICAgICAgICRjb250ZXh0Lm9mZihlbGVtZW50TmFtZXNwYWNlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjcm9sbExvY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1JlbW92aW5nIHNjcm9sbCBsb2NrIGZyb20gcGFnZScpO1xuICAgICAgICAgICAgJGRvY3VtZW50Lm9mZihlbGVtZW50TmFtZXNwYWNlKTtcbiAgICAgICAgICAgICR3aW5kb3cub2ZmKGVsZW1lbnROYW1lc3BhY2UpO1xuICAgICAgICAgICAgJG1vZHVsZS5vZmYoJ3Njcm9sbCcgKyBldmVudE5hbWVzcGFjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFkZDoge1xuICAgICAgICAgIGlubGluZUNTUzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgd2lkdGggICAgID0gbW9kdWxlLmNhY2hlLndpZHRoICB8fCAkbW9kdWxlLm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgaGVpZ2h0ICAgID0gbW9kdWxlLmNhY2hlLmhlaWdodCB8fCAkbW9kdWxlLm91dGVySGVpZ2h0KCksXG4gICAgICAgICAgICAgIGlzUlRMICAgICA9IG1vZHVsZS5pcy5ydGwoKSxcbiAgICAgICAgICAgICAgZGlyZWN0aW9uID0gbW9kdWxlLmdldC5kaXJlY3Rpb24oKSxcbiAgICAgICAgICAgICAgZGlzdGFuY2UgID0ge1xuICAgICAgICAgICAgICAgIGxlZnQgICA6IHdpZHRoLFxuICAgICAgICAgICAgICAgIHJpZ2h0ICA6IC13aWR0aCxcbiAgICAgICAgICAgICAgICB0b3AgICAgOiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgYm90dG9tIDogLWhlaWdodFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzdHlsZVxuICAgICAgICAgICAgO1xuXG4gICAgICAgICAgICBpZihpc1JUTCl7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSVEwgZGV0ZWN0ZWQsIGZsaXBwaW5nIHdpZHRocycpO1xuICAgICAgICAgICAgICBkaXN0YW5jZS5sZWZ0ID0gLXdpZHRoO1xuICAgICAgICAgICAgICBkaXN0YW5jZS5yaWdodCA9IHdpZHRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdHlsZSAgPSAnPHN0eWxlPic7XG5cbiAgICAgICAgICAgIGlmKGRpcmVjdGlvbiA9PT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0FkZGluZyBDU1MgcnVsZXMgZm9yIGFuaW1hdGlvbiBkaXN0YW5jZScsIHdpZHRoKTtcbiAgICAgICAgICAgICAgc3R5bGUgICs9ICcnXG4gICAgICAgICAgICAgICAgKyAnIC51aS52aXNpYmxlLicgKyBkaXJlY3Rpb24gKyAnLnNpZGViYXIgfiAuZml4ZWQsJ1xuICAgICAgICAgICAgICAgICsgJyAudWkudmlzaWJsZS4nICsgZGlyZWN0aW9uICsgJy5zaWRlYmFyIH4gLnB1c2hlciB7J1xuICAgICAgICAgICAgICAgICsgJyAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgnKyBkaXN0YW5jZVtkaXJlY3Rpb25dICsgJ3B4LCAwLCAwKTsnXG4gICAgICAgICAgICAgICAgKyAnICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCcrIGRpc3RhbmNlW2RpcmVjdGlvbl0gKyAncHgsIDAsIDApOydcbiAgICAgICAgICAgICAgICArICcgfSdcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihkaXJlY3Rpb24gPT09ICd0b3AnIHx8IGRpcmVjdGlvbiA9PSAnYm90dG9tJykge1xuICAgICAgICAgICAgICBzdHlsZSAgKz0gJydcbiAgICAgICAgICAgICAgICArICcgLnVpLnZpc2libGUuJyArIGRpcmVjdGlvbiArICcuc2lkZWJhciB+IC5maXhlZCwnXG4gICAgICAgICAgICAgICAgKyAnIC51aS52aXNpYmxlLicgKyBkaXJlY3Rpb24gKyAnLnNpZGViYXIgfiAucHVzaGVyIHsnXG4gICAgICAgICAgICAgICAgKyAnICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsICcgKyBkaXN0YW5jZVtkaXJlY3Rpb25dICsgJ3B4LCAwKTsnXG4gICAgICAgICAgICAgICAgKyAnICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsICcgKyBkaXN0YW5jZVtkaXJlY3Rpb25dICsgJ3B4LCAwKTsnXG4gICAgICAgICAgICAgICAgKyAnIH0nXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogSUUgaXMgb25seSBicm93c2VyIG5vdCB0byBjcmVhdGUgY29udGV4dCB3aXRoIHRyYW5zZm9ybXMgKi9cbiAgICAgICAgICAgIC8qIGh0dHBzOi8vd3d3LnczLm9yZy9CdWdzL1B1YmxpYy9zaG93X2J1Zy5jZ2k/aWQ9MTYzMjggKi9cbiAgICAgICAgICAgIGlmKCBtb2R1bGUuaXMuaWUoKSApIHtcbiAgICAgICAgICAgICAgaWYoZGlyZWN0aW9uID09PSAnbGVmdCcgfHwgZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdBZGRpbmcgQ1NTIHJ1bGVzIGZvciBhbmltYXRpb24gZGlzdGFuY2UnLCB3aWR0aCk7XG4gICAgICAgICAgICAgICAgc3R5bGUgICs9ICcnXG4gICAgICAgICAgICAgICAgICArICcgYm9keS5wdXNoYWJsZSA+IC51aS52aXNpYmxlLicgKyBkaXJlY3Rpb24gKyAnLnNpZGViYXIgfiAucHVzaGVyOmFmdGVyIHsnXG4gICAgICAgICAgICAgICAgICArICcgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoJysgZGlzdGFuY2VbZGlyZWN0aW9uXSArICdweCwgMCwgMCk7J1xuICAgICAgICAgICAgICAgICAgKyAnICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCcrIGRpc3RhbmNlW2RpcmVjdGlvbl0gKyAncHgsIDAsIDApOydcbiAgICAgICAgICAgICAgICAgICsgJyB9J1xuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKGRpcmVjdGlvbiA9PT0gJ3RvcCcgfHwgZGlyZWN0aW9uID09ICdib3R0b20nKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgICs9ICcnXG4gICAgICAgICAgICAgICAgICArICcgYm9keS5wdXNoYWJsZSA+IC51aS52aXNpYmxlLicgKyBkaXJlY3Rpb24gKyAnLnNpZGViYXIgfiAucHVzaGVyOmFmdGVyIHsnXG4gICAgICAgICAgICAgICAgICArICcgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgJyArIGRpc3RhbmNlW2RpcmVjdGlvbl0gKyAncHgsIDApOydcbiAgICAgICAgICAgICAgICAgICsgJyAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAnICsgZGlzdGFuY2VbZGlyZWN0aW9uXSArICdweCwgMCk7J1xuICAgICAgICAgICAgICAgICAgKyAnIH0nXG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8qIG9wcG9zaXRlIHNpZGVzIHZpc2libGUgZm9yY2VzIGNvbnRlbnQgb3ZlcmxheSAqL1xuICAgICAgICAgICAgICBzdHlsZSArPSAnJ1xuICAgICAgICAgICAgICAgICsgJyBib2R5LnB1c2hhYmxlID4gLnVpLnZpc2libGUubGVmdC5zaWRlYmFyIH4gLnVpLnZpc2libGUucmlnaHQuc2lkZWJhciB+IC5wdXNoZXI6YWZ0ZXIsJ1xuICAgICAgICAgICAgICAgICsgJyBib2R5LnB1c2hhYmxlID4gLnVpLnZpc2libGUucmlnaHQuc2lkZWJhciB+IC51aS52aXNpYmxlLmxlZnQuc2lkZWJhciB+IC5wdXNoZXI6YWZ0ZXIgeydcbiAgICAgICAgICAgICAgICArICcgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMHB4LCAwLCAwKTsnXG4gICAgICAgICAgICAgICAgKyAnICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDBweCwgMCwgMCk7J1xuICAgICAgICAgICAgICAgICsgJyB9J1xuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHlsZSArPSAnPC9zdHlsZT4nO1xuICAgICAgICAgICAgJHN0eWxlID0gJChzdHlsZSlcbiAgICAgICAgICAgICAgLmFwcGVuZFRvKCRoZWFkKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdBZGRpbmcgc2l6aW5nIGNzcyB0byBoZWFkJywgJHN0eWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1JlZnJlc2hpbmcgc2VsZWN0b3IgY2FjaGUnKTtcbiAgICAgICAgICAkY29udGV4dCAgPSAkKHNldHRpbmdzLmNvbnRleHQpO1xuICAgICAgICAgICRzaWRlYmFycyA9ICRjb250ZXh0LmNoaWxkcmVuKHNlbGVjdG9yLnNpZGViYXIpO1xuICAgICAgICAgICRwdXNoZXIgICA9ICRjb250ZXh0LmNoaWxkcmVuKHNlbGVjdG9yLnB1c2hlcik7XG4gICAgICAgICAgJGZpeGVkICAgID0gJGNvbnRleHQuY2hpbGRyZW4oc2VsZWN0b3IuZml4ZWQpO1xuICAgICAgICAgIG1vZHVsZS5jbGVhci5jYWNoZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlZnJlc2hTaWRlYmFyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1JlZnJlc2hpbmcgb3RoZXIgc2lkZWJhcnMnKTtcbiAgICAgICAgICAkc2lkZWJhcnMgPSAkY29udGV4dC5jaGlsZHJlbihzZWxlY3Rvci5zaWRlYmFyKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZXBhaW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRm9yY2luZyByZXBhaW50IGV2ZW50Jyk7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIHZhciBpZ25vcmVkID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBlbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cDoge1xuICAgICAgICAgIGNhY2hlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5jYWNoZSA9IHtcbiAgICAgICAgICAgICAgd2lkdGggIDogJG1vZHVsZS5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgIGhlaWdodCA6ICRtb2R1bGUub3V0ZXJIZWlnaHQoKSxcbiAgICAgICAgICAgICAgcnRsICAgIDogKCRtb2R1bGUuY3NzKCdkaXJlY3Rpb24nKSA9PSAncnRsJylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYoICRjb250ZXh0LmNoaWxkcmVuKHNlbGVjdG9yLnB1c2hlcikubGVuZ3RoID09PSAwICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0FkZGluZyB3cmFwcGVyIGVsZW1lbnQgZm9yIHNpZGViYXInKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLnB1c2hlcik7XG4gICAgICAgICAgICAgICRwdXNoZXIgPSAkKCc8ZGl2IGNsYXNzPVwicHVzaGVyXCIgLz4nKTtcbiAgICAgICAgICAgICAgJGNvbnRleHRcbiAgICAgICAgICAgICAgICAuY2hpbGRyZW4oKVxuICAgICAgICAgICAgICAgICAgLm5vdChzZWxlY3Rvci5vbWl0dGVkKVxuICAgICAgICAgICAgICAgICAgLm5vdCgkc2lkZWJhcnMpXG4gICAgICAgICAgICAgICAgICAud3JhcEFsbCgkcHVzaGVyKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIG1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZigkbW9kdWxlLm5leHRBbGwoc2VsZWN0b3IucHVzaGVyKS5sZW5ndGggPT09IDAgfHwgJG1vZHVsZS5uZXh0QWxsKHNlbGVjdG9yLnB1c2hlcilbMF0gIT09ICRwdXNoZXJbMF0pIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdNb3ZlZCBzaWRlYmFyIHRvIGNvcnJlY3QgcGFyZW50IGVsZW1lbnQnKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm1vdmVkU2lkZWJhciwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICRtb2R1bGUuZGV0YWNoKCkucHJlcGVuZFRvKCRjb250ZXh0KTtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZS5jbGVhci5jYWNoZSgpO1xuICAgICAgICAgICAgbW9kdWxlLnNldC5wdXNoYWJsZSgpO1xuICAgICAgICAgICAgbW9kdWxlLnNldC5kaXJlY3Rpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYXR0YWNoRXZlbnRzOiBmdW5jdGlvbihzZWxlY3RvciwgZXZlbnQpIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgICR0b2dnbGUgPSAkKHNlbGVjdG9yKVxuICAgICAgICAgIDtcbiAgICAgICAgICBldmVudCA9ICQuaXNGdW5jdGlvbihtb2R1bGVbZXZlbnRdKVxuICAgICAgICAgICAgPyBtb2R1bGVbZXZlbnRdXG4gICAgICAgICAgICA6IG1vZHVsZS50b2dnbGVcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYoJHRvZ2dsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0F0dGFjaGluZyBzaWRlYmFyIGV2ZW50cyB0byBlbGVtZW50Jywgc2VsZWN0b3IsIGV2ZW50KTtcbiAgICAgICAgICAgICR0b2dnbGVcbiAgICAgICAgICAgICAgLm9uKCdjbGljaycgKyBldmVudE5hbWVzcGFjZSwgZXZlbnQpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm5vdEZvdW5kLCBzZWxlY3Rvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2sgPSAkLmlzRnVuY3Rpb24oY2FsbGJhY2spXG4gICAgICAgICAgICA/IGNhbGxiYWNrXG4gICAgICAgICAgICA6IGZ1bmN0aW9uKCl7fVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZihtb2R1bGUuaXMuaGlkZGVuKCkpIHtcbiAgICAgICAgICAgIG1vZHVsZS5yZWZyZXNoU2lkZWJhcnMoKTtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLm92ZXJsYXkpICB7XG4gICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5vdmVybGF5KTtcbiAgICAgICAgICAgICAgc2V0dGluZ3MudHJhbnNpdGlvbiA9ICdvdmVybGF5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICBpZihtb2R1bGUub3RoZXJzQWN0aXZlKCkpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdPdGhlciBzaWRlYmFycyBjdXJyZW50bHkgdmlzaWJsZScpO1xuICAgICAgICAgICAgICBpZihzZXR0aW5ncy5leGNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBub3Qgb3ZlcmxheSBxdWV1ZSBhbmltYXRpb24gYWZ0ZXIgaGlkZVxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLnRyYW5zaXRpb24gIT0gJ292ZXJsYXknKSB7XG4gICAgICAgICAgICAgICAgICBtb2R1bGUuaGlkZU90aGVycyhtb2R1bGUuc2hvdyk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmhpZGVPdGhlcnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MudHJhbnNpdGlvbiA9ICdvdmVybGF5JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLnB1c2hQYWdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgICBzZXR0aW5ncy5vblNob3cuY2FsbChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0dGluZ3Mub25DaGFuZ2UuY2FsbChlbGVtZW50KTtcbiAgICAgICAgICAgIHNldHRpbmdzLm9uVmlzaWJsZS5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2lkZWJhciBpcyBhbHJlYWR5IHZpc2libGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICBjYWxsYmFjayA9ICQuaXNGdW5jdGlvbihjYWxsYmFjaylcbiAgICAgICAgICAgID8gY2FsbGJhY2tcbiAgICAgICAgICAgIDogZnVuY3Rpb24oKXt9XG4gICAgICAgICAgO1xuICAgICAgICAgIGlmKG1vZHVsZS5pcy52aXNpYmxlKCkgfHwgbW9kdWxlLmlzLmFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0hpZGluZyBzaWRlYmFyJywgY2FsbGJhY2spO1xuICAgICAgICAgICAgbW9kdWxlLnJlZnJlc2hTaWRlYmFycygpO1xuICAgICAgICAgICAgbW9kdWxlLnB1bGxQYWdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgICBzZXR0aW5ncy5vbkhpZGRlbi5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXR0aW5ncy5vbkNoYW5nZS5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgc2V0dGluZ3Mub25IaWRlLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG90aGVyc0FuaW1hdGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuICgkc2lkZWJhcnMubm90KCRtb2R1bGUpLmZpbHRlcignLicgKyBjbGFzc05hbWUuYW5pbWF0aW5nKS5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgb3RoZXJzVmlzaWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuICgkc2lkZWJhcnMubm90KCRtb2R1bGUpLmZpbHRlcignLicgKyBjbGFzc05hbWUudmlzaWJsZSkubGVuZ3RoID4gMCk7XG4gICAgICAgIH0sXG4gICAgICAgIG90aGVyc0FjdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuKG1vZHVsZS5vdGhlcnNWaXNpYmxlKCkgfHwgbW9kdWxlLm90aGVyc0FuaW1hdGluZygpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBoaWRlT3RoZXJzOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgJG90aGVyU2lkZWJhcnMgPSAkc2lkZWJhcnMubm90KCRtb2R1bGUpLmZpbHRlcignLicgKyBjbGFzc05hbWUudmlzaWJsZSksXG4gICAgICAgICAgICBzaWRlYmFyQ291bnQgICA9ICRvdGhlclNpZGViYXJzLmxlbmd0aCxcbiAgICAgICAgICAgIGNhbGxiYWNrQ291bnQgID0gMFxuICAgICAgICAgIDtcbiAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCl7fTtcbiAgICAgICAgICAkb3RoZXJTaWRlYmFyc1xuICAgICAgICAgICAgLnNpZGViYXIoJ2hpZGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2tDb3VudCsrO1xuICAgICAgICAgICAgICBpZihjYWxsYmFja0NvdW50ID09IHNpZGViYXJDb3VudCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0RldGVybWluaW5nIHRvZ2dsZWQgZGlyZWN0aW9uJyk7XG4gICAgICAgICAgaWYobW9kdWxlLmlzLmhpZGRlbigpKSB7XG4gICAgICAgICAgICBtb2R1bGUuc2hvdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1vZHVsZS5oaWRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHB1c2hQYWdlOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgdHJhbnNpdGlvbiA9IG1vZHVsZS5nZXQudHJhbnNpdGlvbigpLFxuICAgICAgICAgICAgJHRyYW5zaXRpb24gPSAodHJhbnNpdGlvbiA9PT0gJ292ZXJsYXknIHx8IG1vZHVsZS5vdGhlcnNBY3RpdmUoKSlcbiAgICAgICAgICAgICAgPyAkbW9kdWxlXG4gICAgICAgICAgICAgIDogJHB1c2hlcixcbiAgICAgICAgICAgIGFuaW1hdGUsXG4gICAgICAgICAgICBkaW0sXG4gICAgICAgICAgICB0cmFuc2l0aW9uRW5kXG4gICAgICAgICAgO1xuICAgICAgICAgIGNhbGxiYWNrID0gJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKVxuICAgICAgICAgICAgPyBjYWxsYmFja1xuICAgICAgICAgICAgOiBmdW5jdGlvbigpe31cbiAgICAgICAgICA7XG4gICAgICAgICAgaWYoc2V0dGluZ3MudHJhbnNpdGlvbiA9PSAnc2NhbGUgZG93bicpIHtcbiAgICAgICAgICAgIG1vZHVsZS5zY3JvbGxUb1RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2R1bGUuc2V0LnRyYW5zaXRpb24odHJhbnNpdGlvbik7XG4gICAgICAgICAgbW9kdWxlLnJlcGFpbnQoKTtcbiAgICAgICAgICBhbmltYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUuYmluZC5jbGlja2F3YXkoKTtcbiAgICAgICAgICAgIG1vZHVsZS5hZGQuaW5saW5lQ1NTKCk7XG4gICAgICAgICAgICBtb2R1bGUuc2V0LmFuaW1hdGluZygpO1xuICAgICAgICAgICAgbW9kdWxlLnNldC52aXNpYmxlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBkaW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5zZXQuZGltbWVkKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0cmFuc2l0aW9uRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmKCBldmVudC50YXJnZXQgPT0gJHRyYW5zaXRpb25bMF0gKSB7XG4gICAgICAgICAgICAgICR0cmFuc2l0aW9uLm9mZih0cmFuc2l0aW9uRXZlbnQgKyBlbGVtZW50TmFtZXNwYWNlLCB0cmFuc2l0aW9uRW5kKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5hbmltYXRpbmcoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmJpbmQuc2Nyb2xsTG9jaygpO1xuICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgJHRyYW5zaXRpb24ub2ZmKHRyYW5zaXRpb25FdmVudCArIGVsZW1lbnROYW1lc3BhY2UpO1xuICAgICAgICAgICR0cmFuc2l0aW9uLm9uKHRyYW5zaXRpb25FdmVudCArIGVsZW1lbnROYW1lc3BhY2UsIHRyYW5zaXRpb25FbmQpO1xuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICAgICAgICBpZihzZXR0aW5ncy5kaW1QYWdlICYmICFtb2R1bGUub3RoZXJzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZGltKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcHVsbFBhZ2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICB0cmFuc2l0aW9uID0gbW9kdWxlLmdldC50cmFuc2l0aW9uKCksXG4gICAgICAgICAgICAkdHJhbnNpdGlvbiA9ICh0cmFuc2l0aW9uID09ICdvdmVybGF5JyB8fCBtb2R1bGUub3RoZXJzQWN0aXZlKCkpXG4gICAgICAgICAgICAgID8gJG1vZHVsZVxuICAgICAgICAgICAgICA6ICRwdXNoZXIsXG4gICAgICAgICAgICBhbmltYXRlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkVuZFxuICAgICAgICAgIDtcbiAgICAgICAgICBjYWxsYmFjayA9ICQuaXNGdW5jdGlvbihjYWxsYmFjaylcbiAgICAgICAgICAgID8gY2FsbGJhY2tcbiAgICAgICAgICAgIDogZnVuY3Rpb24oKXt9XG4gICAgICAgICAgO1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZW1vdmluZyBjb250ZXh0IHB1c2ggc3RhdGUnLCBtb2R1bGUuZ2V0LmRpcmVjdGlvbigpKTtcblxuICAgICAgICAgIG1vZHVsZS51bmJpbmQuY2xpY2thd2F5KCk7XG4gICAgICAgICAgbW9kdWxlLnVuYmluZC5zY3JvbGxMb2NrKCk7XG5cbiAgICAgICAgICBhbmltYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUuc2V0LnRyYW5zaXRpb24odHJhbnNpdGlvbik7XG4gICAgICAgICAgICBtb2R1bGUuc2V0LmFuaW1hdGluZygpO1xuICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS52aXNpYmxlKCk7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5kaW1QYWdlICYmICFtb2R1bGUub3RoZXJzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICRwdXNoZXIucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmRpbW1lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0cmFuc2l0aW9uRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmKCBldmVudC50YXJnZXQgPT0gJHRyYW5zaXRpb25bMF0gKSB7XG4gICAgICAgICAgICAgICR0cmFuc2l0aW9uLm9mZih0cmFuc2l0aW9uRXZlbnQgKyBlbGVtZW50TmFtZXNwYWNlLCB0cmFuc2l0aW9uRW5kKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5hbmltYXRpbmcoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS50cmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5yZW1vdmUuaW5saW5lQ1NTKCk7XG4gICAgICAgICAgICAgIGlmKHRyYW5zaXRpb24gPT0gJ3NjYWxlIGRvd24nIHx8IChzZXR0aW5ncy5yZXR1cm5TY3JvbGwgJiYgbW9kdWxlLmlzLm1vYmlsZSgpKSApIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuc2Nyb2xsQmFjaygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICAkdHJhbnNpdGlvbi5vZmYodHJhbnNpdGlvbkV2ZW50ICsgZWxlbWVudE5hbWVzcGFjZSk7XG4gICAgICAgICAgJHRyYW5zaXRpb24ub24odHJhbnNpdGlvbkV2ZW50ICsgZWxlbWVudE5hbWVzcGFjZSwgdHJhbnNpdGlvbkVuZCk7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNjcm9sbFRvVG9wOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU2Nyb2xsaW5nIHRvIHRvcCBvZiBwYWdlIHRvIGF2b2lkIGFuaW1hdGlvbiBpc3N1ZXMnKTtcbiAgICAgICAgICBjdXJyZW50U2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICRtb2R1bGUuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzY3JvbGxCYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU2Nyb2xsaW5nIGJhY2sgdG8gb3JpZ2luYWwgcGFnZSBwb3NpdGlvbicpO1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBjdXJyZW50U2Nyb2xsKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjbGVhcjoge1xuICAgICAgICAgIGNhY2hlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdDbGVhcmluZyBjYWNoZWQgZGltZW5zaW9ucycpO1xuICAgICAgICAgICAgbW9kdWxlLmNhY2hlID0ge307XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldDoge1xuXG4gICAgICAgICAgLy8gaW9zIG9ubHkgKHNjcm9sbCBvbiBodG1sIG5vdCBkb2N1bWVudCkuIFRoaXMgcHJldmVudCBhdXRvLXJlc2l6ZSBjYW52YXMvc2Nyb2xsIGluIGlvc1xuICAgICAgICAgIGlvczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkaHRtbC5hZGRDbGFzcyhjbGFzc05hbWUuaW9zKTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLy8gY29udGFpbmVyXG4gICAgICAgICAgcHVzaGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRjb250ZXh0LmFkZENsYXNzKGNsYXNzTmFtZS5wdXNoZWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcHVzaGFibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGNvbnRleHQuYWRkQ2xhc3MoY2xhc3NOYW1lLnB1c2hhYmxlKTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLy8gcHVzaGVyXG4gICAgICAgICAgZGltbWVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRwdXNoZXIuYWRkQ2xhc3MoY2xhc3NOYW1lLmRpbW1lZCk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8vIHNpZGViYXJcbiAgICAgICAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZS5hZGRDbGFzcyhjbGFzc05hbWUuYWN0aXZlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuaW1hdGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlLmFkZENsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNpdGlvbjogZnVuY3Rpb24odHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgbW9kdWxlLmdldC50cmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAkbW9kdWxlLmFkZENsYXNzKHRyYW5zaXRpb24pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlyZWN0aW9uOiBmdW5jdGlvbihkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiB8fCBtb2R1bGUuZ2V0LmRpcmVjdGlvbigpO1xuICAgICAgICAgICAgJG1vZHVsZS5hZGRDbGFzcyhjbGFzc05hbWVbZGlyZWN0aW9uXSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2R1bGUuYWRkQ2xhc3MoY2xhc3NOYW1lLnZpc2libGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb3ZlcmxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlLmFkZENsYXNzKGNsYXNzTmFtZS5vdmVybGF5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZToge1xuXG4gICAgICAgICAgaW5saW5lQ1NTOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnUmVtb3ZpbmcgaW5saW5lIGNzcyBzdHlsZXMnLCAkc3R5bGUpO1xuICAgICAgICAgICAgaWYoJHN0eWxlICYmICRzdHlsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICRzdHlsZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLy8gaW9zIHNjcm9sbCBvbiBodG1sIG5vdCBkb2N1bWVudFxuICAgICAgICAgIGlvczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkaHRtbC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuaW9zKTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLy8gY29udGV4dFxuICAgICAgICAgIHB1c2hlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkY29udGV4dC5yZW1vdmVDbGFzcyhjbGFzc05hbWUucHVzaGVkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHB1c2hhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRjb250ZXh0LnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5wdXNoYWJsZSk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8vIHNpZGViYXJcbiAgICAgICAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZS5yZW1vdmVDbGFzcyhjbGFzc05hbWUuYWN0aXZlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuaW1hdGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNpdGlvbjogZnVuY3Rpb24odHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgbW9kdWxlLmdldC50cmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAkbW9kdWxlLnJlbW92ZUNsYXNzKHRyYW5zaXRpb24pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlyZWN0aW9uOiBmdW5jdGlvbihkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiB8fCBtb2R1bGUuZ2V0LmRpcmVjdGlvbigpO1xuICAgICAgICAgICAgJG1vZHVsZS5yZW1vdmVDbGFzcyhjbGFzc05hbWVbZGlyZWN0aW9uXSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2R1bGUucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLnZpc2libGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb3ZlcmxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5vdmVybGF5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgZGlyZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCRtb2R1bGUuaGFzQ2xhc3MoY2xhc3NOYW1lLnRvcCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzTmFtZS50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCRtb2R1bGUuaGFzQ2xhc3MoY2xhc3NOYW1lLnJpZ2h0KSkge1xuICAgICAgICAgICAgICByZXR1cm4gY2xhc3NOYW1lLnJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZigkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS5ib3R0b20pKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjbGFzc05hbWUuYm90dG9tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsYXNzTmFtZS5sZWZ0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgZGlyZWN0aW9uID0gbW9kdWxlLmdldC5kaXJlY3Rpb24oKSxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvblxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgdHJhbnNpdGlvbiA9ICggbW9kdWxlLmlzLm1vYmlsZSgpIClcbiAgICAgICAgICAgICAgPyAoc2V0dGluZ3MubW9iaWxlVHJhbnNpdGlvbiA9PSAnYXV0bycpXG4gICAgICAgICAgICAgICAgPyBzZXR0aW5ncy5kZWZhdWx0VHJhbnNpdGlvbi5tb2JpbGVbZGlyZWN0aW9uXVxuICAgICAgICAgICAgICAgIDogc2V0dGluZ3MubW9iaWxlVHJhbnNpdGlvblxuICAgICAgICAgICAgICA6IChzZXR0aW5ncy50cmFuc2l0aW9uID09ICdhdXRvJylcbiAgICAgICAgICAgICAgICA/IHNldHRpbmdzLmRlZmF1bHRUcmFuc2l0aW9uLmNvbXB1dGVyW2RpcmVjdGlvbl1cbiAgICAgICAgICAgICAgICA6IHNldHRpbmdzLnRyYW5zaXRpb25cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdEZXRlcm1pbmVkIHRyYW5zaXRpb24nLCB0cmFuc2l0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2l0aW9uO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNpdGlvbkV2ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBlbGVtZW50ICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2VsZW1lbnQnKSxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgJ3RyYW5zaXRpb24nICAgICAgIDondHJhbnNpdGlvbmVuZCcsXG4gICAgICAgICAgICAgICAgJ09UcmFuc2l0aW9uJyAgICAgIDonb1RyYW5zaXRpb25FbmQnLFxuICAgICAgICAgICAgICAgICdNb3pUcmFuc2l0aW9uJyAgICA6J3RyYW5zaXRpb25lbmQnLFxuICAgICAgICAgICAgICAgICdXZWJraXRUcmFuc2l0aW9uJyA6J3dlYmtpdFRyYW5zaXRpb25FbmQnXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRyYW5zaXRpb25cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGZvcih0cmFuc2l0aW9uIGluIHRyYW5zaXRpb25zKXtcbiAgICAgICAgICAgICAgaWYoIGVsZW1lbnQuc3R5bGVbdHJhbnNpdGlvbl0gIT09IHVuZGVmaW5lZCApe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2l0aW9uc1t0cmFuc2l0aW9uXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpczoge1xuXG4gICAgICAgICAgaWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGlzSUUxMSA9ICghKHdpbmRvdy5BY3RpdmVYT2JqZWN0KSAmJiAnQWN0aXZlWE9iamVjdCcgaW4gd2luZG93KSxcbiAgICAgICAgICAgICAgaXNJRSAgID0gKCdBY3RpdmVYT2JqZWN0JyBpbiB3aW5kb3cpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICByZXR1cm4gKGlzSUUxMSB8fCBpc0lFKTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgaW9zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICB1c2VyQWdlbnQgICAgICA9IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgICAgICAgIGlzSU9TICAgICAgICAgID0gdXNlckFnZW50Lm1hdGNoKHJlZ0V4cC5pb3MpLFxuICAgICAgICAgICAgICBpc01vYmlsZUNocm9tZSA9IHVzZXJBZ2VudC5tYXRjaChyZWdFeHAubW9iaWxlQ2hyb21lKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoaXNJT1MgJiYgIWlzTW9iaWxlQ2hyb21lKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdCcm93c2VyIHdhcyBmb3VuZCB0byBiZSBpT1MnLCB1c2VyQWdlbnQpO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb2JpbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHVzZXJBZ2VudCAgICA9IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgICAgICAgIGlzTW9iaWxlICAgICA9IHVzZXJBZ2VudC5tYXRjaChyZWdFeHAubW9iaWxlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoaXNNb2JpbGUpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0Jyb3dzZXIgd2FzIGZvdW5kIHRvIGJlIG1vYmlsZScsIHVzZXJBZ2VudCk7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdCcm93c2VyIGlzIG5vdCBtb2JpbGUsIHVzaW5nIHJlZ3VsYXIgdHJhbnNpdGlvbicsIHVzZXJBZ2VudCk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGhpZGRlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gIW1vZHVsZS5pcy52aXNpYmxlKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS52aXNpYmxlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIGFsaWFzXG4gICAgICAgICAgb3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlLmlzLnZpc2libGUoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsb3NlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlLmlzLmhpZGRlbigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdmVydGljYWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRtb2R1bGUuaGFzQ2xhc3MoY2xhc3NOYW1lLnRvcCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbmltYXRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRjb250ZXh0Lmhhc0NsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcnRsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZihtb2R1bGUuY2FjaGUucnRsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmNhY2hlLnJ0bCA9ICgkbW9kdWxlLmNzcygnZGlyZWN0aW9uJykgPT0gJ3J0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5jYWNoZS5ydGw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldHRpbmc6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdDaGFuZ2luZyBzZXR0aW5nJywgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QobmFtZSkgKSB7XG4gICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBzZXR0aW5ncywgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYoJC5pc1BsYWluT2JqZWN0KHNldHRpbmdzW25hbWVdKSkge1xuICAgICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBzZXR0aW5nc1tuYW1lXSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHNldHRpbmdzW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzW25hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW50ZXJuYWw6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChuYW1lKSApIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIG1vZHVsZSwgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbW9kdWxlW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVtuYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlYnVnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50ICYmIHNldHRpbmdzLmRlYnVnKSB7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHZlcmJvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQgJiYgc2V0dGluZ3MudmVyYm9zZSAmJiBzZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZS5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQpIHtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvciA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvciwgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICBtb2R1bGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgICAgbG9nOiBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUsXG4gICAgICAgICAgICAgIGV4ZWN1dGlvblRpbWUsXG4gICAgICAgICAgICAgIHByZXZpb3VzVGltZVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICBwcmV2aW91c1RpbWUgID0gdGltZSB8fCBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZSA9IGN1cnJlbnRUaW1lIC0gcHJldmlvdXNUaW1lO1xuICAgICAgICAgICAgICB0aW1lICAgICAgICAgID0gY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIHBlcmZvcm1hbmNlLnB1c2goe1xuICAgICAgICAgICAgICAgICdOYW1lJyAgICAgICAgICAgOiBtZXNzYWdlWzBdLFxuICAgICAgICAgICAgICAgICdBcmd1bWVudHMnICAgICAgOiBbXS5zbGljZS5jYWxsKG1lc3NhZ2UsIDEpIHx8ICcnLFxuICAgICAgICAgICAgICAgICdFbGVtZW50JyAgICAgICAgOiBlbGVtZW50LFxuICAgICAgICAgICAgICAgICdFeGVjdXRpb24gVGltZScgOiBleGVjdXRpb25UaW1lXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lcik7XG4gICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UudGltZXIgPSBzZXRUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS5kaXNwbGF5LCA1MDApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzcGxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgdGl0bGUgPSBzZXR0aW5ncy5uYW1lICsgJzonLFxuICAgICAgICAgICAgICB0b3RhbFRpbWUgPSAwXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICB0aW1lID0gZmFsc2U7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyKTtcbiAgICAgICAgICAgICQuZWFjaChwZXJmb3JtYW5jZSwgZnVuY3Rpb24oaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgICAgICAgdG90YWxUaW1lICs9IGRhdGFbJ0V4ZWN1dGlvbiBUaW1lJ107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpdGxlICs9ICcgJyArIHRvdGFsVGltZSArICdtcyc7XG4gICAgICAgICAgICBpZihtb2R1bGVTZWxlY3Rvcikge1xuICAgICAgICAgICAgICB0aXRsZSArPSAnIFxcJycgKyBtb2R1bGVTZWxlY3RvciArICdcXCcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIChjb25zb2xlLmdyb3VwICE9PSB1bmRlZmluZWQgfHwgY29uc29sZS50YWJsZSAhPT0gdW5kZWZpbmVkKSAmJiBwZXJmb3JtYW5jZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodGl0bGUpO1xuICAgICAgICAgICAgICBpZihjb25zb2xlLnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS50YWJsZShwZXJmb3JtYW5jZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKHBlcmZvcm1hbmNlLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVsnTmFtZSddICsgJzogJyArIGRhdGFbJ0V4ZWN1dGlvbiBUaW1lJ10rJ21zJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVyZm9ybWFuY2UgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludm9rZTogZnVuY3Rpb24ocXVlcnksIHBhc3NlZEFyZ3VtZW50cywgY29udGV4dCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgb2JqZWN0ID0gaW5zdGFuY2UsXG4gICAgICAgICAgICBtYXhEZXB0aCxcbiAgICAgICAgICAgIGZvdW5kLFxuICAgICAgICAgICAgcmVzcG9uc2VcbiAgICAgICAgICA7XG4gICAgICAgICAgcGFzc2VkQXJndW1lbnRzID0gcGFzc2VkQXJndW1lbnRzIHx8IHF1ZXJ5QXJndW1lbnRzO1xuICAgICAgICAgIGNvbnRleHQgICAgICAgICA9IGVsZW1lbnQgICAgICAgICB8fCBjb250ZXh0O1xuICAgICAgICAgIGlmKHR5cGVvZiBxdWVyeSA9PSAnc3RyaW5nJyAmJiBvYmplY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnkgICAgPSBxdWVyeS5zcGxpdCgvW1xcLiBdLyk7XG4gICAgICAgICAgICBtYXhEZXB0aCA9IHF1ZXJ5Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAkLmVhY2gocXVlcnksIGZ1bmN0aW9uKGRlcHRoLCB2YWx1ZSkge1xuICAgICAgICAgICAgICB2YXIgY2FtZWxDYXNlVmFsdWUgPSAoZGVwdGggIT0gbWF4RGVwdGgpXG4gICAgICAgICAgICAgICAgPyB2YWx1ZSArIHF1ZXJ5W2RlcHRoICsgMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBxdWVyeVtkZXB0aCArIDFdLnNsaWNlKDEpXG4gICAgICAgICAgICAgICAgOiBxdWVyeVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QoIG9iamVjdFtjYW1lbENhc2VWYWx1ZV0gKSAmJiAoZGVwdGggIT0gbWF4RGVwdGgpICkge1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IG9iamVjdFtjYW1lbENhc2VWYWx1ZV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggJC5pc1BsYWluT2JqZWN0KCBvYmplY3RbdmFsdWVdICkgJiYgKGRlcHRoICE9IG1heERlcHRoKSApIHtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSBvYmplY3RbdmFsdWVdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoIG9iamVjdFt2YWx1ZV0gIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IG9iamVjdFt2YWx1ZV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5tZXRob2QsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoICQuaXNGdW5jdGlvbiggZm91bmQgKSApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQuYXBwbHkoY29udGV4dCwgcGFzc2VkQXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihmb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGZvdW5kO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZigkLmlzQXJyYXkocmV0dXJuZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUucHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYocmV0dXJuZWRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gW3JldHVybmVkVmFsdWUsIHJlc3BvbnNlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gcmVzcG9uc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIDtcblxuICAgIGlmKG1ldGhvZEludm9rZWQpIHtcbiAgICAgIGlmKGluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbW9kdWxlLmluaXRpYWxpemUoKTtcbiAgICAgIH1cbiAgICAgIG1vZHVsZS5pbnZva2UocXVlcnkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlmKGluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbW9kdWxlLmludm9rZSgnZGVzdHJveScpO1xuICAgICAgfVxuICAgICAgbW9kdWxlLmluaXRpYWxpemUoKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiAocmV0dXJuZWRWYWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgID8gcmV0dXJuZWRWYWx1ZVxuICAgIDogdGhpc1xuICA7XG59O1xuXG4kLmZuLnNpZGViYXIuc2V0dGluZ3MgPSB7XG5cbiAgbmFtZSAgICAgICAgICAgICAgOiAnU2lkZWJhcicsXG4gIG5hbWVzcGFjZSAgICAgICAgIDogJ3NpZGViYXInLFxuXG4gIHNpbGVudCAgICAgICAgICAgIDogZmFsc2UsXG4gIGRlYnVnICAgICAgICAgICAgIDogZmFsc2UsXG4gIHZlcmJvc2UgICAgICAgICAgIDogZmFsc2UsXG4gIHBlcmZvcm1hbmNlICAgICAgIDogdHJ1ZSxcblxuICB0cmFuc2l0aW9uICAgICAgICA6ICdhdXRvJyxcbiAgbW9iaWxlVHJhbnNpdGlvbiAgOiAnYXV0bycsXG5cbiAgZGVmYXVsdFRyYW5zaXRpb24gOiB7XG4gICAgY29tcHV0ZXI6IHtcbiAgICAgIGxlZnQgICA6ICd1bmNvdmVyJyxcbiAgICAgIHJpZ2h0ICA6ICd1bmNvdmVyJyxcbiAgICAgIHRvcCAgICA6ICdvdmVybGF5JyxcbiAgICAgIGJvdHRvbSA6ICdvdmVybGF5J1xuICAgIH0sXG4gICAgbW9iaWxlOiB7XG4gICAgICBsZWZ0ICAgOiAndW5jb3ZlcicsXG4gICAgICByaWdodCAgOiAndW5jb3ZlcicsXG4gICAgICB0b3AgICAgOiAnb3ZlcmxheScsXG4gICAgICBib3R0b20gOiAnb3ZlcmxheSdcbiAgICB9XG4gIH0sXG5cbiAgY29udGV4dCAgICAgICAgICAgOiAnYm9keScsXG4gIGV4Y2x1c2l2ZSAgICAgICAgIDogZmFsc2UsXG4gIGNsb3NhYmxlICAgICAgICAgIDogdHJ1ZSxcbiAgZGltUGFnZSAgICAgICAgICAgOiB0cnVlLFxuICBzY3JvbGxMb2NrICAgICAgICA6IGZhbHNlLFxuICByZXR1cm5TY3JvbGwgICAgICA6IGZhbHNlLFxuICBkZWxheVNldHVwICAgICAgICA6IGZhbHNlLFxuXG4gIGR1cmF0aW9uICAgICAgICAgIDogNTAwLFxuXG4gIG9uQ2hhbmdlICAgICAgICAgIDogZnVuY3Rpb24oKXt9LFxuICBvblNob3cgICAgICAgICAgICA6IGZ1bmN0aW9uKCl7fSxcbiAgb25IaWRlICAgICAgICAgICAgOiBmdW5jdGlvbigpe30sXG5cbiAgb25IaWRkZW4gICAgICAgICAgOiBmdW5jdGlvbigpe30sXG4gIG9uVmlzaWJsZSAgICAgICAgIDogZnVuY3Rpb24oKXt9LFxuXG4gIGNsYXNzTmFtZSAgICAgICAgIDoge1xuICAgIGFjdGl2ZSAgICA6ICdhY3RpdmUnLFxuICAgIGFuaW1hdGluZyA6ICdhbmltYXRpbmcnLFxuICAgIGRpbW1lZCAgICA6ICdkaW1tZWQnLFxuICAgIGlvcyAgICAgICA6ICdpb3MnLFxuICAgIHB1c2hhYmxlICA6ICdwdXNoYWJsZScsXG4gICAgcHVzaGVkICAgIDogJ3B1c2hlZCcsXG4gICAgcmlnaHQgICAgIDogJ3JpZ2h0JyxcbiAgICB0b3AgICAgICAgOiAndG9wJyxcbiAgICBsZWZ0ICAgICAgOiAnbGVmdCcsXG4gICAgYm90dG9tICAgIDogJ2JvdHRvbScsXG4gICAgdmlzaWJsZSAgIDogJ3Zpc2libGUnXG4gIH0sXG5cbiAgc2VsZWN0b3I6IHtcbiAgICBmaXhlZCAgIDogJy5maXhlZCcsXG4gICAgb21pdHRlZCA6ICdzY3JpcHQsIGxpbmssIHN0eWxlLCAudWkubW9kYWwsIC51aS5kaW1tZXIsIC51aS5uYWcsIC51aS5maXhlZCcsXG4gICAgcHVzaGVyICA6ICcucHVzaGVyJyxcbiAgICBzaWRlYmFyIDogJy51aS5zaWRlYmFyJ1xuICB9LFxuXG4gIHJlZ0V4cDoge1xuICAgIGlvcyAgICAgICAgICA6IC8oaVBhZHxpUGhvbmV8aVBvZCkvZyxcbiAgICBtb2JpbGVDaHJvbWUgOiAvKENyaU9TKS9nLFxuICAgIG1vYmlsZSAgICAgICA6IC9Nb2JpbGV8aVAoaG9uZXxvZHxhZCl8QW5kcm9pZHxCbGFja0JlcnJ5fElFTW9iaWxlfEtpbmRsZXxOZXRGcm9udHxTaWxrLUFjY2VsZXJhdGVkfChocHd8d2ViKU9TfEZlbm5lY3xNaW5pbW98T3BlcmEgTShvYml8aW5pKXxCbGF6ZXJ8RG9sZmlufERvbHBoaW58U2t5ZmlyZXxadW5lL2dcbiAgfSxcblxuICBlcnJvciAgIDoge1xuICAgIG1ldGhvZCAgICAgICA6ICdUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWQuJyxcbiAgICBwdXNoZXIgICAgICAgOiAnSGFkIHRvIGFkZCBwdXNoZXIgZWxlbWVudC4gRm9yIG9wdGltYWwgcGVyZm9ybWFuY2UgbWFrZSBzdXJlIGJvZHkgY29udGVudCBpcyBpbnNpZGUgYSBwdXNoZXIgZWxlbWVudCcsXG4gICAgbW92ZWRTaWRlYmFyIDogJ0hhZCB0byBtb3ZlIHNpZGViYXIuIEZvciBvcHRpbWFsIHBlcmZvcm1hbmNlIG1ha2Ugc3VyZSBzaWRlYmFyIGFuZCBwdXNoZXIgYXJlIGRpcmVjdCBjaGlsZHJlbiBvZiB5b3VyIGJvZHkgdGFnJyxcbiAgICBvdmVybGF5ICAgICAgOiAnVGhlIG92ZXJsYXkgc2V0dGluZyBpcyBubyBsb25nZXIgc3VwcG9ydGVkLCB1c2UgYW5pbWF0aW9uOiBvdmVybGF5JyxcbiAgICBub3RGb3VuZCAgICAgOiAnVGhlcmUgd2VyZSBubyBlbGVtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHNwZWNpZmllZCBzZWxlY3RvcidcbiAgfVxuXG59O1xuXG5cbn0pKCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQgKTtcbiJdfQ==
