!function(e,t,i,n){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(a){var o,r=e(this),s=(e("body"),(new Date).getTime()),d=[],l=arguments[0],u="string"==typeof l,c=[].slice.call(arguments,1),g=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return r.each(function(){var t,f,m,p=r.selector||"",h=e.isPlainObject(a)?e.extend(!0,{},e.fn.shape.settings,a):e.extend({},e.fn.shape.settings),v=h.namespace,b=h.selector,x=h.error,y=h.className,S="."+v,w="module-"+v,C=e(this),z=C.find(b.sides),W=C.find(b.side),F=!1,H=this,T=C.data(w);m={initialize:function(){m.verbose("Initializing module for",H),m.set.defaultSide(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),T=m,C.data(w,T)},destroy:function(){m.verbose("Destroying previous module for",H),C.removeData(w).off(S)},refresh:function(){m.verbose("Refreshing selector cache for",H),C=e(H),z=e(this).find(b.shape),W=e(this).find(b.side)},repaint:function(){m.verbose("Forcing repaint event");var e=z[0]||i.createElement("div");e.offsetWidth},animate:function(e,i){m.verbose("Animating box with properties",e),i=i||function(e){m.verbose("Executing animation callback"),e!==n&&e.stopPropagation(),m.reset(),m.set.active()},h.beforeChange.call(f[0]),m.get.transitionEvent()?(m.verbose("Starting CSS animation"),C.addClass(y.animating),z.css(e).one(m.get.transitionEvent(),i),m.set.duration(h.duration),g(function(){C.addClass(y.animating),t.addClass(y.hidden)})):i()},queue:function(e){m.debug("Queueing animation of",e),z.one(m.get.transitionEvent(),function(){m.debug("Executing queued animation"),setTimeout(function(){C.shape(e)},0)})},reset:function(){m.verbose("Animating states reset"),C.removeClass(y.animating).attr("style","").removeAttr("style"),z.attr("style","").removeAttr("style"),W.attr("style","").removeAttr("style").removeClass(y.hidden),f.removeClass(y.animating).attr("style","").removeAttr("style")},is:{complete:function(){return W.filter("."+y.active)[0]==f[0]},animating:function(){return C.hasClass(y.animating)}},set:{defaultSide:function(){t=C.find("."+h.className.active),f=t.next(b.side).length>0?t.next(b.side):C.find(b.side).first(),F=!1,m.verbose("Active side set to",t),m.verbose("Next side set to",f)},duration:function(e){e=e||h.duration,e="number"==typeof e?e+"ms":e,m.verbose("Setting animation duration",e),(h.duration||0===h.duration)&&z.add(W).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=C.find("."+h.className.active),t=e.outerWidth(!0),i=e.outerHeight(!0);C.css({width:t,height:i})},stageSize:function(){var e=C.clone().addClass(y.loading),t=e.find("."+h.className.active),i=F?e.find(b.side).eq(F):t.next(b.side).length>0?t.next(b.side):e.find(b.side).first(),n="next"==h.width?i.outerWidth(!0):"initial"==h.width?C.width():h.width,a="next"==h.height?i.outerHeight(!0):"initial"==h.height?C.height():h.height;t.removeClass(y.active),i.addClass(y.active),e.insertAfter(C),e.remove(),"auto"!=h.width&&(C.css("width",n+h.jitter),m.verbose("Specifying width during animation",n)),"auto"!=h.height&&(C.css("height",a+h.jitter),m.verbose("Specifying height during animation",a))},nextSide:function(e){F=e,f=W.filter(e),F=W.index(f),0===f.length&&(m.set.defaultSide(),m.error(x.side)),m.verbose("Next side manually set to",f)},active:function(){m.verbose("Setting new side to active",f),W.removeClass(y.active),f.addClass(y.active),h.onChange.call(f[0]),m.set.defaultSide()}},flip:{up:function(){if(m.is.complete()&&!m.is.animating()&&!h.allowRepeats)return void m.debug("Side already visible",f);if(m.is.animating())m.queue("flip up");else{m.debug("Flipping up",f);var e=m.get.transform.up();m.set.stageSize(),m.stage.above(),m.animate(e)}},down:function(){if(m.is.complete()&&!m.is.animating()&&!h.allowRepeats)return void m.debug("Side already visible",f);if(m.is.animating())m.queue("flip down");else{m.debug("Flipping down",f);var e=m.get.transform.down();m.set.stageSize(),m.stage.below(),m.animate(e)}},left:function(){if(m.is.complete()&&!m.is.animating()&&!h.allowRepeats)return void m.debug("Side already visible",f);if(m.is.animating())m.queue("flip left");else{m.debug("Flipping left",f);var e=m.get.transform.left();m.set.stageSize(),m.stage.left(),m.animate(e)}},right:function(){if(m.is.complete()&&!m.is.animating()&&!h.allowRepeats)return void m.debug("Side already visible",f);if(m.is.animating())m.queue("flip right");else{m.debug("Flipping right",f);var e=m.get.transform.right();m.set.stageSize(),m.stage.right(),m.animate(e)}},over:function(){return!m.is.complete()||m.is.animating()||h.allowRepeats?void(m.is.animating()?m.queue("flip over"):(m.debug("Flipping over",f),m.set.stageSize(),m.stage.behind(),m.animate(m.get.transform.over()))):void m.debug("Side already visible",f)},back:function(){return!m.is.complete()||m.is.animating()||h.allowRepeats?void(m.is.animating()?m.queue("flip back"):(m.debug("Flipping back",f),m.set.stageSize(),m.stage.behind(),m.animate(m.get.transform.back()))):void m.debug("Side already visible",f)}},get:{transform:{up:function(){var e={y:-((t.outerHeight(!0)-f.outerHeight(!0))/2),z:-(t.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((t.outerHeight(!0)-f.outerHeight(!0))/2),z:-(t.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2),z:-(t.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2),z:-(t.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=i.createElement("element"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(t.style[e]!==n)return a[e]},nextSide:function(){return t.next(b.side).length>0?t.next(b.side):C.find(b.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};m.verbose("Setting the initial animation position as above",f,e),z.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};m.verbose("Setting the initial animation position as below",f,e),z.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={active:t.outerWidth(!0),next:f.outerWidth(!0)},i={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};m.verbose("Setting the initial animation position as left",f,i),z.css({transform:"translateZ(-"+i.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+i.depth.active+"px)"}),f.addClass(y.animating).css({left:i.origin+"px",transform:"rotateY(-90deg) translateZ("+i.depth.next+"px)"})},right:function(){var e={active:t.outerWidth(!0),next:f.outerWidth(!0)},i={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};m.verbose("Setting the initial animation position as left",f,i),z.css({transform:"translateZ(-"+i.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+i.depth.active+"px)"}),f.addClass(y.animating).css({left:i.origin+"px",transform:"rotateY(90deg) translateZ("+i.depth.next+"px)"})},behind:function(){var e={active:t.outerWidth(!0),next:f.outerWidth(!0)},i={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};m.verbose("Setting the initial animation position as behind",f,i),t.css({transform:"rotateY(0deg)"}),f.addClass(y.animating).css({left:i.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,i){if(m.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,h,t);else{if(i===n)return h[t];e.isPlainObject(h[t])?e.extend(!0,h[t],i):h[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(i===n)return m[t];m[t]=i}},debug:function(){!h.silent&&h.debug&&(h.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,h.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),m.verbose.apply(console,arguments)))},error:function(){h.silent||(m.error=Function.prototype.bind.call(console.error,console,h.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;h.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:H,"Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=h.name+":",i=0;s=!1,clearTimeout(m.performance.timer),e.each(d,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",p&&(t+=" '"+p+"'"),r.length>1&&(t+=" ("+r.length+")"),(console.group!==n||console.table!==n)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,i,a){var r,s,d,l=T;return i=i||c,a=H||a,"string"==typeof t&&l!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(i,a){var o=i!=r?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[o])&&i!=r)l=l[o];else{if(l[o]!==n)return s=l[o],!1;if(!e.isPlainObject(l[a])||i==r)return l[a]!==n&&(s=l[a],!1);l=l[a]}})),e.isFunction(s)?d=s.apply(a,i):s!==n&&(d=s),e.isArray(o)?o.push(d):o!==n?o=[o,d]:d!==n&&(o=d),s}},u?(T===n&&m.initialize(),m.invoke(l)):(T!==n&&T.invoke("destroy"),m.initialize())}),o!==n?o:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9zaGFwZS5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiZG9jdW1lbnQiLCJ1bmRlZmluZWQiLCJNYXRoIiwic2VsZiIsIkZ1bmN0aW9uIiwiZm4iLCJzaGFwZSIsInBhcmFtZXRlcnMiLCJyZXR1cm5lZFZhbHVlIiwiJGFsbE1vZHVsZXMiLCJ0aGlzIiwidGltZSIsIkRhdGUiLCJnZXRUaW1lIiwicGVyZm9ybWFuY2UiLCJxdWVyeSIsImFyZ3VtZW50cyIsIm1ldGhvZEludm9rZWQiLCJxdWVyeUFyZ3VtZW50cyIsInNsaWNlIiwiY2FsbCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FsbGJhY2siLCJzZXRUaW1lb3V0IiwiZWFjaCIsIiRhY3RpdmVTaWRlIiwiJG5leHRTaWRlIiwibW9kdWxlIiwibW9kdWxlU2VsZWN0b3IiLCJzZWxlY3RvciIsInNldHRpbmdzIiwiaXNQbGFpbk9iamVjdCIsImV4dGVuZCIsIm5hbWVzcGFjZSIsImVycm9yIiwiY2xhc3NOYW1lIiwiZXZlbnROYW1lc3BhY2UiLCJtb2R1bGVOYW1lc3BhY2UiLCIkbW9kdWxlIiwiJHNpZGVzIiwiZmluZCIsInNpZGVzIiwiJHNpZGUiLCJzaWRlIiwibmV4dEluZGV4IiwiZWxlbWVudCIsImluc3RhbmNlIiwiZGF0YSIsImluaXRpYWxpemUiLCJ2ZXJib3NlIiwic2V0IiwiZGVmYXVsdFNpZGUiLCJpbnN0YW50aWF0ZSIsImRlc3Ryb3kiLCJyZW1vdmVEYXRhIiwib2ZmIiwicmVmcmVzaCIsInJlcGFpbnQiLCJjcmVhdGVFbGVtZW50Iiwib2Zmc2V0V2lkdGgiLCJhbmltYXRlIiwicHJvcGVydHlPYmplY3QiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInJlc2V0IiwiYWN0aXZlIiwiYmVmb3JlQ2hhbmdlIiwiZ2V0IiwidHJhbnNpdGlvbkV2ZW50IiwiYWRkQ2xhc3MiLCJhbmltYXRpbmciLCJjc3MiLCJvbmUiLCJkdXJhdGlvbiIsImhpZGRlbiIsInF1ZXVlIiwibWV0aG9kIiwiZGVidWciLCJyZW1vdmVDbGFzcyIsImF0dHIiLCJyZW1vdmVBdHRyIiwiaXMiLCJjb21wbGV0ZSIsImZpbHRlciIsImhhc0NsYXNzIiwibmV4dCIsImxlbmd0aCIsImZpcnN0IiwiYWRkIiwiLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uIiwiLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uIiwiLW1zLXRyYW5zaXRpb24tZHVyYXRpb24iLCItby10cmFuc2l0aW9uLWR1cmF0aW9uIiwidHJhbnNpdGlvbi1kdXJhdGlvbiIsImN1cnJlbnRTdGFnZVNpemUiLCJ3aWR0aCIsIm91dGVyV2lkdGgiLCJoZWlnaHQiLCJvdXRlckhlaWdodCIsInN0YWdlU2l6ZSIsIiRjbG9uZSIsImNsb25lIiwibG9hZGluZyIsImVxIiwibmV3V2lkdGgiLCJuZXdIZWlnaHQiLCJpbnNlcnRBZnRlciIsInJlbW92ZSIsImppdHRlciIsIm5leHRTaWRlIiwiaW5kZXgiLCJvbkNoYW5nZSIsImZsaXAiLCJ1cCIsImFsbG93UmVwZWF0cyIsInRyYW5zZm9ybSIsInN0YWdlIiwiYWJvdmUiLCJkb3duIiwiYmVsb3ciLCJsZWZ0IiwicmlnaHQiLCJvdmVyIiwiYmVoaW5kIiwiYmFjayIsInRyYW5zbGF0ZSIsInkiLCJ6IiwieCIsInRyYW5zaXRpb24iLCJ0cmFuc2l0aW9ucyIsIk9UcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIldlYmtpdFRyYW5zaXRpb24iLCJzdHlsZSIsImJveCIsIm9yaWdpbiIsImRlcHRoIiwidG9wIiwic2V0dGluZyIsIm5hbWUiLCJ2YWx1ZSIsImludGVybmFsIiwic2lsZW50IiwibG9nIiwicHJvdG90eXBlIiwiYmluZCIsImNvbnNvbGUiLCJpbmZvIiwiYXBwbHkiLCJtZXNzYWdlIiwiY3VycmVudFRpbWUiLCJleGVjdXRpb25UaW1lIiwicHJldmlvdXNUaW1lIiwicHVzaCIsIk5hbWUiLCJBcmd1bWVudHMiLCJFbGVtZW50IiwiRXhlY3V0aW9uIFRpbWUiLCJjbGVhclRpbWVvdXQiLCJ0aW1lciIsImRpc3BsYXkiLCJ0aXRsZSIsInRvdGFsVGltZSIsImdyb3VwIiwidGFibGUiLCJncm91cENvbGxhcHNlZCIsImdyb3VwRW5kIiwiaW52b2tlIiwicGFzc2VkQXJndW1lbnRzIiwiY29udGV4dCIsIm1heERlcHRoIiwiZm91bmQiLCJyZXNwb25zZSIsIm9iamVjdCIsInNwbGl0IiwiY2FtZWxDYXNlVmFsdWUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImlzRnVuY3Rpb24iLCJpc0FycmF5IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FVQyxTQUFXQSxFQUFHQyxFQUFRQyxFQUFVQyxHQUVqQyxZQUVBRixHQUEyQixtQkFBVkEsSUFBeUJBLEVBQU9HLE1BQVFBLEtBQ3JESCxFQUNnQixtQkFBUkksT0FBdUJBLEtBQUtELE1BQVFBLEtBQzFDQyxLQUNBQyxTQUFTLGlCQUdmTixFQUFFTyxHQUFHQyxNQUFRLFNBQVNDLEdBQ3BCLEdBaUJFQyxHQWhCQUMsRUFBa0JYLEVBQUVZLE1BR3BCQyxHQUZrQmIsRUFBRSxTQUVGLEdBQUljLE9BQU9DLFdBQzdCQyxLQUVBQyxFQUFrQkMsVUFBVSxHQUM1QkMsRUFBbUMsZ0JBQVRGLEdBQzFCRyxLQUFxQkMsTUFBTUMsS0FBS0osVUFBVyxHQUUzQ0ssRUFBd0J0QixFQUFPc0IsdUJBQzFCdEIsRUFBT3VCLDBCQUNQdkIsRUFBT3dCLDZCQUNQeEIsRUFBT3lCLHlCQUNQLFNBQVNDLEdBQVlDLFdBQVdELEVBQVUsR0EreUJqRCxPQTF5QkFoQixHQUNHa0IsS0FBSyxXQUNKLEdBdUJFQyxHQUNBQyxFQUtBQyxFQTVCQUMsRUFBaUJ0QixFQUFZdUIsVUFBWSxHQUN6Q0MsRUFBbUJuQyxFQUFFb0MsY0FBYzNCLEdBQy9CVCxFQUFFcUMsUUFBTyxLQUFVckMsRUFBRU8sR0FBR0MsTUFBTTJCLFNBQVUxQixH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SixLQUdYa0MsSUFBYWhELEdBQ2RnRCxFQUFTMEgsT0FBTyxXQUVsQjdJLEVBQU9xQixnQkFLTDNDLElBQWtCUCxFQUN0Qk8sRUFDQUUsTUFJTlosRUFBRU8sR0FBR0MsTUFBTTJCLFVBR1Q4RyxLQUFPLFFBR1BHLFFBQWEsRUFHYmxFLE9BQWEsRUFHYjVCLFNBQWEsRUFHYjJELE9BQWEsRUFHYmpHLGFBQWEsRUFHYnNCLFVBQWEsUUFHYjhELE1BQU8sVUFHUEUsT0FBUSxVQUdSL0IsYUFBZSxhQUNmNkMsU0FBZSxhQUdmRyxjQUFjLEVBR2R6QyxVQUFhLEVBR2J2QyxPQUNFUyxLQUFTLHFEQUNUaUMsT0FBUyx3Q0FJWHpDLFdBQ0VtQyxVQUFZLFlBQ1pJLE9BQVksU0FDWjRCLFFBQVksVUFDWnJDLE9BQVksVUFJZHBDLFVBQ0VZLE1BQVEsU0FDUkUsS0FBUSxXQU1SMEksT0FBUXpMLE9BQVFDIiwiZmlsZSI6InZlbmRvci9zaGFwZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogIyBTZW1hbnRpYyBVSSAyLjIuNyAtIFNoYXBlXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9zZW1hbnRpYy1vcmcvc2VtYW50aWMtdWkvXG4gKlxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICpcbiAqL1xuXG47KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbndpbmRvdyA9ICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGgpXG4gID8gd2luZG93XG4gIDogKHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoKVxuICAgID8gc2VsZlxuICAgIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKVxuO1xuXG4kLmZuLnNoYXBlID0gZnVuY3Rpb24ocGFyYW1ldGVycykge1xuICB2YXJcbiAgICAkYWxsTW9kdWxlcyAgICAgPSAkKHRoaXMpLFxuICAgICRib2R5ICAgICAgICAgICA9ICQoJ2JvZHknKSxcblxuICAgIHRpbWUgICAgICAgICAgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgIHBlcmZvcm1hbmNlICAgICA9IFtdLFxuXG4gICAgcXVlcnkgICAgICAgICAgID0gYXJndW1lbnRzWzBdLFxuICAgIG1ldGhvZEludm9rZWQgICA9ICh0eXBlb2YgcXVlcnkgPT0gJ3N0cmluZycpLFxuICAgIHF1ZXJ5QXJndW1lbnRzICA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgfHwgZnVuY3Rpb24oY2FsbGJhY2spIHsgc2V0VGltZW91dChjYWxsYmFjaywgMCk7IH0sXG5cbiAgICByZXR1cm5lZFZhbHVlXG4gIDtcblxuICAkYWxsTW9kdWxlc1xuICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyXG4gICAgICAgIG1vZHVsZVNlbGVjdG9yID0gJGFsbE1vZHVsZXMuc2VsZWN0b3IgfHwgJycsXG4gICAgICAgIHNldHRpbmdzICAgICAgID0gKCAkLmlzUGxhaW5PYmplY3QocGFyYW1ldGVycykgKVxuICAgICAgICAgID8gJC5leHRlbmQodHJ1ZSwge30sICQuZm4uc2hhcGUuc2V0dGluZ3MsIHBhcmFtZXRlcnMpXG4gICAgICAgICAgOiAkLmV4dGVuZCh7fSwgJC5mbi5zaGFwZS5zZXR0aW5ncyksXG5cbiAgICAgICAgLy8gaW50ZXJuYWwgYWxpYXNlc1xuICAgICAgICBuYW1lc3BhY2UgICAgID0gc2V0dGluZ3MubmFtZXNwYWNlLFxuICAgICAgICBzZWxlY3RvciAgICAgID0gc2V0dGluZ3Muc2VsZWN0b3IsXG4gICAgICAgIGVycm9yICAgICAgICAgPSBzZXR0aW5ncy5lcnJvcixcbiAgICAgICAgY2xhc3NOYW1lICAgICA9IHNldHRpbmdzLmNsYXNzTmFtZSxcblxuICAgICAgICAvLyBkZWZpbmUgbmFtZXNwYWNlcyBmb3IgbW9kdWxlc1xuICAgICAgICBldmVudE5hbWVzcGFjZSAgPSAnLicgKyBuYW1lc3BhY2UsXG4gICAgICAgIG1vZHVsZU5hbWVzcGFjZSA9ICdtb2R1bGUtJyArIG5hbWVzcGFjZSxcblxuICAgICAgICAvLyBzZWxlY3RvciBjYWNoZVxuICAgICAgICAkbW9kdWxlICAgICAgID0gJCh0aGlzKSxcbiAgICAgICAgJHNpZGVzICAgICAgICA9ICRtb2R1bGUuZmluZChzZWxlY3Rvci5zaWRlcyksXG4gICAgICAgICRzaWRlICAgICAgICAgPSAkbW9kdWxlLmZpbmQoc2VsZWN0b3Iuc2lkZSksXG5cbiAgICAgICAgLy8gcHJpdmF0ZSB2YXJpYWJsZXNcbiAgICAgICAgbmV4dEluZGV4ID0gZmFsc2UsXG4gICAgICAgICRhY3RpdmVTaWRlLFxuICAgICAgICAkbmV4dFNpZGUsXG5cbiAgICAgICAgLy8gc3RhbmRhcmQgbW9kdWxlXG4gICAgICAgIGVsZW1lbnQgICAgICAgPSB0aGlzLFxuICAgICAgICBpbnN0YW5jZSAgICAgID0gJG1vZHVsZS5kYXRhKG1vZHVsZU5hbWVzcGFjZSksXG4gICAgICAgIG1vZHVsZVxuICAgICAgO1xuXG4gICAgICBtb2R1bGUgPSB7XG5cbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0luaXRpYWxpemluZyBtb2R1bGUgZm9yJywgZWxlbWVudCk7XG4gICAgICAgICAgbW9kdWxlLnNldC5kZWZhdWx0U2lkZSgpO1xuICAgICAgICAgIG1vZHVsZS5pbnN0YW50aWF0ZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluc3RhbnRpYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU3RvcmluZyBpbnN0YW5jZSBvZiBtb2R1bGUnLCBtb2R1bGUpO1xuICAgICAgICAgIGluc3RhbmNlID0gbW9kdWxlO1xuICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgIC5kYXRhKG1vZHVsZU5hbWVzcGFjZSwgaW5zdGFuY2UpXG4gICAgICAgICAgO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdEZXN0cm95aW5nIHByZXZpb3VzIG1vZHVsZSBmb3InLCBlbGVtZW50KTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAucmVtb3ZlRGF0YShtb2R1bGVOYW1lc3BhY2UpXG4gICAgICAgICAgICAub2ZmKGV2ZW50TmFtZXNwYWNlKVxuICAgICAgICAgIDtcbiAgICAgICAgfSxcblxuICAgICAgICByZWZyZXNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnUmVmcmVzaGluZyBzZWxlY3RvciBjYWNoZSBmb3InLCBlbGVtZW50KTtcbiAgICAgICAgICAkbW9kdWxlID0gJChlbGVtZW50KTtcbiAgICAgICAgICAkc2lkZXMgID0gJCh0aGlzKS5maW5kKHNlbGVjdG9yLnNoYXBlKTtcbiAgICAgICAgICAkc2lkZSAgID0gJCh0aGlzKS5maW5kKHNlbGVjdG9yLnNpZGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlcGFpbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdGb3JjaW5nIHJlcGFpbnQgZXZlbnQnKTtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIHNoYXBlICAgICAgICAgID0gJHNpZGVzWzBdIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgZmFrZUFzc2lnbm1lbnQgPSBzaGFwZS5vZmZzZXRXaWR0aFxuICAgICAgICAgIDtcbiAgICAgICAgfSxcblxuICAgICAgICBhbmltYXRlOiBmdW5jdGlvbihwcm9wZXJ0eU9iamVjdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQW5pbWF0aW5nIGJveCB3aXRoIHByb3BlcnRpZXMnLCBwcm9wZXJ0eU9iamVjdCk7XG4gICAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0V4ZWN1dGluZyBhbmltYXRpb24gY2FsbGJhY2snKTtcbiAgICAgICAgICAgIGlmKGV2ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGUucmVzZXQoKTtcbiAgICAgICAgICAgIG1vZHVsZS5zZXQuYWN0aXZlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzZXR0aW5ncy5iZWZvcmVDaGFuZ2UuY2FsbCgkbmV4dFNpZGVbMF0pO1xuICAgICAgICAgIGlmKG1vZHVsZS5nZXQudHJhbnNpdGlvbkV2ZW50KCkpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTdGFydGluZyBDU1MgYW5pbWF0aW9uJyk7XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuYW5pbWF0aW5nKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgJHNpZGVzXG4gICAgICAgICAgICAgIC5jc3MocHJvcGVydHlPYmplY3QpXG4gICAgICAgICAgICAgIC5vbmUobW9kdWxlLmdldC50cmFuc2l0aW9uRXZlbnQoKSwgY2FsbGJhY2spXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBtb2R1bGUuc2V0LmR1cmF0aW9uKHNldHRpbmdzLmR1cmF0aW9uKTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuYW5pbWF0aW5nKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICRhY3RpdmVTaWRlXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5oaWRkZW4pXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHF1ZXVlOiBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ1F1ZXVlaW5nIGFuaW1hdGlvbiBvZicsIG1ldGhvZCk7XG4gICAgICAgICAgJHNpZGVzXG4gICAgICAgICAgICAub25lKG1vZHVsZS5nZXQudHJhbnNpdGlvbkV2ZW50KCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0V4ZWN1dGluZyBxdWV1ZWQgYW5pbWF0aW9uJyk7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkbW9kdWxlLnNoYXBlKG1ldGhvZCk7XG4gICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdBbmltYXRpbmcgc3RhdGVzIHJlc2V0Jyk7XG4gICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpXG4gICAgICAgICAgICAuYXR0cignc3R5bGUnLCAnJylcbiAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzdHlsZScpXG4gICAgICAgICAgO1xuICAgICAgICAgIC8vIHJlbW92ZUF0dHIgc3R5bGUgZG9lcyBub3QgY29uc2lzdGVudGx5IHdvcmsgaW4gc2FmYXJpXG4gICAgICAgICAgJHNpZGVzXG4gICAgICAgICAgICAuYXR0cignc3R5bGUnLCAnJylcbiAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzdHlsZScpXG4gICAgICAgICAgO1xuICAgICAgICAgICRzaWRlXG4gICAgICAgICAgICAuYXR0cignc3R5bGUnLCAnJylcbiAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzdHlsZScpXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmhpZGRlbilcbiAgICAgICAgICA7XG4gICAgICAgICAgJG5leHRTaWRlXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmFuaW1hdGluZylcbiAgICAgICAgICAgIC5hdHRyKCdzdHlsZScsICcnKVxuICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ3N0eWxlJylcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXM6IHtcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKCRzaWRlLmZpbHRlcignLicgKyBjbGFzc05hbWUuYWN0aXZlKVswXSA9PSAkbmV4dFNpZGVbMF0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYW5pbWF0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXQ6IHtcblxuICAgICAgICAgIGRlZmF1bHRTaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRhY3RpdmVTaWRlID0gJG1vZHVsZS5maW5kKCcuJyArIHNldHRpbmdzLmNsYXNzTmFtZS5hY3RpdmUpO1xuICAgICAgICAgICAgJG5leHRTaWRlICAgPSAoICRhY3RpdmVTaWRlLm5leHQoc2VsZWN0b3Iuc2lkZSkubGVuZ3RoID4gMCApXG4gICAgICAgICAgICAgID8gJGFjdGl2ZVNpZGUubmV4dChzZWxlY3Rvci5zaWRlKVxuICAgICAgICAgICAgICA6ICRtb2R1bGUuZmluZChzZWxlY3Rvci5zaWRlKS5maXJzdCgpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBuZXh0SW5kZXggPSBmYWxzZTtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdBY3RpdmUgc2lkZSBzZXQgdG8nLCAkYWN0aXZlU2lkZSk7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnTmV4dCBzaWRlIHNldCB0bycsICRuZXh0U2lkZSk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGR1cmF0aW9uOiBmdW5jdGlvbihkdXJhdGlvbikge1xuICAgICAgICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbiB8fCBzZXR0aW5ncy5kdXJhdGlvbjtcbiAgICAgICAgICAgIGR1cmF0aW9uID0gKHR5cGVvZiBkdXJhdGlvbiA9PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgPyBkdXJhdGlvbiArICdtcydcbiAgICAgICAgICAgICAgOiBkdXJhdGlvblxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NldHRpbmcgYW5pbWF0aW9uIGR1cmF0aW9uJywgZHVyYXRpb24pO1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MuZHVyYXRpb24gfHwgc2V0dGluZ3MuZHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAgICAgJHNpZGVzLmFkZCgkc2lkZSlcbiAgICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICctbW96LXRyYW5zaXRpb24tZHVyYXRpb24nOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICctbXMtdHJhbnNpdGlvbi1kdXJhdGlvbic6IGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uJzogZHVyYXRpb25cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGN1cnJlbnRTdGFnZVNpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICRhY3RpdmVTaWRlID0gJG1vZHVsZS5maW5kKCcuJyArIHNldHRpbmdzLmNsYXNzTmFtZS5hY3RpdmUpLFxuICAgICAgICAgICAgICB3aWR0aCAgICAgICA9ICRhY3RpdmVTaWRlLm91dGVyV2lkdGgodHJ1ZSksXG4gICAgICAgICAgICAgIGhlaWdodCAgICAgID0gJGFjdGl2ZVNpZGUub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIHN0YWdlU2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgJGNsb25lICAgICAgPSAkbW9kdWxlLmNsb25lKCkuYWRkQ2xhc3MoY2xhc3NOYW1lLmxvYWRpbmcpLFxuICAgICAgICAgICAgICAkYWN0aXZlU2lkZSA9ICRjbG9uZS5maW5kKCcuJyArIHNldHRpbmdzLmNsYXNzTmFtZS5hY3RpdmUpLFxuICAgICAgICAgICAgICAkbmV4dFNpZGUgICA9IChuZXh0SW5kZXgpXG4gICAgICAgICAgICAgICAgPyAkY2xvbmUuZmluZChzZWxlY3Rvci5zaWRlKS5lcShuZXh0SW5kZXgpXG4gICAgICAgICAgICAgICAgOiAoICRhY3RpdmVTaWRlLm5leHQoc2VsZWN0b3Iuc2lkZSkubGVuZ3RoID4gMCApXG4gICAgICAgICAgICAgICAgICA/ICRhY3RpdmVTaWRlLm5leHQoc2VsZWN0b3Iuc2lkZSlcbiAgICAgICAgICAgICAgICAgIDogJGNsb25lLmZpbmQoc2VsZWN0b3Iuc2lkZSkuZmlyc3QoKSxcbiAgICAgICAgICAgICAgbmV3V2lkdGggICAgPSAoc2V0dGluZ3Mud2lkdGggPT0gJ25leHQnKVxuICAgICAgICAgICAgICAgID8gJG5leHRTaWRlLm91dGVyV2lkdGgodHJ1ZSlcbiAgICAgICAgICAgICAgICA6IChzZXR0aW5ncy53aWR0aCA9PSAnaW5pdGlhbCcpXG4gICAgICAgICAgICAgICAgICA/ICRtb2R1bGUud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgOiBzZXR0aW5ncy53aWR0aCxcbiAgICAgICAgICAgICAgbmV3SGVpZ2h0ICAgID0gKHNldHRpbmdzLmhlaWdodCA9PSAnbmV4dCcpXG4gICAgICAgICAgICAgICAgPyAkbmV4dFNpZGUub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgICAgICAgICA6IChzZXR0aW5ncy5oZWlnaHQgPT0gJ2luaXRpYWwnKVxuICAgICAgICAgICAgICAgICAgPyAkbW9kdWxlLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICA6IHNldHRpbmdzLmhlaWdodFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgJGFjdGl2ZVNpZGUucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSk7XG4gICAgICAgICAgICAkbmV4dFNpZGUuYWRkQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSk7XG4gICAgICAgICAgICAkY2xvbmUuaW5zZXJ0QWZ0ZXIoJG1vZHVsZSk7XG4gICAgICAgICAgICAkY2xvbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy53aWR0aCAhPSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgJG1vZHVsZS5jc3MoJ3dpZHRoJywgbmV3V2lkdGggKyBzZXR0aW5ncy5qaXR0ZXIpO1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU3BlY2lmeWluZyB3aWR0aCBkdXJpbmcgYW5pbWF0aW9uJywgbmV3V2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc2V0dGluZ3MuaGVpZ2h0ICE9ICdhdXRvJykge1xuICAgICAgICAgICAgICAkbW9kdWxlLmNzcygnaGVpZ2h0JywgbmV3SGVpZ2h0ICsgc2V0dGluZ3Muaml0dGVyKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NwZWNpZnlpbmcgaGVpZ2h0IGR1cmluZyBhbmltYXRpb24nLCBuZXdIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBuZXh0U2lkZTogZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIG5leHRJbmRleCA9IHNlbGVjdG9yO1xuICAgICAgICAgICAgJG5leHRTaWRlID0gJHNpZGUuZmlsdGVyKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIG5leHRJbmRleCA9ICRzaWRlLmluZGV4KCRuZXh0U2lkZSk7XG4gICAgICAgICAgICBpZigkbmV4dFNpZGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5zZXQuZGVmYXVsdFNpZGUoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLnNpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ05leHQgc2lkZSBtYW51YWxseSBzZXQgdG8nLCAkbmV4dFNpZGUpO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NldHRpbmcgbmV3IHNpZGUgdG8gYWN0aXZlJywgJG5leHRTaWRlKTtcbiAgICAgICAgICAgICRzaWRlXG4gICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgJG5leHRTaWRlXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgc2V0dGluZ3Mub25DaGFuZ2UuY2FsbCgkbmV4dFNpZGVbMF0pO1xuICAgICAgICAgICAgbW9kdWxlLnNldC5kZWZhdWx0U2lkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBmbGlwOiB7XG5cbiAgICAgICAgICB1cDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZihtb2R1bGUuaXMuY29tcGxldGUoKSAmJiAhbW9kdWxlLmlzLmFuaW1hdGluZygpICYmICFzZXR0aW5ncy5hbGxvd1JlcGVhdHMpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTaWRlIGFscmVhZHkgdmlzaWJsZScsICRuZXh0U2lkZSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCAhbW9kdWxlLmlzLmFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnRmxpcHBpbmcgdXAnLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBtb2R1bGUuZ2V0LnRyYW5zZm9ybS51cCgpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgbW9kdWxlLnNldC5zdGFnZVNpemUoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnN0YWdlLmFib3ZlKCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5hbmltYXRlKHRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnF1ZXVlKCdmbGlwIHVwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRvd246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYobW9kdWxlLmlzLmNvbXBsZXRlKCkgJiYgIW1vZHVsZS5pcy5hbmltYXRpbmcoKSAmJiAhc2V0dGluZ3MuYWxsb3dSZXBlYXRzKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2lkZSBhbHJlYWR5IHZpc2libGUnLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggIW1vZHVsZS5pcy5hbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0ZsaXBwaW5nIGRvd24nLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBtb2R1bGUuZ2V0LnRyYW5zZm9ybS5kb3duKClcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICBtb2R1bGUuc2V0LnN0YWdlU2l6ZSgpO1xuICAgICAgICAgICAgICBtb2R1bGUuc3RhZ2UuYmVsb3coKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmFuaW1hdGUodHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUucXVldWUoJ2ZsaXAgZG93bicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBsZWZ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKG1vZHVsZS5pcy5jb21wbGV0ZSgpICYmICFtb2R1bGUuaXMuYW5pbWF0aW5nKCkgJiYgIXNldHRpbmdzLmFsbG93UmVwZWF0cykge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1NpZGUgYWxyZWFkeSB2aXNpYmxlJywgJG5leHRTaWRlKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoICFtb2R1bGUuaXMuYW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdGbGlwcGluZyBsZWZ0JywgJG5leHRTaWRlKTtcbiAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtID0gbW9kdWxlLmdldC50cmFuc2Zvcm0ubGVmdCgpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgbW9kdWxlLnNldC5zdGFnZVNpemUoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnN0YWdlLmxlZnQoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmFuaW1hdGUodHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUucXVldWUoJ2ZsaXAgbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICByaWdodDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZihtb2R1bGUuaXMuY29tcGxldGUoKSAmJiAhbW9kdWxlLmlzLmFuaW1hdGluZygpICYmICFzZXR0aW5ncy5hbGxvd1JlcGVhdHMpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTaWRlIGFscmVhZHkgdmlzaWJsZScsICRuZXh0U2lkZSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCAhbW9kdWxlLmlzLmFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnRmxpcHBpbmcgcmlnaHQnLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBtb2R1bGUuZ2V0LnRyYW5zZm9ybS5yaWdodCgpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgbW9kdWxlLnNldC5zdGFnZVNpemUoKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnN0YWdlLnJpZ2h0KCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5hbmltYXRlKHRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnF1ZXVlKCdmbGlwIHJpZ2h0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIG92ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYobW9kdWxlLmlzLmNvbXBsZXRlKCkgJiYgIW1vZHVsZS5pcy5hbmltYXRpbmcoKSAmJiAhc2V0dGluZ3MuYWxsb3dSZXBlYXRzKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2lkZSBhbHJlYWR5IHZpc2libGUnLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggIW1vZHVsZS5pcy5hbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0ZsaXBwaW5nIG92ZXInLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICBtb2R1bGUuc2V0LnN0YWdlU2l6ZSgpO1xuICAgICAgICAgICAgICBtb2R1bGUuc3RhZ2UuYmVoaW5kKCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5hbmltYXRlKG1vZHVsZS5nZXQudHJhbnNmb3JtLm92ZXIoKSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5xdWV1ZSgnZmxpcCBvdmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYobW9kdWxlLmlzLmNvbXBsZXRlKCkgJiYgIW1vZHVsZS5pcy5hbmltYXRpbmcoKSAmJiAhc2V0dGluZ3MuYWxsb3dSZXBlYXRzKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2lkZSBhbHJlYWR5IHZpc2libGUnLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggIW1vZHVsZS5pcy5hbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0ZsaXBwaW5nIGJhY2snLCAkbmV4dFNpZGUpO1xuICAgICAgICAgICAgICBtb2R1bGUuc2V0LnN0YWdlU2l6ZSgpO1xuICAgICAgICAgICAgICBtb2R1bGUuc3RhZ2UuYmVoaW5kKCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5hbmltYXRlKG1vZHVsZS5nZXQudHJhbnNmb3JtLmJhY2soKSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5xdWV1ZSgnZmxpcCBiYWNrJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0OiB7XG5cbiAgICAgICAgICB0cmFuc2Zvcm06IHtcbiAgICAgICAgICAgIHVwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlID0ge1xuICAgICAgICAgICAgICAgICAgeTogLSgoJGFjdGl2ZVNpZGUub3V0ZXJIZWlnaHQodHJ1ZSkgLSAkbmV4dFNpZGUub3V0ZXJIZWlnaHQodHJ1ZSkpIC8gMiksXG4gICAgICAgICAgICAgICAgICB6OiAtKCRhY3RpdmVTaWRlLm91dGVySGVpZ2h0KHRydWUpIC8gMilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKCcgKyB0cmFuc2xhdGUueSArICdweCkgdHJhbnNsYXRlWignKyB0cmFuc2xhdGUueiArICdweCkgcm90YXRlWCgtOTBkZWcpJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZG93bjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgIHk6IC0oKCRhY3RpdmVTaWRlLm91dGVySGVpZ2h0KHRydWUpIC0gJG5leHRTaWRlLm91dGVySGVpZ2h0KHRydWUpKSAvIDIpLFxuICAgICAgICAgICAgICAgICAgejogLSgkYWN0aXZlU2lkZS5vdXRlckhlaWdodCh0cnVlKSAvIDIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgnICsgdHJhbnNsYXRlLnkgKyAncHgpIHRyYW5zbGF0ZVooJysgdHJhbnNsYXRlLnogKyAncHgpIHJvdGF0ZVgoOTBkZWcpJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbGVmdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgIHggOiAtKCgkYWN0aXZlU2lkZS5vdXRlcldpZHRoKHRydWUpIC0gJG5leHRTaWRlLm91dGVyV2lkdGgodHJ1ZSkpIC8gMiksXG4gICAgICAgICAgICAgICAgICB6IDogLSgkYWN0aXZlU2lkZS5vdXRlcldpZHRoKHRydWUpIC8gMilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKCcgKyB0cmFuc2xhdGUueCArICdweCkgdHJhbnNsYXRlWignICsgdHJhbnNsYXRlLnogKyAncHgpIHJvdGF0ZVkoOTBkZWcpJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcmlnaHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGUgPSB7XG4gICAgICAgICAgICAgICAgICB4IDogLSgoJGFjdGl2ZVNpZGUub3V0ZXJXaWR0aCh0cnVlKSAtICRuZXh0U2lkZS5vdXRlcldpZHRoKHRydWUpKSAvIDIpLFxuICAgICAgICAgICAgICAgICAgeiA6IC0oJGFjdGl2ZVNpZGUub3V0ZXJXaWR0aCh0cnVlKSAvIDIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgnICsgdHJhbnNsYXRlLnggKyAncHgpIHRyYW5zbGF0ZVooJyArIHRyYW5zbGF0ZS56ICsgJ3B4KSByb3RhdGVZKC05MGRlZyknXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBvdmVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlID0ge1xuICAgICAgICAgICAgICAgICAgeCA6IC0oKCRhY3RpdmVTaWRlLm91dGVyV2lkdGgodHJ1ZSkgLSAkbmV4dFNpZGUub3V0ZXJXaWR0aCh0cnVlKSkgLyAyKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIHRyYW5zbGF0ZS54ICsgJ3B4KSByb3RhdGVZKDE4MGRlZyknXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBiYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlID0ge1xuICAgICAgICAgICAgICAgICAgeCA6IC0oKCRhY3RpdmVTaWRlLm91dGVyV2lkdGgodHJ1ZSkgLSAkbmV4dFNpZGUub3V0ZXJXaWR0aCh0cnVlKSkgLyAyKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIHRyYW5zbGF0ZS54ICsgJ3B4KSByb3RhdGVZKC0xODBkZWcpJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICB0cmFuc2l0aW9uRXZlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGVsZW1lbnQgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZWxlbWVudCcpLFxuICAgICAgICAgICAgICB0cmFuc2l0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAndHJhbnNpdGlvbicgICAgICAgOid0cmFuc2l0aW9uZW5kJyxcbiAgICAgICAgICAgICAgICAnT1RyYW5zaXRpb24nICAgICAgOidvVHJhbnNpdGlvbkVuZCcsXG4gICAgICAgICAgICAgICAgJ01velRyYW5zaXRpb24nICAgIDondHJhbnNpdGlvbmVuZCcsXG4gICAgICAgICAgICAgICAgJ1dlYmtpdFRyYW5zaXRpb24nIDond2Via2l0VHJhbnNpdGlvbkVuZCdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvblxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgZm9yKHRyYW5zaXRpb24gaW4gdHJhbnNpdGlvbnMpe1xuICAgICAgICAgICAgICBpZiggZWxlbWVudC5zdHlsZVt0cmFuc2l0aW9uXSAhPT0gdW5kZWZpbmVkICl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25zW3RyYW5zaXRpb25dO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIG5leHRTaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoICRhY3RpdmVTaWRlLm5leHQoc2VsZWN0b3Iuc2lkZSkubGVuZ3RoID4gMCApXG4gICAgICAgICAgICAgID8gJGFjdGl2ZVNpZGUubmV4dChzZWxlY3Rvci5zaWRlKVxuICAgICAgICAgICAgICA6ICRtb2R1bGUuZmluZChzZWxlY3Rvci5zaWRlKS5maXJzdCgpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RhZ2U6IHtcblxuICAgICAgICAgIGFib3ZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBib3ggPSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luIDogKCgkYWN0aXZlU2lkZS5vdXRlckhlaWdodCh0cnVlKSAtICRuZXh0U2lkZS5vdXRlckhlaWdodCh0cnVlKSkgLyAyKSxcbiAgICAgICAgICAgICAgICBkZXB0aCAgOiB7XG4gICAgICAgICAgICAgICAgICBhY3RpdmUgOiAoJG5leHRTaWRlLm91dGVySGVpZ2h0KHRydWUpIC8gMiksXG4gICAgICAgICAgICAgICAgICBuZXh0ICAgOiAoJGFjdGl2ZVNpZGUub3V0ZXJIZWlnaHQodHJ1ZSkgLyAyKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NldHRpbmcgdGhlIGluaXRpYWwgYW5pbWF0aW9uIHBvc2l0aW9uIGFzIGFib3ZlJywgJG5leHRTaWRlLCBib3gpO1xuICAgICAgICAgICAgJHNpZGVzXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3RyYW5zbGF0ZVooLScgKyBib3guZGVwdGguYWN0aXZlICsgJ3B4KSdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgICRhY3RpdmVTaWRlXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3JvdGF0ZVkoMGRlZykgdHJhbnNsYXRlWignICsgYm94LmRlcHRoLmFjdGl2ZSArICdweCknXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICAkbmV4dFNpZGVcbiAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICd0b3AnICAgICAgIDogYm94Lm9yaWdpbiArICdweCcsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybScgOiAncm90YXRlWCg5MGRlZykgdHJhbnNsYXRlWignICsgYm94LmRlcHRoLm5leHQgKyAncHgpJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBiZWxvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgYm94ID0ge1xuICAgICAgICAgICAgICAgIG9yaWdpbiA6ICgoJGFjdGl2ZVNpZGUub3V0ZXJIZWlnaHQodHJ1ZSkgLSAkbmV4dFNpZGUub3V0ZXJIZWlnaHQodHJ1ZSkpIC8gMiksXG4gICAgICAgICAgICAgICAgZGVwdGggIDoge1xuICAgICAgICAgICAgICAgICAgYWN0aXZlIDogKCRuZXh0U2lkZS5vdXRlckhlaWdodCh0cnVlKSAvIDIpLFxuICAgICAgICAgICAgICAgICAgbmV4dCAgIDogKCRhY3RpdmVTaWRlLm91dGVySGVpZ2h0KHRydWUpIC8gMilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZXR0aW5nIHRoZSBpbml0aWFsIGFuaW1hdGlvbiBwb3NpdGlvbiBhcyBiZWxvdycsICRuZXh0U2lkZSwgYm94KTtcbiAgICAgICAgICAgICRzaWRlc1xuICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJyA6ICd0cmFuc2xhdGVaKC0nICsgYm94LmRlcHRoLmFjdGl2ZSArICdweCknXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICAkYWN0aXZlU2lkZVxuICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJyA6ICdyb3RhdGVZKDBkZWcpIHRyYW5zbGF0ZVooJyArIGJveC5kZXB0aC5hY3RpdmUgKyAncHgpJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgJG5leHRTaWRlXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuYW5pbWF0aW5nKVxuICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAndG9wJyAgICAgICA6IGJveC5vcmlnaW4gKyAncHgnLFxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3JvdGF0ZVgoLTkwZGVnKSB0cmFuc2xhdGVaKCcgKyBib3guZGVwdGgubmV4dCArICdweCknXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGxlZnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGhlaWdodCA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgOiAkYWN0aXZlU2lkZS5vdXRlcldpZHRoKHRydWUpLFxuICAgICAgICAgICAgICAgIG5leHQgICA6ICRuZXh0U2lkZS5vdXRlcldpZHRoKHRydWUpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJveCA9IHtcbiAgICAgICAgICAgICAgICBvcmlnaW4gOiAoICggaGVpZ2h0LmFjdGl2ZSAtIGhlaWdodC5uZXh0ICkgLyAyKSxcbiAgICAgICAgICAgICAgICBkZXB0aCAgOiB7XG4gICAgICAgICAgICAgICAgICBhY3RpdmUgOiAoaGVpZ2h0Lm5leHQgLyAyKSxcbiAgICAgICAgICAgICAgICAgIG5leHQgICA6IChoZWlnaHQuYWN0aXZlIC8gMilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZXR0aW5nIHRoZSBpbml0aWFsIGFuaW1hdGlvbiBwb3NpdGlvbiBhcyBsZWZ0JywgJG5leHRTaWRlLCBib3gpO1xuICAgICAgICAgICAgJHNpZGVzXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3RyYW5zbGF0ZVooLScgKyBib3guZGVwdGguYWN0aXZlICsgJ3B4KSdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgICRhY3RpdmVTaWRlXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3JvdGF0ZVkoMGRlZykgdHJhbnNsYXRlWignICsgYm94LmRlcHRoLmFjdGl2ZSArICdweCknXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICAkbmV4dFNpZGVcbiAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICdsZWZ0JyAgICAgIDogYm94Lm9yaWdpbiArICdweCcsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybScgOiAncm90YXRlWSgtOTBkZWcpIHRyYW5zbGF0ZVooJyArIGJveC5kZXB0aC5uZXh0ICsgJ3B4KSdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgcmlnaHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGhlaWdodCA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgOiAkYWN0aXZlU2lkZS5vdXRlcldpZHRoKHRydWUpLFxuICAgICAgICAgICAgICAgIG5leHQgICA6ICRuZXh0U2lkZS5vdXRlcldpZHRoKHRydWUpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJveCA9IHtcbiAgICAgICAgICAgICAgICBvcmlnaW4gOiAoICggaGVpZ2h0LmFjdGl2ZSAtIGhlaWdodC5uZXh0ICkgLyAyKSxcbiAgICAgICAgICAgICAgICBkZXB0aCAgOiB7XG4gICAgICAgICAgICAgICAgICBhY3RpdmUgOiAoaGVpZ2h0Lm5leHQgLyAyKSxcbiAgICAgICAgICAgICAgICAgIG5leHQgICA6IChoZWlnaHQuYWN0aXZlIC8gMilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZXR0aW5nIHRoZSBpbml0aWFsIGFuaW1hdGlvbiBwb3NpdGlvbiBhcyBsZWZ0JywgJG5leHRTaWRlLCBib3gpO1xuICAgICAgICAgICAgJHNpZGVzXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3RyYW5zbGF0ZVooLScgKyBib3guZGVwdGguYWN0aXZlICsgJ3B4KSdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgICRhY3RpdmVTaWRlXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3JvdGF0ZVkoMGRlZykgdHJhbnNsYXRlWignICsgYm94LmRlcHRoLmFjdGl2ZSArICdweCknXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICAkbmV4dFNpZGVcbiAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpXG4gICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICdsZWZ0JyAgICAgIDogYm94Lm9yaWdpbiArICdweCcsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybScgOiAncm90YXRlWSg5MGRlZykgdHJhbnNsYXRlWignICsgYm94LmRlcHRoLm5leHQgKyAncHgpJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBiZWhpbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGhlaWdodCA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgOiAkYWN0aXZlU2lkZS5vdXRlcldpZHRoKHRydWUpLFxuICAgICAgICAgICAgICAgIG5leHQgICA6ICRuZXh0U2lkZS5vdXRlcldpZHRoKHRydWUpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJveCA9IHtcbiAgICAgICAgICAgICAgICBvcmlnaW4gOiAoICggaGVpZ2h0LmFjdGl2ZSAtIGhlaWdodC5uZXh0ICkgLyAyKSxcbiAgICAgICAgICAgICAgICBkZXB0aCAgOiB7XG4gICAgICAgICAgICAgICAgICBhY3RpdmUgOiAoaGVpZ2h0Lm5leHQgLyAyKSxcbiAgICAgICAgICAgICAgICAgIG5leHQgICA6IChoZWlnaHQuYWN0aXZlIC8gMilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZXR0aW5nIHRoZSBpbml0aWFsIGFuaW1hdGlvbiBwb3NpdGlvbiBhcyBiZWhpbmQnLCAkbmV4dFNpZGUsIGJveCk7XG4gICAgICAgICAgICAkYWN0aXZlU2lkZVxuICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJyA6ICdyb3RhdGVZKDBkZWcpJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgJG5leHRTaWRlXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuYW5pbWF0aW5nKVxuICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAnbGVmdCcgICAgICA6IGJveC5vcmlnaW4gKyAncHgnLFxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nIDogJ3JvdGF0ZVkoLTE4MGRlZyknXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXR0aW5nOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQ2hhbmdpbmcgc2V0dGluZycsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICBpZiggJC5pc1BsYWluT2JqZWN0KG5hbWUpICkge1xuICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgc2V0dGluZ3MsIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmKCQuaXNQbGFpbk9iamVjdChzZXR0aW5nc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgc2V0dGluZ3NbbmFtZV0sIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBzZXR0aW5nc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nc1tuYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludGVybmFsOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QobmFtZSkgKSB7XG4gICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBtb2R1bGUsIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1vZHVsZVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVbbmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWJ1ZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIXNldHRpbmdzLnNpbGVudCAmJiBzZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLCBjb25zb2xlLCBzZXR0aW5ncy5uYW1lICsgJzonKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2ZXJib3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50ICYmIHNldHRpbmdzLnZlcmJvc2UgJiYgc2V0dGluZ3MuZGVidWcpIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnBlcmZvcm1hbmNlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLCBjb25zb2xlLCBzZXR0aW5ncy5uYW1lICsgJzonKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50KSB7XG4gICAgICAgICAgICBtb2R1bGUuZXJyb3IgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICAgIGxvZzogZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lLFxuICAgICAgICAgICAgICBleGVjdXRpb25UaW1lLFxuICAgICAgICAgICAgICBwcmV2aW91c1RpbWVcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnBlcmZvcm1hbmNlKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lICAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgcHJldmlvdXNUaW1lICA9IHRpbWUgfHwgY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGV4ZWN1dGlvblRpbWUgPSBjdXJyZW50VGltZSAtIHByZXZpb3VzVGltZTtcbiAgICAgICAgICAgICAgdGltZSAgICAgICAgICA9IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICBwZXJmb3JtYW5jZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAnTmFtZScgICAgICAgICAgIDogbWVzc2FnZVswXSxcbiAgICAgICAgICAgICAgICAnQXJndW1lbnRzJyAgICAgIDogW10uc2xpY2UuY2FsbChtZXNzYWdlLCAxKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAnRWxlbWVudCcgICAgICAgIDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICAnRXhlY3V0aW9uIFRpbWUnIDogZXhlY3V0aW9uVGltZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtb2R1bGUucGVyZm9ybWFuY2UudGltZXIpO1xuICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyID0gc2V0VGltZW91dChtb2R1bGUucGVyZm9ybWFuY2UuZGlzcGxheSwgNTAwKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpc3BsYXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHRpdGxlID0gc2V0dGluZ3MubmFtZSArICc6JyxcbiAgICAgICAgICAgICAgdG90YWxUaW1lID0gMFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgdGltZSA9IGZhbHNlO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lcik7XG4gICAgICAgICAgICAkLmVhY2gocGVyZm9ybWFuY2UsIGZ1bmN0aW9uKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICAgIHRvdGFsVGltZSArPSBkYXRhWydFeGVjdXRpb24gVGltZSddO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aXRsZSArPSAnICcgKyB0b3RhbFRpbWUgKyAnbXMnO1xuICAgICAgICAgICAgaWYobW9kdWxlU2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdGl0bGUgKz0gJyBcXCcnICsgbW9kdWxlU2VsZWN0b3IgKyAnXFwnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCRhbGxNb2R1bGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgdGl0bGUgKz0gJyAnICsgJygnICsgJGFsbE1vZHVsZXMubGVuZ3RoICsgJyknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIChjb25zb2xlLmdyb3VwICE9PSB1bmRlZmluZWQgfHwgY29uc29sZS50YWJsZSAhPT0gdW5kZWZpbmVkKSAmJiBwZXJmb3JtYW5jZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodGl0bGUpO1xuICAgICAgICAgICAgICBpZihjb25zb2xlLnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS50YWJsZShwZXJmb3JtYW5jZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKHBlcmZvcm1hbmNlLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVsnTmFtZSddICsgJzogJyArIGRhdGFbJ0V4ZWN1dGlvbiBUaW1lJ10rJ21zJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVyZm9ybWFuY2UgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludm9rZTogZnVuY3Rpb24ocXVlcnksIHBhc3NlZEFyZ3VtZW50cywgY29udGV4dCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgb2JqZWN0ID0gaW5zdGFuY2UsXG4gICAgICAgICAgICBtYXhEZXB0aCxcbiAgICAgICAgICAgIGZvdW5kLFxuICAgICAgICAgICAgcmVzcG9uc2VcbiAgICAgICAgICA7XG4gICAgICAgICAgcGFzc2VkQXJndW1lbnRzID0gcGFzc2VkQXJndW1lbnRzIHx8IHF1ZXJ5QXJndW1lbnRzO1xuICAgICAgICAgIGNvbnRleHQgICAgICAgICA9IGVsZW1lbnQgICAgICAgICB8fCBjb250ZXh0O1xuICAgICAgICAgIGlmKHR5cGVvZiBxdWVyeSA9PSAnc3RyaW5nJyAmJiBvYmplY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnkgICAgPSBxdWVyeS5zcGxpdCgvW1xcLiBdLyk7XG4gICAgICAgICAgICBtYXhEZXB0aCA9IHF1ZXJ5Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAkLmVhY2gocXVlcnksIGZ1bmN0aW9uKGRlcHRoLCB2YWx1ZSkge1xuICAgICAgICAgICAgICB2YXIgY2FtZWxDYXNlVmFsdWUgPSAoZGVwdGggIT0gbWF4RGVwdGgpXG4gICAgICAgICAgICAgICAgPyB2YWx1ZSArIHF1ZXJ5W2RlcHRoICsgMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBxdWVyeVtkZXB0aCArIDFdLnNsaWNlKDEpXG4gICAgICAgICAgICAgICAgOiBxdWVyeVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QoIG9iamVjdFtjYW1lbENhc2VWYWx1ZV0gKSAmJiAoZGVwdGggIT0gbWF4RGVwdGgpICkge1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IG9iamVjdFtjYW1lbENhc2VWYWx1ZV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggJC5pc1BsYWluT2JqZWN0KCBvYmplY3RbdmFsdWVdICkgJiYgKGRlcHRoICE9IG1heERlcHRoKSApIHtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSBvYmplY3RbdmFsdWVdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoIG9iamVjdFt2YWx1ZV0gIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IG9iamVjdFt2YWx1ZV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggJC5pc0Z1bmN0aW9uKCBmb3VuZCApICkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBmb3VuZC5hcHBseShjb250ZXh0LCBwYXNzZWRBcmd1bWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKGZvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCQuaXNBcnJheShyZXR1cm5lZFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZS5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXR1cm5lZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSBbcmV0dXJuZWRWYWx1ZSwgcmVzcG9uc2VdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSByZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZihtZXRob2RJbnZva2VkKSB7XG4gICAgICAgIGlmKGluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIG1vZHVsZS5pbnZva2UocXVlcnkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmKGluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpbnN0YW5jZS5pbnZva2UoJ2Rlc3Ryb3knKTtcbiAgICAgICAgfVxuICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIDtcblxuICByZXR1cm4gKHJldHVybmVkVmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICA/IHJldHVybmVkVmFsdWVcbiAgICA6IHRoaXNcbiAgO1xufTtcblxuJC5mbi5zaGFwZS5zZXR0aW5ncyA9IHtcblxuICAvLyBtb2R1bGUgaW5mb1xuICBuYW1lIDogJ1NoYXBlJyxcblxuICAvLyBoaWRlIGFsbCBkZWJ1ZyBjb250ZW50XG4gIHNpbGVudCAgICAgOiBmYWxzZSxcblxuICAvLyBkZWJ1ZyBjb250ZW50IG91dHB1dHRlZCB0byBjb25zb2xlXG4gIGRlYnVnICAgICAgOiBmYWxzZSxcblxuICAvLyB2ZXJib3NlIGRlYnVnIG91dHB1dFxuICB2ZXJib3NlICAgIDogZmFsc2UsXG5cbiAgLy8gZnVkZ2UgZmFjdG9yIGluIHBpeGVscyB3aGVuIHN3YXBwaW5nIGZyb20gMmQgdG8gM2QgKGNhbiBiZSB1c2VmdWwgdG8gY29ycmVjdCByb3VuZGluZyBlcnJvcnMpXG4gIGppdHRlciAgICAgOiAwLFxuXG4gIC8vIHBlcmZvcm1hbmNlIGRhdGEgb3V0cHV0XG4gIHBlcmZvcm1hbmNlOiB0cnVlLFxuXG4gIC8vIGV2ZW50IG5hbWVzcGFjZVxuICBuYW1lc3BhY2UgIDogJ3NoYXBlJyxcblxuICAvLyB3aWR0aCBkdXJpbmcgYW5pbWF0aW9uLCBjYW4gYmUgc2V0IHRvICdhdXRvJywgaW5pdGlhbCcsICduZXh0JyBvciBwaXhlbCBhbW91bnRcbiAgd2lkdGg6ICdpbml0aWFsJyxcblxuICAvLyBoZWlnaHQgZHVyaW5nIGFuaW1hdGlvbiwgY2FuIGJlIHNldCB0byAnYXV0bycsICdpbml0aWFsJywgJ25leHQnIG9yIHBpeGVsIGFtb3VudFxuICBoZWlnaHQ6ICdpbml0aWFsJyxcblxuICAvLyBjYWxsYmFjayBvY2N1cnMgb24gc2lkZSBjaGFuZ2VcbiAgYmVmb3JlQ2hhbmdlIDogZnVuY3Rpb24oKSB7fSxcbiAgb25DaGFuZ2UgICAgIDogZnVuY3Rpb24oKSB7fSxcblxuICAvLyBhbGxvdyBhbmltYXRpb24gdG8gc2FtZSBzaWRlXG4gIGFsbG93UmVwZWF0czogZmFsc2UsXG5cbiAgLy8gYW5pbWF0aW9uIGR1cmF0aW9uXG4gIGR1cmF0aW9uICAgOiBmYWxzZSxcblxuICAvLyBwb3NzaWJsZSBlcnJvcnNcbiAgZXJyb3I6IHtcbiAgICBzaWRlICAgOiAnWW91IHRyaWVkIHRvIHN3aXRjaCB0byBhIHNpZGUgdGhhdCBkb2VzIG5vdCBleGlzdC4nLFxuICAgIG1ldGhvZCA6ICdUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWQnXG4gIH0sXG5cbiAgLy8gY2xhc3NuYW1lcyB1c2VkXG4gIGNsYXNzTmFtZSAgIDoge1xuICAgIGFuaW1hdGluZyA6ICdhbmltYXRpbmcnLFxuICAgIGhpZGRlbiAgICA6ICdoaWRkZW4nLFxuICAgIGxvYWRpbmcgICA6ICdsb2FkaW5nJyxcbiAgICBhY3RpdmUgICAgOiAnYWN0aXZlJ1xuICB9LFxuXG4gIC8vIHNlbGVjdG9ycyB1c2VkXG4gIHNlbGVjdG9yICAgIDoge1xuICAgIHNpZGVzIDogJy5zaWRlcycsXG4gICAgc2lkZSAgOiAnLnNpZGUnXG4gIH1cblxufTtcblxuXG59KSggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50ICk7XG4iXX0=
