!function(e,t,n,a){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.state=function(t){var i,o=e(this),s=o.selector||"",c=("ontouchstart"in n.documentElement,(new Date).getTime()),r=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return o.each(function(){var n,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.state.settings,t):e.extend({},e.fn.state.settings),v=f.error,g=f.metadata,b=f.className,x=f.namespace,h=f.states,p=f.text,m="."+x,T=x+"-module",y=e(this),w=this,C=y.data(T);n={initialize:function(){n.verbose("Initializing module"),f.automatic&&n.add.defaults(),f.context&&""!==s?e(f.context).on(s,"mouseenter"+m,n.change.text).on(s,"mouseleave"+m,n.reset.text).on(s,"click"+m,n.toggle.state):y.on("mouseenter"+m,n.change.text).on("mouseleave"+m,n.reset.text).on("click"+m,n.toggle.state),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),C=n,y.data(T,n)},destroy:function(){n.verbose("Destroying previous module",C),y.off(m).removeData(T)},refresh:function(){n.verbose("Refreshing selector cache"),y=e(w)},add:{defaults:function(){var i=t&&e.isPlainObject(t.states)?t.states:{};e.each(f.defaults,function(t,o){n.is[t]!==a&&n.is[t]()&&(n.verbose("Adding default states",t,w),e.extend(f.states,o,i))})}},is:{active:function(){return y.hasClass(b.active)},loading:function(){return y.hasClass(b.loading)},inactive:function(){return!y.hasClass(b.active)},state:function(e){return b[e]!==a&&y.hasClass(b[e])},enabled:function(){return!y.is(f.filter.active)},disabled:function(){return y.is(f.filter.active)},textEnabled:function(){return!y.is(f.filter.text)},button:function(){return y.is(".button:not(a, .submit)")},input:function(){return y.is("input")},progress:function(){return y.is(".ui.progress")}},allow:function(e){n.debug("Now allowing state",e),h[e]=!0},disallow:function(e){n.debug("No longer allowing",e),h[e]=!1},allows:function(e){return h[e]||!1},enable:function(){y.removeClass(b.disabled)},disable:function(){y.addClass(b.disabled)},setState:function(e){n.allows(e)&&y.addClass(b[e])},removeState:function(e){n.allows(e)&&y.removeClass(b[e])},toggle:{state:function(){var t,i;if(n.allows("active")&&n.is.enabled()){if(n.refresh(),e.fn.api!==a)if(t=y.api("get request"),i=y.api("was cancelled"))n.debug("API Request cancelled by beforesend"),f.activateTest=function(){return!1},f.deactivateTest=function(){return!1};else if(t)return void n.listenTo(t);n.change.state()}}},listenTo:function(t){n.debug("API request detected, waiting for state signal",t),t&&(p.loading&&n.update.text(p.loading),e.when(t).then(function(){"resolved"==t.state()?(n.debug("API request succeeded"),f.activateTest=function(){return!0},f.deactivateTest=function(){return!0}):(n.debug("API request failed"),f.activateTest=function(){return!1},f.deactivateTest=function(){return!1}),n.change.state()}))},change:{state:function(){n.debug("Determining state change direction"),n.is.inactive()?n.activate():n.deactivate(),f.sync&&n.sync(),f.onChange.call(w)},text:function(){n.is.textEnabled()&&(n.is.disabled()?(n.verbose("Changing text to disabled text",p.hover),n.update.text(p.disabled)):n.is.active()?p.hover?(n.verbose("Changing text to hover text",p.hover),n.update.text(p.hover)):p.deactivate&&(n.verbose("Changing text to deactivating text",p.deactivate),n.update.text(p.deactivate)):p.hover?(n.verbose("Changing text to hover text",p.hover),n.update.text(p.hover)):p.activate&&(n.verbose("Changing text to activating text",p.activate),n.update.text(p.activate)))}},activate:function(){f.activateTest.call(w)&&(n.debug("Setting state to active"),y.addClass(b.active),n.update.text(p.active),f.onActivate.call(w))},deactivate:function(){f.deactivateTest.call(w)&&(n.debug("Setting state to inactive"),y.removeClass(b.active),n.update.text(p.inactive),f.onDeactivate.call(w))},sync:function(){n.verbose("Syncing other buttons to current state"),n.is.active()?o.not(y).state("activate"):o.not(y).state("deactivate")},get:{text:function(){return f.selector.text?y.find(f.selector.text).text():y.html()},textFor:function(e){return p[e]||!1}},flash:{text:function(e,t,a){var i=n.get.text();n.debug("Flashing text message",e,t),e=e||f.text.flash,t=t||f.flashDuration,a=a||function(){},n.update.text(e),setTimeout(function(){n.update.text(i),a.call(w)},t)}},reset:{text:function(){var e=p.active||y.data(g.storedText),t=p.inactive||y.data(g.storedText);n.is.textEnabled()&&(n.is.active()&&e?(n.verbose("Resetting active text",e),n.update.text(e)):t&&(n.verbose("Resetting inactive text",e),n.update.text(t)))}},update:{text:function(e){var t=n.get.text();e&&e!==t?(n.debug("Updating text",e),f.selector.text?y.data(g.storedText,e).find(f.selector.text).text(e):y.data(g.storedText,e).html(e)):n.debug("Text is already set, ignoring update",e)}},setting:function(t,i){if(n.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,f,t);else{if(i===a)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],i):f[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(i===a)return n[t];n[t]=i}},debug:function(){!f.silent&&f.debug&&(f.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,f.name+":"),n.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),n.verbose.apply(console,arguments)))},error:function(){f.silent||(n.error=Function.prototype.bind.call(console.error,console,f.name+":"),n.error.apply(console,arguments))},performance:{log:function(e){var t,a,i;f.performance&&(t=(new Date).getTime(),i=c||t,a=t-i,c=t,r.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":a})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,500)},display:function(){var t=f.name+":",i=0;c=!1,clearTimeout(n.performance.timer),e.each(r,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",s&&(t+=" '"+s+"'"),(console.group!==a||console.table!==a)&&r.length>0&&(console.groupCollapsed(t),console.table?console.table(r):e.each(r,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),r=[]}},invoke:function(t,o,s){var c,r,l,u=C;return o=o||d,s=w||s,"string"==typeof t&&u!==a&&(t=t.split(/[\. ]/),c=t.length-1,e.each(t,function(i,o){var s=i!=c?o+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(u[s])&&i!=c)u=u[s];else{if(u[s]!==a)return r=u[s],!1;if(!e.isPlainObject(u[o])||i==c)return u[o]!==a?(r=u[o],!1):(n.error(v.method,t),!1);u=u[o]}})),e.isFunction(r)?l=r.apply(s,o):r!==a&&(l=r),e.isArray(i)?i.push(l):i!==a?i=[i,l]:l!==a&&(i=l),r}},u?(C===a&&n.initialize(),n.invoke(l)):(C!==a&&C.invoke("destroy"),n.initialize())}),i!==a?i:this},e.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9zdGF0ZS5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiZG9jdW1lbnQiLCJ1bmRlZmluZWQiLCJNYXRoIiwic2VsZiIsIkZ1bmN0aW9uIiwiZm4iLCJzdGF0ZSIsInBhcmFtZXRlcnMiLCJyZXR1cm5lZFZhbHVlIiwiJGFsbE1vZHVsZXMiLCJ0aGlzIiwibW9kdWxlU2VsZWN0b3IiLCJzZWxlY3RvciIsInRpbWUiLCJkb2N1bWVudEVsZW1lbnQiLCJEYXRlIiwiZ2V0VGltZSIsInBlcmZvcm1hbmNlIiwicXVlcnkiLCJhcmd1bWVudHMiLCJtZXRob2RJbnZva2VkIiwicXVlcnlBcmd1bWVudHMiLCJzbGljZSIsImNhbGwiLCJlYWNoIiwibW9kdWxlIiwic2V0dGluZ3MiLCJpc1BsYWluT2JqZWN0IiwiZXh0ZW5kIiwiZXJyb3IiLCJtZXRhZGF0YSIsImNsYXNzTmFtZSIsIm5hbWVzcGFjZSIsInN0YXRlcyIsInRleHQiLCJldmVudE5hbWVzcGFjZSIsIm1vZHVsZU5hbWVzcGFjZSIsIiRtb2R1bGUiLCJlbGVtZW50IiwiaW5zdGFuY2UiLCJkYXRhIiwiaW5pdGlhbGl6ZSIsInZlcmJvc2UiLCJhdXRvbWF0aWMiLCJhZGQiLCJkZWZhdWx0cyIsImNvbnRleHQiLCJvbiIsImNoYW5nZSIsInJlc2V0IiwidG9nZ2xlIiwiaW5zdGFudGlhdGUiLCJkZXN0cm95Iiwib2ZmIiwicmVtb3ZlRGF0YSIsInJlZnJlc2giLCJ1c2VyU3RhdGVzIiwidHlwZSIsInR5cGVTdGF0ZXMiLCJpcyIsImFjdGl2ZSIsImhhc0NsYXNzIiwibG9hZGluZyIsImluYWN0aXZlIiwiZW5hYmxlZCIsImZpbHRlciIsImRpc2FibGVkIiwidGV4dEVuYWJsZWQiLCJidXR0b24iLCJpbnB1dCIsInByb2dyZXNzIiwiYWxsb3ciLCJkZWJ1ZyIsImRpc2FsbG93IiwiYWxsb3dzIiwiZW5hYmxlIiwicmVtb3ZlQ2xhc3MiLCJkaXNhYmxlIiwiYWRkQ2xhc3MiLCJzZXRTdGF0ZSIsInJlbW92ZVN0YXRlIiwiYXBpUmVxdWVzdCIsInJlcXVlc3RDYW5jZWxsZWQiLCJhcGkiLCJhY3RpdmF0ZVRlc3QiLCJkZWFjdGl2YXRlVGVzdCIsImxpc3RlblRvIiwidXBkYXRlIiwid2hlbiIsInRoZW4iLCJhY3RpdmF0ZSIsImRlYWN0aXZhdGUiLCJzeW5jIiwib25DaGFuZ2UiLCJob3ZlciIsIm9uQWN0aXZhdGUiLCJvbkRlYWN0aXZhdGUiLCJub3QiLCJnZXQiLCJmaW5kIiwiaHRtbCIsInRleHRGb3IiLCJmbGFzaCIsImR1cmF0aW9uIiwiY2FsbGJhY2siLCJwcmV2aW91c1RleHQiLCJmbGFzaER1cmF0aW9uIiwic2V0VGltZW91dCIsImFjdGl2ZVRleHQiLCJzdG9yZWRUZXh0IiwiaW5hY3RpdmVUZXh0IiwiY3VycmVudFRleHQiLCJzZXR0aW5nIiwibmFtZSIsInZhbHVlIiwiaW50ZXJuYWwiLCJzaWxlbnQiLCJsb2ciLCJwcm90b3R5cGUiLCJiaW5kIiwiY29uc29sZSIsImluZm8iLCJhcHBseSIsIm1lc3NhZ2UiLCJjdXJyZW50VGltZSIsImV4ZWN1dGlvblRpbWUiLCJwcmV2aW91c1RpbWUiLCJwdXNoIiwiTmFtZSIsIkFyZ3VtZW50cyIsIkVsZW1lbnQiLCJFeGVjdXRpb24gVGltZSIsImNsZWFyVGltZW91dCIsInRpbWVyIiwiZGlzcGxheSIsInRpdGxlIiwidG90YWxUaW1lIiwiaW5kZXgiLCJncm91cCIsInRhYmxlIiwibGVuZ3RoIiwiZ3JvdXBDb2xsYXBzZWQiLCJncm91cEVuZCIsImludm9rZSIsInBhc3NlZEFyZ3VtZW50cyIsIm1heERlcHRoIiwiZm91bmQiLCJyZXNwb25zZSIsIm9iamVjdCIsInNwbGl0IiwiZGVwdGgiLCJjYW1lbENhc2VWYWx1ZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwibWV0aG9kIiwiaXNGdW5jdGlvbiIsImlzQXJyYXkiLCJiZWZvcmVTZW5kIiwicHJvbWlzZSIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FV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LE9BQWEseUNBSWY1SCxVQUNFZ0ksUUFBYSxVQUNiakQsV0FBYSxlQUlmOUUsV0FDRTZCLE9BQVcsU0FDWE0sU0FBVyxXQUNYckMsTUFBVyxRQUNYaUMsUUFBVyxVQUNYaUcsUUFBVyxVQUNYQyxRQUFXLFdBR2JwSixVQUVFc0IsTUFBTSxHQUdSVyxVQUNFd0IsT0FDRUgsVUFBVyxFQUNYSixTQUFXLEVBQ1hGLFFBQVcsR0FFYlEsUUFDRUYsVUFBVyxFQUNYSixTQUFXLEVBQ1hGLFFBQVcsR0FFYlUsVUFDRVYsUUFBVyxFQUNYbUcsU0FBVyxFQUNYQyxTQUFXLEVBQ1huSSxPQUFXLElBSWZJLFFBQ0UyQixRQUFXLEVBQ1hNLFVBQVcsRUFDWHJDLE9BQVcsRUFDWGlDLFNBQVcsRUFDWGlHLFNBQVcsRUFDWEMsU0FBVyxHQUdiOUgsTUFDRWdDLFVBQWEsRUFDYm9DLE9BQWEsRUFDYlIsT0FBYSxFQUNibEMsUUFBYSxFQUNiRyxVQUFhLEVBQ2IyQixVQUFhLEVBQ2JDLFlBQWEsS0FPYnNFLE9BQVFsSyxPQUFRQyIsImZpbGUiOiJ2ZW5kb3Ivc3RhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqICMgU2VtYW50aWMgVUkgMi4yLjcgLSBTdGF0ZVxuICogaHR0cDovL2dpdGh1Yi5jb20vc2VtYW50aWMtb3JnL3NlbWFudGljLXVpL1xuICpcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqXG4gKi9cblxuOyhmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG53aW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoKVxuICA/IHdpbmRvd1xuICA6ICh0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aClcbiAgICA/IHNlbGZcbiAgICA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKClcbjtcblxuJC5mbi5zdGF0ZSA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgdmFyXG4gICAgJGFsbE1vZHVsZXMgICAgID0gJCh0aGlzKSxcblxuICAgIG1vZHVsZVNlbGVjdG9yICA9ICRhbGxNb2R1bGVzLnNlbGVjdG9yIHx8ICcnLFxuXG4gICAgaGFzVG91Y2ggICAgICAgID0gKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCksXG4gICAgdGltZSAgICAgICAgICAgID0gbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgcGVyZm9ybWFuY2UgICAgID0gW10sXG5cbiAgICBxdWVyeSAgICAgICAgICAgPSBhcmd1bWVudHNbMF0sXG4gICAgbWV0aG9kSW52b2tlZCAgID0gKHR5cGVvZiBxdWVyeSA9PSAnc3RyaW5nJyksXG4gICAgcXVlcnlBcmd1bWVudHMgID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuXG4gICAgcmV0dXJuZWRWYWx1ZVxuICA7XG4gICRhbGxNb2R1bGVzXG4gICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXJcbiAgICAgICAgc2V0dGluZ3MgICAgICAgICAgPSAoICQuaXNQbGFpbk9iamVjdChwYXJhbWV0ZXJzKSApXG4gICAgICAgICAgPyAkLmV4dGVuZCh0cnVlLCB7fSwgJC5mbi5zdGF0ZS5zZXR0aW5ncywgcGFyYW1ldGVycylcbiAgICAgICAgICA6ICQuZXh0ZW5kKHt9LCAkLmZuLnN0YXRlLnNldHRpbmdzKSxcblxuICAgICAgICBlcnJvciAgICAgICAgICAgPSBzZXR0aW5ncy5lcnJvcixcbiAgICAgICAgbWV0YWRhdGEgICAgICAgID0gc2V0dGluZ3MubWV0YWRhdGEsXG4gICAgICAgIGNsYXNzTmFtZSAgICAgICA9IHNldHRpbmdzLmNsYXNzTmFtZSxcbiAgICAgICAgbmFtZXNwYWNlICAgICAgID0gc2V0dGluZ3MubmFtZXNwYWNlLFxuICAgICAgICBzdGF0ZXMgICAgICAgICAgPSBzZXR0aW5ncy5zdGF0ZXMsXG4gICAgICAgIHRleHQgICAgICAgICAgICA9IHNldHRpbmdzLnRleHQsXG5cbiAgICAgICAgZXZlbnROYW1lc3BhY2UgID0gJy4nICsgbmFtZXNwYWNlLFxuICAgICAgICBtb2R1bGVOYW1lc3BhY2UgPSBuYW1lc3BhY2UgKyAnLW1vZHVsZScsXG5cbiAgICAgICAgJG1vZHVsZSAgICAgICAgID0gJCh0aGlzKSxcblxuICAgICAgICBlbGVtZW50ICAgICAgICAgPSB0aGlzLFxuICAgICAgICBpbnN0YW5jZSAgICAgICAgPSAkbW9kdWxlLmRhdGEobW9kdWxlTmFtZXNwYWNlKSxcblxuICAgICAgICBtb2R1bGVcbiAgICAgIDtcbiAgICAgIG1vZHVsZSA9IHtcblxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnSW5pdGlhbGl6aW5nIG1vZHVsZScpO1xuXG4gICAgICAgICAgLy8gYWxsb3cgbW9kdWxlIHRvIGd1ZXNzIGRlc2lyZWQgc3RhdGUgYmFzZWQgb24gZWxlbWVudFxuICAgICAgICAgIGlmKHNldHRpbmdzLmF1dG9tYXRpYykge1xuICAgICAgICAgICAgbW9kdWxlLmFkZC5kZWZhdWx0cygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGJpbmQgZXZlbnRzIHdpdGggZGVsZWdhdGVkIGV2ZW50c1xuICAgICAgICAgIGlmKHNldHRpbmdzLmNvbnRleHQgJiYgbW9kdWxlU2VsZWN0b3IgIT09ICcnKSB7XG4gICAgICAgICAgICAkKHNldHRpbmdzLmNvbnRleHQpXG4gICAgICAgICAgICAgIC5vbihtb2R1bGVTZWxlY3RvciwgJ21vdXNlZW50ZXInICsgZXZlbnROYW1lc3BhY2UsIG1vZHVsZS5jaGFuZ2UudGV4dClcbiAgICAgICAgICAgICAgLm9uKG1vZHVsZVNlbGVjdG9yLCAnbW91c2VsZWF2ZScgKyBldmVudE5hbWVzcGFjZSwgbW9kdWxlLnJlc2V0LnRleHQpXG4gICAgICAgICAgICAgIC5vbihtb2R1bGVTZWxlY3RvciwgJ2NsaWNrJyAgICAgICsgZXZlbnROYW1lc3BhY2UsIG1vZHVsZS50b2dnbGUuc3RhdGUpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAub24oJ21vdXNlZW50ZXInICsgZXZlbnROYW1lc3BhY2UsIG1vZHVsZS5jaGFuZ2UudGV4dClcbiAgICAgICAgICAgICAgLm9uKCdtb3VzZWxlYXZlJyArIGV2ZW50TmFtZXNwYWNlLCBtb2R1bGUucmVzZXQudGV4dClcbiAgICAgICAgICAgICAgLm9uKCdjbGljaycgICAgICArIGV2ZW50TmFtZXNwYWNlLCBtb2R1bGUudG9nZ2xlLnN0YXRlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2R1bGUuaW5zdGFudGlhdGUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbnN0YW50aWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1N0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlJywgbW9kdWxlKTtcbiAgICAgICAgICBpbnN0YW5jZSA9IG1vZHVsZTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAuZGF0YShtb2R1bGVOYW1lc3BhY2UsIG1vZHVsZSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0Rlc3Ryb3lpbmcgcHJldmlvdXMgbW9kdWxlJywgaW5zdGFuY2UpO1xuICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgIC5vZmYoZXZlbnROYW1lc3BhY2UpXG4gICAgICAgICAgICAucmVtb3ZlRGF0YShtb2R1bGVOYW1lc3BhY2UpXG4gICAgICAgICAgO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZWZyZXNoaW5nIHNlbGVjdG9yIGNhY2hlJyk7XG4gICAgICAgICAgJG1vZHVsZSA9ICQoZWxlbWVudCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkOiB7XG4gICAgICAgICAgZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHVzZXJTdGF0ZXMgPSBwYXJhbWV0ZXJzICYmICQuaXNQbGFpbk9iamVjdChwYXJhbWV0ZXJzLnN0YXRlcylcbiAgICAgICAgICAgICAgICA/IHBhcmFtZXRlcnMuc3RhdGVzXG4gICAgICAgICAgICAgICAgOiB7fVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgJC5lYWNoKHNldHRpbmdzLmRlZmF1bHRzLCBmdW5jdGlvbih0eXBlLCB0eXBlU3RhdGVzKSB7XG4gICAgICAgICAgICAgIGlmKCBtb2R1bGUuaXNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBtb2R1bGUuaXNbdHlwZV0oKSApIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQWRkaW5nIGRlZmF1bHQgc3RhdGVzJywgdHlwZSwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgJC5leHRlbmQoc2V0dGluZ3Muc3RhdGVzLCB0eXBlU3RhdGVzLCB1c2VyU3RhdGVzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGlzOiB7XG5cbiAgICAgICAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRtb2R1bGUuaGFzQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsb2FkaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS5sb2FkaW5nKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAhKCAkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS5hY3RpdmUpICk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdGF0ZTogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgIGlmKGNsYXNzTmFtZVtzdGF0ZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJG1vZHVsZS5oYXNDbGFzcyggY2xhc3NOYW1lW3N0YXRlXSApO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBlbmFibGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAhKCAkbW9kdWxlLmlzKHNldHRpbmdzLmZpbHRlci5hY3RpdmUpICk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKCAkbW9kdWxlLmlzKHNldHRpbmdzLmZpbHRlci5hY3RpdmUpICk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0RW5hYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gISggJG1vZHVsZS5pcyhzZXR0aW5ncy5maWx0ZXIudGV4dCkgKTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLy8gZGVmaW5pdGlvbnMgZm9yIGF1dG9tYXRpYyB0eXBlIGRldGVjdGlvblxuICAgICAgICAgIGJ1dHRvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJG1vZHVsZS5pcygnLmJ1dHRvbjpub3QoYSwgLnN1Ym1pdCknKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmlzKCdpbnB1dCcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRtb2R1bGUuaXMoJy51aS5wcm9ncmVzcycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhbGxvdzogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ05vdyBhbGxvd2luZyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICBzdGF0ZXNbc3RhdGVdID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZGlzYWxsb3c6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdObyBsb25nZXIgYWxsb3dpbmcnLCBzdGF0ZSk7XG4gICAgICAgICAgc3RhdGVzW3N0YXRlXSA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFsbG93czogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGVzW3N0YXRlXSB8fCBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRtb2R1bGUucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmRpc2FibGVkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkbW9kdWxlLmFkZENsYXNzKGNsYXNzTmFtZS5kaXNhYmxlZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0U3RhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgaWYobW9kdWxlLmFsbG93cyhzdGF0ZSkpIHtcbiAgICAgICAgICAgICRtb2R1bGUuYWRkQ2xhc3MoIGNsYXNzTmFtZVtzdGF0ZV0gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlU3RhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgaWYobW9kdWxlLmFsbG93cyhzdGF0ZSkpIHtcbiAgICAgICAgICAgICRtb2R1bGUucmVtb3ZlQ2xhc3MoIGNsYXNzTmFtZVtzdGF0ZV0gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlOiB7XG4gICAgICAgICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGFwaVJlcXVlc3QsXG4gICAgICAgICAgICAgIHJlcXVlc3RDYW5jZWxsZWRcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKCBtb2R1bGUuYWxsb3dzKCdhY3RpdmUnKSAmJiBtb2R1bGUuaXMuZW5hYmxlZCgpICkge1xuICAgICAgICAgICAgICBtb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICBpZigkLmZuLmFwaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYXBpUmVxdWVzdCAgICAgICA9ICRtb2R1bGUuYXBpKCdnZXQgcmVxdWVzdCcpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3RDYW5jZWxsZWQgPSAkbW9kdWxlLmFwaSgnd2FzIGNhbmNlbGxlZCcpO1xuICAgICAgICAgICAgICAgIGlmKCByZXF1ZXN0Q2FuY2VsbGVkICkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdBUEkgUmVxdWVzdCBjYW5jZWxsZWQgYnkgYmVmb3Jlc2VuZCcpO1xuICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYWN0aXZhdGVUZXN0ICAgPSBmdW5jdGlvbigpeyByZXR1cm4gZmFsc2U7IH07XG4gICAgICAgICAgICAgICAgICBzZXR0aW5ncy5kZWFjdGl2YXRlVGVzdCA9IGZ1bmN0aW9uKCl7IHJldHVybiBmYWxzZTsgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihhcGlSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICBtb2R1bGUubGlzdGVuVG8oYXBpUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1vZHVsZS5jaGFuZ2Uuc3RhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgbGlzdGVuVG86IGZ1bmN0aW9uKGFwaVJlcXVlc3QpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ0FQSSByZXF1ZXN0IGRldGVjdGVkLCB3YWl0aW5nIGZvciBzdGF0ZSBzaWduYWwnLCBhcGlSZXF1ZXN0KTtcbiAgICAgICAgICBpZihhcGlSZXF1ZXN0KSB7XG4gICAgICAgICAgICBpZih0ZXh0LmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS50ZXh0KHRleHQubG9hZGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkLndoZW4oYXBpUmVxdWVzdClcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYoYXBpUmVxdWVzdC5zdGF0ZSgpID09ICdyZXNvbHZlZCcpIHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQVBJIHJlcXVlc3Qgc3VjY2VlZGVkJyk7XG4gICAgICAgICAgICAgICAgICBzZXR0aW5ncy5hY3RpdmF0ZVRlc3QgICA9IGZ1bmN0aW9uKCl7IHJldHVybiB0cnVlOyB9O1xuICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuZGVhY3RpdmF0ZVRlc3QgPSBmdW5jdGlvbigpeyByZXR1cm4gdHJ1ZTsgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0FQSSByZXF1ZXN0IGZhaWxlZCcpO1xuICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYWN0aXZhdGVUZXN0ICAgPSBmdW5jdGlvbigpeyByZXR1cm4gZmFsc2U7IH07XG4gICAgICAgICAgICAgICAgICBzZXR0aW5ncy5kZWFjdGl2YXRlVGVzdCA9IGZ1bmN0aW9uKCl7IHJldHVybiBmYWxzZTsgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbW9kdWxlLmNoYW5nZS5zdGF0ZSgpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBjaGVja3Mgd2hldGhlciBhY3RpdmUvaW5hY3RpdmUgc3RhdGUgY2FuIGJlIGdpdmVuXG4gICAgICAgIGNoYW5nZToge1xuXG4gICAgICAgICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdEZXRlcm1pbmluZyBzdGF0ZSBjaGFuZ2UgZGlyZWN0aW9uJyk7XG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSB0byBhY3RpdmUgY2hhbmdlXG4gICAgICAgICAgICBpZiggbW9kdWxlLmlzLmluYWN0aXZlKCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5hY3RpdmF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5zeW5jKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5zeW5jKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXR0aW5ncy5vbkNoYW5nZS5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICB0ZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCBtb2R1bGUuaXMudGV4dEVuYWJsZWQoKSApIHtcbiAgICAgICAgICAgICAgaWYobW9kdWxlLmlzLmRpc2FibGVkKCkgKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0NoYW5naW5nIHRleHQgdG8gZGlzYWJsZWQgdGV4dCcsIHRleHQuaG92ZXIpO1xuICAgICAgICAgICAgICAgIG1vZHVsZS51cGRhdGUudGV4dCh0ZXh0LmRpc2FibGVkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCBtb2R1bGUuaXMuYWN0aXZlKCkgKSB7XG4gICAgICAgICAgICAgICAgaWYodGV4dC5ob3Zlcikge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0NoYW5naW5nIHRleHQgdG8gaG92ZXIgdGV4dCcsIHRleHQuaG92ZXIpO1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS50ZXh0KHRleHQuaG92ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHRleHQuZGVhY3RpdmF0ZSkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0NoYW5naW5nIHRleHQgdG8gZGVhY3RpdmF0aW5nIHRleHQnLCB0ZXh0LmRlYWN0aXZhdGUpO1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS50ZXh0KHRleHQuZGVhY3RpdmF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmKHRleHQuaG92ZXIpIHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdDaGFuZ2luZyB0ZXh0IHRvIGhvdmVyIHRleHQnLCB0ZXh0LmhvdmVyKTtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS51cGRhdGUudGV4dCh0ZXh0LmhvdmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZih0ZXh0LmFjdGl2YXRlKXtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdDaGFuZ2luZyB0ZXh0IHRvIGFjdGl2YXRpbmcgdGV4dCcsIHRleHQuYWN0aXZhdGUpO1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS50ZXh0KHRleHQuYWN0aXZhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiggc2V0dGluZ3MuYWN0aXZhdGVUZXN0LmNhbGwoZWxlbWVudCkgKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1NldHRpbmcgc3RhdGUgdG8gYWN0aXZlJyk7XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS50ZXh0KHRleHQuYWN0aXZlKTtcbiAgICAgICAgICAgIHNldHRpbmdzLm9uQWN0aXZhdGUuY2FsbChlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIHNldHRpbmdzLmRlYWN0aXZhdGVUZXN0LmNhbGwoZWxlbWVudCkgKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1NldHRpbmcgc3RhdGUgdG8gaW5hY3RpdmUnKTtcbiAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5hY3RpdmUpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBtb2R1bGUudXBkYXRlLnRleHQodGV4dC5pbmFjdGl2ZSk7XG4gICAgICAgICAgICBzZXR0aW5ncy5vbkRlYWN0aXZhdGUuY2FsbChlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3luYzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1N5bmNpbmcgb3RoZXIgYnV0dG9ucyB0byBjdXJyZW50IHN0YXRlJyk7XG4gICAgICAgICAgaWYoIG1vZHVsZS5pcy5hY3RpdmUoKSApIHtcbiAgICAgICAgICAgICRhbGxNb2R1bGVzXG4gICAgICAgICAgICAgIC5ub3QoJG1vZHVsZSlcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2FjdGl2YXRlJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJGFsbE1vZHVsZXNcbiAgICAgICAgICAgICAgLm5vdCgkbW9kdWxlKVxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnZGVhY3RpdmF0ZScpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldDoge1xuICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChzZXR0aW5ncy5zZWxlY3Rvci50ZXh0KVxuICAgICAgICAgICAgICA/ICRtb2R1bGUuZmluZChzZXR0aW5ncy5zZWxlY3Rvci50ZXh0KS50ZXh0KClcbiAgICAgICAgICAgICAgOiAkbW9kdWxlLmh0bWwoKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dEZvcjogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0W3N0YXRlXSB8fCBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZmxhc2g6IHtcbiAgICAgICAgICB0ZXh0OiBmdW5jdGlvbih0ZXh0LCBkdXJhdGlvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBwcmV2aW91c1RleHQgPSBtb2R1bGUuZ2V0LnRleHQoKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdGbGFzaGluZyB0ZXh0IG1lc3NhZ2UnLCB0ZXh0LCBkdXJhdGlvbik7XG4gICAgICAgICAgICB0ZXh0ICAgICA9IHRleHQgICAgIHx8IHNldHRpbmdzLnRleHQuZmxhc2g7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IHNldHRpbmdzLmZsYXNoRHVyYXRpb247XG4gICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge307XG4gICAgICAgICAgICBtb2R1bGUudXBkYXRlLnRleHQodGV4dCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIG1vZHVsZS51cGRhdGUudGV4dChwcmV2aW91c1RleHQpO1xuICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICByZXNldDoge1xuICAgICAgICAgIC8vIG9uIG1vdXNlb3V0IHNldHMgdGV4dCB0byBwcmV2aW91cyB2YWx1ZVxuICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGFjdGl2ZVRleHQgICA9IHRleHQuYWN0aXZlICAgfHwgJG1vZHVsZS5kYXRhKG1ldGFkYXRhLnN0b3JlZFRleHQpLFxuICAgICAgICAgICAgICBpbmFjdGl2ZVRleHQgPSB0ZXh0LmluYWN0aXZlIHx8ICRtb2R1bGUuZGF0YShtZXRhZGF0YS5zdG9yZWRUZXh0KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoIG1vZHVsZS5pcy50ZXh0RW5hYmxlZCgpICkge1xuICAgICAgICAgICAgICBpZiggbW9kdWxlLmlzLmFjdGl2ZSgpICYmIGFjdGl2ZVRleHQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnUmVzZXR0aW5nIGFjdGl2ZSB0ZXh0JywgYWN0aXZlVGV4dCk7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS50ZXh0KGFjdGl2ZVRleHQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoaW5hY3RpdmVUZXh0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1Jlc2V0dGluZyBpbmFjdGl2ZSB0ZXh0JywgYWN0aXZlVGV4dCk7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS50ZXh0KGluYWN0aXZlVGV4dCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgdGV4dDogZnVuY3Rpb24odGV4dCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGN1cnJlbnRUZXh0ID0gbW9kdWxlLmdldC50ZXh0KClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKHRleHQgJiYgdGV4dCAhPT0gY3VycmVudFRleHQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdVcGRhdGluZyB0ZXh0JywgdGV4dCk7XG4gICAgICAgICAgICAgIGlmKHNldHRpbmdzLnNlbGVjdG9yLnRleHQpIHtcbiAgICAgICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgICAgICAuZGF0YShtZXRhZGF0YS5zdG9yZWRUZXh0LCB0ZXh0KVxuICAgICAgICAgICAgICAgICAgLmZpbmQoc2V0dGluZ3Muc2VsZWN0b3IudGV4dClcbiAgICAgICAgICAgICAgICAgICAgLnRleHQodGV4dClcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAgICAgLmRhdGEobWV0YWRhdGEuc3RvcmVkVGV4dCwgdGV4dClcbiAgICAgICAgICAgICAgICAgIC5odG1sKHRleHQpXG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdUZXh0IGlzIGFscmVhZHkgc2V0LCBpZ25vcmluZyB1cGRhdGUnLCB0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dGluZzogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NoYW5naW5nIHNldHRpbmcnLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChuYW1lKSApIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHNldHRpbmdzLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZigkLmlzUGxhaW5PYmplY3Qoc2V0dGluZ3NbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHNldHRpbmdzW25hbWVdLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0dGluZ3NbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0dGluZ3NbbmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnRlcm5hbDogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICBpZiggJC5pc1BsYWluT2JqZWN0KG5hbWUpICkge1xuICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgbW9kdWxlLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtb2R1bGVbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlW25hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVidWc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQgJiYgc2V0dGluZ3MuZGVidWcpIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnBlcmZvcm1hbmNlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbywgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1Zy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdmVyYm9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIXNldHRpbmdzLnNpbGVudCAmJiBzZXR0aW5ncy52ZXJib3NlICYmIHNldHRpbmdzLmRlYnVnKSB7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbywgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIXNldHRpbmdzLnNpbGVudCkge1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLCBjb25zb2xlLCBzZXR0aW5ncy5uYW1lICsgJzonKTtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgICBsb2c6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBjdXJyZW50VGltZSxcbiAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZSxcbiAgICAgICAgICAgICAgcHJldmlvdXNUaW1lXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBjdXJyZW50VGltZSAgID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgIHByZXZpb3VzVGltZSAgPSB0aW1lIHx8IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICBleGVjdXRpb25UaW1lID0gY3VycmVudFRpbWUgLSBwcmV2aW91c1RpbWU7XG4gICAgICAgICAgICAgIHRpbWUgICAgICAgICAgPSBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgcGVyZm9ybWFuY2UucHVzaCh7XG4gICAgICAgICAgICAgICAgJ05hbWUnICAgICAgICAgICA6IG1lc3NhZ2VbMF0sXG4gICAgICAgICAgICAgICAgJ0FyZ3VtZW50cycgICAgICA6IFtdLnNsaWNlLmNhbGwobWVzc2FnZSwgMSkgfHwgJycsXG4gICAgICAgICAgICAgICAgJ0VsZW1lbnQnICAgICAgICA6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgJ0V4ZWN1dGlvbiBUaW1lJyA6IGV4ZWN1dGlvblRpbWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyKTtcbiAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lciA9IHNldFRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLmRpc3BsYXksIDUwMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNwbGF5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICB0aXRsZSA9IHNldHRpbmdzLm5hbWUgKyAnOicsXG4gICAgICAgICAgICAgIHRvdGFsVGltZSA9IDBcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHRpbWUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtb2R1bGUucGVyZm9ybWFuY2UudGltZXIpO1xuICAgICAgICAgICAgJC5lYWNoKHBlcmZvcm1hbmNlLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgICB0b3RhbFRpbWUgKz0gZGF0YVsnRXhlY3V0aW9uIFRpbWUnXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGl0bGUgKz0gJyAnICsgdG90YWxUaW1lICsgJ21zJztcbiAgICAgICAgICAgIGlmKG1vZHVsZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHRpdGxlICs9ICcgXFwnJyArIG1vZHVsZVNlbGVjdG9yICsgJ1xcJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggKGNvbnNvbGUuZ3JvdXAgIT09IHVuZGVmaW5lZCB8fCBjb25zb2xlLnRhYmxlICE9PSB1bmRlZmluZWQpICYmIHBlcmZvcm1hbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZCh0aXRsZSk7XG4gICAgICAgICAgICAgIGlmKGNvbnNvbGUudGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKHBlcmZvcm1hbmNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLmVhY2gocGVyZm9ybWFuY2UsIGZ1bmN0aW9uKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhWydOYW1lJ10gKyAnOiAnICsgZGF0YVsnRXhlY3V0aW9uIFRpbWUnXSsnbXMnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZXJmb3JtYW5jZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52b2tlOiBmdW5jdGlvbihxdWVyeSwgcGFzc2VkQXJndW1lbnRzLCBjb250ZXh0KSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBvYmplY3QgPSBpbnN0YW5jZSxcbiAgICAgICAgICAgIG1heERlcHRoLFxuICAgICAgICAgICAgZm91bmQsXG4gICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgIDtcbiAgICAgICAgICBwYXNzZWRBcmd1bWVudHMgPSBwYXNzZWRBcmd1bWVudHMgfHwgcXVlcnlBcmd1bWVudHM7XG4gICAgICAgICAgY29udGV4dCAgICAgICAgID0gZWxlbWVudCAgICAgICAgIHx8IGNvbnRleHQ7XG4gICAgICAgICAgaWYodHlwZW9mIHF1ZXJ5ID09ICdzdHJpbmcnICYmIG9iamVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeSAgICA9IHF1ZXJ5LnNwbGl0KC9bXFwuIF0vKTtcbiAgICAgICAgICAgIG1heERlcHRoID0gcXVlcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICQuZWFjaChxdWVyeSwgZnVuY3Rpb24oZGVwdGgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgIHZhciBjYW1lbENhc2VWYWx1ZSA9IChkZXB0aCAhPSBtYXhEZXB0aClcbiAgICAgICAgICAgICAgICA/IHZhbHVlICsgcXVlcnlbZGVwdGggKyAxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHF1ZXJ5W2RlcHRoICsgMV0uc2xpY2UoMSlcbiAgICAgICAgICAgICAgICA6IHF1ZXJ5XG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdCggb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXSApICYmIChkZXB0aCAhPSBtYXhEZXB0aCkgKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCBvYmplY3RbY2FtZWxDYXNlVmFsdWVdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSBvYmplY3RbY2FtZWxDYXNlVmFsdWVdO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCAkLmlzUGxhaW5PYmplY3QoIG9iamVjdFt2YWx1ZV0gKSAmJiAoZGVwdGggIT0gbWF4RGVwdGgpICkge1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IG9iamVjdFt2YWx1ZV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggb2JqZWN0W3ZhbHVlXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gb2JqZWN0W3ZhbHVlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm1ldGhvZCwgcXVlcnkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggJC5pc0Z1bmN0aW9uKCBmb3VuZCApICkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBmb3VuZC5hcHBseShjb250ZXh0LCBwYXNzZWRBcmd1bWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKGZvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCQuaXNBcnJheShyZXR1cm5lZFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZS5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXR1cm5lZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSBbcmV0dXJuZWRWYWx1ZSwgcmVzcG9uc2VdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSByZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZihtZXRob2RJbnZva2VkKSB7XG4gICAgICAgIGlmKGluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIG1vZHVsZS5pbnZva2UocXVlcnkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmKGluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpbnN0YW5jZS5pbnZva2UoJ2Rlc3Ryb3knKTtcbiAgICAgICAgfVxuICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIDtcblxuICByZXR1cm4gKHJldHVybmVkVmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICA/IHJldHVybmVkVmFsdWVcbiAgICA6IHRoaXNcbiAgO1xufTtcblxuJC5mbi5zdGF0ZS5zZXR0aW5ncyA9IHtcblxuICAvLyBtb2R1bGUgaW5mb1xuICBuYW1lICAgICAgICAgICA6ICdTdGF0ZScsXG5cbiAgLy8gZGVidWcgb3V0cHV0XG4gIGRlYnVnICAgICAgICAgIDogZmFsc2UsXG5cbiAgLy8gdmVyYm9zZSBkZWJ1ZyBvdXRwdXRcbiAgdmVyYm9zZSAgICAgICAgOiBmYWxzZSxcblxuICAvLyBuYW1lc3BhY2UgZm9yIGV2ZW50c1xuICBuYW1lc3BhY2UgICAgICA6ICdzdGF0ZScsXG5cbiAgLy8gZGVidWcgZGF0YSBpbmNsdWRlcyBwZXJmb3JtYW5jZVxuICBwZXJmb3JtYW5jZSAgICA6IHRydWUsXG5cbiAgLy8gY2FsbGJhY2sgb2NjdXJzIG9uIHN0YXRlIGNoYW5nZVxuICBvbkFjdGl2YXRlICAgICA6IGZ1bmN0aW9uKCkge30sXG4gIG9uRGVhY3RpdmF0ZSAgIDogZnVuY3Rpb24oKSB7fSxcbiAgb25DaGFuZ2UgICAgICAgOiBmdW5jdGlvbigpIHt9LFxuXG4gIC8vIHN0YXRlIHRlc3QgZnVuY3Rpb25zXG4gIGFjdGl2YXRlVGVzdCAgIDogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxuICBkZWFjdGl2YXRlVGVzdCA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcblxuICAvLyB3aGV0aGVyIHRvIGF1dG9tYXRpY2FsbHkgbWFwIGRlZmF1bHQgc3RhdGVzXG4gIGF1dG9tYXRpYyAgICAgIDogdHJ1ZSxcblxuICAvLyBhY3RpdmF0ZSAvIGRlYWN0aXZhdGUgY2hhbmdlcyBhbGwgZWxlbWVudHMgaW5zdGFudGlhdGVkIGF0IHNhbWUgdGltZVxuICBzeW5jICAgICAgICAgICA6IGZhbHNlLFxuXG4gIC8vIGRlZmF1bHQgZmxhc2ggdGV4dCBkdXJhdGlvbiwgdXNlZCBmb3IgdGVtcG9yYXJpbHkgY2hhbmdpbmcgdGV4dCBvZiBhbiBlbGVtZW50XG4gIGZsYXNoRHVyYXRpb24gIDogMTAwMCxcblxuICAvLyBzZWxlY3RvciBmaWx0ZXJcbiAgZmlsdGVyICAgICA6IHtcbiAgICB0ZXh0ICAgOiAnLmxvYWRpbmcsIC5kaXNhYmxlZCcsXG4gICAgYWN0aXZlIDogJy5kaXNhYmxlZCdcbiAgfSxcblxuICBjb250ZXh0ICAgIDogZmFsc2UsXG5cbiAgLy8gZXJyb3JcbiAgZXJyb3I6IHtcbiAgICBiZWZvcmVTZW5kIDogJ1RoZSBiZWZvcmUgc2VuZCBmdW5jdGlvbiBoYXMgY2FuY2VsbGVkIHN0YXRlIGNoYW5nZScsXG4gICAgbWV0aG9kICAgICA6ICdUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWQuJ1xuICB9LFxuXG4gIC8vIG1ldGFkYXRhXG4gIG1ldGFkYXRhOiB7XG4gICAgcHJvbWlzZSAgICA6ICdwcm9taXNlJyxcbiAgICBzdG9yZWRUZXh0IDogJ3N0b3JlZC10ZXh0J1xuICB9LFxuXG4gIC8vIGNoYW5nZSBjbGFzcyBvbiBzdGF0ZVxuICBjbGFzc05hbWU6IHtcbiAgICBhY3RpdmUgICA6ICdhY3RpdmUnLFxuICAgIGRpc2FibGVkIDogJ2Rpc2FibGVkJyxcbiAgICBlcnJvciAgICA6ICdlcnJvcicsXG4gICAgbG9hZGluZyAgOiAnbG9hZGluZycsXG4gICAgc3VjY2VzcyAgOiAnc3VjY2VzcycsXG4gICAgd2FybmluZyAgOiAnd2FybmluZydcbiAgfSxcblxuICBzZWxlY3Rvcjoge1xuICAgIC8vIHNlbGVjdG9yIGZvciB0ZXh0IG5vZGVcbiAgICB0ZXh0OiBmYWxzZVxuICB9LFxuXG4gIGRlZmF1bHRzIDoge1xuICAgIGlucHV0OiB7XG4gICAgICBkaXNhYmxlZCA6IHRydWUsXG4gICAgICBsb2FkaW5nICA6IHRydWUsXG4gICAgICBhY3RpdmUgICA6IHRydWVcbiAgICB9LFxuICAgIGJ1dHRvbjoge1xuICAgICAgZGlzYWJsZWQgOiB0cnVlLFxuICAgICAgbG9hZGluZyAgOiB0cnVlLFxuICAgICAgYWN0aXZlICAgOiB0cnVlLFxuICAgIH0sXG4gICAgcHJvZ3Jlc3M6IHtcbiAgICAgIGFjdGl2ZSAgIDogdHJ1ZSxcbiAgICAgIHN1Y2Nlc3MgIDogdHJ1ZSxcbiAgICAgIHdhcm5pbmcgIDogdHJ1ZSxcbiAgICAgIGVycm9yICAgIDogdHJ1ZVxuICAgIH1cbiAgfSxcblxuICBzdGF0ZXMgICAgIDoge1xuICAgIGFjdGl2ZSAgIDogdHJ1ZSxcbiAgICBkaXNhYmxlZCA6IHRydWUsXG4gICAgZXJyb3IgICAgOiB0cnVlLFxuICAgIGxvYWRpbmcgIDogdHJ1ZSxcbiAgICBzdWNjZXNzICA6IHRydWUsXG4gICAgd2FybmluZyAgOiB0cnVlXG4gIH0sXG5cbiAgdGV4dCAgICAgOiB7XG4gICAgZGlzYWJsZWQgICA6IGZhbHNlLFxuICAgIGZsYXNoICAgICAgOiBmYWxzZSxcbiAgICBob3ZlciAgICAgIDogZmFsc2UsXG4gICAgYWN0aXZlICAgICA6IGZhbHNlLFxuICAgIGluYWN0aXZlICAgOiBmYWxzZSxcbiAgICBhY3RpdmF0ZSAgIDogZmFsc2UsXG4gICAgZGVhY3RpdmF0ZSA6IGZhbHNlXG4gIH1cblxufTtcblxuXG5cbn0pKCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQgKTtcbiJdfQ==
