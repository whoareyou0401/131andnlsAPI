!function(n,e,i,t){"use strict";e="undefined"!=typeof e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),n.fn.transition=function(){var a,o=n(this),r=o.selector||"",s=(new Date).getTime(),l=[],u=arguments,d=u[0],c=[].slice.call(arguments,1),m="string"==typeof d;e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(n){setTimeout(n,0)};return o.each(function(e){var f,p,g,v,b,y,h,w,C,A=n(this),S=this;C={initialize:function(){f=C.get.settings.apply(S,u),v=f.className,g=f.error,b=f.metadata,w="."+f.namespace,h="module-"+f.namespace,p=A.data(h)||C,y=C.get.animationEndEvent(),m&&(m=C.invoke(d)),m===!1&&(C.verbose("Converted arguments into settings object",f),f.interval?C.delay(f.animate):C.animate(),C.instantiate())},instantiate:function(){C.verbose("Storing instance of module",C),p=C,A.data(h,p)},destroy:function(){C.verbose("Destroying previous module for",S),A.removeData(h)},refresh:function(){C.verbose("Refreshing display type on next animation"),delete C.displayType},forceRepaint:function(){C.verbose("Forcing element repaint");var n=A.parent(),e=A.next();0===e.length?A.detach().appendTo(n):A.detach().insertBefore(e)},repaint:function(){C.verbose("Repainting element");S.offsetWidth},delay:function(n){var i,a,r=C.get.animationDirection();r||(r=C.can.transition()?C.get.direction():"static"),n=n!==t?n:f.interval,i="auto"==f.reverse&&r==v.outward,a=i||1==f.reverse?(o.length-e)*f.interval:e*f.interval,C.debug("Delaying animation by",a),setTimeout(C.animate,a)},animate:function(n){if(f=n||f,!C.is.supported())return C.error(g.support),!1;if(C.debug("Preparing animation",f.animation),C.is.animating()){if(f.queue)return!f.allowRepeats&&C.has.direction()&&C.is.occurring()&&C.queuing!==!0?C.debug("Animation is currently occurring, preventing queueing same animation",f.animation):C.queue(f.animation),!1;if(!f.allowRepeats&&C.is.occurring())return C.debug("Animation is already occurring, will not execute repeated animation",f.animation),!1;C.debug("New animation started, completing previous early",f.animation),p.complete()}C.can.animate()?C.set.animating(f.animation):C.error(g.noAnimation,f.animation,S)},reset:function(){C.debug("Resetting animation to beginning conditions"),C.remove.animationCallbacks(),C.restore.conditions(),C.remove.animating()},queue:function(n){C.debug("Queueing animation of",n),C.queuing=!0,A.one(y+".queue"+w,function(){C.queuing=!1,C.repaint(),C.animate.apply(this,f)})},complete:function(n){C.debug("Animation complete",f.animation),C.remove.completeCallback(),C.remove.failSafe(),C.is.looping()||(C.is.outward()?(C.verbose("Animation is outward, hiding element"),C.restore.conditions(),C.hide()):C.is.inward()?(C.verbose("Animation is outward, showing element"),C.restore.conditions(),C.show()):(C.verbose("Static animation completed"),C.restore.conditions(),f.onComplete.call(S)))},force:{visible:function(){var n=A.attr("style"),e=C.get.userStyle(),i=C.get.displayType(),a=e+"display: "+i+" !important;",o=A.css("display"),r=n===t||""===n;o!==i?(C.verbose("Overriding default display to show element",i),A.attr("style",a)):r&&A.removeAttr("style")},hidden:function(){var n=A.attr("style"),e=A.css("display"),i=n===t||""===n;"none"===e||C.is.hidden()?i&&A.removeAttr("style"):(C.verbose("Overriding default display to hide element"),A.css("display","none"))}},has:{direction:function(e){var i=!1;return e=e||f.animation,"string"==typeof e&&(e=e.split(" "),n.each(e,function(n,e){e!==v.inward&&e!==v.outward||(i=!0)})),i},inlineDisplay:function(){var e=A.attr("style")||"";return n.isArray(e.match(/display.*?;/,""))}},set:{animating:function(n){var e;C.remove.completeCallback(),n=n||f.animation,e=C.get.animationClass(n),C.save.animation(e),C.force.visible(),C.remove.hidden(),C.remove.direction(),C.start.animation(e)},duration:function(n,e){e=e||f.duration,e="number"==typeof e?e+"ms":e,(e||0===e)&&(C.verbose("Setting animation duration",e),A.css({"animation-duration":e}))},direction:function(n){n=n||C.get.direction(),n==v.inward?C.set.inward():C.set.outward()},looping:function(){C.debug("Transition set to loop"),A.addClass(v.looping)},hidden:function(){A.addClass(v.transition).addClass(v.hidden)},inward:function(){C.debug("Setting direction to inward"),A.removeClass(v.outward).addClass(v.inward)},outward:function(){C.debug("Setting direction to outward"),A.removeClass(v.inward).addClass(v.outward)},visible:function(){A.addClass(v.transition).addClass(v.visible)}},start:{animation:function(n){n=n||C.get.animationClass(),C.debug("Starting tween",n),A.addClass(n).one(y+".complete"+w,C.complete),f.useFailSafe&&C.add.failSafe(),C.set.duration(f.duration),f.onStart.call(S)}},save:{animation:function(n){C.cache||(C.cache={}),C.cache.animation=n},displayType:function(n){"none"!==n&&A.data(b.displayType,n)},transitionExists:function(e,i){n.fn.transition.exists[e]=i,C.verbose("Saving existence of transition",e,i)}},restore:{conditions:function(){var n=C.get.currentAnimation();n&&(A.removeClass(n),C.verbose("Removing animation class",C.cache)),C.remove.duration()}},add:{failSafe:function(){var n=C.get.duration();C.timer=setTimeout(function(){A.triggerHandler(y)},n+f.failSafeDelay),C.verbose("Adding fail safe timer",C.timer)}},remove:{animating:function(){A.removeClass(v.animating)},animationCallbacks:function(){C.remove.queueCallback(),C.remove.completeCallback()},queueCallback:function(){A.off(".queue"+w)},completeCallback:function(){A.off(".complete"+w)},display:function(){A.css("display","")},direction:function(){A.removeClass(v.inward).removeClass(v.outward)},duration:function(){A.css("animation-duration","")},failSafe:function(){C.verbose("Removing fail safe timer",C.timer),C.timer&&clearTimeout(C.timer)},hidden:function(){A.removeClass(v.hidden)},visible:function(){A.removeClass(v.visible)},looping:function(){C.debug("Transitions are no longer looping"),C.is.looping()&&(C.reset(),A.removeClass(v.looping))},transition:function(){A.removeClass(v.visible).removeClass(v.hidden)}},get:{settings:function(e,i,t){return"object"==typeof e?n.extend(!0,{},n.fn.transition.settings,e):"function"==typeof t?n.extend({},n.fn.transition.settings,{animation:e,onComplete:t,duration:i}):"string"==typeof i||"number"==typeof i?n.extend({},n.fn.transition.settings,{animation:e,duration:i}):"object"==typeof i?n.extend({},n.fn.transition.settings,i,{animation:e}):"function"==typeof i?n.extend({},n.fn.transition.settings,{animation:e,onComplete:i}):n.extend({},n.fn.transition.settings,{animation:e})},animationClass:function(n){var e=n||f.animation,i=C.can.transition()&&!C.has.direction()?C.get.direction()+" ":"";return v.animating+" "+v.transition+" "+i+e},currentAnimation:function(){return!(!C.cache||C.cache.animation===t)&&C.cache.animation},currentDirection:function(){return C.is.inward()?v.inward:v.outward},direction:function(){return C.is.hidden()||!C.is.visible()?v.inward:v.outward},animationDirection:function(e){var i;return e=e||f.animation,"string"==typeof e&&(e=e.split(" "),n.each(e,function(n,e){e===v.inward?i=v.inward:e===v.outward&&(i=v.outward)})),!!i&&i},duration:function(n){return n=n||f.duration,n===!1&&(n=A.css("animation-duration")||0),"string"==typeof n?n.indexOf("ms")>-1?parseFloat(n):1e3*parseFloat(n):n},displayType:function(n){return n=n===t||n,f.displayType?f.displayType:(n&&A.data(b.displayType)===t&&C.can.transition(!0),A.data(b.displayType))},userStyle:function(n){return n=n||A.attr("style")||"",n.replace(/display.*?;/,"")},transitionExists:function(e){return n.fn.transition.exists[e]},animationStartEvent:function(){var n,e=i.createElement("div"),a={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(n in a)if(e.style[n]!==t)return a[n];return!1},animationEndEvent:function(){var n,e=i.createElement("div"),a={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(n in a)if(e.style[n]!==t)return a[n];return!1}},can:{transition:function(e){var i,a,o,r,s,l,u=f.animation,d=C.get.transitionExists(u),c=C.get.displayType(!1);if(d===t||e){if(C.verbose("Determining whether animation exists"),i=A.attr("class"),a=A.prop("tagName"),o=n("<"+a+" />").addClass(i).insertAfter(A),r=o.addClass(u).removeClass(v.inward).removeClass(v.outward).addClass(v.animating).addClass(v.transition).css("animationName"),s=o.addClass(v.inward).css("animationName"),c||(c=o.attr("class",i).removeAttr("style").removeClass(v.hidden).removeClass(v.visible).show().css("display"),C.verbose("Determining final display state",c),C.save.displayType(c)),o.remove(),r!=s)C.debug("Direction exists for animation",u),l=!0;else{if("none"==r||!r)return void C.debug("No animation defined in css",u);C.debug("Static animation found",u,c),l=!1}C.save.transitionExists(u,l)}return d!==t?d:l},animate:function(){return C.can.transition()!==t}},is:{animating:function(){return A.hasClass(v.animating)},inward:function(){return A.hasClass(v.inward)},outward:function(){return A.hasClass(v.outward)},looping:function(){return A.hasClass(v.looping)},occurring:function(n){return n=n||f.animation,n="."+n.replace(" ","."),A.filter(n).length>0},visible:function(){return A.is(":visible")},hidden:function(){return"hidden"===A.css("visibility")},supported:function(){return y!==!1}},hide:function(){C.verbose("Hiding element"),C.is.animating()&&C.reset(),S.blur(),C.remove.display(),C.remove.visible(),C.set.hidden(),C.force.hidden(),f.onHide.call(S),f.onComplete.call(S)},show:function(n){C.verbose("Showing element",n),C.remove.hidden(),C.set.visible(),C.force.visible(),f.onShow.call(S),f.onComplete.call(S)},toggle:function(){C.is.visible()?C.hide():C.show()},stop:function(){C.debug("Stopping current animation"),A.triggerHandler(y)},stopAll:function(){C.debug("Stopping all animation"),C.remove.queueCallback(),A.triggerHandler(y)},clear:{queue:function(){C.debug("Clearing animation queue"),C.remove.queueCallback()}},enable:function(){C.verbose("Starting animation"),A.removeClass(v.disabled)},disable:function(){C.debug("Stopping animation"),A.addClass(v.disabled)},setting:function(e,i){if(C.debug("Changing setting",e,i),n.isPlainObject(e))n.extend(!0,f,e);else{if(i===t)return f[e];n.isPlainObject(f[e])?n.extend(!0,f[e],i):f[e]=i}},internal:function(e,i){if(n.isPlainObject(e))n.extend(!0,C,e);else{if(i===t)return C[e];C[e]=i}},debug:function(){!f.silent&&f.debug&&(f.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,f.name+":"),C.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),C.verbose.apply(console,arguments)))},error:function(){f.silent||(C.error=Function.prototype.bind.call(console.error,console,f.name+":"),C.error.apply(console,arguments))},performance:{log:function(n){var e,i,t;f.performance&&(e=(new Date).getTime(),t=s||e,i=e-t,s=e,l.push({Name:n[0],Arguments:[].slice.call(n,1)||"",Element:S,"Execution Time":i})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var e=f.name+":",i=0;s=!1,clearTimeout(C.performance.timer),n.each(l,function(n,e){i+=e["Execution Time"]}),e+=" "+i+"ms",r&&(e+=" '"+r+"'"),o.length>1&&(e+=" ("+o.length+")"),(console.group!==t||console.table!==t)&&l.length>0&&(console.groupCollapsed(e),console.table?console.table(l):n.each(l,function(n,e){console.log(e.Name+": "+e["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(e,i,o){var r,s,l,u=p;return i=i||c,o=S||o,"string"==typeof e&&u!==t&&(e=e.split(/[\. ]/),r=e.length-1,n.each(e,function(i,a){var o=i!=r?a+e[i+1].charAt(0).toUpperCase()+e[i+1].slice(1):e;if(n.isPlainObject(u[o])&&i!=r)u=u[o];else{if(u[o]!==t)return s=u[o],!1;if(!n.isPlainObject(u[a])||i==r)return u[a]!==t&&(s=u[a],!1);u=u[a]}})),n.isFunction(s)?l=s.apply(o,i):s!==t&&(l=s),n.isArray(a)?a.push(l):a!==t?a=[a,l]:l!==t&&(a=l),s!==t&&s}},C.initialize()}),a!==t?a:this},n.fn.transition.exists={},n.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci90cmFuc2l0aW9uLmpzIl0sIm5hbWVzIjpbIiQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsInVuZGVmaW5lZCIsIk1hdGgiLCJzZWxmIiwiRnVuY3Rpb24iLCJmbiIsInRyYW5zaXRpb24iLCJyZXR1cm5lZFZhbHVlIiwiJGFsbE1vZHVsZXMiLCJ0aGlzIiwibW9kdWxlU2VsZWN0b3IiLCJzZWxlY3RvciIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInBlcmZvcm1hbmNlIiwibW9kdWxlQXJndW1lbnRzIiwiYXJndW1lbnRzIiwicXVlcnkiLCJxdWVyeUFyZ3VtZW50cyIsInNsaWNlIiwiY2FsbCIsIm1ldGhvZEludm9rZWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtc1JlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwic2V0VGltZW91dCIsImVhY2giLCJpbmRleCIsInNldHRpbmdzIiwiaW5zdGFuY2UiLCJlcnJvciIsImNsYXNzTmFtZSIsIm1ldGFkYXRhIiwiYW5pbWF0aW9uRW5kIiwibW9kdWxlTmFtZXNwYWNlIiwiZXZlbnROYW1lc3BhY2UiLCJtb2R1bGUiLCIkbW9kdWxlIiwiZWxlbWVudCIsImluaXRpYWxpemUiLCJnZXQiLCJhcHBseSIsIm5hbWVzcGFjZSIsImRhdGEiLCJhbmltYXRpb25FbmRFdmVudCIsImludm9rZSIsInZlcmJvc2UiLCJpbnRlcnZhbCIsImRlbGF5IiwiYW5pbWF0ZSIsImluc3RhbnRpYXRlIiwiZGVzdHJveSIsInJlbW92ZURhdGEiLCJyZWZyZXNoIiwiZGlzcGxheVR5cGUiLCJmb3JjZVJlcGFpbnQiLCIkcGFyZW50RWxlbWVudCIsInBhcmVudCIsIiRuZXh0RWxlbWVudCIsIm5leHQiLCJsZW5ndGgiLCJkZXRhY2giLCJhcHBlbmRUbyIsImluc2VydEJlZm9yZSIsInJlcGFpbnQiLCJvZmZzZXRXaWR0aCIsInNob3VsZFJldmVyc2UiLCJkaXJlY3Rpb24iLCJhbmltYXRpb25EaXJlY3Rpb24iLCJjYW4iLCJyZXZlcnNlIiwib3V0d2FyZCIsImRlYnVnIiwib3ZlcnJpZGVTZXR0aW5ncyIsImlzIiwic3VwcG9ydGVkIiwic3VwcG9ydCIsImFuaW1hdGlvbiIsImFuaW1hdGluZyIsInF1ZXVlIiwiYWxsb3dSZXBlYXRzIiwiaGFzIiwib2NjdXJyaW5nIiwicXVldWluZyIsImNvbXBsZXRlIiwic2V0Iiwibm9BbmltYXRpb24iLCJyZXNldCIsInJlbW92ZSIsImFuaW1hdGlvbkNhbGxiYWNrcyIsInJlc3RvcmUiLCJjb25kaXRpb25zIiwib25lIiwiZXZlbnQiLCJjb21wbGV0ZUNhbGxiYWNrIiwiZmFpbFNhZmUiLCJsb29waW5nIiwiaGlkZSIsImlud2FyZCIsInNob3ciLCJvbkNvbXBsZXRlIiwiZm9yY2UiLCJ2aXNpYmxlIiwic3R5bGUiLCJhdHRyIiwidXNlclN0eWxlIiwib3ZlcnJpZGVTdHlsZSIsImN1cnJlbnREaXNwbGF5IiwiY3NzIiwiZW1wdHlTdHlsZSIsInJlbW92ZUF0dHIiLCJoaWRkZW4iLCJoYXNEaXJlY3Rpb24iLCJzcGxpdCIsIndvcmQiLCJpbmxpbmVEaXNwbGF5IiwiaXNBcnJheSIsIm1hdGNoIiwiYW5pbWF0aW9uQ2xhc3MiLCJzYXZlIiwic3RhcnQiLCJkdXJhdGlvbiIsImFuaW1hdGlvbk5hbWUiLCJhbmltYXRpb24tZHVyYXRpb24iLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwidXNlRmFpbFNhZmUiLCJhZGQiLCJvblN0YXJ0IiwiY2FjaGUiLCJ0cmFuc2l0aW9uRXhpc3RzIiwiZXhpc3RzIiwiY3VycmVudEFuaW1hdGlvbiIsInRpbWVyIiwidHJpZ2dlckhhbmRsZXIiLCJmYWlsU2FmZURlbGF5IiwicXVldWVDYWxsYmFjayIsIm9mZiIsImRpc3BsYXkiLCJjbGVhclRpbWVvdXQiLCJleHRlbmQiLCJkaXJlY3Rpb25DbGFzcyIsImN1cnJlbnREaXJlY3Rpb24iLCJpbmRleE9mIiwicGFyc2VGbG9hdCIsInNob3VsZERldGVybWluZSIsInJlcGxhY2UiLCJhbmltYXRpb25TdGFydEV2ZW50IiwiY3JlYXRlRWxlbWVudCIsImFuaW1hdGlvbnMiLCJPQW5pbWF0aW9uIiwiTW96QW5pbWF0aW9uIiwiV2Via2l0QW5pbWF0aW9uIiwiZm9yY2VkIiwiZWxlbWVudENsYXNzIiwidGFnTmFtZSIsIiRjbG9uZSIsImluQW5pbWF0aW9uIiwiZGlyZWN0aW9uRXhpc3RzIiwicHJvcCIsImluc2VydEFmdGVyIiwiaGFzQ2xhc3MiLCJmaWx0ZXIiLCJibHVyIiwib25IaWRlIiwib25TaG93IiwidG9nZ2xlIiwic3RvcCIsInN0b3BBbGwiLCJjbGVhciIsImVuYWJsZSIsImRpc2FibGVkIiwiZGlzYWJsZSIsInNldHRpbmciLCJuYW1lIiwidmFsdWUiLCJpc1BsYWluT2JqZWN0IiwiaW50ZXJuYWwiLCJzaWxlbnQiLCJsb2ciLCJwcm90b3R5cGUiLCJiaW5kIiwiY29uc29sZSIsImluZm8iLCJtZXNzYWdlIiwiY3VycmVudFRpbWUiLCJleGVjdXRpb25UaW1lIiwicHJldmlvdXNUaW1lIiwicHVzaCIsIk5hbWUiLCJBcmd1bWVudHMiLCJFbGVtZW50IiwiRXhlY3V0aW9uIFRpbWUiLCJ0aXRsZSIsInRvdGFsVGltZSIsImdyb3VwIiwidGFibGUiLCJncm91cENvbGxhcHNlZCIsImdyb3VwRW5kIiwicGFzc2VkQXJndW1lbnRzIiwiY29udGV4dCIsIm1heERlcHRoIiwiZm91bmQiLCJyZXNwb25zZSIsIm9iamVjdCIsImRlcHRoIiwiY2FtZWxDYXNlVmFsdWUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImlzRnVuY3Rpb24iLCJsb2FkaW5nIiwicmVwZWF0ZWQiLCJtZXRob2QiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQVVDLFNBQVdBLEVBQUdDLEVBQVFDLEVBQVVDLEdBRWpDLFlBRUFGLEdBQTJCLG1CQUFWQSxJQUF5QkEsRUFBT0csTUFBUUEsS0FDckRILEVBQ2dCLG1CQUFS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QSxJQUFhN00sSUFDbkJNLEVBQWdCdU0sR0FFVkQsSUFBVTVNLEdBQ2Q0TSxJQUtSdEssRUFBT0csZUFHSG5DLElBQWtCTixFQUN0Qk0sRUFDQUUsTUFLTlgsRUFBRU8sR0FBR0MsV0FBV2dJLFVBRWhCeEksRUFBRU8sR0FBR0MsV0FBV3lCLFVBR2RrSixLQUFnQixhQUdoQkksUUFBZ0IsRUFHaEIxRyxPQUFnQixFQUdoQjFCLFNBQWdCLEVBR2hCbEMsYUFBZ0IsRUFHaEI4QixVQUFnQixhQUdoQkssU0FBZ0IsRUFHaEJ1QixRQUFnQixPQUdoQjBELFFBQWdCLGFBQ2hCNUIsV0FBZ0IsYUFDaEJpRSxPQUFnQixhQUNoQkQsT0FBZ0IsYUFHaEJ0QyxhQUFnQixFQUdoQlMsY0FBZ0IsSUFHaEJ2RCxjQUFnQixFQUdoQjFCLGFBQWdCLEVBR2hCdUIsVUFBZ0IsT0FDaEI0QyxVQUFnQixFQUdoQjFDLE9BQWdCLEVBRWhCL0MsVUFDRXNCLFlBQWEsV0FHZnZCLFdBQ0UrQyxVQUFhLFlBQ2I2RixTQUFhLFdBQ2I1RCxPQUFhLFNBQ2JiLE9BQWEsS0FDYmdILFFBQWEsVUFDYmxILFFBQWEsVUFDYnpCLFFBQWEsTUFDYnBFLFdBQWEsYUFDYm1HLFFBQWEsV0FJZnhFLE9BQ0V3RCxZQUFjLHVIQUNkNkgsU0FBYyxxRUFDZEMsT0FBYyx1Q0FDZHhJLFFBQWMsa0RBTWR5SSxPQUFRek4sT0FBUUMiLCJmaWxlIjoidmVuZG9yL3RyYW5zaXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqICMgU2VtYW50aWMgVUkgMi4yLjcgLSBUcmFuc2l0aW9uXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9zZW1hbnRpYy1vcmcvc2VtYW50aWMtdWkvXG4gKlxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICpcbiAqL1xuXG47KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbndpbmRvdyA9ICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGgpXG4gID8gd2luZG93XG4gIDogKHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoKVxuICAgID8gc2VsZlxuICAgIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKVxuO1xuXG4kLmZuLnRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgdmFyXG4gICAgJGFsbE1vZHVsZXMgICAgID0gJCh0aGlzKSxcbiAgICBtb2R1bGVTZWxlY3RvciAgPSAkYWxsTW9kdWxlcy5zZWxlY3RvciB8fCAnJyxcblxuICAgIHRpbWUgICAgICAgICAgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgIHBlcmZvcm1hbmNlICAgICA9IFtdLFxuXG4gICAgbW9kdWxlQXJndW1lbnRzID0gYXJndW1lbnRzLFxuICAgIHF1ZXJ5ICAgICAgICAgICA9IG1vZHVsZUFyZ3VtZW50c1swXSxcbiAgICBxdWVyeUFyZ3VtZW50cyAgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG4gICAgbWV0aG9kSW52b2tlZCAgID0gKHR5cGVvZiBxdWVyeSA9PT0gJ3N0cmluZycpLFxuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICB8fCBmdW5jdGlvbihjYWxsYmFjaykgeyBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwKTsgfSxcblxuICAgIHJldHVybmVkVmFsdWVcbiAgO1xuICAkYWxsTW9kdWxlc1xuICAgIC5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICB2YXJcbiAgICAgICAgJG1vZHVsZSAgPSAkKHRoaXMpLFxuICAgICAgICBlbGVtZW50ICA9IHRoaXMsXG5cbiAgICAgICAgLy8gc2V0IGF0IHJ1biB0aW1lXG4gICAgICAgIHNldHRpbmdzLFxuICAgICAgICBpbnN0YW5jZSxcblxuICAgICAgICBlcnJvcixcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgYW5pbWF0aW9uRW5kLFxuICAgICAgICBhbmltYXRpb25OYW1lLFxuXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgbW9kdWxlTmFtZXNwYWNlLFxuICAgICAgICBldmVudE5hbWVzcGFjZSxcbiAgICAgICAgbW9kdWxlXG4gICAgICA7XG5cbiAgICAgIG1vZHVsZSA9IHtcblxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIC8vIGdldCBmdWxsIHNldHRpbmdzXG4gICAgICAgICAgc2V0dGluZ3MgICAgICAgID0gbW9kdWxlLmdldC5zZXR0aW5ncy5hcHBseShlbGVtZW50LCBtb2R1bGVBcmd1bWVudHMpO1xuXG4gICAgICAgICAgLy8gc2hvcnRoYW5kXG4gICAgICAgICAgY2xhc3NOYW1lICAgICAgID0gc2V0dGluZ3MuY2xhc3NOYW1lO1xuICAgICAgICAgIGVycm9yICAgICAgICAgICA9IHNldHRpbmdzLmVycm9yO1xuICAgICAgICAgIG1ldGFkYXRhICAgICAgICA9IHNldHRpbmdzLm1ldGFkYXRhO1xuXG4gICAgICAgICAgLy8gZGVmaW5lIG5hbWVzcGFjZVxuICAgICAgICAgIGV2ZW50TmFtZXNwYWNlICA9ICcuJyArIHNldHRpbmdzLm5hbWVzcGFjZTtcbiAgICAgICAgICBtb2R1bGVOYW1lc3BhY2UgPSAnbW9kdWxlLScgKyBzZXR0aW5ncy5uYW1lc3BhY2U7XG4gICAgICAgICAgaW5zdGFuY2UgICAgICAgID0gJG1vZHVsZS5kYXRhKG1vZHVsZU5hbWVzcGFjZSkgfHwgbW9kdWxlO1xuXG4gICAgICAgICAgLy8gZ2V0IHZlbmRvciBzcGVjaWZpYyBldmVudHNcbiAgICAgICAgICBhbmltYXRpb25FbmQgICAgPSBtb2R1bGUuZ2V0LmFuaW1hdGlvbkVuZEV2ZW50KCk7XG5cbiAgICAgICAgICBpZihtZXRob2RJbnZva2VkKSB7XG4gICAgICAgICAgICBtZXRob2RJbnZva2VkID0gbW9kdWxlLmludm9rZShxdWVyeSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWV0aG9kIG5vdCBpbnZva2VkLCBsZXRzIHJ1biBhbiBhbmltYXRpb25cbiAgICAgICAgICBpZihtZXRob2RJbnZva2VkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0NvbnZlcnRlZCBhcmd1bWVudHMgaW50byBzZXR0aW5ncyBvYmplY3QnLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5pbnRlcnZhbCkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVsYXkoc2V0dGluZ3MuYW5pbWF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlICB7XG4gICAgICAgICAgICAgIG1vZHVsZS5hbmltYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGUuaW5zdGFudGlhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5zdGFudGlhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTdG9yaW5nIGluc3RhbmNlIG9mIG1vZHVsZScsIG1vZHVsZSk7XG4gICAgICAgICAgaW5zdGFuY2UgPSBtb2R1bGU7XG4gICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgLmRhdGEobW9kdWxlTmFtZXNwYWNlLCBpbnN0YW5jZSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0Rlc3Ryb3lpbmcgcHJldmlvdXMgbW9kdWxlIGZvcicsIGVsZW1lbnQpO1xuICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgIC5yZW1vdmVEYXRhKG1vZHVsZU5hbWVzcGFjZSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1JlZnJlc2hpbmcgZGlzcGxheSB0eXBlIG9uIG5leHQgYW5pbWF0aW9uJyk7XG4gICAgICAgICAgZGVsZXRlIG1vZHVsZS5kaXNwbGF5VHlwZTtcbiAgICAgICAgfSxcblxuICAgICAgICBmb3JjZVJlcGFpbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdGb3JjaW5nIGVsZW1lbnQgcmVwYWludCcpO1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgJHBhcmVudEVsZW1lbnQgPSAkbW9kdWxlLnBhcmVudCgpLFxuICAgICAgICAgICAgJG5leHRFbGVtZW50ID0gJG1vZHVsZS5uZXh0KClcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYoJG5leHRFbGVtZW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJG1vZHVsZS5kZXRhY2goKS5hcHBlbmRUbygkcGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJG1vZHVsZS5kZXRhY2goKS5pbnNlcnRCZWZvcmUoJG5leHRFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVwYWludDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1JlcGFpbnRpbmcgZWxlbWVudCcpO1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgZmFrZUFzc2lnbm1lbnQgPSBlbGVtZW50Lm9mZnNldFdpZHRoXG4gICAgICAgICAgO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRlbGF5OiBmdW5jdGlvbihpbnRlcnZhbCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gbW9kdWxlLmdldC5hbmltYXRpb25EaXJlY3Rpb24oKSxcbiAgICAgICAgICAgIHNob3VsZFJldmVyc2UsXG4gICAgICAgICAgICBkZWxheVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZighZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBtb2R1bGUuY2FuLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICA/IG1vZHVsZS5nZXQuZGlyZWN0aW9uKClcbiAgICAgICAgICAgICAgOiAnc3RhdGljJ1xuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbnRlcnZhbCA9IChpbnRlcnZhbCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgPyBpbnRlcnZhbFxuICAgICAgICAgICAgOiBzZXR0aW5ncy5pbnRlcnZhbFxuICAgICAgICAgIDtcbiAgICAgICAgICBzaG91bGRSZXZlcnNlID0gKHNldHRpbmdzLnJldmVyc2UgPT0gJ2F1dG8nICYmIGRpcmVjdGlvbiA9PSBjbGFzc05hbWUub3V0d2FyZCk7XG4gICAgICAgICAgZGVsYXkgPSAoc2hvdWxkUmV2ZXJzZSB8fCBzZXR0aW5ncy5yZXZlcnNlID09IHRydWUpXG4gICAgICAgICAgICA/ICgkYWxsTW9kdWxlcy5sZW5ndGggLSBpbmRleCkgKiBzZXR0aW5ncy5pbnRlcnZhbFxuICAgICAgICAgICAgOiBpbmRleCAqIHNldHRpbmdzLmludGVydmFsXG4gICAgICAgICAgO1xuICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnRGVsYXlpbmcgYW5pbWF0aW9uIGJ5JywgZGVsYXkpO1xuICAgICAgICAgIHNldFRpbWVvdXQobW9kdWxlLmFuaW1hdGUsIGRlbGF5KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhbmltYXRlOiBmdW5jdGlvbihvdmVycmlkZVNldHRpbmdzKSB7XG4gICAgICAgICAgc2V0dGluZ3MgPSBvdmVycmlkZVNldHRpbmdzIHx8IHNldHRpbmdzO1xuICAgICAgICAgIGlmKCFtb2R1bGUuaXMuc3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5zdXBwb3J0KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdQcmVwYXJpbmcgYW5pbWF0aW9uJywgc2V0dGluZ3MuYW5pbWF0aW9uKTtcbiAgICAgICAgICBpZihtb2R1bGUuaXMuYW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnF1ZXVlKSB7XG4gICAgICAgICAgICAgIGlmKCFzZXR0aW5ncy5hbGxvd1JlcGVhdHMgJiYgbW9kdWxlLmhhcy5kaXJlY3Rpb24oKSAmJiBtb2R1bGUuaXMub2NjdXJyaW5nKCkgJiYgbW9kdWxlLnF1ZXVpbmcgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0FuaW1hdGlvbiBpcyBjdXJyZW50bHkgb2NjdXJyaW5nLCBwcmV2ZW50aW5nIHF1ZXVlaW5nIHNhbWUgYW5pbWF0aW9uJywgc2V0dGluZ3MuYW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUucXVldWUoc2V0dGluZ3MuYW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCFzZXR0aW5ncy5hbGxvd1JlcGVhdHMgJiYgbW9kdWxlLmlzLm9jY3VycmluZygpKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQW5pbWF0aW9uIGlzIGFscmVhZHkgb2NjdXJyaW5nLCB3aWxsIG5vdCBleGVjdXRlIHJlcGVhdGVkIGFuaW1hdGlvbicsIHNldHRpbmdzLmFuaW1hdGlvbik7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ05ldyBhbmltYXRpb24gc3RhcnRlZCwgY29tcGxldGluZyBwcmV2aW91cyBlYXJseScsIHNldHRpbmdzLmFuaW1hdGlvbik7XG4gICAgICAgICAgICAgIGluc3RhbmNlLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCBtb2R1bGUuY2FuLmFuaW1hdGUoKSApIHtcbiAgICAgICAgICAgIG1vZHVsZS5zZXQuYW5pbWF0aW5nKHNldHRpbmdzLmFuaW1hdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm5vQW5pbWF0aW9uLCBzZXR0aW5ncy5hbmltYXRpb24sIGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdSZXNldHRpbmcgYW5pbWF0aW9uIHRvIGJlZ2lubmluZyBjb25kaXRpb25zJyk7XG4gICAgICAgICAgbW9kdWxlLnJlbW92ZS5hbmltYXRpb25DYWxsYmFja3MoKTtcbiAgICAgICAgICBtb2R1bGUucmVzdG9yZS5jb25kaXRpb25zKCk7XG4gICAgICAgICAgbW9kdWxlLnJlbW92ZS5hbmltYXRpbmcoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBxdWV1ZTogZnVuY3Rpb24oYW5pbWF0aW9uKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdRdWV1ZWluZyBhbmltYXRpb24gb2YnLCBhbmltYXRpb24pO1xuICAgICAgICAgIG1vZHVsZS5xdWV1aW5nID0gdHJ1ZTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAub25lKGFuaW1hdGlvbkVuZCArICcucXVldWUnICsgZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBtb2R1bGUucXVldWluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBtb2R1bGUucmVwYWludCgpO1xuICAgICAgICAgICAgICBtb2R1bGUuYW5pbWF0ZS5hcHBseSh0aGlzLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDtcbiAgICAgICAgfSxcblxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdBbmltYXRpb24gY29tcGxldGUnLCBzZXR0aW5ncy5hbmltYXRpb24pO1xuICAgICAgICAgIG1vZHVsZS5yZW1vdmUuY29tcGxldGVDYWxsYmFjaygpO1xuICAgICAgICAgIG1vZHVsZS5yZW1vdmUuZmFpbFNhZmUoKTtcbiAgICAgICAgICBpZighbW9kdWxlLmlzLmxvb3BpbmcoKSkge1xuICAgICAgICAgICAgaWYoIG1vZHVsZS5pcy5vdXR3YXJkKCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdBbmltYXRpb24gaXMgb3V0d2FyZCwgaGlkaW5nIGVsZW1lbnQnKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlc3RvcmUuY29uZGl0aW9ucygpO1xuICAgICAgICAgICAgICBtb2R1bGUuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiggbW9kdWxlLmlzLmlud2FyZCgpICkge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQW5pbWF0aW9uIGlzIG91dHdhcmQsIHNob3dpbmcgZWxlbWVudCcpO1xuICAgICAgICAgICAgICBtb2R1bGUucmVzdG9yZS5jb25kaXRpb25zKCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1N0YXRpYyBhbmltYXRpb24gY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgIG1vZHVsZS5yZXN0b3JlLmNvbmRpdGlvbnMoKTtcbiAgICAgICAgICAgICAgc2V0dGluZ3Mub25Db21wbGV0ZS5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBmb3JjZToge1xuICAgICAgICAgIHZpc2libGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHN0eWxlICAgICAgICAgID0gJG1vZHVsZS5hdHRyKCdzdHlsZScpLFxuICAgICAgICAgICAgICB1c2VyU3R5bGUgICAgICA9IG1vZHVsZS5nZXQudXNlclN0eWxlKCksXG4gICAgICAgICAgICAgIGRpc3BsYXlUeXBlICAgID0gbW9kdWxlLmdldC5kaXNwbGF5VHlwZSgpLFxuICAgICAgICAgICAgICBvdmVycmlkZVN0eWxlICA9IHVzZXJTdHlsZSArICdkaXNwbGF5OiAnICsgZGlzcGxheVR5cGUgKyAnICFpbXBvcnRhbnQ7JyxcbiAgICAgICAgICAgICAgY3VycmVudERpc3BsYXkgPSAkbW9kdWxlLmNzcygnZGlzcGxheScpLFxuICAgICAgICAgICAgICBlbXB0eVN0eWxlICAgICA9IChzdHlsZSA9PT0gdW5kZWZpbmVkIHx8IHN0eWxlID09PSAnJylcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKGN1cnJlbnREaXNwbGF5ICE9PSBkaXNwbGF5VHlwZSkge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnT3ZlcnJpZGluZyBkZWZhdWx0IGRpc3BsYXkgdG8gc2hvdyBlbGVtZW50JywgZGlzcGxheVR5cGUpO1xuICAgICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3N0eWxlJywgb3ZlcnJpZGVTdHlsZSlcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihlbXB0eVN0eWxlKSB7XG4gICAgICAgICAgICAgICRtb2R1bGUucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGhpZGRlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgc3R5bGUgICAgICAgICAgPSAkbW9kdWxlLmF0dHIoJ3N0eWxlJyksXG4gICAgICAgICAgICAgIGN1cnJlbnREaXNwbGF5ID0gJG1vZHVsZS5jc3MoJ2Rpc3BsYXknKSxcbiAgICAgICAgICAgICAgZW1wdHlTdHlsZSAgICAgPSAoc3R5bGUgPT09IHVuZGVmaW5lZCB8fCBzdHlsZSA9PT0gJycpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihjdXJyZW50RGlzcGxheSAhPT0gJ25vbmUnICYmICFtb2R1bGUuaXMuaGlkZGVuKCkpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ092ZXJyaWRpbmcgZGVmYXVsdCBkaXNwbGF5IHRvIGhpZGUgZWxlbWVudCcpO1xuICAgICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgICAgLmNzcygnZGlzcGxheScsICdub25lJylcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihlbXB0eVN0eWxlKSB7XG4gICAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignc3R5bGUnKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGhhczoge1xuICAgICAgICAgIGRpcmVjdGlvbjogZnVuY3Rpb24oYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgaGFzRGlyZWN0aW9uID0gZmFsc2VcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGFuaW1hdGlvbiA9IGFuaW1hdGlvbiB8fCBzZXR0aW5ncy5hbmltYXRpb247XG4gICAgICAgICAgICBpZih0eXBlb2YgYW5pbWF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBhbmltYXRpb24gPSBhbmltYXRpb24uc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgJC5lYWNoKGFuaW1hdGlvbiwgZnVuY3Rpb24oaW5kZXgsIHdvcmQpe1xuICAgICAgICAgICAgICAgIGlmKHdvcmQgPT09IGNsYXNzTmFtZS5pbndhcmQgfHwgd29yZCA9PT0gY2xhc3NOYW1lLm91dHdhcmQpIHtcbiAgICAgICAgICAgICAgICAgIGhhc0RpcmVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoYXNEaXJlY3Rpb247XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbmxpbmVEaXNwbGF5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBzdHlsZSA9ICRtb2R1bGUuYXR0cignc3R5bGUnKSB8fCAnJ1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgcmV0dXJuICQuaXNBcnJheShzdHlsZS5tYXRjaCgvZGlzcGxheS4qPzsvLCAnJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXQ6IHtcbiAgICAgICAgICBhbmltYXRpbmc6IGZ1bmN0aW9uKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGFuaW1hdGlvbkNsYXNzLFxuICAgICAgICAgICAgICBkaXJlY3Rpb25cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBwcmV2aW91cyBjYWxsYmFja3NcbiAgICAgICAgICAgIG1vZHVsZS5yZW1vdmUuY29tcGxldGVDYWxsYmFjaygpO1xuXG4gICAgICAgICAgICAvLyBkZXRlcm1pbmUgZXhhY3QgYW5pbWF0aW9uXG4gICAgICAgICAgICBhbmltYXRpb24gICAgICA9IGFuaW1hdGlvbiB8fCBzZXR0aW5ncy5hbmltYXRpb247XG4gICAgICAgICAgICBhbmltYXRpb25DbGFzcyA9IG1vZHVsZS5nZXQuYW5pbWF0aW9uQ2xhc3MoYW5pbWF0aW9uKTtcblxuICAgICAgICAgICAgLy8gc2F2ZSBhbmltYXRpb24gY2xhc3MgaW4gY2FjaGUgdG8gcmVzdG9yZSBjbGFzcyBuYW1lc1xuICAgICAgICAgICAgbW9kdWxlLnNhdmUuYW5pbWF0aW9uKGFuaW1hdGlvbkNsYXNzKTtcblxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgZGlzcGxheSBpZiBuZWNlc3Nhcnkgc28gYW5pbWF0aW9uIGFwcGVhcnMgdmlzaWJseVxuICAgICAgICAgICAgbW9kdWxlLmZvcmNlLnZpc2libGUoKTtcblxuICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5oaWRkZW4oKTtcbiAgICAgICAgICAgIG1vZHVsZS5yZW1vdmUuZGlyZWN0aW9uKCk7XG5cbiAgICAgICAgICAgIG1vZHVsZS5zdGFydC5hbmltYXRpb24oYW5pbWF0aW9uQ2xhc3MpO1xuXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkdXJhdGlvbjogZnVuY3Rpb24oYW5pbWF0aW9uTmFtZSwgZHVyYXRpb24pIHtcbiAgICAgICAgICAgIGR1cmF0aW9uID0gZHVyYXRpb24gfHwgc2V0dGluZ3MuZHVyYXRpb247XG4gICAgICAgICAgICBkdXJhdGlvbiA9ICh0eXBlb2YgZHVyYXRpb24gPT0gJ251bWJlcicpXG4gICAgICAgICAgICAgID8gZHVyYXRpb24gKyAnbXMnXG4gICAgICAgICAgICAgIDogZHVyYXRpb25cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKGR1cmF0aW9uIHx8IGR1cmF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZXR0aW5nIGFuaW1hdGlvbiBkdXJhdGlvbicsIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICAgJ2FuaW1hdGlvbi1kdXJhdGlvbic6ICBkdXJhdGlvblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpcmVjdGlvbjogZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgbW9kdWxlLmdldC5kaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmKGRpcmVjdGlvbiA9PSBjbGFzc05hbWUuaW53YXJkKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5zZXQuaW53YXJkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnNldC5vdXR3YXJkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsb29waW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVHJhbnNpdGlvbiBzZXQgdG8gbG9vcCcpO1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLmxvb3BpbmcpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBoaWRkZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLnRyYW5zaXRpb24pXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuaGlkZGVuKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW53YXJkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2V0dGluZyBkaXJlY3Rpb24gdG8gaW53YXJkJyk7XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUub3V0d2FyZClcbiAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5pbndhcmQpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvdXR3YXJkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2V0dGluZyBkaXJlY3Rpb24gdG8gb3V0d2FyZCcpO1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmlud2FyZClcbiAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5vdXR3YXJkKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdmlzaWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUudHJhbnNpdGlvbilcbiAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS52aXNpYmxlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzdGFydDoge1xuICAgICAgICAgIGFuaW1hdGlvbjogZnVuY3Rpb24oYW5pbWF0aW9uQ2xhc3MpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbkNsYXNzID0gYW5pbWF0aW9uQ2xhc3MgfHwgbW9kdWxlLmdldC5hbmltYXRpb25DbGFzcygpO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTdGFydGluZyB0d2VlbicsIGFuaW1hdGlvbkNsYXNzKTtcbiAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgLmFkZENsYXNzKGFuaW1hdGlvbkNsYXNzKVxuICAgICAgICAgICAgICAub25lKGFuaW1hdGlvbkVuZCArICcuY29tcGxldGUnICsgZXZlbnROYW1lc3BhY2UsIG1vZHVsZS5jb21wbGV0ZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnVzZUZhaWxTYWZlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5hZGQuZmFpbFNhZmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZS5zZXQuZHVyYXRpb24oc2V0dGluZ3MuZHVyYXRpb24pO1xuICAgICAgICAgICAgc2V0dGluZ3Mub25TdGFydC5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzYXZlOiB7XG4gICAgICAgICAgYW5pbWF0aW9uOiBmdW5jdGlvbihhbmltYXRpb24pIHtcbiAgICAgICAgICAgIGlmKCFtb2R1bGUuY2FjaGUpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmNhY2hlID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGUuY2FjaGUuYW5pbWF0aW9uID0gYW5pbWF0aW9uO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzcGxheVR5cGU6IGZ1bmN0aW9uKGRpc3BsYXlUeXBlKSB7XG4gICAgICAgICAgICBpZihkaXNwbGF5VHlwZSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICRtb2R1bGUuZGF0YShtZXRhZGF0YS5kaXNwbGF5VHlwZSwgZGlzcGxheVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNpdGlvbkV4aXN0czogZnVuY3Rpb24oYW5pbWF0aW9uLCBleGlzdHMpIHtcbiAgICAgICAgICAgICQuZm4udHJhbnNpdGlvbi5leGlzdHNbYW5pbWF0aW9uXSA9IGV4aXN0cztcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTYXZpbmcgZXhpc3RlbmNlIG9mIHRyYW5zaXRpb24nLCBhbmltYXRpb24sIGV4aXN0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlc3RvcmU6IHtcbiAgICAgICAgICBjb25kaXRpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBhbmltYXRpb24gPSBtb2R1bGUuZ2V0LmN1cnJlbnRBbmltYXRpb24oKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoYW5pbWF0aW9uKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZW1vdmluZyBhbmltYXRpb24gY2xhc3MnLCBtb2R1bGUuY2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5kdXJhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhZGQ6IHtcbiAgICAgICAgICBmYWlsU2FmZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgZHVyYXRpb24gPSBtb2R1bGUuZ2V0LmR1cmF0aW9uKClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS50aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICRtb2R1bGUudHJpZ2dlckhhbmRsZXIoYW5pbWF0aW9uRW5kKTtcbiAgICAgICAgICAgIH0sIGR1cmF0aW9uICsgc2V0dGluZ3MuZmFpbFNhZmVEZWxheSk7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQWRkaW5nIGZhaWwgc2FmZSB0aW1lcicsIG1vZHVsZS50aW1lcik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZToge1xuICAgICAgICAgIGFuaW1hdGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2tzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5yZW1vdmUucXVldWVDYWxsYmFjaygpO1xuICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5jb21wbGV0ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBxdWV1ZUNhbGxiYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2R1bGUub2ZmKCcucXVldWUnICsgZXZlbnROYW1lc3BhY2UpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29tcGxldGVDYWxsYmFjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbW9kdWxlLm9mZignLmNvbXBsZXRlJyArIGV2ZW50TmFtZXNwYWNlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpc3BsYXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZS5jc3MoJ2Rpc3BsYXknLCAnJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXJlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmlud2FyZClcbiAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5vdXR3YXJkKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZHVyYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAuY3NzKCdhbmltYXRpb24tZHVyYXRpb24nLCAnJylcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZhaWxTYWZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZW1vdmluZyBmYWlsIHNhZmUgdGltZXInLCBtb2R1bGUudGltZXIpO1xuICAgICAgICAgICAgaWYobW9kdWxlLnRpbWVyKSB7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dChtb2R1bGUudGltZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaGlkZGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2R1bGUucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmhpZGRlbik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2R1bGUucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLnZpc2libGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbG9vcGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1RyYW5zaXRpb25zIGFyZSBubyBsb25nZXIgbG9vcGluZycpO1xuICAgICAgICAgICAgaWYoIG1vZHVsZS5pcy5sb29waW5nKCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5yZXNldCgpO1xuICAgICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5sb29waW5nKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2l0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS52aXNpYmxlKVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmhpZGRlbilcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldDoge1xuICAgICAgICAgIHNldHRpbmdzOiBmdW5jdGlvbihhbmltYXRpb24sIGR1cmF0aW9uLCBvbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAvLyBzaW5nbGUgc2V0dGluZ3Mgb2JqZWN0XG4gICAgICAgICAgICBpZih0eXBlb2YgYW5pbWF0aW9uID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCB7fSwgJC5mbi50cmFuc2l0aW9uLnNldHRpbmdzLCBhbmltYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWxsIGFyZ3VtZW50cyBwcm92aWRlZFxuICAgICAgICAgICAgZWxzZSBpZih0eXBlb2Ygb25Db21wbGV0ZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgJC5mbi50cmFuc2l0aW9uLnNldHRpbmdzLCB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uICA6IGFuaW1hdGlvbixcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlIDogb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiAgIDogZHVyYXRpb25cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBvbmx5IGR1cmF0aW9uIHByb3ZpZGVkXG4gICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiBkdXJhdGlvbiA9PSAnc3RyaW5nJyB8fCB0eXBlb2YgZHVyYXRpb24gPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHt9LCAkLmZuLnRyYW5zaXRpb24uc2V0dGluZ3MsIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24gOiBhbmltYXRpb24sXG4gICAgICAgICAgICAgICAgZHVyYXRpb24gIDogZHVyYXRpb25cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkdXJhdGlvbiBpcyBhY3R1YWxseSBzZXR0aW5ncyBvYmplY3RcbiAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIGR1cmF0aW9uID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgJC5mbi50cmFuc2l0aW9uLnNldHRpbmdzLCBkdXJhdGlvbiwge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA6IGFuaW1hdGlvblxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGR1cmF0aW9uIGlzIGFjdHVhbGx5IGNhbGxiYWNrXG4gICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiBkdXJhdGlvbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgJC5mbi50cmFuc2l0aW9uLnNldHRpbmdzLCB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uICA6IGFuaW1hdGlvbixcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlIDogZHVyYXRpb25cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBvbmx5IGFuaW1hdGlvbiBwcm92aWRlZFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgJC5mbi50cmFuc2l0aW9uLnNldHRpbmdzLCB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uIDogYW5pbWF0aW9uXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYW5pbWF0aW9uQ2xhc3M6IGZ1bmN0aW9uKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGFuaW1hdGlvbkNsYXNzID0gYW5pbWF0aW9uIHx8IHNldHRpbmdzLmFuaW1hdGlvbixcbiAgICAgICAgICAgICAgZGlyZWN0aW9uQ2xhc3MgPSAobW9kdWxlLmNhbi50cmFuc2l0aW9uKCkgJiYgIW1vZHVsZS5oYXMuZGlyZWN0aW9uKCkpXG4gICAgICAgICAgICAgICAgPyBtb2R1bGUuZ2V0LmRpcmVjdGlvbigpICsgJyAnXG4gICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgcmV0dXJuIGNsYXNzTmFtZS5hbmltYXRpbmcgKyAnICdcbiAgICAgICAgICAgICAgKyBjbGFzc05hbWUudHJhbnNpdGlvbiArICcgJ1xuICAgICAgICAgICAgICArIGRpcmVjdGlvbkNsYXNzXG4gICAgICAgICAgICAgICsgYW5pbWF0aW9uQ2xhc3NcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGN1cnJlbnRBbmltYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChtb2R1bGUuY2FjaGUgJiYgbW9kdWxlLmNhY2hlLmFuaW1hdGlvbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICA/IG1vZHVsZS5jYWNoZS5hbmltYXRpb25cbiAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY3VycmVudERpcmVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlLmlzLmlud2FyZCgpXG4gICAgICAgICAgICAgID8gY2xhc3NOYW1lLmlud2FyZFxuICAgICAgICAgICAgICA6IGNsYXNzTmFtZS5vdXR3YXJkXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXJlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5pcy5oaWRkZW4oKSB8fCAhbW9kdWxlLmlzLnZpc2libGUoKVxuICAgICAgICAgICAgICA/IGNsYXNzTmFtZS5pbndhcmRcbiAgICAgICAgICAgICAgOiBjbGFzc05hbWUub3V0d2FyZFxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYW5pbWF0aW9uRGlyZWN0aW9uOiBmdW5jdGlvbihhbmltYXRpb24pIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBkaXJlY3Rpb25cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGFuaW1hdGlvbiA9IGFuaW1hdGlvbiB8fCBzZXR0aW5ncy5hbmltYXRpb247XG4gICAgICAgICAgICBpZih0eXBlb2YgYW5pbWF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBhbmltYXRpb24gPSBhbmltYXRpb24uc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgLy8gc2VhcmNoIGFuaW1hdGlvbiBuYW1lIGZvciBvdXQvaW4gY2xhc3NcbiAgICAgICAgICAgICAgJC5lYWNoKGFuaW1hdGlvbiwgZnVuY3Rpb24oaW5kZXgsIHdvcmQpe1xuICAgICAgICAgICAgICAgIGlmKHdvcmQgPT09IGNsYXNzTmFtZS5pbndhcmQpIHtcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGNsYXNzTmFtZS5pbndhcmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYod29yZCA9PT0gY2xhc3NOYW1lLm91dHdhcmQpIHtcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGNsYXNzTmFtZS5vdXR3YXJkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXR1cm4gZm91bmQgZGlyZWN0aW9uXG4gICAgICAgICAgICBpZihkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGR1cmF0aW9uOiBmdW5jdGlvbihkdXJhdGlvbikge1xuICAgICAgICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbiB8fCBzZXR0aW5ncy5kdXJhdGlvbjtcbiAgICAgICAgICAgIGlmKGR1cmF0aW9uID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9ICRtb2R1bGUuY3NzKCdhbmltYXRpb24tZHVyYXRpb24nKSB8fCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YgZHVyYXRpb24gPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICA/IChkdXJhdGlvbi5pbmRleE9mKCdtcycpID4gLTEpXG4gICAgICAgICAgICAgICAgPyBwYXJzZUZsb2F0KGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgIDogcGFyc2VGbG9hdChkdXJhdGlvbikgKiAxMDAwXG4gICAgICAgICAgICAgIDogZHVyYXRpb25cbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpc3BsYXlUeXBlOiBmdW5jdGlvbihzaG91bGREZXRlcm1pbmUpIHtcbiAgICAgICAgICAgIHNob3VsZERldGVybWluZSA9IChzaG91bGREZXRlcm1pbmUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgPyBzaG91bGREZXRlcm1pbmVcbiAgICAgICAgICAgICAgOiB0cnVlXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5kaXNwbGF5VHlwZSkge1xuICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MuZGlzcGxheVR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzaG91bGREZXRlcm1pbmUgJiYgJG1vZHVsZS5kYXRhKG1ldGFkYXRhLmRpc3BsYXlUeXBlKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIC8vIGNyZWF0ZSBmYWtlIGVsZW1lbnQgdG8gZGV0ZXJtaW5lIGRpc3BsYXkgc3RhdGVcbiAgICAgICAgICAgICAgbW9kdWxlLmNhbi50cmFuc2l0aW9uKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRtb2R1bGUuZGF0YShtZXRhZGF0YS5kaXNwbGF5VHlwZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VyU3R5bGU6IGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICBzdHlsZSA9IHN0eWxlIHx8ICRtb2R1bGUuYXR0cignc3R5bGUnKSB8fCAnJztcbiAgICAgICAgICAgIHJldHVybiBzdHlsZS5yZXBsYWNlKC9kaXNwbGF5Lio/Oy8sICcnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRyYW5zaXRpb25FeGlzdHM6IGZ1bmN0aW9uKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICQuZm4udHJhbnNpdGlvbi5leGlzdHNbYW5pbWF0aW9uXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuaW1hdGlvblN0YXJ0RXZlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGVsZW1lbnQgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICAgIGFuaW1hdGlvbnMgID0ge1xuICAgICAgICAgICAgICAgICdhbmltYXRpb24nICAgICAgIDonYW5pbWF0aW9uc3RhcnQnLFxuICAgICAgICAgICAgICAgICdPQW5pbWF0aW9uJyAgICAgIDonb0FuaW1hdGlvblN0YXJ0JyxcbiAgICAgICAgICAgICAgICAnTW96QW5pbWF0aW9uJyAgICA6J21vekFuaW1hdGlvblN0YXJ0JyxcbiAgICAgICAgICAgICAgICAnV2Via2l0QW5pbWF0aW9uJyA6J3dlYmtpdEFuaW1hdGlvblN0YXJ0J1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBhbmltYXRpb25cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGZvcihhbmltYXRpb24gaW4gYW5pbWF0aW9ucyl7XG4gICAgICAgICAgICAgIGlmKCBlbGVtZW50LnN0eWxlW2FuaW1hdGlvbl0gIT09IHVuZGVmaW5lZCApe1xuICAgICAgICAgICAgICAgIHJldHVybiBhbmltYXRpb25zW2FuaW1hdGlvbl07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuaW1hdGlvbkVuZEV2ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBlbGVtZW50ICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgICBhbmltYXRpb25zICA9IHtcbiAgICAgICAgICAgICAgICAnYW5pbWF0aW9uJyAgICAgICA6J2FuaW1hdGlvbmVuZCcsXG4gICAgICAgICAgICAgICAgJ09BbmltYXRpb24nICAgICAgOidvQW5pbWF0aW9uRW5kJyxcbiAgICAgICAgICAgICAgICAnTW96QW5pbWF0aW9uJyAgICA6J21vekFuaW1hdGlvbkVuZCcsXG4gICAgICAgICAgICAgICAgJ1dlYmtpdEFuaW1hdGlvbicgOid3ZWJraXRBbmltYXRpb25FbmQnXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGFuaW1hdGlvblxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgZm9yKGFuaW1hdGlvbiBpbiBhbmltYXRpb25zKXtcbiAgICAgICAgICAgICAgaWYoIGVsZW1lbnQuc3R5bGVbYW5pbWF0aW9uXSAhPT0gdW5kZWZpbmVkICl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGlvbnNbYW5pbWF0aW9uXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIGNhbjoge1xuICAgICAgICAgIHRyYW5zaXRpb246IGZ1bmN0aW9uKGZvcmNlZCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGFuaW1hdGlvbiAgICAgICAgID0gc2V0dGluZ3MuYW5pbWF0aW9uLFxuICAgICAgICAgICAgICB0cmFuc2l0aW9uRXhpc3RzICA9IG1vZHVsZS5nZXQudHJhbnNpdGlvbkV4aXN0cyhhbmltYXRpb24pLFxuICAgICAgICAgICAgICBkaXNwbGF5VHlwZSAgICAgICA9IG1vZHVsZS5nZXQuZGlzcGxheVR5cGUoZmFsc2UpLFxuICAgICAgICAgICAgICBlbGVtZW50Q2xhc3MsXG4gICAgICAgICAgICAgIHRhZ05hbWUsXG4gICAgICAgICAgICAgICRjbG9uZSxcbiAgICAgICAgICAgICAgY3VycmVudEFuaW1hdGlvbixcbiAgICAgICAgICAgICAgaW5BbmltYXRpb24sXG4gICAgICAgICAgICAgIGRpcmVjdGlvbkV4aXN0c1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoIHRyYW5zaXRpb25FeGlzdHMgPT09IHVuZGVmaW5lZCB8fCBmb3JjZWQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0RldGVybWluaW5nIHdoZXRoZXIgYW5pbWF0aW9uIGV4aXN0cycpO1xuICAgICAgICAgICAgICBlbGVtZW50Q2xhc3MgPSAkbW9kdWxlLmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgICAgICAgIHRhZ05hbWUgICAgICA9ICRtb2R1bGUucHJvcCgndGFnTmFtZScpO1xuXG4gICAgICAgICAgICAgICRjbG9uZSA9ICQoJzwnICsgdGFnTmFtZSArICcgLz4nKS5hZGRDbGFzcyggZWxlbWVudENsYXNzICkuaW5zZXJ0QWZ0ZXIoJG1vZHVsZSk7XG4gICAgICAgICAgICAgIGN1cnJlbnRBbmltYXRpb24gPSAkY2xvbmVcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoYW5pbWF0aW9uKVxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuaW53YXJkKVxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUub3V0d2FyZClcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLmFuaW1hdGluZylcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLnRyYW5zaXRpb24pXG4gICAgICAgICAgICAgICAgLmNzcygnYW5pbWF0aW9uTmFtZScpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgaW5BbmltYXRpb24gPSAkY2xvbmVcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLmlud2FyZClcbiAgICAgICAgICAgICAgICAuY3NzKCdhbmltYXRpb25OYW1lJylcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICBpZighZGlzcGxheVR5cGUpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VHlwZSA9ICRjbG9uZVxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZWxlbWVudENsYXNzKVxuICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ3N0eWxlJylcbiAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuaGlkZGVuKVxuICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS52aXNpYmxlKVxuICAgICAgICAgICAgICAgICAgLnNob3coKVxuICAgICAgICAgICAgICAgICAgLmNzcygnZGlzcGxheScpXG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdEZXRlcm1pbmluZyBmaW5hbCBkaXNwbGF5IHN0YXRlJywgZGlzcGxheVR5cGUpO1xuICAgICAgICAgICAgICAgIG1vZHVsZS5zYXZlLmRpc3BsYXlUeXBlKGRpc3BsYXlUeXBlKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICRjbG9uZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgaWYoY3VycmVudEFuaW1hdGlvbiAhPSBpbkFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnRGlyZWN0aW9uIGV4aXN0cyBmb3IgYW5pbWF0aW9uJywgYW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25FeGlzdHMgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoY3VycmVudEFuaW1hdGlvbiA9PSAnbm9uZScgfHwgIWN1cnJlbnRBbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ05vIGFuaW1hdGlvbiBkZWZpbmVkIGluIGNzcycsIGFuaW1hdGlvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU3RhdGljIGFuaW1hdGlvbiBmb3VuZCcsIGFuaW1hdGlvbiwgZGlzcGxheVR5cGUpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbkV4aXN0cyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1vZHVsZS5zYXZlLnRyYW5zaXRpb25FeGlzdHMoYW5pbWF0aW9uLCBkaXJlY3Rpb25FeGlzdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICh0cmFuc2l0aW9uRXhpc3RzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgID8gdHJhbnNpdGlvbkV4aXN0c1xuICAgICAgICAgICAgICA6IGRpcmVjdGlvbkV4aXN0c1xuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYW5pbWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBjYW4gdHJhbnNpdGlvbiBkb2VzIG5vdCByZXR1cm4gYSB2YWx1ZSBpZiBhbmltYXRpb24gZG9lcyBub3QgZXhpc3RcbiAgICAgICAgICAgIHJldHVybiAobW9kdWxlLmNhbi50cmFuc2l0aW9uKCkgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGlzOiB7XG4gICAgICAgICAgYW5pbWF0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS5hbmltYXRpbmcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW53YXJkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS5pbndhcmQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb3V0d2FyZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJG1vZHVsZS5oYXNDbGFzcyhjbGFzc05hbWUub3V0d2FyZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsb29waW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmhhc0NsYXNzKGNsYXNzTmFtZS5sb29waW5nKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9jY3VycmluZzogZnVuY3Rpb24oYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBhbmltYXRpb24gPSBhbmltYXRpb24gfHwgc2V0dGluZ3MuYW5pbWF0aW9uO1xuICAgICAgICAgICAgYW5pbWF0aW9uID0gJy4nICsgYW5pbWF0aW9uLnJlcGxhY2UoJyAnLCAnLicpO1xuICAgICAgICAgICAgcmV0dXJuICggJG1vZHVsZS5maWx0ZXIoYW5pbWF0aW9uKS5sZW5ndGggPiAwICk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmlzKCc6dmlzaWJsZScpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaGlkZGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkbW9kdWxlLmNzcygndmlzaWJpbGl0eScpID09PSAnaGlkZGVuJztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1cHBvcnRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4oYW5pbWF0aW9uRW5kICE9PSBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdIaWRpbmcgZWxlbWVudCcpO1xuICAgICAgICAgIGlmKCBtb2R1bGUuaXMuYW5pbWF0aW5nKCkgKSB7XG4gICAgICAgICAgICBtb2R1bGUucmVzZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudC5ibHVyKCk7IC8vIElFIHdpbGwgdHJpZ2dlciBmb2N1cyBjaGFuZ2UgaWYgZWxlbWVudCBpcyBub3QgYmx1cnJlZCBiZWZvcmUgaGlkaW5nXG4gICAgICAgICAgbW9kdWxlLnJlbW92ZS5kaXNwbGF5KCk7XG4gICAgICAgICAgbW9kdWxlLnJlbW92ZS52aXNpYmxlKCk7XG4gICAgICAgICAgbW9kdWxlLnNldC5oaWRkZW4oKTtcbiAgICAgICAgICBtb2R1bGUuZm9yY2UuaGlkZGVuKCk7XG4gICAgICAgICAgc2V0dGluZ3Mub25IaWRlLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgc2V0dGluZ3Mub25Db21wbGV0ZS5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgIC8vIG1vZHVsZS5yZXBhaW50KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24oZGlzcGxheSkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTaG93aW5nIGVsZW1lbnQnLCBkaXNwbGF5KTtcbiAgICAgICAgICBtb2R1bGUucmVtb3ZlLmhpZGRlbigpO1xuICAgICAgICAgIG1vZHVsZS5zZXQudmlzaWJsZSgpO1xuICAgICAgICAgIG1vZHVsZS5mb3JjZS52aXNpYmxlKCk7XG4gICAgICAgICAgc2V0dGluZ3Mub25TaG93LmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgc2V0dGluZ3Mub25Db21wbGV0ZS5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgIC8vIG1vZHVsZS5yZXBhaW50KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiggbW9kdWxlLmlzLnZpc2libGUoKSApIHtcbiAgICAgICAgICAgIG1vZHVsZS5oaWRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbW9kdWxlLnNob3coKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdTdG9wcGluZyBjdXJyZW50IGFuaW1hdGlvbicpO1xuICAgICAgICAgICRtb2R1bGUudHJpZ2dlckhhbmRsZXIoYW5pbWF0aW9uRW5kKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzdG9wQWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ1N0b3BwaW5nIGFsbCBhbmltYXRpb24nKTtcbiAgICAgICAgICBtb2R1bGUucmVtb3ZlLnF1ZXVlQ2FsbGJhY2soKTtcbiAgICAgICAgICAkbW9kdWxlLnRyaWdnZXJIYW5kbGVyKGFuaW1hdGlvbkVuZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xlYXI6IHtcbiAgICAgICAgICBxdWV1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NsZWFyaW5nIGFuaW1hdGlvbiBxdWV1ZScpO1xuICAgICAgICAgICAgbW9kdWxlLnJlbW92ZS5xdWV1ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGVuYWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1N0YXJ0aW5nIGFuaW1hdGlvbicpO1xuICAgICAgICAgICRtb2R1bGUucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmRpc2FibGVkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ1N0b3BwaW5nIGFuaW1hdGlvbicpO1xuICAgICAgICAgICRtb2R1bGUuYWRkQ2xhc3MoY2xhc3NOYW1lLmRpc2FibGVkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR0aW5nOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQ2hhbmdpbmcgc2V0dGluZycsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICBpZiggJC5pc1BsYWluT2JqZWN0KG5hbWUpICkge1xuICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgc2V0dGluZ3MsIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmKCQuaXNQbGFpbk9iamVjdChzZXR0aW5nc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgc2V0dGluZ3NbbmFtZV0sIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBzZXR0aW5nc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nc1tuYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludGVybmFsOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QobmFtZSkgKSB7XG4gICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBtb2R1bGUsIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1vZHVsZVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVbbmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWJ1ZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIXNldHRpbmdzLnNpbGVudCAmJiBzZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLCBjb25zb2xlLCBzZXR0aW5ncy5uYW1lICsgJzonKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2ZXJib3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50ICYmIHNldHRpbmdzLnZlcmJvc2UgJiYgc2V0dGluZ3MuZGVidWcpIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnBlcmZvcm1hbmNlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLCBjb25zb2xlLCBzZXR0aW5ncy5uYW1lICsgJzonKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50KSB7XG4gICAgICAgICAgICBtb2R1bGUuZXJyb3IgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICAgIGxvZzogZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lLFxuICAgICAgICAgICAgICBleGVjdXRpb25UaW1lLFxuICAgICAgICAgICAgICBwcmV2aW91c1RpbWVcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnBlcmZvcm1hbmNlKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lICAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgcHJldmlvdXNUaW1lICA9IHRpbWUgfHwgY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGV4ZWN1dGlvblRpbWUgPSBjdXJyZW50VGltZSAtIHByZXZpb3VzVGltZTtcbiAgICAgICAgICAgICAgdGltZSAgICAgICAgICA9IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICBwZXJmb3JtYW5jZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAnTmFtZScgICAgICAgICAgIDogbWVzc2FnZVswXSxcbiAgICAgICAgICAgICAgICAnQXJndW1lbnRzJyAgICAgIDogW10uc2xpY2UuY2FsbChtZXNzYWdlLCAxKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAnRWxlbWVudCcgICAgICAgIDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICAnRXhlY3V0aW9uIFRpbWUnIDogZXhlY3V0aW9uVGltZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtb2R1bGUucGVyZm9ybWFuY2UudGltZXIpO1xuICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyID0gc2V0VGltZW91dChtb2R1bGUucGVyZm9ybWFuY2UuZGlzcGxheSwgNTAwKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpc3BsYXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHRpdGxlID0gc2V0dGluZ3MubmFtZSArICc6JyxcbiAgICAgICAgICAgICAgdG90YWxUaW1lID0gMFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgdGltZSA9IGZhbHNlO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lcik7XG4gICAgICAgICAgICAkLmVhY2gocGVyZm9ybWFuY2UsIGZ1bmN0aW9uKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICAgIHRvdGFsVGltZSArPSBkYXRhWydFeGVjdXRpb24gVGltZSddO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aXRsZSArPSAnICcgKyB0b3RhbFRpbWUgKyAnbXMnO1xuICAgICAgICAgICAgaWYobW9kdWxlU2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdGl0bGUgKz0gJyBcXCcnICsgbW9kdWxlU2VsZWN0b3IgKyAnXFwnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCRhbGxNb2R1bGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgdGl0bGUgKz0gJyAnICsgJygnICsgJGFsbE1vZHVsZXMubGVuZ3RoICsgJyknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIChjb25zb2xlLmdyb3VwICE9PSB1bmRlZmluZWQgfHwgY29uc29sZS50YWJsZSAhPT0gdW5kZWZpbmVkKSAmJiBwZXJmb3JtYW5jZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodGl0bGUpO1xuICAgICAgICAgICAgICBpZihjb25zb2xlLnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS50YWJsZShwZXJmb3JtYW5jZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKHBlcmZvcm1hbmNlLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVsnTmFtZSddICsgJzogJyArIGRhdGFbJ0V4ZWN1dGlvbiBUaW1lJ10rJ21zJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVyZm9ybWFuY2UgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vIG1vZGlmaWVkIGZvciB0cmFuc2l0aW9uIHRvIHJldHVybiBpbnZva2Ugc3VjY2Vzc1xuICAgICAgICBpbnZva2U6IGZ1bmN0aW9uKHF1ZXJ5LCBwYXNzZWRBcmd1bWVudHMsIGNvbnRleHQpIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIG9iamVjdCA9IGluc3RhbmNlLFxuICAgICAgICAgICAgbWF4RGVwdGgsXG4gICAgICAgICAgICBmb3VuZCxcbiAgICAgICAgICAgIHJlc3BvbnNlXG4gICAgICAgICAgO1xuICAgICAgICAgIHBhc3NlZEFyZ3VtZW50cyA9IHBhc3NlZEFyZ3VtZW50cyB8fCBxdWVyeUFyZ3VtZW50cztcbiAgICAgICAgICBjb250ZXh0ICAgICAgICAgPSBlbGVtZW50ICAgICAgICAgfHwgY29udGV4dDtcbiAgICAgICAgICBpZih0eXBlb2YgcXVlcnkgPT0gJ3N0cmluZycgJiYgb2JqZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5ICAgID0gcXVlcnkuc3BsaXQoL1tcXC4gXS8pO1xuICAgICAgICAgICAgbWF4RGVwdGggPSBxdWVyeS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgJC5lYWNoKHF1ZXJ5LCBmdW5jdGlvbihkZXB0aCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgdmFyIGNhbWVsQ2FzZVZhbHVlID0gKGRlcHRoICE9IG1heERlcHRoKVxuICAgICAgICAgICAgICAgID8gdmFsdWUgKyBxdWVyeVtkZXB0aCArIDFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcXVlcnlbZGVwdGggKyAxXS5zbGljZSgxKVxuICAgICAgICAgICAgICAgIDogcXVlcnlcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICBpZiggJC5pc1BsYWluT2JqZWN0KCBvYmplY3RbY2FtZWxDYXNlVmFsdWVdICkgJiYgKGRlcHRoICE9IG1heERlcHRoKSApIHtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSBvYmplY3RbY2FtZWxDYXNlVmFsdWVdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoIG9iamVjdFtjYW1lbENhc2VWYWx1ZV0gIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IG9iamVjdFtjYW1lbENhc2VWYWx1ZV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoICQuaXNQbGFpbk9iamVjdCggb2JqZWN0W3ZhbHVlXSApICYmIChkZXB0aCAhPSBtYXhEZXB0aCkgKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0W3ZhbHVlXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCBvYmplY3RbdmFsdWVdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSBvYmplY3RbdmFsdWVdO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoICQuaXNGdW5jdGlvbiggZm91bmQgKSApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQuYXBwbHkoY29udGV4dCwgcGFzc2VkQXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihmb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGZvdW5kO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmKCQuaXNBcnJheShyZXR1cm5lZFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZS5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXR1cm5lZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSBbcmV0dXJuZWRWYWx1ZSwgcmVzcG9uc2VdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSByZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIChmb3VuZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgPyBmb3VuZFxuICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgIDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG1vZHVsZS5pbml0aWFsaXplKCk7XG4gICAgfSlcbiAgO1xuICByZXR1cm4gKHJldHVybmVkVmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICA/IHJldHVybmVkVmFsdWVcbiAgICA6IHRoaXNcbiAgO1xufTtcblxuLy8gUmVjb3JkcyBpZiBDU1MgdHJhbnNpdGlvbiBpcyBhdmFpbGFibGVcbiQuZm4udHJhbnNpdGlvbi5leGlzdHMgPSB7fTtcblxuJC5mbi50cmFuc2l0aW9uLnNldHRpbmdzID0ge1xuXG4gIC8vIG1vZHVsZSBpbmZvXG4gIG5hbWUgICAgICAgICAgOiAnVHJhbnNpdGlvbicsXG5cbiAgLy8gaGlkZSBhbGwgb3V0cHV0IGZyb20gdGhpcyBjb21wb25lbnQgcmVnYXJkbGVzcyBvZiBvdGhlciBzZXR0aW5nc1xuICBzaWxlbnQgICAgICAgIDogZmFsc2UsXG5cbiAgLy8gZGVidWcgY29udGVudCBvdXRwdXR0ZWQgdG8gY29uc29sZVxuICBkZWJ1ZyAgICAgICAgIDogZmFsc2UsXG5cbiAgLy8gdmVyYm9zZSBkZWJ1ZyBvdXRwdXRcbiAgdmVyYm9zZSAgICAgICA6IGZhbHNlLFxuXG4gIC8vIHBlcmZvcm1hbmNlIGRhdGEgb3V0cHV0XG4gIHBlcmZvcm1hbmNlICAgOiB0cnVlLFxuXG4gIC8vIGV2ZW50IG5hbWVzcGFjZVxuICBuYW1lc3BhY2UgICAgIDogJ3RyYW5zaXRpb24nLFxuXG4gIC8vIGRlbGF5IGJldHdlZW4gYW5pbWF0aW9ucyBpbiBncm91cFxuICBpbnRlcnZhbCAgICAgIDogMCxcblxuICAvLyB3aGV0aGVyIGdyb3VwIGFuaW1hdGlvbnMgc2hvdWxkIGJlIHJldmVyc2VkXG4gIHJldmVyc2UgICAgICAgOiAnYXV0bycsXG5cbiAgLy8gYW5pbWF0aW9uIGNhbGxiYWNrIGV2ZW50XG4gIG9uU3RhcnQgICAgICAgOiBmdW5jdGlvbigpIHt9LFxuICBvbkNvbXBsZXRlICAgIDogZnVuY3Rpb24oKSB7fSxcbiAgb25TaG93ICAgICAgICA6IGZ1bmN0aW9uKCkge30sXG4gIG9uSGlkZSAgICAgICAgOiBmdW5jdGlvbigpIHt9LFxuXG4gIC8vIHdoZXRoZXIgdGltZW91dCBzaG91bGQgYmUgdXNlZCB0byBlbnN1cmUgY2FsbGJhY2sgZmlyZXMgaW4gY2FzZXMgYW5pbWF0aW9uZW5kIGRvZXMgbm90XG4gIHVzZUZhaWxTYWZlICAgOiB0cnVlLFxuXG4gIC8vIGRlbGF5IGluIG1zIGZvciBmYWlsIHNhZmVcbiAgZmFpbFNhZmVEZWxheSA6IDEwMCxcblxuICAvLyB3aGV0aGVyIEVYQUNUIGFuaW1hdGlvbiBjYW4gb2NjdXIgdHdpY2UgaW4gYSByb3dcbiAgYWxsb3dSZXBlYXRzICA6IGZhbHNlLFxuXG4gIC8vIE92ZXJyaWRlIGZpbmFsIGRpc3BsYXkgdHlwZSBvbiB2aXNpYmxlXG4gIGRpc3BsYXlUeXBlICAgOiBmYWxzZSxcblxuICAvLyBhbmltYXRpb24gZHVyYXRpb25cbiAgYW5pbWF0aW9uICAgICA6ICdmYWRlJyxcbiAgZHVyYXRpb24gICAgICA6IGZhbHNlLFxuXG4gIC8vIG5ldyBhbmltYXRpb25zIHdpbGwgb2NjdXIgYWZ0ZXIgcHJldmlvdXMgb25lc1xuICBxdWV1ZSAgICAgICAgIDogdHJ1ZSxcblxuICBtZXRhZGF0YSA6IHtcbiAgICBkaXNwbGF5VHlwZTogJ2Rpc3BsYXknXG4gIH0sXG5cbiAgY2xhc3NOYW1lICAgOiB7XG4gICAgYW5pbWF0aW5nICA6ICdhbmltYXRpbmcnLFxuICAgIGRpc2FibGVkICAgOiAnZGlzYWJsZWQnLFxuICAgIGhpZGRlbiAgICAgOiAnaGlkZGVuJyxcbiAgICBpbndhcmQgICAgIDogJ2luJyxcbiAgICBsb2FkaW5nICAgIDogJ2xvYWRpbmcnLFxuICAgIGxvb3BpbmcgICAgOiAnbG9vcGluZycsXG4gICAgb3V0d2FyZCAgICA6ICdvdXQnLFxuICAgIHRyYW5zaXRpb24gOiAndHJhbnNpdGlvbicsXG4gICAgdmlzaWJsZSAgICA6ICd2aXNpYmxlJ1xuICB9LFxuXG4gIC8vIHBvc3NpYmxlIGVycm9yc1xuICBlcnJvcjoge1xuICAgIG5vQW5pbWF0aW9uIDogJ0VsZW1lbnQgaXMgbm8gbG9uZ2VyIGF0dGFjaGVkIHRvIERPTS4gVW5hYmxlIHRvIGFuaW1hdGUuICBVc2Ugc2lsZW50IHNldHRpbmcgdG8gc3VycHJlc3MgdGhpcyB3YXJuaW5nIGluIHByb2R1Y3Rpb24uJyxcbiAgICByZXBlYXRlZCAgICA6ICdUaGF0IGFuaW1hdGlvbiBpcyBhbHJlYWR5IG9jY3VycmluZywgY2FuY2VsbGluZyByZXBlYXRlZCBhbmltYXRpb24nLFxuICAgIG1ldGhvZCAgICAgIDogJ1RoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZCcsXG4gICAgc3VwcG9ydCAgICAgOiAnVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgQ1NTIGFuaW1hdGlvbnMnXG4gIH1cblxufTtcblxuXG59KSggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50ICk7XG4iXX0=
