!function(e,t,r,n){"use strict";var t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(r){var o,s=e(e.isFunction(this)?t:this),i=s.selector||"",a=(new Date).getTime(),u=[],c=arguments[0],d="string"==typeof c,l=[].slice.call(arguments,1);return s.each(function(){var s,g,f,p,m,b,v=e.isPlainObject(r)?e.extend(!0,{},e.fn.api.settings,r):e.extend({},e.fn.api.settings),h=v.namespace,y=v.metadata,q=v.selector,R=v.error,x=v.className,S="."+h,A="module-"+h,k=e(this),T=k.closest(q.form),P=v.stateContext?e(v.stateContext):k,j=this,O=P[0],w=k.data(A);b={initialize:function(){d||b.bind.events(),b.instantiate()},instantiate:function(){b.verbose("Storing instance of module",b),w=b,k.data(A,w)},destroy:function(){b.verbose("Destroying previous module for",j),k.removeData(A).off(S)},bind:{events:function(){var e=b.get.event();e?(b.verbose("Attaching API events to element",e),k.on(e+S,b.event.trigger)):"now"==v.on&&(b.debug("Querying API endpoint immediately"),b.query())}},decode:{json:function(e){if(e!==n&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}},read:{cachedResponse:function(e){var r;return t.Storage===n?void b.error(R.noStorage):(r=sessionStorage.getItem(e),b.debug("Using cached response",e,r),r=b.decode.json(r))}},write:{cachedResponse:function(r,o){return o&&""===o?void b.debug("Response empty, not caching",o):t.Storage===n?void b.error(R.noStorage):(e.isPlainObject(o)&&(o=JSON.stringify(o)),sessionStorage.setItem(r,o),void b.verbose("Storing cached response for url",r,o))}},query:function(){if(b.is.disabled())return void b.debug("Element is disabled API request aborted");if(b.is.loading()){if(!v.interruptRequests)return void b.debug("Cancelling request, previous request is still pending");b.debug("Interrupting previous request"),b.abort()}return v.defaultData&&e.extend(!0,v.urlData,b.get.defaultData()),v.serializeForm&&(v.data=b.add.formData(v.data)),g=b.get.settings(),g===!1?(b.cancelled=!0,void b.error(R.beforeSend)):(b.cancelled=!1,f=b.get.templatedURL(),f||b.is.mocked()?(f=b.add.urlData(f),f||b.is.mocked()?(g.url=v.base+f,s=e.extend(!0,{},v,{type:v.method||v.type,data:p,url:v.base+f,beforeSend:v.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),b.debug("Querying URL",s.url),b.verbose("Using AJAX settings",s),"local"===v.cache&&b.read.cachedResponse(f)?(b.debug("Response returned from local cache"),b.request=b.create.request(),void b.request.resolveWith(O,[b.read.cachedResponse(f)])):void(v.throttle?v.throttleFirstRequest||b.timer?(b.debug("Throttling request",v.throttle),clearTimeout(b.timer),b.timer=setTimeout(function(){b.timer&&delete b.timer,b.debug("Sending throttled request",p,s.method),b.send.request()},v.throttle)):(b.debug("Sending request",p,s.method),b.send.request(),b.timer=setTimeout(function(){},v.throttle)):(b.debug("Sending request",p,s.method),b.send.request()))):void 0):void b.error(R.missingURL))},should:{removeError:function(){return v.hideError===!0||"auto"===v.hideError&&!b.is.form()}},is:{disabled:function(){return k.filter(q.disabled).length>0},expectingJSON:function(){return"json"===v.dataType||"jsonp"===v.dataType},form:function(){return k.is("form")||P.is("form")},mocked:function(){return v.mockResponse||v.mockResponseAsync||v.response||v.responseAsync},input:function(){return k.is("input")},loading:function(){return!!b.request&&"pending"==b.request.state()},abortedRequest:function(e){return e&&e.readyState!==n&&0===e.readyState?(b.verbose("XHR request determined to be aborted"),!0):(b.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return b.is.expectingJSON()&&e.isFunction(v.successTest)?(b.debug("Checking JSON returned success",v.successTest,t),v.successTest(t)?(b.debug("Response passed success test",t),!0):(b.debug("Response failed success test",t),!1)):(b.verbose("Response is not JSON, skipping validation",v.successTest,t),!0)}},was:{cancelled:function(){return b.cancelled||!1},succesful:function(){return b.request&&"resolved"==b.request.state()},failure:function(){return b.request&&"rejected"==b.request.state()},complete:function(){return b.request&&("resolved"==b.request.state()||"rejected"==b.request.state())}},add:{urlData:function(t,r){var o,s;return t&&(o=t.match(v.regExp.required),s=t.match(v.regExp.optional),r=r||v.urlData,o&&(b.debug("Looking for required URL variables",o),e.each(o,function(o,s){var i=s.indexOf("$")!==-1?s.substr(2,s.length-3):s.substr(1,s.length-2),a=e.isPlainObject(r)&&r[i]!==n?r[i]:k.data(i)!==n?k.data(i):P.data(i)!==n?P.data(i):r[i];return a===n?(b.error(R.requiredParameter,i,t),t=!1,!1):(b.verbose("Found required variable",i,a),a=v.encodeParameters?b.get.urlEncodedValue(a):a,t=t.replace(s,a),void 0)})),s&&(b.debug("Looking for optional URL variables",o),e.each(s,function(o,s){var i=s.indexOf("$")!==-1?s.substr(3,s.length-4):s.substr(2,s.length-3),a=e.isPlainObject(r)&&r[i]!==n?r[i]:k.data(i)!==n?k.data(i):P.data(i)!==n?P.data(i):r[i];a!==n?(b.verbose("Optional variable Found",i,a),t=t.replace(s,a)):(b.verbose("Optional variable not found",i),t=t.indexOf("/"+s)!==-1?t.replace("/"+s,""):t.replace(s,""))}))),t},formData:function(t){var r,o=e.fn.serializeObject!==n,s=o?T.serializeObject():T.serialize();return t=t||v.data,r=e.isPlainObject(t),r?o?(b.debug("Extending existing data with form data",t,s),t=e.extend(!0,{},t,s)):(b.error(R.missingSerialize),b.debug("Cant extend data. Replacing data with form data",t,s),t=s):(b.debug("Adding form data",s),t=s),t}},send:{request:function(){b.set.loading(),b.request=b.create.request(),b.is.mocked()?b.mockedXHR=b.create.mockedXHR():b.xhr=b.create.xhr(),v.onRequest.call(O,b.request,b.xhr)}},event:{trigger:function(e){b.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,r,n){var o=this,s=(new Date).getTime()-m,i=v.loadingDuration-s,a=!!e.isFunction(v.onResponse)&&(b.is.expectingJSON()?v.onResponse.call(o,e.extend(!0,{},t)):v.onResponse.call(o,t));i=i>0?i:0,a&&(b.debug("Modified API response in onResponse callback",v.onResponse,a,t),t=a),i>0&&b.debug("Response completed early delaying state change by",i),setTimeout(function(){b.is.validResponse(t)?b.request.resolveWith(o,[t,n]):b.request.rejectWith(o,[n,"invalid"])},i)},fail:function(e,t,r){var n=this,o=(new Date).getTime()-m,s=v.loadingDuration-o;s=s>0?s:0,s>0&&b.debug("Response completed early delaying state change by",s),setTimeout(function(){b.is.abortedRequest(e)?b.request.rejectWith(n,[e,"aborted",r]):b.request.rejectWith(n,[e,"error",t,r])},s)}},request:{done:function(e,t){b.debug("Successful API Response",e),"local"===v.cache&&f&&(b.write.cachedResponse(f,e),b.debug("Saving server response locally",b.cache)),v.onSuccess.call(O,e,k,t)},complete:function(e,t){var r,n;b.was.succesful()?(n=e,r=t):(r=e,n=b.get.responseFromXHR(r)),b.remove.loading(),v.onComplete.call(O,n,k,r)},fail:function(e,t,r){var o=b.get.responseFromXHR(e),i=b.get.errorFromRequest(o,t,r);return"aborted"==t?(b.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,r),v.onAbort.call(O,t,k,e),!0):("invalid"==t?b.debug("JSON did not pass success test. A server-side error has most likely occurred",o):"error"==t&&e!==n&&(b.debug("XHR produced a server error",t,r),200!=e.status&&r!==n&&""!==r&&b.error(R.statusMessage+r,s.url),v.onError.call(O,i,k,e)),v.errorDuration&&"aborted"!==t&&(b.debug("Adding error state"),b.set.error(),b.should.removeError()&&setTimeout(b.remove.error,v.errorDuration)),b.debug("API Request failed",i,e),void v.onFailure.call(O,o,k,e))}}},create:{request:function(){return e.Deferred().always(b.event.request.complete).done(b.event.request.done).fail(b.event.request.fail)},mockedXHR:function(){var t,r,n,o=!1,s=!1,i=!1,a=v.mockResponse||v.response,u=v.mockResponseAsync||v.responseAsync;return n=e.Deferred().always(b.event.xhr.complete).done(b.event.xhr.done).fail(b.event.xhr.fail),a?(e.isFunction(a)?(b.debug("Using specified synchronous callback",a),r=a.call(O,g)):(b.debug("Using settings specified response",a),r=a),n.resolveWith(O,[r,o,{responseText:r}])):e.isFunction(u)&&(t=function(e){b.debug("Async callback returned response",e),e?n.resolveWith(O,[e,o,{responseText:e}]):n.rejectWith(O,[{responseText:e},s,i])},b.debug("Using specified async response callback",u),u.call(O,g,t)),n},xhr:function(){var t;return t=e.ajax(s).always(b.event.xhr.always).done(b.event.xhr.done).fail(b.event.xhr.fail),b.verbose("Created server request",t,s),t}},set:{error:function(){b.verbose("Adding error state to element",P),P.addClass(x.error)},loading:function(){b.verbose("Adding loading state to element",P),P.addClass(x.loading),m=(new Date).getTime()}},remove:{error:function(){b.verbose("Removing error state from element",P),P.removeClass(x.error)},loading:function(){b.verbose("Removing loading state from element",P),P.removeClass(x.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(b.is.expectingJSON()?b.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,r,o){return e.isPlainObject(t)&&t.error!==n?t.error:v.error[r]!==n?v.error[r]:o},request:function(){return b.request||!1},xhr:function(){return b.xhr||!1},settings:function(){var t;return t=v.beforeSend.call(O,v),t&&(t.success!==n&&(b.debug("Legacy success callback detected",t),b.error(R.legacyParameters,t.success),t.onSuccess=t.success),t.failure!==n&&(b.debug("Legacy failure callback detected",t),b.error(R.legacyParameters,t.failure),t.onFailure=t.failure),t.complete!==n&&(b.debug("Legacy complete callback detected",t),b.error(R.legacyParameters,t.complete),t.onComplete=t.complete)),t===n&&b.error(R.noReturnedValue),t===!1?t:t!==n?e.extend(!0,{},t):e.extend(!0,{},v)},urlEncodedValue:function(e){var r=t.decodeURIComponent(e),n=t.encodeURIComponent(e),o=r!==e;return o?(b.debug("URL value is already encoded, avoiding double encoding",e),e):(b.verbose("Encoding value using encodeURIComponent",e,n),n)},defaultData:function(){var t={};return e.isWindow(j)||(b.is.input()?t.value=k.val():b.is.form()||(t.text=k.text())),t},event:function(){return e.isWindow(j)||"now"==v.on?(b.debug("API called without element, no events attached"),!1):"auto"==v.on?k.is("input")?j.oninput!==n?"input":j.onpropertychange!==n?"propertychange":"keyup":k.is("form")?"submit":"click":v.on},templatedURL:function(e){if(e=e||k.data(y.action)||v.action||!1,f=k.data(y.url)||v.url||!1)return b.debug("Using specified url",f),f;if(e){if(b.debug("Looking up url for action",e,v.api),v.api[e]===n&&!b.is.mocked())return void b.error(R.missingAction,v.action,v.api);f=v.api[e]}else b.is.form()&&(f=k.attr("action")||P.attr("action")||!1,b.debug("No url or action specified, defaulting to form action",f));return f}},abort:function(){var e=b.get.xhr();e&&"resolved"!==e.state()&&(b.debug("Cancelling API request"),e.abort())},reset:function(){b.remove.error(),b.remove.loading()},setting:function(t,r){if(b.debug("Changing setting",t,r),e.isPlainObject(t))e.extend(!0,v,t);else{if(r===n)return v[t];e.isPlainObject(v[t])?e.extend(!0,v[t],r):v[t]=r}},internal:function(t,r){if(e.isPlainObject(t))e.extend(!0,b,t);else{if(r===n)return b[t];b[t]=r}},debug:function(){!v.silent&&v.debug&&(v.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,v.name+":"),b.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),b.verbose.apply(console,arguments)))},error:function(){v.silent||(b.error=Function.prototype.bind.call(console.error,console,v.name+":"),b.error.apply(console,arguments))},performance:{log:function(e){var t,r,n;v.performance&&(t=(new Date).getTime(),n=a||t,r=t-n,a=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":r})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,500)},display:function(){var t=v.name+":",r=0;a=!1,clearTimeout(b.performance.timer),e.each(u,function(e,t){r+=t["Execution Time"]}),t+=" "+r+"ms",i&&(t+=" '"+i+"'"),(console.group!==n||console.table!==n)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,r,s){var i,a,u,c=w;return r=r||l,s=j||s,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,function(r,o){var s=r!=i?o+t[r+1].charAt(0).toUpperCase()+t[r+1].slice(1):t;if(e.isPlainObject(c[s])&&r!=i)c=c[s];else{if(c[s]!==n)return a=c[s],!1;if(!e.isPlainObject(c[o])||r==i)return c[o]!==n?(a=c[o],!1):(b.error(R.method,t),!1);c=c[o]}})),e.isFunction(a)?u=a.apply(s,r):a!==n&&(u=a),e.isArray(o)?o.push(u):o!==n?o=[o,u]:u!==n&&(o=u),a}},d?(w===n&&b.initialize(),b.invoke(c)):(w!==n&&w.invoke("destroy"),b.initialize())}),o!==n?o:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9hcGkuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwiTWF0aCIsInNlbGYiLCJGdW5jdGlvbiIsImFwaSIsImZuIiwicGFyYW1ldGVycyIsInJldHVybmVkVmFsdWUiLCIkYWxsTW9kdWxlcyIsImlzRnVuY3Rpb24iLCJ0aGlzIiwibW9kdWxlU2VsZWN0b3IiLCJzZWxlY3RvciIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInBlcmZvcm1hbmNlIiwicXVlcnkiLCJhcmd1bWVudHMiLCJtZXRob2RJbnZva2VkIiwicXVlcnlBcmd1bWVudHMiLCJzbGljZSIsImNhbGwiLCJlYWNoIiwiYWpheFNldHRpbmdzIiwicmVxdWVzdFNldHRpbmdzIiwidXJsIiwiZGF0YSIsInJlcXVlc3RTdGFydFRpbWUiLCJtb2R1bGUiLCJzZXR0aW5ncyIsImlzUGxhaW5PYmplY3QiLCJleHRlbmQiLCJuYW1lc3BhY2UiLCJtZXRhZGF0YSIsImVycm9yIiwiY2xhc3NOYW1lIiwiZXZlbnROYW1lc3BhY2UiLCJtb2R1bGVOYW1lc3BhY2UiLCIkbW9kdWxlIiwiJGZvcm0iLCJjbG9zZXN0IiwiZm9ybSIsIiRjb250ZXh0Iiwic3RhdGVDb250ZXh0IiwiZWxlbWVudCIsImNvbnRleHQiLCJpbnN0YW5jZSIsImluaXRpYWxpemUiLCJiaW5kIiwiZXZlbnRzIiwiaW5zdGFudGlhdGUiLCJ2ZXJib3NlIiwiZGVzdHJveSIsInJlbW92ZURhdGEiLCJvZmYiLCJ0cmlnZ2VyRXZlbnQiLCJnZXQiLCJldmVudCIsIm9uIiwidHJpZ2dlciIsImRlYnVnIiwiZGVjb2RlIiwianNvbiIsInJlc3BvbnNlIiwiSlNPTiIsInBhcnNlIiwiZSIsInJlYWQiLCJjYWNoZWRSZXNwb25zZSIsIlN0b3JhZ2UiLCJub1N0b3JhZ2UiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJ3cml0ZSIsInN0cmluZ2lmeSIsInNldEl0ZW0iLCJpcyIsImRpc2FibGVkIiwibG9hZGluZyIsImludGVycnVwdFJlcXVlc3RzIiwiYWJvcnQiLCJkZWZhdWx0RGF0YSIsInVybERhdGEiLCJzZXJpYWxpemVGb3JtIiwiYWRkIiwiZm9ybURhdGEiLCJjYW5jZWxsZWQiLCJiZWZvcmVTZW5kIiwidGVtcGxhdGVkVVJMIiwibW9ja2VkIiwiYmFzZSIsInR5cGUiLCJtZXRob2QiLCJiZWZvcmVYSFIiLCJzdWNjZXNzIiwiZmFpbHVyZSIsImNvbXBsZXRlIiwiY2FjaGUiLCJyZXF1ZXN0IiwiY3JlYXRlIiwicmVzb2x2ZVdpdGgiLCJ0aHJvdHRsZSIsInRocm90dGxlRmlyc3RSZXF1ZXN0IiwidGltZXIiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VuZCIsIm1pc3NpbmdVUkwiLCJzaG91bGQiLCJyZW1vdmVFcnJvciIsImhpZGVFcnJvciIsImZpbHRlciIsImxlbmd0aCIsImV4cGVjdGluZ0pTT04iLCJkYXRhVHlwZSIsIm1vY2tSZXNwb25zZSIsIm1vY2tSZXNwb25zZUFzeW5jIiwicmVzcG9uc2VBc3luYyIsImlucHV0Iiwic3RhdGUiLCJhYm9ydGVkUmVxdWVzdCIsInhociIsInJlYWR5U3RhdGUiLCJ2YWxpZFJlc3BvbnNlIiwic3VjY2Vzc1Rlc3QiLCJ3YXMiLCJzdWNjZXNmdWwiLCJyZXF1aXJlZFZhcmlhYmxlcyIsIm9wdGlvbmFsVmFyaWFibGVzIiwibWF0Y2giLCJyZWdFeHAiLCJyZXF1aXJlZCIsIm9wdGlvbmFsIiwiaW5kZXgiLCJ0ZW1wbGF0ZWRTdHJpbmciLCJ2YXJpYWJsZSIsImluZGV4T2YiLCJzdWJzdHIiLCJ2YWx1ZSIsInJlcXVpcmVkUGFyYW1ldGVyIiwidXJsRW5jb2RlZFZhbHVlIiwicmVwbGFjZSIsImhhc090aGVyRGF0YSIsImNhblNlcmlhbGl6ZSIsInNlcmlhbGl6ZU9iamVjdCIsInNlcmlhbGl6ZSIsIm1pc3NpbmdTZXJpYWxpemUiLCJzZXQiLCJtb2NrZWRYSFIiLCJvblJlcXVlc3QiLCJwcmV2ZW50RGVmYXVsdCIsImFsd2F5cyIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwiZWxhcHNlZFRpbWUiLCJ0aW1lTGVmdCIsImxvYWRpbmdEdXJhdGlvbiIsInRyYW5zbGF0ZWRSZXNwb25zZSIsIm9uUmVzcG9uc2UiLCJyZWplY3RXaXRoIiwiZmFpbCIsInN0YXR1cyIsImh0dHBNZXNzYWdlIiwib25TdWNjZXNzIiwiZmlyc3RQYXJhbWV0ZXIiLCJzZWNvbmRQYXJhbWV0ZXIiLCJyZXNwb25zZUZyb21YSFIiLCJyZW1vdmUiLCJvbkNvbXBsZXRlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JGcm9tUmVxdWVzdCIsIm9uQWJvcnQiLCJzdGF0dXNNZXNzYWdlIiwib25FcnJvciIsImVycm9yRHVyYXRpb24iLCJvbkZhaWx1cmUiLCJEZWZlcnJlZCIsImFzeW5jQ2FsbGJhY2siLCJyZXNwb25kZXIiLCJhc3luY1Jlc3BvbmRlciIsInJlc3BvbnNlVGV4dCIsImFqYXgiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicnVuU2V0dGluZ3MiLCJsZWdhY3lQYXJhbWV0ZXJzIiwibm9SZXR1cm5lZFZhbHVlIiwiZGVjb2RlZFZhbHVlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZW5jb2RlZFZhbHVlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYWxyZWFkeUVuY29kZWQiLCJpc1dpbmRvdyIsInZhbCIsInRleHQiLCJvbmlucHV0Iiwib25wcm9wZXJ0eWNoYW5nZSIsImFjdGlvbiIsIm1pc3NpbmdBY3Rpb24iLCJhdHRyIiwicmVzZXQiLCJzZXR0aW5nIiwibmFtZSIsImludGVybmFsIiwic2lsZW50IiwibG9nIiwicHJvdG90eXBlIiwiY29uc29sZSIsImluZm8iLCJhcHBseSIsIm1lc3NhZ2UiLCJjdXJyZW50VGltZSIsImV4ZWN1dGlvblRpbWUiLCJwcmV2aW91c1RpbWUiLCJwdXNoIiwiTmFtZSIsIkFyZ3VtZW50cyIsIkV4ZWN1dGlvbiBUaW1lIiwiZGlzcGxheSIsInRpdGxlIiwidG90YWxUaW1lIiwiZ3JvdXAiLCJ0YWJsZSIsImdyb3VwQ29sbGFwc2VkIiwiZ3JvdXBFbmQiLCJpbnZva2UiLCJwYXNzZWRBcmd1bWVudHMiLCJtYXhEZXB0aCIsImZvdW5kIiwib2JqZWN0Iiwic3BsaXQiLCJkZXB0aCIsImNhbWVsQ2FzZVZhbHVlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJpc0FycmF5IiwiZW5jb2RlUGFyYW1ldGVycyIsInByb21pc2UiLCJleGl0Q29uZGl0aW9ucyIsIkpTT05QYXJzZSIsInBhcnNlRXJyb3IiLCJ0aW1lb3V0IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FVQyxTQUFXQSxFQUFHQyxFQUFRQyxFQUFVQyxHQUVqQyxZQUVBLElBQ0VGLEdBQTJCLG1CQUFWQSxJQUF5QkEsRUFBT0csTUFBUUEsS0FDckRILEVBQ2dCLG1CQUFSSSxPQUF1QkEsS0FBS0QsTUFBUUEsS0FDMUNDLEtBQ0FDLFNBQVMsZ0JBR2pCTixHQUFFTyxJQUFNUCxFQUFFUSxHQUFHRCxJQUFNLFNBQVNFLEdBRTFCLEdBYUVDLEdBWEFDLEVBQ01YLEVBRFlBLEVBQUVZLFdBQVdDLE1BQ3ZCWixFQUNBWSxNQUNSQyxFQUFpQkgsRUFBWUksVUFBWSxHQUN6Q0MsR0FBaUIsR0FBSUMsT0FBT0MsVUFDNUJDLEtBRUFDLEVBQWlCQyxVQUFVLEdBQzNCQyxFQUFrQyxnQkFBVEYsR0FDekJHLEtBQW9CQyxNQUFNQyxLQUFLSixVQUFXLEVBeTlCNUMsT0FwOUJBVixHQUNHZSxLQUFLLFdBQ0osR0EwQkVDLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBTUFDLEVBbkNBQyxFQUFzQmpDLEVBQUVrQyxjQUFjekIsR0FDbENULEVBQUVtQyxRQUFPLEtBQVVuQyxFQUFFUSxHQUFHRCxJQUFJMEIsU0FBVXhCLEdBQ3RDVCxFQUFFbUMsVUFBV25DLEVBQUVRLEdBQUdELElBQUkwQixVQUcxQkcsRUFBa0JILEVBQVNHLFVBQzNCQyxFQUFrQkosRUFBU0ksU0FDM0J0QixFQUFrQmtCLEVBQVNsQixTQUMzQnVCLEVBQWtCTCxFQUFTSyxNQUMzQkMsRUFBa0JOLEVBQVNNLFVBRzNCQyxF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QUdkMUYsT0FDRXFELFdBQW9CLG1EQUNwQnJELE1BQW9CLHVDQUNwQjRNLGVBQW9CLDJDQUNwQkMsVUFBb0IsaURBQ3BCdEQsaUJBQW9CLGtEQUNwQjdGLE9BQW9CLHVDQUNwQjBHLGNBQW9CLHlDQUNwQnBELGlCQUFvQixrRkFDcEJ2QyxXQUFvQixpQ0FDcEIrRSxnQkFBb0IsNkVBQ3BCcEgsVUFBb0IscURBQ3BCMEssV0FBb0IsMENBQ3BCckcsa0JBQW9CLHFDQUNwQmlDLGNBQW9CLHlCQUNwQnFFLFFBQW9CLDBCQUd0Qi9HLFFBQ0VDLFNBQVcsb0JBQ1hDLFNBQVcsdUJBR2JqRyxXQUNFMkMsUUFBVSxVQUNWNUMsTUFBVSxTQUdadkIsVUFDRWtFLFNBQVcsWUFDWHBDLEtBQVksUUFHZFIsVUFDRW9LLE9BQVUsU0FDVjVLLElBQVUsU0FNVnlOLE9BQVFyUCxPQUFRQyIsImZpbGUiOiJ2ZW5kb3IvYXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAjIFNlbWFudGljIFVJIDIuMi43IC0gQVBJXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9zZW1hbnRpYy1vcmcvc2VtYW50aWMtdWkvXG4gKlxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICpcbiAqL1xuXG47KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhclxuICB3aW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoKVxuICAgID8gd2luZG93XG4gICAgOiAodHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGgpXG4gICAgICA/IHNlbGZcbiAgICAgIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKVxuO1xuXG4kLmFwaSA9ICQuZm4uYXBpID0gZnVuY3Rpb24ocGFyYW1ldGVycykge1xuXG4gIHZhclxuICAgIC8vIHVzZSB3aW5kb3cgY29udGV4dCBpZiBub25lIHNwZWNpZmllZFxuICAgICRhbGxNb2R1bGVzICAgICA9ICQuaXNGdW5jdGlvbih0aGlzKVxuICAgICAgICA/ICQod2luZG93KVxuICAgICAgICA6ICQodGhpcyksXG4gICAgbW9kdWxlU2VsZWN0b3IgPSAkYWxsTW9kdWxlcy5zZWxlY3RvciB8fCAnJyxcbiAgICB0aW1lICAgICAgICAgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgIHBlcmZvcm1hbmNlICAgID0gW10sXG5cbiAgICBxdWVyeSAgICAgICAgICA9IGFyZ3VtZW50c1swXSxcbiAgICBtZXRob2RJbnZva2VkICA9ICh0eXBlb2YgcXVlcnkgPT0gJ3N0cmluZycpLFxuICAgIHF1ZXJ5QXJndW1lbnRzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuXG4gICAgcmV0dXJuZWRWYWx1ZVxuICA7XG5cbiAgJGFsbE1vZHVsZXNcbiAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhclxuICAgICAgICBzZXR0aW5ncyAgICAgICAgICA9ICggJC5pc1BsYWluT2JqZWN0KHBhcmFtZXRlcnMpIClcbiAgICAgICAgICA/ICQuZXh0ZW5kKHRydWUsIHt9LCAkLmZuLmFwaS5zZXR0aW5ncywgcGFyYW1ldGVycylcbiAgICAgICAgICA6ICQuZXh0ZW5kKHt9LCAkLmZuLmFwaS5zZXR0aW5ncyksXG5cbiAgICAgICAgLy8gaW50ZXJuYWwgYWxpYXNlc1xuICAgICAgICBuYW1lc3BhY2UgICAgICAgPSBzZXR0aW5ncy5uYW1lc3BhY2UsXG4gICAgICAgIG1ldGFkYXRhICAgICAgICA9IHNldHRpbmdzLm1ldGFkYXRhLFxuICAgICAgICBzZWxlY3RvciAgICAgICAgPSBzZXR0aW5ncy5zZWxlY3RvcixcbiAgICAgICAgZXJyb3IgICAgICAgICAgID0gc2V0dGluZ3MuZXJyb3IsXG4gICAgICAgIGNsYXNzTmFtZSAgICAgICA9IHNldHRpbmdzLmNsYXNzTmFtZSxcblxuICAgICAgICAvLyBkZWZpbmUgbmFtZXNwYWNlcyBmb3IgbW9kdWxlc1xuICAgICAgICBldmVudE5hbWVzcGFjZSAgPSAnLicgKyBuYW1lc3BhY2UsXG4gICAgICAgIG1vZHVsZU5hbWVzcGFjZSA9ICdtb2R1bGUtJyArIG5hbWVzcGFjZSxcblxuICAgICAgICAvLyBlbGVtZW50IHRoYXQgY3JlYXRlcyByZXF1ZXN0XG4gICAgICAgICRtb2R1bGUgICAgICAgICA9ICQodGhpcyksXG4gICAgICAgICRmb3JtICAgICAgICAgICA9ICRtb2R1bGUuY2xvc2VzdChzZWxlY3Rvci5mb3JtKSxcblxuICAgICAgICAvLyBjb250ZXh0IHVzZWQgZm9yIHN0YXRlXG4gICAgICAgICRjb250ZXh0ICAgICAgICA9IChzZXR0aW5ncy5zdGF0ZUNvbnRleHQpXG4gICAgICAgICAgPyAkKHNldHRpbmdzLnN0YXRlQ29udGV4dClcbiAgICAgICAgICA6ICRtb2R1bGUsXG5cbiAgICAgICAgLy8gcmVxdWVzdCBkZXRhaWxzXG4gICAgICAgIGFqYXhTZXR0aW5ncyxcbiAgICAgICAgcmVxdWVzdFNldHRpbmdzLFxuICAgICAgICB1cmwsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHJlcXVlc3RTdGFydFRpbWUsXG5cbiAgICAgICAgLy8gc3RhbmRhcmQgbW9kdWxlXG4gICAgICAgIGVsZW1lbnQgICAgICAgICA9IHRoaXMsXG4gICAgICAgIGNvbnRleHQgICAgICAgICA9ICRjb250ZXh0WzBdLFxuICAgICAgICBpbnN0YW5jZSAgICAgICAgPSAkbW9kdWxlLmRhdGEobW9kdWxlTmFtZXNwYWNlKSxcbiAgICAgICAgbW9kdWxlXG4gICAgICA7XG5cbiAgICAgIG1vZHVsZSA9IHtcblxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighbWV0aG9kSW52b2tlZCkge1xuICAgICAgICAgICAgbW9kdWxlLmJpbmQuZXZlbnRzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZHVsZS5pbnN0YW50aWF0ZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluc3RhbnRpYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU3RvcmluZyBpbnN0YW5jZSBvZiBtb2R1bGUnLCBtb2R1bGUpO1xuICAgICAgICAgIGluc3RhbmNlID0gbW9kdWxlO1xuICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgIC5kYXRhKG1vZHVsZU5hbWVzcGFjZSwgaW5zdGFuY2UpXG4gICAgICAgICAgO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdEZXN0cm95aW5nIHByZXZpb3VzIG1vZHVsZSBmb3InLCBlbGVtZW50KTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAucmVtb3ZlRGF0YShtb2R1bGVOYW1lc3BhY2UpXG4gICAgICAgICAgICAub2ZmKGV2ZW50TmFtZXNwYWNlKVxuICAgICAgICAgIDtcbiAgICAgICAgfSxcblxuICAgICAgICBiaW5kOiB7XG4gICAgICAgICAgZXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQgPSBtb2R1bGUuZ2V0LmV2ZW50KClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKCB0cmlnZ2VyRXZlbnQgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdBdHRhY2hpbmcgQVBJIGV2ZW50cyB0byBlbGVtZW50JywgdHJpZ2dlckV2ZW50KTtcbiAgICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAgIC5vbih0cmlnZ2VyRXZlbnQgKyBldmVudE5hbWVzcGFjZSwgbW9kdWxlLmV2ZW50LnRyaWdnZXIpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoc2V0dGluZ3Mub24gPT0gJ25vdycpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdRdWVyeWluZyBBUEkgZW5kcG9pbnQgaW1tZWRpYXRlbHknKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnF1ZXJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRlY29kZToge1xuICAgICAgICAgIGpzb246IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZihyZXNwb25zZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXNwb25zZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgLy8gaXNudCBqc29uIHN0cmluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlYWQ6IHtcbiAgICAgICAgICBjYWNoZWRSZXNwb25zZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgcmVzcG9uc2VcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKHdpbmRvdy5TdG9yYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm5vU3RvcmFnZSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3BvbnNlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh1cmwpO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdVc2luZyBjYWNoZWQgcmVzcG9uc2UnLCB1cmwsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gbW9kdWxlLmRlY29kZS5qc29uKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHdyaXRlOiB7XG4gICAgICAgICAgY2FjaGVkUmVzcG9uc2U6IGZ1bmN0aW9uKHVybCwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlICYmIHJlc3BvbnNlID09PSAnJykge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Jlc3BvbnNlIGVtcHR5LCBub3QgY2FjaGluZycsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYod2luZG93LlN0b3JhZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBtb2R1bGUuZXJyb3IoZXJyb3Iubm9TdG9yYWdlKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChyZXNwb25zZSkgKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh1cmwsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTdG9yaW5nIGNhY2hlZCByZXNwb25zZSBmb3IgdXJsJywgdXJsLCByZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHF1ZXJ5OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIGlmKG1vZHVsZS5pcy5kaXNhYmxlZCgpKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0VsZW1lbnQgaXMgZGlzYWJsZWQgQVBJIHJlcXVlc3QgYWJvcnRlZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmKG1vZHVsZS5pcy5sb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLmludGVycnVwdFJlcXVlc3RzKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnSW50ZXJydXB0aW5nIHByZXZpb3VzIHJlcXVlc3QnKTtcbiAgICAgICAgICAgICAgbW9kdWxlLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdDYW5jZWxsaW5nIHJlcXVlc3QsIHByZXZpb3VzIHJlcXVlc3QgaXMgc3RpbGwgcGVuZGluZycpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcGFzcyBlbGVtZW50IG1ldGFkYXRhIHRvIHVybCAodmFsdWUsIHRleHQpXG4gICAgICAgICAgaWYoc2V0dGluZ3MuZGVmYXVsdERhdGEpIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHNldHRpbmdzLnVybERhdGEsIG1vZHVsZS5nZXQuZGVmYXVsdERhdGEoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQWRkIGZvcm0gY29udGVudFxuICAgICAgICAgIGlmKHNldHRpbmdzLnNlcmlhbGl6ZUZvcm0pIHtcbiAgICAgICAgICAgIHNldHRpbmdzLmRhdGEgPSBtb2R1bGUuYWRkLmZvcm1EYXRhKHNldHRpbmdzLmRhdGEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGNhbGwgYmVmb3Jlc2VuZCBhbmQgZ2V0IGFueSBzZXR0aW5ncyBjaGFuZ2VzXG4gICAgICAgICAgcmVxdWVzdFNldHRpbmdzID0gbW9kdWxlLmdldC5zZXR0aW5ncygpO1xuXG4gICAgICAgICAgLy8gY2hlY2sgaWYgYmVmb3JlIHNlbmQgY2FuY2VsbGVkIHJlcXVlc3RcbiAgICAgICAgICBpZihyZXF1ZXN0U2V0dGluZ3MgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBtb2R1bGUuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5iZWZvcmVTZW5kKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtb2R1bGUuY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZ2V0IHVybFxuICAgICAgICAgIHVybCA9IG1vZHVsZS5nZXQudGVtcGxhdGVkVVJMKCk7XG5cbiAgICAgICAgICBpZighdXJsICYmICFtb2R1bGUuaXMubW9ja2VkKCkpIHtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5taXNzaW5nVVJMKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZXBsYWNlIHZhcmlhYmxlc1xuICAgICAgICAgIHVybCA9IG1vZHVsZS5hZGQudXJsRGF0YSggdXJsICk7XG4gICAgICAgICAgLy8gbWlzc2luZyB1cmwgcGFyYW1ldGVyc1xuICAgICAgICAgIGlmKCAhdXJsICYmICFtb2R1bGUuaXMubW9ja2VkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXF1ZXN0U2V0dGluZ3MudXJsID0gc2V0dGluZ3MuYmFzZSArIHVybDtcblxuICAgICAgICAgIC8vIGxvb2sgZm9yIGpRdWVyeSBhamF4IHBhcmFtZXRlcnMgaW4gc2V0dGluZ3NcbiAgICAgICAgICBhamF4U2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVlLCB7fSwgc2V0dGluZ3MsIHtcbiAgICAgICAgICAgIHR5cGUgICAgICAgOiBzZXR0aW5ncy5tZXRob2QgfHwgc2V0dGluZ3MudHlwZSxcbiAgICAgICAgICAgIGRhdGEgICAgICAgOiBkYXRhLFxuICAgICAgICAgICAgdXJsICAgICAgICA6IHNldHRpbmdzLmJhc2UgKyB1cmwsXG4gICAgICAgICAgICBiZWZvcmVTZW5kIDogc2V0dGluZ3MuYmVmb3JlWEhSLFxuICAgICAgICAgICAgc3VjY2VzcyAgICA6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgICAgICBmYWlsdXJlICAgIDogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIGNvbXBsZXRlICAgOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ1F1ZXJ5aW5nIFVSTCcsIGFqYXhTZXR0aW5ncy51cmwpO1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdVc2luZyBBSkFYIHNldHRpbmdzJywgYWpheFNldHRpbmdzKTtcbiAgICAgICAgICBpZihzZXR0aW5ncy5jYWNoZSA9PT0gJ2xvY2FsJyAmJiBtb2R1bGUucmVhZC5jYWNoZWRSZXNwb25zZSh1cmwpKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Jlc3BvbnNlIHJldHVybmVkIGZyb20gbG9jYWwgY2FjaGUnKTtcbiAgICAgICAgICAgIG1vZHVsZS5yZXF1ZXN0ID0gbW9kdWxlLmNyZWF0ZS5yZXF1ZXN0KCk7XG4gICAgICAgICAgICBtb2R1bGUucmVxdWVzdC5yZXNvbHZlV2l0aChjb250ZXh0LCBbIG1vZHVsZS5yZWFkLmNhY2hlZFJlc3BvbnNlKHVybCkgXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoICFzZXR0aW5ncy50aHJvdHRsZSApIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2VuZGluZyByZXF1ZXN0JywgZGF0YSwgYWpheFNldHRpbmdzLm1ldGhvZCk7XG4gICAgICAgICAgICBtb2R1bGUuc2VuZC5yZXF1ZXN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYoIXNldHRpbmdzLnRocm90dGxlRmlyc3RSZXF1ZXN0ICYmICFtb2R1bGUudGltZXIpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTZW5kaW5nIHJlcXVlc3QnLCBkYXRhLCBhamF4U2V0dGluZ3MubWV0aG9kKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnNlbmQucmVxdWVzdCgpO1xuICAgICAgICAgICAgICBtb2R1bGUudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7fSwgc2V0dGluZ3MudGhyb3R0bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVGhyb3R0bGluZyByZXF1ZXN0Jywgc2V0dGluZ3MudGhyb3R0bGUpO1xuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnRpbWVyKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZihtb2R1bGUudGltZXIpIHtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtb2R1bGUudGltZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2VuZGluZyB0aHJvdHRsZWQgcmVxdWVzdCcsIGRhdGEsIGFqYXhTZXR0aW5ncy5tZXRob2QpO1xuICAgICAgICAgICAgICAgIG1vZHVsZS5zZW5kLnJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgfSwgc2V0dGluZ3MudGhyb3R0bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3VsZDoge1xuICAgICAgICAgIHJlbW92ZUVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoIHNldHRpbmdzLmhpZGVFcnJvciA9PT0gdHJ1ZSB8fCAoc2V0dGluZ3MuaGlkZUVycm9yID09PSAnYXV0bycgJiYgIW1vZHVsZS5pcy5mb3JtKCkpICk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGlzOiB7XG4gICAgICAgICAgZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICgkbW9kdWxlLmZpbHRlcihzZWxlY3Rvci5kaXNhYmxlZCkubGVuZ3RoID4gMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHBlY3RpbmdKU09OOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncy5kYXRhVHlwZSA9PT0gJ2pzb24nIHx8IHNldHRpbmdzLmRhdGFUeXBlID09PSAnanNvbnAnO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9ybTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJG1vZHVsZS5pcygnZm9ybScpIHx8ICRjb250ZXh0LmlzKCdmb3JtJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb2NrZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChzZXR0aW5ncy5tb2NrUmVzcG9uc2UgfHwgc2V0dGluZ3MubW9ja1Jlc3BvbnNlQXN5bmMgfHwgc2V0dGluZ3MucmVzcG9uc2UgfHwgc2V0dGluZ3MucmVzcG9uc2VBc3luYyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJG1vZHVsZS5pcygnaW5wdXQnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChtb2R1bGUucmVxdWVzdClcbiAgICAgICAgICAgICAgPyAobW9kdWxlLnJlcXVlc3Quc3RhdGUoKSA9PSAncGVuZGluZycpXG4gICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFib3J0ZWRSZXF1ZXN0OiBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgICAgIGlmKHhociAmJiB4aHIucmVhZHlTdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHhoci5yZWFkeVN0YXRlID09PSAwKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdYSFIgcmVxdWVzdCBkZXRlcm1pbmVkIHRvIGJlIGFib3J0ZWQnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1hIUiByZXF1ZXN0IHdhcyBub3QgYWJvcnRlZCcpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWxpZFJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYoICghbW9kdWxlLmlzLmV4cGVjdGluZ0pTT04oKSkgfHwgISQuaXNGdW5jdGlvbihzZXR0aW5ncy5zdWNjZXNzVGVzdCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZXNwb25zZSBpcyBub3QgSlNPTiwgc2tpcHBpbmcgdmFsaWRhdGlvbicsIHNldHRpbmdzLnN1Y2Nlc3NUZXN0LCByZXNwb25zZSk7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdDaGVja2luZyBKU09OIHJldHVybmVkIHN1Y2Nlc3MnLCBzZXR0aW5ncy5zdWNjZXNzVGVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgaWYoIHNldHRpbmdzLnN1Y2Nlc3NUZXN0KHJlc3BvbnNlKSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdSZXNwb25zZSBwYXNzZWQgc3VjY2VzcyB0ZXN0JywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Jlc3BvbnNlIGZhaWxlZCBzdWNjZXNzIHRlc3QnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgd2FzOiB7XG4gICAgICAgICAgY2FuY2VsbGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAobW9kdWxlLmNhbmNlbGxlZCB8fCBmYWxzZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWNjZXNmdWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChtb2R1bGUucmVxdWVzdCAmJiBtb2R1bGUucmVxdWVzdC5zdGF0ZSgpID09ICdyZXNvbHZlZCcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKG1vZHVsZS5yZXF1ZXN0ICYmIG1vZHVsZS5yZXF1ZXN0LnN0YXRlKCkgPT0gJ3JlamVjdGVkJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKG1vZHVsZS5yZXF1ZXN0ICYmIChtb2R1bGUucmVxdWVzdC5zdGF0ZSgpID09ICdyZXNvbHZlZCcgfHwgbW9kdWxlLnJlcXVlc3Quc3RhdGUoKSA9PSAncmVqZWN0ZWQnKSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhZGQ6IHtcbiAgICAgICAgICB1cmxEYXRhOiBmdW5jdGlvbih1cmwsIHVybERhdGEpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICByZXF1aXJlZFZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgb3B0aW9uYWxWYXJpYWJsZXNcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKHVybCkge1xuICAgICAgICAgICAgICByZXF1aXJlZFZhcmlhYmxlcyA9IHVybC5tYXRjaChzZXR0aW5ncy5yZWdFeHAucmVxdWlyZWQpO1xuICAgICAgICAgICAgICBvcHRpb25hbFZhcmlhYmxlcyA9IHVybC5tYXRjaChzZXR0aW5ncy5yZWdFeHAub3B0aW9uYWwpO1xuICAgICAgICAgICAgICB1cmxEYXRhICAgICAgICAgICA9IHVybERhdGEgfHwgc2V0dGluZ3MudXJsRGF0YTtcbiAgICAgICAgICAgICAgaWYocmVxdWlyZWRWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0xvb2tpbmcgZm9yIHJlcXVpcmVkIFVSTCB2YXJpYWJsZXMnLCByZXF1aXJlZFZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgJC5lYWNoKHJlcXVpcmVkVmFyaWFibGVzLCBmdW5jdGlvbihpbmRleCwgdGVtcGxhdGVkU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgbGVnYWN5IHskdmFyfSBzdHlsZVxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZSA9ICh0ZW1wbGF0ZWRTdHJpbmcuaW5kZXhPZignJCcpICE9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgICA/IHRlbXBsYXRlZFN0cmluZy5zdWJzdHIoMiwgdGVtcGxhdGVkU3RyaW5nLmxlbmd0aCAtIDMpXG4gICAgICAgICAgICAgICAgICAgICAgOiB0ZW1wbGF0ZWRTdHJpbmcuc3Vic3RyKDEsIHRlbXBsYXRlZFN0cmluZy5sZW5ndGggLSAyKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgICA9ICgkLmlzUGxhaW5PYmplY3QodXJsRGF0YSkgJiYgdXJsRGF0YVt2YXJpYWJsZV0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICA/IHVybERhdGFbdmFyaWFibGVdXG4gICAgICAgICAgICAgICAgICAgICAgOiAoJG1vZHVsZS5kYXRhKHZhcmlhYmxlKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAkbW9kdWxlLmRhdGEodmFyaWFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICgkY29udGV4dC5kYXRhKHZhcmlhYmxlKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICA/ICRjb250ZXh0LmRhdGEodmFyaWFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogdXJsRGF0YVt2YXJpYWJsZV1cbiAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgaWYodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUuZXJyb3IoZXJyb3IucmVxdWlyZWRQYXJhbWV0ZXIsIHZhcmlhYmxlLCB1cmwpO1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdGb3VuZCByZXF1aXJlZCB2YXJpYWJsZScsIHZhcmlhYmxlLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKHNldHRpbmdzLmVuY29kZVBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgICAgICAgPyBtb2R1bGUuZ2V0LnVybEVuY29kZWRWYWx1ZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICA6IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UodGVtcGxhdGVkU3RyaW5nLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYob3B0aW9uYWxWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0xvb2tpbmcgZm9yIG9wdGlvbmFsIFVSTCB2YXJpYWJsZXMnLCByZXF1aXJlZFZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgJC5lYWNoKG9wdGlvbmFsVmFyaWFibGVzLCBmdW5jdGlvbihpbmRleCwgdGVtcGxhdGVkU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgbGVnYWN5IHsvJHZhcn0gc3R5bGVcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUgPSAodGVtcGxhdGVkU3RyaW5nLmluZGV4T2YoJyQnKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wbGF0ZWRTdHJpbmcuc3Vic3RyKDMsIHRlbXBsYXRlZFN0cmluZy5sZW5ndGggLSA0KVxuICAgICAgICAgICAgICAgICAgICAgIDogdGVtcGxhdGVkU3RyaW5nLnN1YnN0cigyLCB0ZW1wbGF0ZWRTdHJpbmcubGVuZ3RoIC0gMyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICAgPSAoJC5pc1BsYWluT2JqZWN0KHVybERhdGEpICYmIHVybERhdGFbdmFyaWFibGVdICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgPyB1cmxEYXRhW3ZhcmlhYmxlXVxuICAgICAgICAgICAgICAgICAgICAgIDogKCRtb2R1bGUuZGF0YSh2YXJpYWJsZSkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJG1vZHVsZS5kYXRhKHZhcmlhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoJGNvbnRleHQuZGF0YSh2YXJpYWJsZSkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAkY29udGV4dC5kYXRhKHZhcmlhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVybERhdGFbdmFyaWFibGVdXG4gICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAvLyBvcHRpb25hbCByZXBsYWNlbWVudFxuICAgICAgICAgICAgICAgICAgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnT3B0aW9uYWwgdmFyaWFibGUgRm91bmQnLCB2YXJpYWJsZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSh0ZW1wbGF0ZWRTdHJpbmcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnT3B0aW9uYWwgdmFyaWFibGUgbm90IGZvdW5kJywgdmFyaWFibGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgcHJlY2VkaW5nIHNsYXNoIGlmIHNldFxuICAgICAgICAgICAgICAgICAgICBpZih1cmwuaW5kZXhPZignLycgKyB0ZW1wbGF0ZWRTdHJpbmcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCcvJyArIHRlbXBsYXRlZFN0cmluZywgJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHRlbXBsYXRlZFN0cmluZywgJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb3JtRGF0YTogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGNhblNlcmlhbGl6ZSA9ICgkLmZuLnNlcmlhbGl6ZU9iamVjdCAhPT0gdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgZm9ybURhdGEgICAgID0gKGNhblNlcmlhbGl6ZSlcbiAgICAgICAgICAgICAgICA/ICRmb3JtLnNlcmlhbGl6ZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgOiAkZm9ybS5zZXJpYWxpemUoKSxcbiAgICAgICAgICAgICAgaGFzT3RoZXJEYXRhXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBkYXRhICAgICAgICAgPSBkYXRhIHx8IHNldHRpbmdzLmRhdGE7XG4gICAgICAgICAgICBoYXNPdGhlckRhdGEgPSAkLmlzUGxhaW5PYmplY3QoZGF0YSk7XG5cbiAgICAgICAgICAgIGlmKGhhc090aGVyRGF0YSkge1xuICAgICAgICAgICAgICBpZihjYW5TZXJpYWxpemUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0V4dGVuZGluZyBleGlzdGluZyBkYXRhIHdpdGggZm9ybSBkYXRhJywgZGF0YSwgZm9ybURhdGEpO1xuICAgICAgICAgICAgICAgIGRhdGEgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGF0YSwgZm9ybURhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5taXNzaW5nU2VyaWFsaXplKTtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NhbnQgZXh0ZW5kIGRhdGEuIFJlcGxhY2luZyBkYXRhIHdpdGggZm9ybSBkYXRhJywgZGF0YSwgZm9ybURhdGEpO1xuICAgICAgICAgICAgICAgIGRhdGEgPSBmb3JtRGF0YTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQWRkaW5nIGZvcm0gZGF0YScsIGZvcm1EYXRhKTtcbiAgICAgICAgICAgICAgZGF0YSA9IGZvcm1EYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNlbmQ6IHtcbiAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS5zZXQubG9hZGluZygpO1xuICAgICAgICAgICAgbW9kdWxlLnJlcXVlc3QgPSBtb2R1bGUuY3JlYXRlLnJlcXVlc3QoKTtcbiAgICAgICAgICAgIGlmKCBtb2R1bGUuaXMubW9ja2VkKCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5tb2NrZWRYSFIgPSBtb2R1bGUuY3JlYXRlLm1vY2tlZFhIUigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS54aHIgPSBtb2R1bGUuY3JlYXRlLnhocigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGluZ3Mub25SZXF1ZXN0LmNhbGwoY29udGV4dCwgbW9kdWxlLnJlcXVlc3QsIG1vZHVsZS54aHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBldmVudDoge1xuICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBtb2R1bGUucXVlcnkoKTtcbiAgICAgICAgICAgIGlmKGV2ZW50LnR5cGUgPT0gJ3N1Ym1pdCcgfHwgZXZlbnQudHlwZSA9PSAnY2xpY2snKSB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB4aHI6IHtcbiAgICAgICAgICAgIGFsd2F5czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIG5vdGhpbmcgc3BlY2lhbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRvbmU6IGZ1bmN0aW9uKHJlc3BvbnNlLCB0ZXh0U3RhdHVzLCB4aHIpIHtcbiAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgY29udGV4dCAgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgICAgICBlbGFwc2VkVGltZSAgICAgICAgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSByZXF1ZXN0U3RhcnRUaW1lKSxcbiAgICAgICAgICAgICAgICB0aW1lTGVmdCAgICAgICAgICAgPSAoc2V0dGluZ3MubG9hZGluZ0R1cmF0aW9uIC0gZWxhcHNlZFRpbWUpLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZWRSZXNwb25zZSA9ICggJC5pc0Z1bmN0aW9uKHNldHRpbmdzLm9uUmVzcG9uc2UpIClcbiAgICAgICAgICAgICAgICAgID8gbW9kdWxlLmlzLmV4cGVjdGluZ0pTT04oKVxuICAgICAgICAgICAgICAgICAgICA/IHNldHRpbmdzLm9uUmVzcG9uc2UuY2FsbChjb250ZXh0LCAkLmV4dGVuZCh0cnVlLCB7fSwgcmVzcG9uc2UpKVxuICAgICAgICAgICAgICAgICAgICA6IHNldHRpbmdzLm9uUmVzcG9uc2UuY2FsbChjb250ZXh0LCByZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICB0aW1lTGVmdCA9ICh0aW1lTGVmdCA+IDApXG4gICAgICAgICAgICAgICAgPyB0aW1lTGVmdFxuICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIGlmKHRyYW5zbGF0ZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnTW9kaWZpZWQgQVBJIHJlc3BvbnNlIGluIG9uUmVzcG9uc2UgY2FsbGJhY2snLCBzZXR0aW5ncy5vblJlc3BvbnNlLCB0cmFuc2xhdGVkUmVzcG9uc2UsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHRyYW5zbGF0ZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZih0aW1lTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Jlc3BvbnNlIGNvbXBsZXRlZCBlYXJseSBkZWxheWluZyBzdGF0ZSBjaGFuZ2UgYnknLCB0aW1lTGVmdCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiggbW9kdWxlLmlzLnZhbGlkUmVzcG9uc2UocmVzcG9uc2UpICkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLnJlcXVlc3QucmVzb2x2ZVdpdGgoY29udGV4dCwgW3Jlc3BvbnNlLCB4aHJdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBtb2R1bGUucmVxdWVzdC5yZWplY3RXaXRoKGNvbnRleHQsIFt4aHIsICdpbnZhbGlkJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgdGltZUxlZnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBodHRwTWVzc2FnZSkge1xuICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBjb250ZXh0ICAgICA9IHRoaXMsXG4gICAgICAgICAgICAgICAgZWxhcHNlZFRpbWUgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSByZXF1ZXN0U3RhcnRUaW1lKSxcbiAgICAgICAgICAgICAgICB0aW1lTGVmdCAgICA9IChzZXR0aW5ncy5sb2FkaW5nRHVyYXRpb24gLSBlbGFwc2VkVGltZSlcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICB0aW1lTGVmdCA9ICh0aW1lTGVmdCA+IDApXG4gICAgICAgICAgICAgICAgPyB0aW1lTGVmdFxuICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIGlmKHRpbWVMZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnUmVzcG9uc2UgY29tcGxldGVkIGVhcmx5IGRlbGF5aW5nIHN0YXRlIGNoYW5nZSBieScsIHRpbWVMZWZ0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmKCBtb2R1bGUuaXMuYWJvcnRlZFJlcXVlc3QoeGhyKSApIHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS5yZXF1ZXN0LnJlamVjdFdpdGgoY29udGV4dCwgW3hociwgJ2Fib3J0ZWQnLCBodHRwTWVzc2FnZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS5yZXF1ZXN0LnJlamVjdFdpdGgoY29udGV4dCwgW3hociwgJ2Vycm9yJywgc3RhdHVzLCBodHRwTWVzc2FnZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgdGltZUxlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgICAgZG9uZTogZnVuY3Rpb24ocmVzcG9uc2UsIHhocikge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1N1Y2Nlc3NmdWwgQVBJIFJlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICBpZihzZXR0aW5ncy5jYWNoZSA9PT0gJ2xvY2FsJyAmJiB1cmwpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUud3JpdGUuY2FjaGVkUmVzcG9uc2UodXJsLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTYXZpbmcgc2VydmVyIHJlc3BvbnNlIGxvY2FsbHknLCBtb2R1bGUuY2FjaGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNldHRpbmdzLm9uU3VjY2Vzcy5jYWxsKGNvbnRleHQsIHJlc3BvbnNlLCAkbW9kdWxlLCB4aHIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihmaXJzdFBhcmFtZXRlciwgc2Vjb25kUGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHhocixcbiAgICAgICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIC8vIGhhdmUgdG8gZ3Vlc3MgY2FsbGJhY2sgcGFyYW1ldGVycyBiYXNlZCBvbiByZXF1ZXN0IHN1Y2Nlc3NcbiAgICAgICAgICAgICAgaWYoIG1vZHVsZS53YXMuc3VjY2VzZnVsKCkgKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBmaXJzdFBhcmFtZXRlcjtcbiAgICAgICAgICAgICAgICB4aHIgICAgICA9IHNlY29uZFBhcmFtZXRlcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB4aHIgICAgICA9IGZpcnN0UGFyYW1ldGVyO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gbW9kdWxlLmdldC5yZXNwb25zZUZyb21YSFIoeGhyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBtb2R1bGUucmVtb3ZlLmxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgc2V0dGluZ3Mub25Db21wbGV0ZS5jYWxsKGNvbnRleHQsIHJlc3BvbnNlLCAkbW9kdWxlLCB4aHIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBodHRwTWVzc2FnZSkge1xuICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAvLyBwdWxsIHJlc3BvbnNlIGZyb20geGhyIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIHJlc3BvbnNlICAgICA9IG1vZHVsZS5nZXQucmVzcG9uc2VGcm9tWEhSKHhociksXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gbW9kdWxlLmdldC5lcnJvckZyb21SZXF1ZXN0KHJlc3BvbnNlLCBzdGF0dXMsIGh0dHBNZXNzYWdlKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIGlmKHN0YXR1cyA9PSAnYWJvcnRlZCcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1hIUiBBYm9ydGVkIChNb3N0IGxpa2VseSBjYXVzZWQgYnkgcGFnZSBuYXZpZ2F0aW9uIG9yIENPUlMgUG9saWN5KScsIHN0YXR1cywgaHR0cE1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uQWJvcnQuY2FsbChjb250ZXh0LCBzdGF0dXMsICRtb2R1bGUsIHhocik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZihzdGF0dXMgPT0gJ2ludmFsaWQnKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdKU09OIGRpZCBub3QgcGFzcyBzdWNjZXNzIHRlc3QuIEEgc2VydmVyLXNpZGUgZXJyb3IgaGFzIG1vc3QgbGlrZWx5IG9jY3VycmVkJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoc3RhdHVzID09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICBpZih4aHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdYSFIgcHJvZHVjZWQgYSBzZXJ2ZXIgZXJyb3InLCBzdGF0dXMsIGh0dHBNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBoYXZlIGFuIGVycm9yIHRvIGRpc3BsYXkgdG8gY29uc29sZVxuICAgICAgICAgICAgICAgICAgaWYoIHhoci5zdGF0dXMgIT0gMjAwICYmIGh0dHBNZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgaHR0cE1lc3NhZ2UgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5zdGF0dXNNZXNzYWdlICsgaHR0cE1lc3NhZ2UsIGFqYXhTZXR0aW5ncy51cmwpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25FcnJvci5jYWxsKGNvbnRleHQsIGVycm9yTWVzc2FnZSwgJG1vZHVsZSwgeGhyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZihzZXR0aW5ncy5lcnJvckR1cmF0aW9uICYmIHN0YXR1cyAhPT0gJ2Fib3J0ZWQnKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdBZGRpbmcgZXJyb3Igc3RhdGUnKTtcbiAgICAgICAgICAgICAgICBtb2R1bGUuc2V0LmVycm9yKCk7XG4gICAgICAgICAgICAgICAgaWYoIG1vZHVsZS5zaG91bGQucmVtb3ZlRXJyb3IoKSApIHtcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobW9kdWxlLnJlbW92ZS5lcnJvciwgc2V0dGluZ3MuZXJyb3JEdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQVBJIFJlcXVlc3QgZmFpbGVkJywgZXJyb3JNZXNzYWdlLCB4aHIpO1xuICAgICAgICAgICAgICBzZXR0aW5ncy5vbkZhaWx1cmUuY2FsbChjb250ZXh0LCByZXNwb25zZSwgJG1vZHVsZSwgeGhyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlOiB7XG5cbiAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGFwaSByZXF1ZXN0IHByb21pc2VcbiAgICAgICAgICAgIHJldHVybiAkLkRlZmVycmVkKClcbiAgICAgICAgICAgICAgLmFsd2F5cyhtb2R1bGUuZXZlbnQucmVxdWVzdC5jb21wbGV0ZSlcbiAgICAgICAgICAgICAgLmRvbmUobW9kdWxlLmV2ZW50LnJlcXVlc3QuZG9uZSlcbiAgICAgICAgICAgICAgLmZhaWwobW9kdWxlLmV2ZW50LnJlcXVlc3QuZmFpbClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgbW9ja2VkWEhSOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgLy8geGhyIGRvZXMgbm90IHNpbXVsYXRlIHRoZXNlIHByb3BlcnRpZXMgb2YgeGhyIGJ1dCBtdXN0IHJldHVybiB0aGVtXG4gICAgICAgICAgICAgIHRleHRTdGF0dXMgICAgID0gZmFsc2UsXG4gICAgICAgICAgICAgIHN0YXR1cyAgICAgICAgID0gZmFsc2UsXG4gICAgICAgICAgICAgIGh0dHBNZXNzYWdlICAgID0gZmFsc2UsXG4gICAgICAgICAgICAgIHJlc3BvbmRlciAgICAgID0gc2V0dGluZ3MubW9ja1Jlc3BvbnNlICAgICAgfHwgc2V0dGluZ3MucmVzcG9uc2UsXG4gICAgICAgICAgICAgIGFzeW5jUmVzcG9uZGVyID0gc2V0dGluZ3MubW9ja1Jlc3BvbnNlQXN5bmMgfHwgc2V0dGluZ3MucmVzcG9uc2VBc3luYyxcbiAgICAgICAgICAgICAgYXN5bmNDYWxsYmFjayxcbiAgICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICAgIG1vY2tlZFhIUlxuICAgICAgICAgICAgO1xuXG4gICAgICAgICAgICBtb2NrZWRYSFIgPSAkLkRlZmVycmVkKClcbiAgICAgICAgICAgICAgLmFsd2F5cyhtb2R1bGUuZXZlbnQueGhyLmNvbXBsZXRlKVxuICAgICAgICAgICAgICAuZG9uZShtb2R1bGUuZXZlbnQueGhyLmRvbmUpXG4gICAgICAgICAgICAgIC5mYWlsKG1vZHVsZS5ldmVudC54aHIuZmFpbClcbiAgICAgICAgICAgIDtcblxuICAgICAgICAgICAgaWYocmVzcG9uZGVyKSB7XG4gICAgICAgICAgICAgIGlmKCAkLmlzRnVuY3Rpb24ocmVzcG9uZGVyKSApIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1VzaW5nIHNwZWNpZmllZCBzeW5jaHJvbm91cyBjYWxsYmFjaycsIHJlc3BvbmRlcik7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByZXNwb25kZXIuY2FsbChjb250ZXh0LCByZXF1ZXN0U2V0dGluZ3MpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVXNpbmcgc2V0dGluZ3Mgc3BlY2lmaWVkIHJlc3BvbnNlJywgcmVzcG9uZGVyKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHJlc3BvbmRlcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBzaW11bGF0aW5nIHJlc3BvbnNlXG4gICAgICAgICAgICAgIG1vY2tlZFhIUi5yZXNvbHZlV2l0aChjb250ZXh0LCBbIHJlc3BvbnNlLCB0ZXh0U3RhdHVzLCB7IHJlc3BvbnNlVGV4dDogcmVzcG9uc2UgfV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiggJC5pc0Z1bmN0aW9uKGFzeW5jUmVzcG9uZGVyKSApIHtcbiAgICAgICAgICAgICAgYXN5bmNDYWxsYmFjayA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdBc3luYyBjYWxsYmFjayByZXR1cm5lZCByZXNwb25zZScsIHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICBtb2NrZWRYSFIucmVzb2x2ZVdpdGgoY29udGV4dCwgWyByZXNwb25zZSwgdGV4dFN0YXR1cywgeyByZXNwb25zZVRleHQ6IHJlc3BvbnNlIH1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBtb2NrZWRYSFIucmVqZWN0V2l0aChjb250ZXh0LCBbeyByZXNwb25zZVRleHQ6IHJlc3BvbnNlIH0sIHN0YXR1cywgaHR0cE1lc3NhZ2VdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVXNpbmcgc3BlY2lmaWVkIGFzeW5jIHJlc3BvbnNlIGNhbGxiYWNrJywgYXN5bmNSZXNwb25kZXIpO1xuICAgICAgICAgICAgICBhc3luY1Jlc3BvbmRlci5jYWxsKGNvbnRleHQsIHJlcXVlc3RTZXR0aW5ncywgYXN5bmNDYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9ja2VkWEhSO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICB4aHI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHhoclxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgLy8gYWpheCByZXF1ZXN0IHByb21pc2VcbiAgICAgICAgICAgIHhociA9ICQuYWpheChhamF4U2V0dGluZ3MpXG4gICAgICAgICAgICAgIC5hbHdheXMobW9kdWxlLmV2ZW50Lnhoci5hbHdheXMpXG4gICAgICAgICAgICAgIC5kb25lKG1vZHVsZS5ldmVudC54aHIuZG9uZSlcbiAgICAgICAgICAgICAgLmZhaWwobW9kdWxlLmV2ZW50Lnhoci5mYWlsKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0NyZWF0ZWQgc2VydmVyIHJlcXVlc3QnLCB4aHIsIGFqYXhTZXR0aW5ncyk7XG4gICAgICAgICAgICByZXR1cm4geGhyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXQ6IHtcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQWRkaW5nIGVycm9yIHN0YXRlIHRvIGVsZW1lbnQnLCAkY29udGV4dCk7XG4gICAgICAgICAgICAkY29udGV4dC5hZGRDbGFzcyhjbGFzc05hbWUuZXJyb3IpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbG9hZGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnQWRkaW5nIGxvYWRpbmcgc3RhdGUgdG8gZWxlbWVudCcsICRjb250ZXh0KTtcbiAgICAgICAgICAgICRjb250ZXh0LmFkZENsYXNzKGNsYXNzTmFtZS5sb2FkaW5nKTtcbiAgICAgICAgICAgIHJlcXVlc3RTdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiB7XG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1JlbW92aW5nIGVycm9yIHN0YXRlIGZyb20gZWxlbWVudCcsICRjb250ZXh0KTtcbiAgICAgICAgICAgICRjb250ZXh0LnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5lcnJvcik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsb2FkaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZW1vdmluZyBsb2FkaW5nIHN0YXRlIGZyb20gZWxlbWVudCcsICRjb250ZXh0KTtcbiAgICAgICAgICAgICRjb250ZXh0LnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5sb2FkaW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgcmVzcG9uc2VGcm9tWEhSOiBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmlzUGxhaW5PYmplY3QoeGhyKVxuICAgICAgICAgICAgICA/IChtb2R1bGUuaXMuZXhwZWN0aW5nSlNPTigpKVxuICAgICAgICAgICAgICAgID8gbW9kdWxlLmRlY29kZS5qc29uKHhoci5yZXNwb25zZVRleHQpXG4gICAgICAgICAgICAgICAgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yRnJvbVJlcXVlc3Q6IGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMsIGh0dHBNZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gKCQuaXNQbGFpbk9iamVjdChyZXNwb25zZSkgJiYgcmVzcG9uc2UuZXJyb3IgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgPyByZXNwb25zZS5lcnJvciAvLyB1c2UganNvbiBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgIDogKHNldHRpbmdzLmVycm9yW3N0YXR1c10gIT09IHVuZGVmaW5lZCkgLy8gdXNlIHNlcnZlciBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgICAgPyBzZXR0aW5ncy5lcnJvcltzdGF0dXNdXG4gICAgICAgICAgICAgICAgOiBodHRwTWVzc2FnZVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlLnJlcXVlc3QgfHwgZmFsc2U7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB4aHI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS54aHIgfHwgZmFsc2U7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXR0aW5nczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgcnVuU2V0dGluZ3NcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHJ1blNldHRpbmdzID0gc2V0dGluZ3MuYmVmb3JlU2VuZC5jYWxsKGNvbnRleHQsIHNldHRpbmdzKTtcbiAgICAgICAgICAgIGlmKHJ1blNldHRpbmdzKSB7XG4gICAgICAgICAgICAgIGlmKHJ1blNldHRpbmdzLnN1Y2Nlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnTGVnYWN5IHN1Y2Nlc3MgY2FsbGJhY2sgZGV0ZWN0ZWQnLCBydW5TZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLmxlZ2FjeVBhcmFtZXRlcnMsIHJ1blNldHRpbmdzLnN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIHJ1blNldHRpbmdzLm9uU3VjY2VzcyA9IHJ1blNldHRpbmdzLnN1Y2Nlc3M7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYocnVuU2V0dGluZ3MuZmFpbHVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdMZWdhY3kgZmFpbHVyZSBjYWxsYmFjayBkZXRlY3RlZCcsIHJ1blNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZXJyb3IoZXJyb3IubGVnYWN5UGFyYW1ldGVycywgcnVuU2V0dGluZ3MuZmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgcnVuU2V0dGluZ3Mub25GYWlsdXJlID0gcnVuU2V0dGluZ3MuZmFpbHVyZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZihydW5TZXR0aW5ncy5jb21wbGV0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdMZWdhY3kgY29tcGxldGUgY2FsbGJhY2sgZGV0ZWN0ZWQnLCBydW5TZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLmxlZ2FjeVBhcmFtZXRlcnMsIHJ1blNldHRpbmdzLmNvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICBydW5TZXR0aW5ncy5vbkNvbXBsZXRlID0gcnVuU2V0dGluZ3MuY29tcGxldGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHJ1blNldHRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm5vUmV0dXJuZWRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihydW5TZXR0aW5ncyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJ1blNldHRpbmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChydW5TZXR0aW5ncyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICA/ICQuZXh0ZW5kKHRydWUsIHt9LCBydW5TZXR0aW5ncylcbiAgICAgICAgICAgICAgOiAkLmV4dGVuZCh0cnVlLCB7fSwgc2V0dGluZ3MpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cmxFbmNvZGVkVmFsdWU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgZGVjb2RlZFZhbHVlICAgPSB3aW5kb3cuZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSxcbiAgICAgICAgICAgICAgZW5jb2RlZFZhbHVlICAgPSB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSxcbiAgICAgICAgICAgICAgYWxyZWFkeUVuY29kZWQgPSAoZGVjb2RlZFZhbHVlICE9PSB2YWx1ZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKGFscmVhZHlFbmNvZGVkKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVVJMIHZhbHVlIGlzIGFscmVhZHkgZW5jb2RlZCwgYXZvaWRpbmcgZG91YmxlIGVuY29kaW5nJywgdmFsdWUpO1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRW5jb2RpbmcgdmFsdWUgdXNpbmcgZW5jb2RlVVJJQ29tcG9uZW50JywgdmFsdWUsIGVuY29kZWRWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlZFZhbHVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVmYXVsdERhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGRhdGEgPSB7fVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoICEkLmlzV2luZG93KGVsZW1lbnQpICkge1xuICAgICAgICAgICAgICBpZiggbW9kdWxlLmlzLmlucHV0KCkgKSB7XG4gICAgICAgICAgICAgICAgZGF0YS52YWx1ZSA9ICRtb2R1bGUudmFsKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggbW9kdWxlLmlzLmZvcm0oKSApIHtcblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEudGV4dCA9ICRtb2R1bGUudGV4dCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGV2ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCAkLmlzV2luZG93KGVsZW1lbnQpIHx8IHNldHRpbmdzLm9uID09ICdub3cnICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0FQSSBjYWxsZWQgd2l0aG91dCBlbGVtZW50LCBubyBldmVudHMgYXR0YWNoZWQnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihzZXR0aW5ncy5vbiA9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgaWYoICRtb2R1bGUuaXMoJ2lucHV0JykgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChlbGVtZW50Lm9uaW5wdXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgID8gJ2lucHV0J1xuICAgICAgICAgICAgICAgICAgOiAoZWxlbWVudC5vbnByb3BlcnR5Y2hhbmdlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgID8gJ3Byb3BlcnR5Y2hhbmdlJ1xuICAgICAgICAgICAgICAgICAgICA6ICdrZXl1cCdcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggJG1vZHVsZS5pcygnZm9ybScpICkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnc3VibWl0JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2NsaWNrJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncy5vbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHRlbXBsYXRlZFVSTDogZnVuY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgICAgICBhY3Rpb24gPSBhY3Rpb24gfHwgJG1vZHVsZS5kYXRhKG1ldGFkYXRhLmFjdGlvbikgfHwgc2V0dGluZ3MuYWN0aW9uIHx8IGZhbHNlO1xuICAgICAgICAgICAgdXJsICAgID0gJG1vZHVsZS5kYXRhKG1ldGFkYXRhLnVybCkgfHwgc2V0dGluZ3MudXJsIHx8IGZhbHNlO1xuICAgICAgICAgICAgaWYodXJsKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVXNpbmcgc3BlY2lmaWVkIHVybCcsIHVybCk7XG4gICAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihhY3Rpb24pIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdMb29raW5nIHVwIHVybCBmb3IgYWN0aW9uJywgYWN0aW9uLCBzZXR0aW5ncy5hcGkpO1xuICAgICAgICAgICAgICBpZihzZXR0aW5ncy5hcGlbYWN0aW9uXSA9PT0gdW5kZWZpbmVkICYmICFtb2R1bGUuaXMubW9ja2VkKCkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuZXJyb3IoZXJyb3IubWlzc2luZ0FjdGlvbiwgc2V0dGluZ3MuYWN0aW9uLCBzZXR0aW5ncy5hcGkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cmwgPSBzZXR0aW5ncy5hcGlbYWN0aW9uXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoIG1vZHVsZS5pcy5mb3JtKCkgKSB7XG4gICAgICAgICAgICAgIHVybCA9ICRtb2R1bGUuYXR0cignYWN0aW9uJykgfHwgJGNvbnRleHQuYXR0cignYWN0aW9uJykgfHwgZmFsc2U7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnTm8gdXJsIG9yIGFjdGlvbiBzcGVjaWZpZWQsIGRlZmF1bHRpbmcgdG8gZm9ybSBhY3Rpb24nLCB1cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgeGhyID0gbW9kdWxlLmdldC54aHIoKVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiggeGhyICYmIHhoci5zdGF0ZSgpICE9PSAncmVzb2x2ZWQnKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NhbmNlbGxpbmcgQVBJIHJlcXVlc3QnKTtcbiAgICAgICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyByZXNldCBzdGF0ZVxuICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnJlbW92ZS5lcnJvcigpO1xuICAgICAgICAgIG1vZHVsZS5yZW1vdmUubG9hZGluZygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHRpbmc6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdDaGFuZ2luZyBzZXR0aW5nJywgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QobmFtZSkgKSB7XG4gICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBzZXR0aW5ncywgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYoJC5pc1BsYWluT2JqZWN0KHNldHRpbmdzW25hbWVdKSkge1xuICAgICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBzZXR0aW5nc1tuYW1lXSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHNldHRpbmdzW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzW25hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW50ZXJuYWw6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChuYW1lKSApIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIG1vZHVsZSwgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbW9kdWxlW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVtuYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlYnVnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50ICYmIHNldHRpbmdzLmRlYnVnKSB7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHZlcmJvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQgJiYgc2V0dGluZ3MudmVyYm9zZSAmJiBzZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZS5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQpIHtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvciA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvciwgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICBtb2R1bGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgICAgbG9nOiBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUsXG4gICAgICAgICAgICAgIGV4ZWN1dGlvblRpbWUsXG4gICAgICAgICAgICAgIHByZXZpb3VzVGltZVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICBwcmV2aW91c1RpbWUgID0gdGltZSB8fCBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZSA9IGN1cnJlbnRUaW1lIC0gcHJldmlvdXNUaW1lO1xuICAgICAgICAgICAgICB0aW1lICAgICAgICAgID0gY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIHBlcmZvcm1hbmNlLnB1c2goe1xuICAgICAgICAgICAgICAgICdOYW1lJyAgICAgICAgICAgOiBtZXNzYWdlWzBdLFxuICAgICAgICAgICAgICAgICdBcmd1bWVudHMnICAgICAgOiBbXS5zbGljZS5jYWxsKG1lc3NhZ2UsIDEpIHx8ICcnLFxuICAgICAgICAgICAgICAgIC8vJ0VsZW1lbnQnICAgICAgICA6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgJ0V4ZWN1dGlvbiBUaW1lJyA6IGV4ZWN1dGlvblRpbWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyKTtcbiAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lciA9IHNldFRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLmRpc3BsYXksIDUwMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNwbGF5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICB0aXRsZSA9IHNldHRpbmdzLm5hbWUgKyAnOicsXG4gICAgICAgICAgICAgIHRvdGFsVGltZSA9IDBcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHRpbWUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtb2R1bGUucGVyZm9ybWFuY2UudGltZXIpO1xuICAgICAgICAgICAgJC5lYWNoKHBlcmZvcm1hbmNlLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgICB0b3RhbFRpbWUgKz0gZGF0YVsnRXhlY3V0aW9uIFRpbWUnXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGl0bGUgKz0gJyAnICsgdG90YWxUaW1lICsgJ21zJztcbiAgICAgICAgICAgIGlmKG1vZHVsZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHRpdGxlICs9ICcgXFwnJyArIG1vZHVsZVNlbGVjdG9yICsgJ1xcJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggKGNvbnNvbGUuZ3JvdXAgIT09IHVuZGVmaW5lZCB8fCBjb25zb2xlLnRhYmxlICE9PSB1bmRlZmluZWQpICYmIHBlcmZvcm1hbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZCh0aXRsZSk7XG4gICAgICAgICAgICAgIGlmKGNvbnNvbGUudGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKHBlcmZvcm1hbmNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLmVhY2gocGVyZm9ybWFuY2UsIGZ1bmN0aW9uKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhWydOYW1lJ10gKyAnOiAnICsgZGF0YVsnRXhlY3V0aW9uIFRpbWUnXSsnbXMnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZXJmb3JtYW5jZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52b2tlOiBmdW5jdGlvbihxdWVyeSwgcGFzc2VkQXJndW1lbnRzLCBjb250ZXh0KSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBvYmplY3QgPSBpbnN0YW5jZSxcbiAgICAgICAgICAgIG1heERlcHRoLFxuICAgICAgICAgICAgZm91bmQsXG4gICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgIDtcbiAgICAgICAgICBwYXNzZWRBcmd1bWVudHMgPSBwYXNzZWRBcmd1bWVudHMgfHwgcXVlcnlBcmd1bWVudHM7XG4gICAgICAgICAgY29udGV4dCAgICAgICAgID0gZWxlbWVudCAgICAgICAgIHx8IGNvbnRleHQ7XG4gICAgICAgICAgaWYodHlwZW9mIHF1ZXJ5ID09ICdzdHJpbmcnICYmIG9iamVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeSAgICA9IHF1ZXJ5LnNwbGl0KC9bXFwuIF0vKTtcbiAgICAgICAgICAgIG1heERlcHRoID0gcXVlcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICQuZWFjaChxdWVyeSwgZnVuY3Rpb24oZGVwdGgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgIHZhciBjYW1lbENhc2VWYWx1ZSA9IChkZXB0aCAhPSBtYXhEZXB0aClcbiAgICAgICAgICAgICAgICA/IHZhbHVlICsgcXVlcnlbZGVwdGggKyAxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHF1ZXJ5W2RlcHRoICsgMV0uc2xpY2UoMSlcbiAgICAgICAgICAgICAgICA6IHF1ZXJ5XG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdCggb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXSApICYmIChkZXB0aCAhPSBtYXhEZXB0aCkgKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCBvYmplY3RbY2FtZWxDYXNlVmFsdWVdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSBvYmplY3RbY2FtZWxDYXNlVmFsdWVdO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCAkLmlzUGxhaW5PYmplY3QoIG9iamVjdFt2YWx1ZV0gKSAmJiAoZGVwdGggIT0gbWF4RGVwdGgpICkge1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IG9iamVjdFt2YWx1ZV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggb2JqZWN0W3ZhbHVlXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gb2JqZWN0W3ZhbHVlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm1ldGhvZCwgcXVlcnkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggJC5pc0Z1bmN0aW9uKCBmb3VuZCApICkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBmb3VuZC5hcHBseShjb250ZXh0LCBwYXNzZWRBcmd1bWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKGZvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCQuaXNBcnJheShyZXR1cm5lZFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZS5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXR1cm5lZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSBbcmV0dXJuZWRWYWx1ZSwgcmVzcG9uc2VdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSByZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZihtZXRob2RJbnZva2VkKSB7XG4gICAgICAgIGlmKGluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIG1vZHVsZS5pbnZva2UocXVlcnkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmKGluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpbnN0YW5jZS5pbnZva2UoJ2Rlc3Ryb3knKTtcbiAgICAgICAgfVxuICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIDtcblxuICByZXR1cm4gKHJldHVybmVkVmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICA/IHJldHVybmVkVmFsdWVcbiAgICA6IHRoaXNcbiAgO1xufTtcblxuJC5hcGkuc2V0dGluZ3MgPSB7XG5cbiAgbmFtZSAgICAgICAgICAgICAgOiAnQVBJJyxcbiAgbmFtZXNwYWNlICAgICAgICAgOiAnYXBpJyxcblxuICBkZWJ1ZyAgICAgICAgICAgICA6IGZhbHNlLFxuICB2ZXJib3NlICAgICAgICAgICA6IGZhbHNlLFxuICBwZXJmb3JtYW5jZSAgICAgICA6IHRydWUsXG5cbiAgLy8gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHRlbXBsYXRlcyBlbmRwb2ludHNcbiAgYXBpICAgICAgICAgICAgICAgOiB7fSxcblxuICAvLyB3aGV0aGVyIHRvIGNhY2hlIHJlc3BvbnNlc1xuICBjYWNoZSAgICAgICAgICAgICA6IHRydWUsXG5cbiAgLy8gd2hldGhlciBuZXcgcmVxdWVzdHMgc2hvdWxkIGFib3J0IHByZXZpb3VzIHJlcXVlc3RzXG4gIGludGVycnVwdFJlcXVlc3RzIDogdHJ1ZSxcblxuICAvLyBldmVudCBiaW5kaW5nXG4gIG9uICAgICAgICAgICAgICAgIDogJ2F1dG8nLFxuXG4gIC8vIGNvbnRleHQgZm9yIGFwcGx5aW5nIHN0YXRlIGNsYXNzZXNcbiAgc3RhdGVDb250ZXh0ICAgICAgOiBmYWxzZSxcblxuICAvLyBkdXJhdGlvbiBmb3IgbG9hZGluZyBzdGF0ZVxuICBsb2FkaW5nRHVyYXRpb24gICA6IDAsXG5cbiAgLy8gd2hldGhlciB0byBoaWRlIGVycm9ycyBhZnRlciBhIHBlcmlvZCBvZiB0aW1lXG4gIGhpZGVFcnJvciAgICAgICAgIDogJ2F1dG8nLFxuXG4gIC8vIGR1cmF0aW9uIGZvciBlcnJvciBzdGF0ZVxuICBlcnJvckR1cmF0aW9uICAgICA6IDIwMDAsXG5cbiAgLy8gd2hldGhlciBwYXJhbWV0ZXJzIHNob3VsZCBiZSBlbmNvZGVkIHdpdGggZW5jb2RlVVJJQ29tcG9uZW50XG4gIGVuY29kZVBhcmFtZXRlcnMgIDogdHJ1ZSxcblxuICAvLyBBUEkgYWN0aW9uIHRvIHVzZVxuICBhY3Rpb24gICAgICAgICAgICA6IGZhbHNlLFxuXG4gIC8vIHRlbXBsYXRlZCBVUkwgdG8gdXNlXG4gIHVybCAgICAgICAgICAgICAgIDogZmFsc2UsXG5cbiAgLy8gYmFzZSBVUkwgdG8gYXBwbHkgdG8gYWxsIGVuZHBvaW50c1xuICBiYXNlICAgICAgICAgICAgICA6ICcnLFxuXG4gIC8vIGRhdGEgdGhhdCB3aWxsXG4gIHVybERhdGEgICAgICAgICAgIDoge30sXG5cbiAgLy8gd2hldGhlciB0byBhZGQgZGVmYXVsdCBkYXRhIHRvIHVybCBkYXRhXG4gIGRlZmF1bHREYXRhICAgICAgICAgIDogdHJ1ZSxcblxuICAvLyB3aGV0aGVyIHRvIHNlcmlhbGl6ZSBjbG9zZXN0IGZvcm1cbiAgc2VyaWFsaXplRm9ybSAgICAgICAgOiBmYWxzZSxcblxuICAvLyBob3cgbG9uZyB0byB3YWl0IGJlZm9yZSByZXF1ZXN0IHNob3VsZCBvY2N1clxuICB0aHJvdHRsZSAgICAgICAgICAgICA6IDAsXG5cbiAgLy8gd2hldGhlciB0byB0aHJvdHRsZSBmaXJzdCByZXF1ZXN0IG9yIG9ubHkgcmVwZWF0ZWRcbiAgdGhyb3R0bGVGaXJzdFJlcXVlc3QgOiB0cnVlLFxuXG4gIC8vIHN0YW5kYXJkIGFqYXggc2V0dGluZ3NcbiAgbWV0aG9kICAgICAgICAgICAgOiAnZ2V0JyxcbiAgZGF0YSAgICAgICAgICAgICAgOiB7fSxcbiAgZGF0YVR5cGUgICAgICAgICAgOiAnanNvbicsXG5cbiAgLy8gbW9jayByZXNwb25zZVxuICBtb2NrUmVzcG9uc2UgICAgICA6IGZhbHNlLFxuICBtb2NrUmVzcG9uc2VBc3luYyA6IGZhbHNlLFxuXG4gIC8vIGFsaWFzZXMgZm9yIG1vY2tcbiAgcmVzcG9uc2UgICAgICAgICAgOiBmYWxzZSxcbiAgcmVzcG9uc2VBc3luYyAgICAgOiBmYWxzZSxcblxuICAvLyBjYWxsYmFja3MgYmVmb3JlIHJlcXVlc3RcbiAgYmVmb3JlU2VuZCAgOiBmdW5jdGlvbihzZXR0aW5ncykgeyByZXR1cm4gc2V0dGluZ3M7IH0sXG4gIGJlZm9yZVhIUiAgIDogZnVuY3Rpb24oeGhyKSB7fSxcbiAgb25SZXF1ZXN0ICAgOiBmdW5jdGlvbihwcm9taXNlLCB4aHIpIHt9LFxuXG4gIC8vIGFmdGVyIHJlcXVlc3RcbiAgb25SZXNwb25zZSAgOiBmYWxzZSwgLy8gZnVuY3Rpb24ocmVzcG9uc2UpIHsgfSxcblxuICAvLyByZXNwb25zZSB3YXMgc3VjY2Vzc2Z1bCwgaWYgSlNPTiBwYXNzZWQgdmFsaWRhdGlvblxuICBvblN1Y2Nlc3MgICA6IGZ1bmN0aW9uKHJlc3BvbnNlLCAkbW9kdWxlKSB7fSxcblxuICAvLyByZXF1ZXN0IGZpbmlzaGVkIHdpdGhvdXQgYWJvcnRpbmdcbiAgb25Db21wbGV0ZSAgOiBmdW5jdGlvbihyZXNwb25zZSwgJG1vZHVsZSkge30sXG5cbiAgLy8gZmFpbGVkIEpTT04gc3VjY2VzcyB0ZXN0XG4gIG9uRmFpbHVyZSAgIDogZnVuY3Rpb24ocmVzcG9uc2UsICRtb2R1bGUpIHt9LFxuXG4gIC8vIHNlcnZlciBlcnJvclxuICBvbkVycm9yICAgICA6IGZ1bmN0aW9uKGVycm9yTWVzc2FnZSwgJG1vZHVsZSkge30sXG5cbiAgLy8gcmVxdWVzdCBhYm9ydGVkXG4gIG9uQWJvcnQgICAgIDogZnVuY3Rpb24oZXJyb3JNZXNzYWdlLCAkbW9kdWxlKSB7fSxcblxuICBzdWNjZXNzVGVzdCA6IGZhbHNlLFxuXG4gIC8vIGVycm9yc1xuICBlcnJvciA6IHtcbiAgICBiZWZvcmVTZW5kICAgICAgICA6ICdUaGUgYmVmb3JlIHNlbmQgZnVuY3Rpb24gaGFzIGFib3J0ZWQgdGhlIHJlcXVlc3QnLFxuICAgIGVycm9yICAgICAgICAgICAgIDogJ1RoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHlvdXIgcmVxdWVzdCcsXG4gICAgZXhpdENvbmRpdGlvbnMgICAgOiAnQVBJIFJlcXVlc3QgQWJvcnRlZC4gRXhpdCBjb25kaXRpb25zIG1ldCcsXG4gICAgSlNPTlBhcnNlICAgICAgICAgOiAnSlNPTiBjb3VsZCBub3QgYmUgcGFyc2VkIGR1cmluZyBlcnJvciBoYW5kbGluZycsXG4gICAgbGVnYWN5UGFyYW1ldGVycyAgOiAnWW91IGFyZSB1c2luZyBsZWdhY3kgQVBJIHN1Y2Nlc3MgY2FsbGJhY2sgbmFtZXMnLFxuICAgIG1ldGhvZCAgICAgICAgICAgIDogJ1RoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZCcsXG4gICAgbWlzc2luZ0FjdGlvbiAgICAgOiAnQVBJIGFjdGlvbiB1c2VkIGJ1dCBubyB1cmwgd2FzIGRlZmluZWQnLFxuICAgIG1pc3NpbmdTZXJpYWxpemUgIDogJ2pxdWVyeS1zZXJpYWxpemUtb2JqZWN0IGlzIHJlcXVpcmVkIHRvIGFkZCBmb3JtIGRhdGEgdG8gYW4gZXhpc3RpbmcgZGF0YSBvYmplY3QnLFxuICAgIG1pc3NpbmdVUkwgICAgICAgIDogJ05vIFVSTCBzcGVjaWZpZWQgZm9yIGFwaSBldmVudCcsXG4gICAgbm9SZXR1cm5lZFZhbHVlICAgOiAnVGhlIGJlZm9yZVNlbmQgY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBzZXR0aW5ncyBvYmplY3QsIGJlZm9yZVNlbmQgaWdub3JlZC4nLFxuICAgIG5vU3RvcmFnZSAgICAgICAgIDogJ0NhY2hpbmcgcmVzcG9uc2VzIGxvY2FsbHkgcmVxdWlyZXMgc2Vzc2lvbiBzdG9yYWdlJyxcbiAgICBwYXJzZUVycm9yICAgICAgICA6ICdUaGVyZSB3YXMgYW4gZXJyb3IgcGFyc2luZyB5b3VyIHJlcXVlc3QnLFxuICAgIHJlcXVpcmVkUGFyYW1ldGVyIDogJ01pc3NpbmcgYSByZXF1aXJlZCBVUkwgcGFyYW1ldGVyOiAnLFxuICAgIHN0YXR1c01lc3NhZ2UgICAgIDogJ1NlcnZlciBnYXZlIGFuIGVycm9yOiAnLFxuICAgIHRpbWVvdXQgICAgICAgICAgIDogJ1lvdXIgcmVxdWVzdCB0aW1lZCBvdXQnXG4gIH0sXG5cbiAgcmVnRXhwICA6IHtcbiAgICByZXF1aXJlZCA6IC9cXHtcXCQqW0EtejAtOV0rXFx9L2csXG4gICAgb3B0aW9uYWwgOiAvXFx7XFwvXFwkKltBLXowLTldK1xcfS9nLFxuICB9LFxuXG4gIGNsYXNzTmFtZToge1xuICAgIGxvYWRpbmcgOiAnbG9hZGluZycsXG4gICAgZXJyb3IgICA6ICdlcnJvcidcbiAgfSxcblxuICBzZWxlY3Rvcjoge1xuICAgIGRpc2FibGVkIDogJy5kaXNhYmxlZCcsXG4gICAgZm9ybSAgICAgIDogJ2Zvcm0nXG4gIH0sXG5cbiAgbWV0YWRhdGE6IHtcbiAgICBhY3Rpb24gIDogJ2FjdGlvbicsXG4gICAgdXJsICAgICA6ICd1cmwnXG4gIH1cbn07XG5cblxuXG59KSggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50ICk7XG4iXX0=
