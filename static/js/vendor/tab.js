!function(e,t,a,n){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.tab=function(i){var o,r=e(e.isFunction(this)?t:this),s=r.selector||"",c=(new Date).getTime(),l=[],d=arguments[0],u="string"==typeof d,b=[].slice.call(arguments,1),g=!1;return r.each(function(){var f,h,p,m,v,y,T=e.isPlainObject(i)?e.extend(!0,{},e.fn.tab.settings,i):e.extend({},e.fn.tab.settings),L=T.className,x=T.metadata,A=T.selector,P=T.error,C="."+T.namespace,F="module-"+T.namespace,S=e(this),j={},E=!0,w=0,k=this,I=S.data(F);v={initialize:function(){v.debug("Initializing tab menu item",S),v.fix.callbacks(),v.determineTabs(),v.debug("Determining tabs",T.context,h),T.auto&&v.set.auto(),v.bind.events(),T.history&&!g&&(v.initializeHistory(),g=!0),v.instantiate()},instantiate:function(){v.verbose("Storing instance of module",v),I=v,S.data(F,v)},destroy:function(){v.debug("Destroying tabs",S),S.removeData(F).off(C)},bind:{events:function(){e.isWindow(k)||(v.debug("Attaching tab activation events to element",S),S.on("click"+C,v.event.click))}},determineTabs:function(){var t;"parent"===T.context?(S.closest(A.ui).length>0?(t=S.closest(A.ui),v.verbose("Using closest UI element as parent",t)):t=S,f=t.parent(),v.verbose("Determined parent element for creating context",f)):T.context?(f=e(T.context),v.verbose("Using selector for tab context",T.context,f)):f=e("body"),T.childrenOnly?(h=f.children(A.tabs),v.debug("Searching tab context children for tabs",f,h)):(h=f.find(A.tabs),v.debug("Searching tab context for tabs",f,h))},fix:{callbacks:function(){e.isPlainObject(i)&&(i.onTabLoad||i.onTabInit)&&(i.onTabLoad&&(i.onLoad=i.onTabLoad,delete i.onTabLoad,v.error(P.legacyLoad,i.onLoad)),i.onTabInit&&(i.onFirstLoad=i.onTabInit,delete i.onTabInit,v.error(P.legacyInit,i.onFirstLoad)),T=e.extend(!0,{},e.fn.tab.settings,i))}},initializeHistory:function(){if(v.debug("Initializing page state"),e.address===n)return v.error(P.state),!1;if("state"==T.historyType){if(v.debug("Using HTML5 to manage state"),T.path===!1)return v.error(P.path),!1;e.address.history(!0).state(T.path)}e.address.bind("change",v.event.history.change)},event:{click:function(t){var a=e(this).data(x.tab);a!==n?(T.history?(v.verbose("Updating page state",t),e.address.value(a)):(v.verbose("Changing tab",t),v.changeTab(a)),t.preventDefault()):v.debug("No tab specified")},history:{change:function(t){var a=t.pathNames.join("/")||v.get.initialPath(),i=T.templates.determineTitle(a)||!1;v.performance.display(),v.debug("History change event",a,t),y=t,a!==n&&v.changeTab(a),i&&e.address.title(i)}}},refresh:function(){p&&(v.debug("Refreshing tab",p),v.changeTab(p))},cache:{read:function(e){return e!==n&&j[e]},add:function(e,t){e=e||p,v.debug("Adding cached content for",e),j[e]=t},remove:function(e){e=e||p,v.debug("Removing cached content for",e),delete j[e]}},set:{auto:function(){var t="string"==typeof T.path?T.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";v.verbose("Setting up automatic tab retrieval from server",t),e.isPlainObject(T.apiSettings)?T.apiSettings.url=t:T.apiSettings={url:t}},loading:function(e){var t=v.get.tabElement(e),a=t.hasClass(L.loading);a||(v.verbose("Setting loading state for",t),t.addClass(L.loading).siblings(h).removeClass(L.active+" "+L.loading),t.length>0&&T.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(a){var n=t.history&&t.history.pushState,i=n&&T.ignoreFirstLoad&&E,o=T.auto||e.isPlainObject(T.apiSettings),r=o&&!i?v.utilities.pathToArray(a):v.get.defaultPathArray(a);a=v.utilities.arrayToPath(r),e.each(r,function(t,n){var s,c,l,d,u=r.slice(0,t+1),b=v.utilities.arrayToPath(u),g=v.is.tab(b),h=t+1==r.length,A=v.get.tabElement(b);if(v.verbose("Looking for tab",n),g){if(v.verbose("Tab was found",n),p=b,m=v.utilities.filterArray(r,u),h?d=!0:(c=r.slice(0,t+2),l=v.utilities.arrayToPath(c),d=!v.is.tab(l),d&&v.verbose("Tab parameters found",c)),d&&o)return i?(v.debug("Ignoring remote content on first tab load",b),E=!1,v.cache.add(a,A.html()),v.activate.all(b),T.onFirstLoad.call(A[0],b,m,y),T.onLoad.call(A[0],b,m,y)):(v.activate.navigation(b),v.fetch.content(b,a)),!1;v.debug("Opened local tab",b),v.activate.all(b),v.cache.read(b)||(v.cache.add(b,!0),v.debug("First time tab loaded calling tab init"),T.onFirstLoad.call(A[0],b,m,y)),T.onLoad.call(A[0],b,m,y)}else{if(a.search("/")!=-1||""===a)return v.error(P.missingTab,S,f,b),!1;if(s=e("#"+a+', a[name="'+a+'"]'),b=s.closest("[data-tab]").data(x.tab),A=v.get.tabElement(b),s&&s.length>0&&b)return v.debug("Anchor link used, opening parent tab",A,s),A.hasClass(L.active)||setTimeout(function(){v.scrollTo(s)},0),v.activate.all(b),v.cache.read(b)||(v.cache.add(b,!0),v.debug("First time tab loaded calling tab init"),T.onFirstLoad.call(A[0],b,m,y)),T.onLoad.call(A[0],b,m,y),!1}})},scrollTo:function(t){var n=!!(t&&t.length>0)&&t.offset().top;n!==!1&&(v.debug("Forcing scroll to an in-page link in a hidden tab",n,t),e(a).scrollTop(n))},update:{content:function(t,a,i){var o=v.get.tabElement(t),r=o[0];i=i!==n?i:T.evaluateScripts,"string"==typeof T.cacheType&&"dom"==T.cacheType.toLowerCase()&&"string"!=typeof a?o.empty().append(e(a).clone(!0)):i?(v.debug("Updating HTML and evaluating inline scripts",t,a),o.html(a)):(v.debug("Updating HTML",t,a),r.innerHTML=a)}},fetch:{content:function(t,a){var i,o,r=v.get.tabElement(t),s={dataType:"html",encodeParameters:!1,on:"now",cache:T.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==T.cacheType&&v.cache.add(a,e),v.update.content(t,e),t==p?(v.debug("Content loaded",t),v.activate.tab(t)):v.debug("Content loaded in background",t),T.onFirstLoad.call(r[0],t,m,y),T.onLoad.call(r[0],t,m,y),"string"==typeof T.cacheType&&"dom"==T.cacheType.toLowerCase()&&r.children().length>0?setTimeout(function(){var e=r.children().clone(!0);e=e.not("script"),v.cache.add(a,e)},0):v.cache.add(a,r.html())},urlData:{tab:a}},c=r.api("get request")||!1,l=c&&"pending"===c.state();a=a||t,o=v.cache.read(a),T.cache&&o?(v.activate.tab(t),v.debug("Adding cached content",a),"once"==T.evaluateScripts?v.update.content(t,o,!1):v.update.content(t,o),T.onLoad.call(r[0],t,m,y)):l?(v.set.loading(t),v.debug("Content is already loading",a)):e.api!==n?(i=e.extend(!0,{},T.apiSettings,s),v.debug("Retrieving remote content",a,i),v.set.loading(t),r.api(i)):v.error(P.api)}},activate:{all:function(e){v.activate.tab(e),v.activate.navigation(e)},tab:function(e){var t=v.get.tabElement(e),a="siblings"==T.deactivate?t.siblings(h):h.not(t),n=t.hasClass(L.active);v.verbose("Showing tab content for",t),n||(t.addClass(L.active),a.removeClass(L.active+" "+L.loading),t.length>0&&T.onVisible.call(t[0],e))},navigation:function(e){var t=v.get.navElement(e),a="siblings"==T.deactivate?t.siblings(r):r.not(t),n=t.hasClass(L.active);v.verbose("Activating tab navigation for",t,e),n||(t.addClass(L.active),a.removeClass(L.active+" "+L.loading))}},deactivate:{all:function(){v.deactivate.navigation(),v.deactivate.tabs()},navigation:function(){r.removeClass(L.active)},tabs:function(){h.removeClass(L.active+" "+L.loading)}},is:{tab:function(e){return e!==n&&v.get.tabElement(e).length>0}},get:{initialPath:function(){return r.eq(0).data(x.tab)||h.eq(0).data(x.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return v.utilities.pathToArray(v.get.defaultPath(e))},defaultPath:function(e){var t=r.filter("[data-"+x.tab+'^="'+e+'/"]').eq(0),a=t.data(x.tab)||!1;if(a){if(v.debug("Found default tab",a),w<T.maxDepth)return w++,v.get.defaultPath(a);v.error(P.recursion)}else v.debug("No default tabs found for",e,h);return w=0,e},navElement:function(e){return e=e||p,r.filter("[data-"+x.tab+'="'+e+'"]')},tabElement:function(e){var t,a,n,i;return e=e||p,n=v.utilities.pathToArray(e),i=v.utilities.last(n),t=h.filter("[data-"+x.tab+'="'+e+'"]'),a=h.filter("[data-"+x.tab+'="'+i+'"]'),t.length>0?t:a},tab:function(){return p}},utilities:{filterArray:function(t,a){return e.grep(t,function(t){return e.inArray(t,a)==-1})},last:function(t){return!!e.isArray(t)&&t[t.length-1]},pathToArray:function(e){return e===n&&(e=p),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return!!e.isArray(t)&&t.join("/")}},setting:function(t,a){if(v.debug("Changing setting",t,a),e.isPlainObject(t))e.extend(!0,T,t);else{if(a===n)return T[t];e.isPlainObject(T[t])?e.extend(!0,T[t],a):T[t]=a}},internal:function(t,a){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(a===n)return v[t];v[t]=a}},debug:function(){!T.silent&&T.debug&&(T.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,T.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!T.silent&&T.verbose&&T.debug&&(T.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,T.name+":"),v.verbose.apply(console,arguments)))},error:function(){T.silent||(v.error=Function.prototype.bind.call(console.error,console,T.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,a,n;T.performance&&(t=(new Date).getTime(),n=c||t,a=t-n,c=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":a})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=T.name+":",a=0;c=!1,clearTimeout(v.performance.timer),e.each(l,function(e,t){a+=t["Execution Time"]}),t+=" "+a+"ms",s&&(t+=" '"+s+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,a,i){var r,s,c,l=I;return a=a||b,i=k||i,"string"==typeof t&&l!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(a,i){var o=a!=r?i+t[a+1].charAt(0).toUpperCase()+t[a+1].slice(1):t;if(e.isPlainObject(l[o])&&a!=r)l=l[o];else{if(l[o]!==n)return s=l[o],!1;if(!e.isPlainObject(l[i])||a==r)return l[i]!==n?(s=l[i],!1):(v.error(P.method,t),!1);l=l[i]}})),e.isFunction(s)?c=s.apply(i,a):s!==n&&(c=s),e.isArray(o)?o.push(c):o!==n?o=[o,c]:c!==n&&(o=c),s}},u?(I===n&&v.initialize(),v.invoke(d)):(I!==n&&I.invoke("destroy"),v.initialize())}),o!==n?o:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,a){},onLoad:function(e,t,a){},onVisible:function(e,t,a){},onRequest:function(e,t,a){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci90YWIuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwiTWF0aCIsInNlbGYiLCJGdW5jdGlvbiIsImZuIiwidGFiIiwicGFyYW1ldGVycyIsInJldHVybmVkVmFsdWUiLCIkYWxsTW9kdWxlcyIsImlzRnVuY3Rpb24iLCJ0aGlzIiwibW9kdWxlU2VsZWN0b3IiLCJzZWxlY3RvciIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInBlcmZvcm1hbmNlIiwicXVlcnkiLCJhcmd1bWVudHMiLCJtZXRob2RJbnZva2VkIiwicXVlcnlBcmd1bWVudHMiLCJzbGljZSIsImNhbGwiLCJpbml0aWFsaXplZEhpc3RvcnkiLCJlYWNoIiwiJGNvbnRleHQiLCIkdGFicyIsImFjdGl2ZVRhYlBhdGgiLCJwYXJhbWV0ZXJBcnJheSIsIm1vZHVsZSIsImhpc3RvcnlFdmVudCIsInNldHRpbmdzIiwiaXNQbGFpbk9iamVjdCIsImV4dGVuZCIsImNsYXNzTmFtZSIsIm1ldGFkYXRhIiwiZXJyb3IiLCJldmVudE5hbWVzcGFjZSIsIm5hbWVzcGFjZSIsIm1vZHVsZU5hbWVzcGFjZSIsIiRtb2R1bGUiLCJjYWNoZSIsImZpcnN0TG9hZCIsInJlY3Vyc2lvbkRlcHRoIiwiZWxlbWVudCIsImluc3RhbmNlIiwiZGF0YSIsImluaXRpYWxpemUiLCJkZWJ1ZyIsImZpeCIsImNhbGxiYWNrcyIsImRldGVybWluZVRhYnMiLCJjb250ZXh0IiwiYXV0byIsInNldCIsImJpbmQiLCJldmVudHMiLCJoaXN0b3J5IiwiaW5pdGlhbGl6ZUhpc3RvcnkiLCJpbnN0YW50aWF0ZSIsInZlcmJvc2UiLCJkZXN0cm95IiwicmVtb3ZlRGF0YSIsIm9mZiIsImlzV2luZG93Iiwib24iLCJldmVudCIsImNsaWNrIiwiJHJlZmVyZW5jZSIsImNsb3Nlc3QiLCJ1aSIsImxlbmd0aCIsInBhcmVudCIsImNoaWxkcmVuT25seSIsImNoaWxkcmVuIiwidGFicyIsImZpbmQiLCJvblRhYkxvYWQiLCJvblRhYkluaXQiLCJvbkxvYWQiLCJsZWdhY3lMb2FkIiwib25GaXJzdExvYWQiLCJsZWdhY3lJbml0IiwiYWRkcmVzcyIsInN0YXRlIiwiaGlzdG9yeVR5cGUiLCJwYXRoIiwiY2hhbmdlIiwidGFiUGF0aCIsInZhbHVlIiwiY2hhbmdlVGFiIiwicHJldmVudERlZmF1bHQiLCJwYXRoTmFtZXMiLCJqb2luIiwiZ2V0IiwiaW5pdGlhbFBhdGgiLCJwYWdlVGl0bGUiLCJ0ZW1wbGF0ZXMiLCJkZXRlcm1pbmVUaXRsZSIsImRpc3BsYXkiLCJ0aXRsZSIsInJlZnJlc2giLCJyZWFkIiwiY2FjaGVLZXkiLCJhZGQiLCJjb250ZW50IiwicmVtb3ZlIiwidXJsIiwicmVwbGFjZSIsImFwaVNldHRpbmdzIiwibG9hZGluZyIsIiR0YWIiLCJ0YWJFbGVtZW50IiwiaXNMb2FkaW5nIiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJhY3RpdmUiLCJvblJlcXVlc3QiLCJwdXNoU3RhdGVBdmFpbGFibGUiLCJwdXNoU3RhdGUiLCJzaG91bGRJZ25vcmVMb2FkIiwiaWdub3JlRmlyc3RMb2FkIiwicmVtb3RlQ29udGVudCIsInBhdGhBcnJheSIsInV0aWxpdGllcyIsInBhdGhUb0FycmF5IiwiZGVmYXVsdFBhdGhBcnJheSIsImFycmF5VG9QYXRoIiwiaW5kZXgiLCIkYW5jaG9yIiwibmV4dFBhdGhBcnJheSIsIm5leHRQYXRoIiwiaXNMYXN0VGFiIiwiY3VycmVudFBhdGhBcnJheSIsImN1cnJlbnRQYXRoIiwiaXNUYWIiLCJpcyIsImlzTGFzdEluZGV4IiwiZmlsdGVyQXJyYXkiLCJodG1sIiwiYWN0aXZhdGUiLCJhbGwiLCJuYXZpZ2F0aW9uIiwiZmV0Y2giLCJzZWFyY2giLCJtaXNzaW5nVGFiIiwic2V0VGltZW91dCIsInNjcm9sbFRvIiwiJGVsZW1lbnQiLCJzY3JvbGxPZmZzZXQiLCJvZmZzZXQiLCJ0b3AiLCJzY3JvbGxUb3AiLCJ1cGRhdGUiLCJldmFsdWF0ZVNjcmlwdHMiLCJjYWNoZVR5cGUiLCJ0b0xvd2VyQ2FzZSIsImVtcHR5IiwiYXBwZW5kIiwiY2xvbmUiLCJpbm5lckhUTUwiLCJmdWxsVGFiUGF0aCIsInJlcXVlc3RTZXR0aW5ncyIsImNhY2hlZENvbnRlbnQiLCJkYXRhVHlwZSIsImVuY29kZVBhcmFtZXRlcnMiLCJhbHdheXNSZWZyZXNoIiwiaGVhZGVycyIsIlgtUmVtb3RlIiwib25TdWNjZXNzIiwicmVzcG9uc2UiLCIkY2xvbmUiLCJub3QiLCJ1cmxEYXRhIiwicmVxdWVzdCIsImFwaSIsImV4aXN0aW5nUmVxdWVzdCIsIiRkZWFjdGl2ZVRhYnMiLCJkZWFjdGl2YXRlIiwiaXNBY3RpdmUiLCJvblZpc2libGUiLCIkbmF2aWdhdGlvbiIsIm5hdkVsZW1lbnQiLCIkZGVhY3RpdmVOYXZpZ2F0aW9uIiwidGFiTmFtZSIsImVxIiwiZGVmYXVsdFBhdGgiLCIkZGVmYXVsdE5hdiIsImZpbHRlciIsImRlZmF1bHRUYWIiLCJtYXhEZXB0aCIsInJlY3Vyc2lvbiIsIiRmdWxsUGF0aFRhYiIsIiRzaW1wbGVQYXRoVGFiIiwidGFiUGF0aEFycmF5IiwibGFzdFRhYiIsImxhc3QiLCJrZWVwQXJyYXkiLCJyZW1vdmVBcnJheSIsImdyZXAiLCJrZWVwVmFsdWUiLCJpbkFycmF5IiwiYXJyYXkiLCJpc0FycmF5IiwicGF0aE5hbWUiLCJzcGxpdCIsInNldHRpbmciLCJuYW1lIiwiaW50ZXJuYWwiLCJzaWxlbnQiLCJsb2ciLCJwcm90b3R5cGUiLCJjb25zb2xlIiwiaW5mbyIsImFwcGx5IiwibWVzc2FnZSIsImN1cnJlbnRUaW1lIiwiZXhlY3V0aW9uVGltZSIsInByZXZpb3VzVGltZSIsInB1c2giLCJOYW1lIiwiQXJndW1lbnRzIiwiRWxlbWVudCIsIkV4ZWN1dGlvbiBUaW1lIiwiY2xlYXJUaW1lb3V0IiwidGltZXIiLCJ0b3RhbFRpbWUiLCJncm91cCIsInRhYmxlIiwiZ3JvdXBDb2xsYXBzZWQiLCJncm91cEVuZCIsImludm9rZSIsInBhc3NlZEFyZ3VtZW50cyIsImZvdW5kIiwib2JqZWN0IiwiZGVwdGgiLCJjYW1lbENhc2VWYWx1ZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwibWV0aG9kIiwidGFiQXJyYXkiLCJub0NvbnRlbnQiLCJsb2FkZWQiLCJwcm9taXNlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FVQyxTQUFXQSxFQUFHQyxFQUFRQyxFQUFVQyxHQUVqQyxZQUVBRixHQUEyQixtQkFBVkEsSUFBeUJBLEVBQU9HLE1BQVFBLEtBQ3JESCxFQUNnQixtQkFBUkksT0FBdUJBLEtBQUtELE1BQVFBLEtBQzFDQyxLQUNBQyxTQUFTLGlCQUdmTixFQUFFTyxHQUFHQyxJQUFNLFNBQVNDLEdBRWxCLEdBZUVDLEdBYkFDLEVBQ01YLEVBRFlBLEVBQUVZLFdBQVdDLE1BQ3ZCWixFQUNBWSxNQUVSQyxFQUFrQkgsRUFBWUksVUFBWSxHQUMxQ0MsR0FBa0IsR0FBSUMsT0FBT0MsVUFDN0JDLEtBRUFDLEVBQWtCQyxVQUFVLEdBQzVCQyxFQUFtQyxnQkFBVEYsR0FDMUJHLEtBQXFCQyxNQUFNQyxLQUFLSixVQUFXLEdBRTNDSyxHQUFxQixDQTR6QnZCLE9BeHpCQWYsR0FDR2dCLEtBQUssV0FDSixHQWVFQyxHQUNBQyxFQVFBQyxFQUNBQyxFQUNBQyxFQUVBQyxFQTFCQUMsRUFBb0JsQyxFQUFFbUMsY0FBYzFCLEdBQ2hDVCxFQUFFb0MsUUFBTyxLQUFVcEMsRUFBRU8sR0FBR0MsSUFBSTBCLFNBQVV6QixHQUN0Q1QsRUFBRW9DLFVBQVdwQyxFQUFFTyxHQUFHQyxJQUFJMEIsVUFFMUJHLEVBQWtCSCxFQUFTRyxVQUMzQkMsRUFBa0JKLEVBQVNJLFNBQzNCdkIsRUFBa0JtQixFQUFTbkIsU0FDM0J3QixFQUFrQkwsRUFBU0ssTUFFM0JDLEVBQWtCLElBQU1OLEVBQVNPLFVBQ2pDQyxFQUFrQixVQUFZUixFQUFTTyxVQUV2Q0UsRUFBa0IzQyxFQUFFYSxNQUlwQitCLEtBQ0FDLEdBQWtCLEVBQ2xCQyxFQUFrQixFQUNsQkMs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THhDLElBQWtCUCxFQUN0Qk8sRUFDQUcsTUFNTmIsRUFBRVEsSUFBTSxXQUNOUixFQUFFQyxHQUFRTyxJQUFJbU4sTUFBTTlNLEtBQU1RLFlBRzVCckIsRUFBRU8sR0FBR0MsSUFBSTBCLFVBRVBrTCxLQUFrQixNQUNsQjNLLFVBQWtCLE1BRWxCNkssUUFBa0IsRUFDbEJuSyxPQUFrQixFQUNsQlksU0FBa0IsRUFDbEI1QyxhQUFrQixFQUVsQnFDLE1BQWtCLEVBQ2xCSSxTQUFrQixFQUNsQjRCLFlBQWtCLE9BQ2xCQyxNQUFrQixFQUVsQmxDLFNBQWtCLEVBQ2xCcUIsY0FBa0IsRUFDbEJ1SCxTQUFrQixHQUVsQlosV0FBa0IsV0FFbEJaLGVBQWtCLEVBQ2xCL0gsT0FBa0IsRUFDbEJvSCxVQUFrQixXQUNsQmxDLGlCQUFrQixFQUVsQmQsYUFBa0IsRUFDbEIrQyxnQkFBa0IsT0FFbEIzRSxZQUFjLFNBQVNPLEVBQVM1RCxFQUFnQkUsS0FDaERpRCxPQUFjLFNBQVNTLEVBQVM1RCxFQUFnQkUsS0FDaER3SixVQUFjLFNBQVM5RixFQUFTNUQsRUFBZ0JFLEtBQ2hEeUYsVUFBYyxTQUFTL0IsRUFBUzVELEVBQWdCRSxLQUVoRG1FLFdBQ0VDLGVBQWdCLFNBQVNnSixNQUczQjlNLE9BQ0U2SSxJQUFhLG1EQUNiZ0UsT0FBYSx1Q0FDYjlGLFdBQWEsMERBQ2JnRyxVQUFhLGtEQUNiN0osS0FBYSw2Q0FDYjJHLFVBQWEsOEJBQ2IvRyxXQUFhLDZFQUNiRixXQUFhLHVFQUNiSSxNQUFhLHNGQUdmakQsVUFDRTlCLElBQVMsTUFDVCtPLE9BQVMsU0FDVEMsUUFBUyxXQUdYbk4sV0FDRTRFLFFBQVUsVUFDVlEsT0FBVSxVQUdaMUcsVUFDRStELEtBQU8sVUFDUEwsR0FBTyxTQUtQZ0wsT0FBUXhQLE9BQVFDIiwiZmlsZSI6InZlbmRvci90YWIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqICMgU2VtYW50aWMgVUkgMi4yLjcgLSBUYWJcbiAqIGh0dHA6Ly9naXRodWIuY29tL3NlbWFudGljLW9yZy9zZW1hbnRpYy11aS9cbiAqXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKlxuICovXG5cbjsoZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuXG5cInVzZSBzdHJpY3RcIjtcblxud2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aClcbiAgPyB3aW5kb3dcbiAgOiAodHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGgpXG4gICAgPyBzZWxmXG4gICAgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpXG47XG5cbiQuZm4udGFiID0gZnVuY3Rpb24ocGFyYW1ldGVycykge1xuXG4gIHZhclxuICAgIC8vIHVzZSB3aW5kb3cgY29udGV4dCBpZiBub25lIHNwZWNpZmllZFxuICAgICRhbGxNb2R1bGVzICAgICA9ICQuaXNGdW5jdGlvbih0aGlzKVxuICAgICAgICA/ICQod2luZG93KVxuICAgICAgICA6ICQodGhpcyksXG5cbiAgICBtb2R1bGVTZWxlY3RvciAgPSAkYWxsTW9kdWxlcy5zZWxlY3RvciB8fCAnJyxcbiAgICB0aW1lICAgICAgICAgICAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICBwZXJmb3JtYW5jZSAgICAgPSBbXSxcblxuICAgIHF1ZXJ5ICAgICAgICAgICA9IGFyZ3VtZW50c1swXSxcbiAgICBtZXRob2RJbnZva2VkICAgPSAodHlwZW9mIHF1ZXJ5ID09ICdzdHJpbmcnKSxcbiAgICBxdWVyeUFyZ3VtZW50cyAgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG5cbiAgICBpbml0aWFsaXplZEhpc3RvcnkgPSBmYWxzZSxcbiAgICByZXR1cm5lZFZhbHVlXG4gIDtcblxuICAkYWxsTW9kdWxlc1xuICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyXG5cbiAgICAgICAgc2V0dGluZ3MgICAgICAgID0gKCAkLmlzUGxhaW5PYmplY3QocGFyYW1ldGVycykgKVxuICAgICAgICAgID8gJC5leHRlbmQodHJ1ZSwge30sICQuZm4udGFiLnNldHRpbmdzLCBwYXJhbWV0ZXJzKVxuICAgICAgICAgIDogJC5leHRlbmQoe30sICQuZm4udGFiLnNldHRpbmdzKSxcblxuICAgICAgICBjbGFzc05hbWUgICAgICAgPSBzZXR0aW5ncy5jbGFzc05hbWUsXG4gICAgICAgIG1ldGFkYXRhICAgICAgICA9IHNldHRpbmdzLm1ldGFkYXRhLFxuICAgICAgICBzZWxlY3RvciAgICAgICAgPSBzZXR0aW5ncy5zZWxlY3RvcixcbiAgICAgICAgZXJyb3IgICAgICAgICAgID0gc2V0dGluZ3MuZXJyb3IsXG5cbiAgICAgICAgZXZlbnROYW1lc3BhY2UgID0gJy4nICsgc2V0dGluZ3MubmFtZXNwYWNlLFxuICAgICAgICBtb2R1bGVOYW1lc3BhY2UgPSAnbW9kdWxlLScgKyBzZXR0aW5ncy5uYW1lc3BhY2UsXG5cbiAgICAgICAgJG1vZHVsZSAgICAgICAgID0gJCh0aGlzKSxcbiAgICAgICAgJGNvbnRleHQsXG4gICAgICAgICR0YWJzLFxuXG4gICAgICAgIGNhY2hlICAgICAgICAgICA9IHt9LFxuICAgICAgICBmaXJzdExvYWQgICAgICAgPSB0cnVlLFxuICAgICAgICByZWN1cnNpb25EZXB0aCAgPSAwLFxuICAgICAgICBlbGVtZW50ICAgICAgICAgPSB0aGlzLFxuICAgICAgICBpbnN0YW5jZSAgICAgICAgPSAkbW9kdWxlLmRhdGEobW9kdWxlTmFtZXNwYWNlKSxcblxuICAgICAgICBhY3RpdmVUYWJQYXRoLFxuICAgICAgICBwYXJhbWV0ZXJBcnJheSxcbiAgICAgICAgbW9kdWxlLFxuXG4gICAgICAgIGhpc3RvcnlFdmVudFxuXG4gICAgICA7XG5cbiAgICAgIG1vZHVsZSA9IHtcblxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ0luaXRpYWxpemluZyB0YWIgbWVudSBpdGVtJywgJG1vZHVsZSk7XG4gICAgICAgICAgbW9kdWxlLmZpeC5jYWxsYmFja3MoKTtcbiAgICAgICAgICBtb2R1bGUuZGV0ZXJtaW5lVGFicygpO1xuXG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdEZXRlcm1pbmluZyB0YWJzJywgc2V0dGluZ3MuY29udGV4dCwgJHRhYnMpO1xuICAgICAgICAgIC8vIHNldCB1cCBhdXRvbWF0aWMgcm91dGluZ1xuICAgICAgICAgIGlmKHNldHRpbmdzLmF1dG8pIHtcbiAgICAgICAgICAgIG1vZHVsZS5zZXQuYXV0bygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2R1bGUuYmluZC5ldmVudHMoKTtcblxuICAgICAgICAgIGlmKHNldHRpbmdzLmhpc3RvcnkgJiYgIWluaXRpYWxpemVkSGlzdG9yeSkge1xuICAgICAgICAgICAgbW9kdWxlLmluaXRpYWxpemVIaXN0b3J5KCk7XG4gICAgICAgICAgICBpbml0aWFsaXplZEhpc3RvcnkgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1vZHVsZS5pbnN0YW50aWF0ZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluc3RhbnRpYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1N0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlJywgbW9kdWxlKTtcbiAgICAgICAgICBpbnN0YW5jZSA9IG1vZHVsZTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAuZGF0YShtb2R1bGVOYW1lc3BhY2UsIG1vZHVsZSlcbiAgICAgICAgICA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdEZXN0cm95aW5nIHRhYnMnLCAkbW9kdWxlKTtcbiAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAucmVtb3ZlRGF0YShtb2R1bGVOYW1lc3BhY2UpXG4gICAgICAgICAgICAub2ZmKGV2ZW50TmFtZXNwYWNlKVxuICAgICAgICAgIDtcbiAgICAgICAgfSxcblxuICAgICAgICBiaW5kOiB7XG4gICAgICAgICAgZXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGlmIHVzaW5nICQudGFiIGRvbid0IGFkZCBldmVudHNcbiAgICAgICAgICAgIGlmKCAhJC5pc1dpbmRvdyggZWxlbWVudCApICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0F0dGFjaGluZyB0YWIgYWN0aXZhdGlvbiBldmVudHMgdG8gZWxlbWVudCcsICRtb2R1bGUpO1xuICAgICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycgKyBldmVudE5hbWVzcGFjZSwgbW9kdWxlLmV2ZW50LmNsaWNrKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRldGVybWluZVRhYnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgJHJlZmVyZW5jZVxuICAgICAgICAgIDtcblxuICAgICAgICAgIC8vIGRldGVybWluZSB0YWIgY29udGV4dFxuICAgICAgICAgIGlmKHNldHRpbmdzLmNvbnRleHQgPT09ICdwYXJlbnQnKSB7XG4gICAgICAgICAgICBpZigkbW9kdWxlLmNsb3Nlc3Qoc2VsZWN0b3IudWkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgJHJlZmVyZW5jZSA9ICRtb2R1bGUuY2xvc2VzdChzZWxlY3Rvci51aSk7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdVc2luZyBjbG9zZXN0IFVJIGVsZW1lbnQgYXMgcGFyZW50JywgJHJlZmVyZW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgJHJlZmVyZW5jZSA9ICRtb2R1bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkY29udGV4dCA9ICRyZWZlcmVuY2UucGFyZW50KCk7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRGV0ZXJtaW5lZCBwYXJlbnQgZWxlbWVudCBmb3IgY3JlYXRpbmcgY29udGV4dCcsICRjb250ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihzZXR0aW5ncy5jb250ZXh0KSB7XG4gICAgICAgICAgICAkY29udGV4dCA9ICQoc2V0dGluZ3MuY29udGV4dCk7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnVXNpbmcgc2VsZWN0b3IgZm9yIHRhYiBjb250ZXh0Jywgc2V0dGluZ3MuY29udGV4dCwgJGNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICRjb250ZXh0ID0gJCgnYm9keScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBmaW5kIHRhYnNcbiAgICAgICAgICBpZihzZXR0aW5ncy5jaGlsZHJlbk9ubHkpIHtcbiAgICAgICAgICAgICR0YWJzID0gJGNvbnRleHQuY2hpbGRyZW4oc2VsZWN0b3IudGFicyk7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1NlYXJjaGluZyB0YWIgY29udGV4dCBjaGlsZHJlbiBmb3IgdGFicycsICRjb250ZXh0LCAkdGFicyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJHRhYnMgPSAkY29udGV4dC5maW5kKHNlbGVjdG9yLnRhYnMpO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTZWFyY2hpbmcgdGFiIGNvbnRleHQgZm9yIHRhYnMnLCAkY29udGV4dCwgJHRhYnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBmaXg6IHtcbiAgICAgICAgICBjYWxsYmFja3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChwYXJhbWV0ZXJzKSAmJiAocGFyYW1ldGVycy5vblRhYkxvYWQgfHwgcGFyYW1ldGVycy5vblRhYkluaXQpICkge1xuICAgICAgICAgICAgICBpZihwYXJhbWV0ZXJzLm9uVGFiTG9hZCkge1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMub25Mb2FkID0gcGFyYW1ldGVycy5vblRhYkxvYWQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnMub25UYWJMb2FkO1xuICAgICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5sZWdhY3lMb2FkLCBwYXJhbWV0ZXJzLm9uTG9hZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYocGFyYW1ldGVycy5vblRhYkluaXQpIHtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm9uRmlyc3RMb2FkID0gcGFyYW1ldGVycy5vblRhYkluaXQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnMub25UYWJJbml0O1xuICAgICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5sZWdhY3lJbml0LCBwYXJhbWV0ZXJzLm9uRmlyc3RMb2FkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkLmZuLnRhYi5zZXR0aW5ncywgcGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRpYWxpemVIaXN0b3J5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ0luaXRpYWxpemluZyBwYWdlIHN0YXRlJyk7XG4gICAgICAgICAgaWYoICQuYWRkcmVzcyA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLnN0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5oaXN0b3J5VHlwZSA9PSAnc3RhdGUnKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVXNpbmcgSFRNTDUgdG8gbWFuYWdlIHN0YXRlJyk7XG4gICAgICAgICAgICAgIGlmKHNldHRpbmdzLnBhdGggIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgJC5hZGRyZXNzXG4gICAgICAgICAgICAgICAgICAuaGlzdG9yeSh0cnVlKVxuICAgICAgICAgICAgICAgICAgLnN0YXRlKHNldHRpbmdzLnBhdGgpXG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuYWRkcmVzc1xuICAgICAgICAgICAgICAuYmluZCgnY2hhbmdlJywgbW9kdWxlLmV2ZW50Lmhpc3RvcnkuY2hhbmdlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBldmVudDoge1xuICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIHRhYlBhdGggPSAkKHRoaXMpLmRhdGEobWV0YWRhdGEudGFiKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYodGFiUGF0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGlmKHNldHRpbmdzLmhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnVXBkYXRpbmcgcGFnZSBzdGF0ZScsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAkLmFkZHJlc3MudmFsdWUodGFiUGF0aCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0NoYW5naW5nIHRhYicsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICBtb2R1bGUuY2hhbmdlVGFiKHRhYlBhdGgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdObyB0YWIgc3BlY2lmaWVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBoaXN0b3J5OiB7XG4gICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgIHRhYlBhdGggICA9IGV2ZW50LnBhdGhOYW1lcy5qb2luKCcvJykgfHwgbW9kdWxlLmdldC5pbml0aWFsUGF0aCgpLFxuICAgICAgICAgICAgICAgIHBhZ2VUaXRsZSA9IHNldHRpbmdzLnRlbXBsYXRlcy5kZXRlcm1pbmVUaXRsZSh0YWJQYXRoKSB8fCBmYWxzZVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnSGlzdG9yeSBjaGFuZ2UgZXZlbnQnLCB0YWJQYXRoLCBldmVudCk7XG4gICAgICAgICAgICAgIGhpc3RvcnlFdmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgICBpZih0YWJQYXRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuY2hhbmdlVGFiKHRhYlBhdGgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmKHBhZ2VUaXRsZSkge1xuICAgICAgICAgICAgICAgICQuYWRkcmVzcy50aXRsZShwYWdlVGl0bGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKGFjdGl2ZVRhYlBhdGgpIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnUmVmcmVzaGluZyB0YWInLCBhY3RpdmVUYWJQYXRoKTtcbiAgICAgICAgICAgIG1vZHVsZS5jaGFuZ2VUYWIoYWN0aXZlVGFiUGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNhY2hlOiB7XG5cbiAgICAgICAgICByZWFkOiBmdW5jdGlvbihjYWNoZUtleSkge1xuICAgICAgICAgICAgcmV0dXJuIChjYWNoZUtleSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICA/IGNhY2hlW2NhY2hlS2V5XVxuICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKGNhY2hlS2V5LCBjb250ZW50KSB7XG4gICAgICAgICAgICBjYWNoZUtleSA9IGNhY2hlS2V5IHx8IGFjdGl2ZVRhYlBhdGg7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0FkZGluZyBjYWNoZWQgY29udGVudCBmb3InLCBjYWNoZUtleSk7XG4gICAgICAgICAgICBjYWNoZVtjYWNoZUtleV0gPSBjb250ZW50O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihjYWNoZUtleSkge1xuICAgICAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSB8fCBhY3RpdmVUYWJQYXRoO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdSZW1vdmluZyBjYWNoZWQgY29udGVudCBmb3InLCBjYWNoZUtleSk7XG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbY2FjaGVLZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXQ6IHtcbiAgICAgICAgICBhdXRvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICB1cmwgPSAodHlwZW9mIHNldHRpbmdzLnBhdGggPT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgPyBzZXR0aW5ncy5wYXRoLnJlcGxhY2UoL1xcLyQvLCAnJykgKyAnL3skdGFifSdcbiAgICAgICAgICAgICAgICA6ICcveyR0YWJ9J1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NldHRpbmcgdXAgYXV0b21hdGljIHRhYiByZXRyaWV2YWwgZnJvbSBzZXJ2ZXInLCB1cmwpO1xuICAgICAgICAgICAgaWYoJC5pc1BsYWluT2JqZWN0KHNldHRpbmdzLmFwaVNldHRpbmdzKSkge1xuICAgICAgICAgICAgICBzZXR0aW5ncy5hcGlTZXR0aW5ncy51cmwgPSB1cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0dGluZ3MuYXBpU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKHRhYlBhdGgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAkdGFiICAgICAgPSBtb2R1bGUuZ2V0LnRhYkVsZW1lbnQodGFiUGF0aCksXG4gICAgICAgICAgICAgIGlzTG9hZGluZyA9ICR0YWIuaGFzQ2xhc3MoY2xhc3NOYW1lLmxvYWRpbmcpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZighaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdTZXR0aW5nIGxvYWRpbmcgc3RhdGUgZm9yJywgJHRhYik7XG4gICAgICAgICAgICAgICR0YWJcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLmxvYWRpbmcpXG4gICAgICAgICAgICAgICAgLnNpYmxpbmdzKCR0YWJzKVxuICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5hY3RpdmUgKyAnICcgKyBjbGFzc05hbWUubG9hZGluZylcbiAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICBpZigkdGFiLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5vblJlcXVlc3QuY2FsbCgkdGFiWzBdLCB0YWJQYXRoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3RhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgICAkLmFkZHJlc3MudmFsdWUoc3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjaGFuZ2VUYWI6IGZ1bmN0aW9uKHRhYlBhdGgpIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIHB1c2hTdGF0ZUF2YWlsYWJsZSA9ICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUpLFxuICAgICAgICAgICAgc2hvdWxkSWdub3JlTG9hZCAgID0gKHB1c2hTdGF0ZUF2YWlsYWJsZSAmJiBzZXR0aW5ncy5pZ25vcmVGaXJzdExvYWQgJiYgZmlyc3RMb2FkKSxcbiAgICAgICAgICAgIHJlbW90ZUNvbnRlbnQgICAgICA9IChzZXR0aW5ncy5hdXRvIHx8ICQuaXNQbGFpbk9iamVjdChzZXR0aW5ncy5hcGlTZXR0aW5ncykgKSxcbiAgICAgICAgICAgIC8vIG9ubHkgYWRkIGRlZmF1bHQgcGF0aCBpZiBub3QgcmVtb3RlIGNvbnRlbnRcbiAgICAgICAgICAgIHBhdGhBcnJheSA9IChyZW1vdGVDb250ZW50ICYmICFzaG91bGRJZ25vcmVMb2FkKVxuICAgICAgICAgICAgICA/IG1vZHVsZS51dGlsaXRpZXMucGF0aFRvQXJyYXkodGFiUGF0aClcbiAgICAgICAgICAgICAgOiBtb2R1bGUuZ2V0LmRlZmF1bHRQYXRoQXJyYXkodGFiUGF0aClcbiAgICAgICAgICA7XG4gICAgICAgICAgdGFiUGF0aCA9IG1vZHVsZS51dGlsaXRpZXMuYXJyYXlUb1BhdGgocGF0aEFycmF5KTtcbiAgICAgICAgICAkLmVhY2gocGF0aEFycmF5LCBmdW5jdGlvbihpbmRleCwgdGFiKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY3VycmVudFBhdGhBcnJheSAgID0gcGF0aEFycmF5LnNsaWNlKDAsIGluZGV4ICsgMSksXG4gICAgICAgICAgICAgIGN1cnJlbnRQYXRoICAgICAgICA9IG1vZHVsZS51dGlsaXRpZXMuYXJyYXlUb1BhdGgoY3VycmVudFBhdGhBcnJheSksXG5cbiAgICAgICAgICAgICAgaXNUYWIgICAgICAgICAgICAgID0gbW9kdWxlLmlzLnRhYihjdXJyZW50UGF0aCksXG4gICAgICAgICAgICAgIGlzTGFzdEluZGV4ICAgICAgICA9IChpbmRleCArIDEgPT0gcGF0aEFycmF5Lmxlbmd0aCksXG5cbiAgICAgICAgICAgICAgJHRhYiAgICAgICAgICAgICAgID0gbW9kdWxlLmdldC50YWJFbGVtZW50KGN1cnJlbnRQYXRoKSxcbiAgICAgICAgICAgICAgJGFuY2hvcixcbiAgICAgICAgICAgICAgbmV4dFBhdGhBcnJheSxcbiAgICAgICAgICAgICAgbmV4dFBhdGgsXG4gICAgICAgICAgICAgIGlzTGFzdFRhYlxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0xvb2tpbmcgZm9yIHRhYicsIHRhYik7XG4gICAgICAgICAgICBpZihpc1RhYikge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnVGFiIHdhcyBmb3VuZCcsIHRhYik7XG4gICAgICAgICAgICAgIC8vIHNjb3BlIHVwXG4gICAgICAgICAgICAgIGFjdGl2ZVRhYlBhdGggID0gY3VycmVudFBhdGg7XG4gICAgICAgICAgICAgIHBhcmFtZXRlckFycmF5ID0gbW9kdWxlLnV0aWxpdGllcy5maWx0ZXJBcnJheShwYXRoQXJyYXksIGN1cnJlbnRQYXRoQXJyYXkpO1xuXG4gICAgICAgICAgICAgIGlmKGlzTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgaXNMYXN0VGFiID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0UGF0aEFycmF5ID0gcGF0aEFycmF5LnNsaWNlKDAsIGluZGV4ICsgMik7XG4gICAgICAgICAgICAgICAgbmV4dFBhdGggICAgICA9IG1vZHVsZS51dGlsaXRpZXMuYXJyYXlUb1BhdGgobmV4dFBhdGhBcnJheSk7XG4gICAgICAgICAgICAgICAgaXNMYXN0VGFiICAgICA9ICggIW1vZHVsZS5pcy50YWIobmV4dFBhdGgpICk7XG4gICAgICAgICAgICAgICAgaWYoaXNMYXN0VGFiKSB7XG4gICAgICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnVGFiIHBhcmFtZXRlcnMgZm91bmQnLCBuZXh0UGF0aEFycmF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYoaXNMYXN0VGFiICYmIHJlbW90ZUNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBpZighc2hvdWxkSWdub3JlTG9hZCkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmFjdGl2YXRlLm5hdmlnYXRpb24oY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmZldGNoLmNvbnRlbnQoY3VycmVudFBhdGgsIHRhYlBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnSWdub3JpbmcgcmVtb3RlIGNvbnRlbnQgb24gZmlyc3QgdGFiIGxvYWQnLCBjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICBmaXJzdExvYWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS5jYWNoZS5hZGQodGFiUGF0aCwgJHRhYi5odG1sKCkpO1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmFjdGl2YXRlLmFsbChjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbkZpcnN0TG9hZC5jYWxsKCR0YWJbMF0sIGN1cnJlbnRQYXRoLCBwYXJhbWV0ZXJBcnJheSwgaGlzdG9yeUV2ZW50KTtcbiAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uTG9hZC5jYWxsKCR0YWJbMF0sIGN1cnJlbnRQYXRoLCBwYXJhbWV0ZXJBcnJheSwgaGlzdG9yeUV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnT3BlbmVkIGxvY2FsIHRhYicsIGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICBtb2R1bGUuYWN0aXZhdGUuYWxsKGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiggIW1vZHVsZS5jYWNoZS5yZWFkKGN1cnJlbnRQYXRoKSApIHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZS5jYWNoZS5hZGQoY3VycmVudFBhdGgsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdGaXJzdCB0aW1lIHRhYiBsb2FkZWQgY2FsbGluZyB0YWIgaW5pdCcpO1xuICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25GaXJzdExvYWQuY2FsbCgkdGFiWzBdLCBjdXJyZW50UGF0aCwgcGFyYW1ldGVyQXJyYXksIGhpc3RvcnlFdmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uTG9hZC5jYWxsKCR0YWJbMF0sIGN1cnJlbnRQYXRoLCBwYXJhbWV0ZXJBcnJheSwgaGlzdG9yeUV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKHRhYlBhdGguc2VhcmNoKCcvJykgPT0gLTEgJiYgdGFiUGF0aCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgLy8gbG9vayBmb3IgaW4gcGFnZSBhbmNob3JcbiAgICAgICAgICAgICAgJGFuY2hvciAgICAgPSAkKCcjJyArIHRhYlBhdGggKyAnLCBhW25hbWU9XCInICsgdGFiUGF0aCArICdcIl0nKTtcbiAgICAgICAgICAgICAgY3VycmVudFBhdGggPSAkYW5jaG9yLmNsb3Nlc3QoJ1tkYXRhLXRhYl0nKS5kYXRhKG1ldGFkYXRhLnRhYik7XG4gICAgICAgICAgICAgICR0YWIgICAgICAgID0gbW9kdWxlLmdldC50YWJFbGVtZW50KGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgLy8gaWYgYW5jaG9yIGV4aXN0cyB1c2UgcGFyZW50IHRhYlxuICAgICAgICAgICAgICBpZigkYW5jaG9yICYmICRhbmNob3IubGVuZ3RoID4gMCAmJiBjdXJyZW50UGF0aCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQW5jaG9yIGxpbmsgdXNlZCwgb3BlbmluZyBwYXJlbnQgdGFiJywgJHRhYiwgJGFuY2hvcik7XG4gICAgICAgICAgICAgICAgaWYoICEkdGFiLmhhc0NsYXNzKGNsYXNzTmFtZS5hY3RpdmUpICkge1xuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLnNjcm9sbFRvKCRhbmNob3IpO1xuICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vZHVsZS5hY3RpdmF0ZS5hbGwoY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgIGlmKCAhbW9kdWxlLmNhY2hlLnJlYWQoY3VycmVudFBhdGgpICkge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlLmNhY2hlLmFkZChjdXJyZW50UGF0aCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0ZpcnN0IHRpbWUgdGFiIGxvYWRlZCBjYWxsaW5nIHRhYiBpbml0Jyk7XG4gICAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbkZpcnN0TG9hZC5jYWxsKCR0YWJbMF0sIGN1cnJlbnRQYXRoLCBwYXJhbWV0ZXJBcnJheSwgaGlzdG9yeUV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub25Mb2FkLmNhbGwoJHRhYlswXSwgY3VycmVudFBhdGgsIHBhcmFtZXRlckFycmF5LCBoaXN0b3J5RXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5taXNzaW5nVGFiLCAkbW9kdWxlLCAkY29udGV4dCwgY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2Nyb2xsVG86IGZ1bmN0aW9uKCRlbGVtZW50KSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBzY3JvbGxPZmZzZXQgPSAoJGVsZW1lbnQgJiYgJGVsZW1lbnQubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgPyAkZWxlbWVudC5vZmZzZXQoKS50b3BcbiAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZihzY3JvbGxPZmZzZXQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0ZvcmNpbmcgc2Nyb2xsIHRvIGFuIGluLXBhZ2UgbGluayBpbiBhIGhpZGRlbiB0YWInLCBzY3JvbGxPZmZzZXQsICRlbGVtZW50KTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLnNjcm9sbFRvcChzY3JvbGxPZmZzZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbih0YWJQYXRoLCBodG1sLCBldmFsdWF0ZVNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAkdGFiID0gbW9kdWxlLmdldC50YWJFbGVtZW50KHRhYlBhdGgpLFxuICAgICAgICAgICAgICB0YWIgID0gJHRhYlswXVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgZXZhbHVhdGVTY3JpcHRzID0gKGV2YWx1YXRlU2NyaXB0cyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICA/IGV2YWx1YXRlU2NyaXB0c1xuICAgICAgICAgICAgICA6IHNldHRpbmdzLmV2YWx1YXRlU2NyaXB0c1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYodHlwZW9mIHNldHRpbmdzLmNhY2hlVHlwZSA9PSAnc3RyaW5nJyAmJiBzZXR0aW5ncy5jYWNoZVR5cGUudG9Mb3dlckNhc2UoKSA9PSAnZG9tJyAmJiB0eXBlb2YgaHRtbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgJHRhYlxuICAgICAgICAgICAgICAgIC5lbXB0eSgpXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgkKGh0bWwpLmNsb25lKHRydWUpKVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgaWYoZXZhbHVhdGVTY3JpcHRzKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdVcGRhdGluZyBIVE1MIGFuZCBldmFsdWF0aW5nIGlubGluZSBzY3JpcHRzJywgdGFiUGF0aCwgaHRtbCk7XG4gICAgICAgICAgICAgICAgJHRhYi5odG1sKGh0bWwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVXBkYXRpbmcgSFRNTCcsIHRhYlBhdGgsIGh0bWwpO1xuICAgICAgICAgICAgICAgIHRhYi5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGZldGNoOiB7XG5cbiAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbih0YWJQYXRoLCBmdWxsVGFiUGF0aCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICR0YWIgICAgICAgID0gbW9kdWxlLmdldC50YWJFbGVtZW50KHRhYlBhdGgpLFxuICAgICAgICAgICAgICBhcGlTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICBkYXRhVHlwZSAgICAgICAgIDogJ2h0bWwnLFxuICAgICAgICAgICAgICAgIGVuY29kZVBhcmFtZXRlcnMgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvbiAgICAgICAgICAgICAgIDogJ25vdycsXG4gICAgICAgICAgICAgICAgY2FjaGUgICAgICAgICAgICA6IHNldHRpbmdzLmFsd2F5c1JlZnJlc2gsXG4gICAgICAgICAgICAgICAgaGVhZGVycyAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICdYLVJlbW90ZSc6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uU3VjY2VzcyA6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5jYWNoZVR5cGUgPT0gJ3Jlc3BvbnNlJykge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUuY2FjaGUuYWRkKGZ1bGxUYWJQYXRoLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBtb2R1bGUudXBkYXRlLmNvbnRlbnQodGFiUGF0aCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgaWYodGFiUGF0aCA9PSBhY3RpdmVUYWJQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQ29udGVudCBsb2FkZWQnLCB0YWJQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLmFjdGl2YXRlLnRhYih0YWJQYXRoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NvbnRlbnQgbG9hZGVkIGluIGJhY2tncm91bmQnLCB0YWJQYXRoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uRmlyc3RMb2FkLmNhbGwoJHRhYlswXSwgdGFiUGF0aCwgcGFyYW1ldGVyQXJyYXksIGhpc3RvcnlFdmVudCk7XG4gICAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbkxvYWQuY2FsbCgkdGFiWzBdLCB0YWJQYXRoLCBwYXJhbWV0ZXJBcnJheSwgaGlzdG9yeUV2ZW50KTtcblxuICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIHNldHRpbmdzLmNhY2hlVHlwZSA9PSAnc3RyaW5nJyAmJiBzZXR0aW5ncy5jYWNoZVR5cGUudG9Mb3dlckNhc2UoKSA9PSAnZG9tJyAmJiAkdGFiLmNoaWxkcmVuKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNsb25lID0gJHRhYi5jaGlsZHJlbigpLmNsb25lKHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICRjbG9uZSA9ICRjbG9uZS5ub3QoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5jYWNoZS5hZGQoZnVsbFRhYlBhdGgsICRjbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS5jYWNoZS5hZGQoZnVsbFRhYlBhdGgsICR0YWIuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVybERhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHRhYjogZnVsbFRhYlBhdGhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHJlcXVlc3QgICAgICAgICA9ICR0YWIuYXBpKCdnZXQgcmVxdWVzdCcpIHx8IGZhbHNlLFxuICAgICAgICAgICAgICBleGlzdGluZ1JlcXVlc3QgPSAoIHJlcXVlc3QgJiYgcmVxdWVzdC5zdGF0ZSgpID09PSAncGVuZGluZycgKSxcbiAgICAgICAgICAgICAgcmVxdWVzdFNldHRpbmdzLFxuICAgICAgICAgICAgICBjYWNoZWRDb250ZW50XG4gICAgICAgICAgICA7XG5cbiAgICAgICAgICAgIGZ1bGxUYWJQYXRoICAgPSBmdWxsVGFiUGF0aCB8fCB0YWJQYXRoO1xuICAgICAgICAgICAgY2FjaGVkQ29udGVudCA9IG1vZHVsZS5jYWNoZS5yZWFkKGZ1bGxUYWJQYXRoKTtcblxuXG4gICAgICAgICAgICBpZihzZXR0aW5ncy5jYWNoZSAmJiBjYWNoZWRDb250ZW50KSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5hY3RpdmF0ZS50YWIodGFiUGF0aCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQWRkaW5nIGNhY2hlZCBjb250ZW50JywgZnVsbFRhYlBhdGgpO1xuICAgICAgICAgICAgICBpZihzZXR0aW5ncy5ldmFsdWF0ZVNjcmlwdHMgPT0gJ29uY2UnKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnVwZGF0ZS5jb250ZW50KHRhYlBhdGgsIGNhY2hlZENvbnRlbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUudXBkYXRlLmNvbnRlbnQodGFiUGF0aCwgY2FjaGVkQ29udGVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2V0dGluZ3Mub25Mb2FkLmNhbGwoJHRhYlswXSwgdGFiUGF0aCwgcGFyYW1ldGVyQXJyYXksIGhpc3RvcnlFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGV4aXN0aW5nUmVxdWVzdCkge1xuICAgICAgICAgICAgICBtb2R1bGUuc2V0LmxvYWRpbmcodGFiUGF0aCk7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQ29udGVudCBpcyBhbHJlYWR5IGxvYWRpbmcnLCBmdWxsVGFiUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCQuYXBpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgcmVxdWVzdFNldHRpbmdzID0gJC5leHRlbmQodHJ1ZSwge30sIHNldHRpbmdzLmFwaVNldHRpbmdzLCBhcGlTZXR0aW5ncyk7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnUmV0cmlldmluZyByZW1vdGUgY29udGVudCcsIGZ1bGxUYWJQYXRoLCByZXF1ZXN0U2V0dGluZ3MpO1xuICAgICAgICAgICAgICBtb2R1bGUuc2V0LmxvYWRpbmcodGFiUGF0aCk7XG4gICAgICAgICAgICAgICR0YWIuYXBpKHJlcXVlc3RTZXR0aW5ncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLmFwaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFjdGl2YXRlOiB7XG4gICAgICAgICAgYWxsOiBmdW5jdGlvbih0YWJQYXRoKSB7XG4gICAgICAgICAgICBtb2R1bGUuYWN0aXZhdGUudGFiKHRhYlBhdGgpO1xuICAgICAgICAgICAgbW9kdWxlLmFjdGl2YXRlLm5hdmlnYXRpb24odGFiUGF0aCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YWI6IGZ1bmN0aW9uKHRhYlBhdGgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAkdGFiICAgICAgICAgID0gbW9kdWxlLmdldC50YWJFbGVtZW50KHRhYlBhdGgpLFxuICAgICAgICAgICAgICAkZGVhY3RpdmVUYWJzID0gKHNldHRpbmdzLmRlYWN0aXZhdGUgPT0gJ3NpYmxpbmdzJylcbiAgICAgICAgICAgICAgICA/ICR0YWIuc2libGluZ3MoJHRhYnMpXG4gICAgICAgICAgICAgICAgOiAkdGFicy5ub3QoJHRhYiksXG4gICAgICAgICAgICAgIGlzQWN0aXZlICAgICAgPSAkdGFiLmhhc0NsYXNzKGNsYXNzTmFtZS5hY3RpdmUpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU2hvd2luZyB0YWIgY29udGVudCBmb3InLCAkdGFiKTtcbiAgICAgICAgICAgIGlmKCFpc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAkdGFiXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5hY3RpdmUpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgJGRlYWN0aXZlVGFic1xuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuYWN0aXZlICsgJyAnICsgY2xhc3NOYW1lLmxvYWRpbmcpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgaWYoJHRhYi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub25WaXNpYmxlLmNhbGwoJHRhYlswXSwgdGFiUGF0aCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG5hdmlnYXRpb246IGZ1bmN0aW9uKHRhYlBhdGgpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAkbmF2aWdhdGlvbiAgICAgICAgID0gbW9kdWxlLmdldC5uYXZFbGVtZW50KHRhYlBhdGgpLFxuICAgICAgICAgICAgICAkZGVhY3RpdmVOYXZpZ2F0aW9uID0gKHNldHRpbmdzLmRlYWN0aXZhdGUgPT0gJ3NpYmxpbmdzJylcbiAgICAgICAgICAgICAgICA/ICRuYXZpZ2F0aW9uLnNpYmxpbmdzKCRhbGxNb2R1bGVzKVxuICAgICAgICAgICAgICAgIDogJGFsbE1vZHVsZXMubm90KCRuYXZpZ2F0aW9uKSxcbiAgICAgICAgICAgICAgaXNBY3RpdmUgICAgPSAkbmF2aWdhdGlvbi5oYXNDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0FjdGl2YXRpbmcgdGFiIG5hdmlnYXRpb24gZm9yJywgJG5hdmlnYXRpb24sIHRhYlBhdGgpO1xuICAgICAgICAgICAgaWYoIWlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICRuYXZpZ2F0aW9uXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKGNsYXNzTmFtZS5hY3RpdmUpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgJGRlYWN0aXZlTmF2aWdhdGlvblxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuYWN0aXZlICsgJyAnICsgY2xhc3NOYW1lLmxvYWRpbmcpXG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVhY3RpdmF0ZToge1xuICAgICAgICAgIGFsbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVhY3RpdmF0ZS5uYXZpZ2F0aW9uKCk7XG4gICAgICAgICAgICBtb2R1bGUuZGVhY3RpdmF0ZS50YWJzKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuYXZpZ2F0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRhbGxNb2R1bGVzXG4gICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuYWN0aXZlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFiczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkdGFic1xuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmFjdGl2ZSArICcgJyArIGNsYXNzTmFtZS5sb2FkaW5nKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpczoge1xuICAgICAgICAgIHRhYjogZnVuY3Rpb24odGFiTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuICh0YWJOYW1lICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgID8gKCBtb2R1bGUuZ2V0LnRhYkVsZW1lbnQodGFiTmFtZSkubGVuZ3RoID4gMCApXG4gICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgaW5pdGlhbFBhdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRhbGxNb2R1bGVzLmVxKDApLmRhdGEobWV0YWRhdGEudGFiKSB8fCAkdGFicy5lcSgwKS5kYXRhKG1ldGFkYXRhLnRhYik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXRoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmFkZHJlc3MudmFsdWUoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIGFkZHMgZGVmYXVsdCB0YWJzIHRvIHRhYiBwYXRoXG4gICAgICAgICAgZGVmYXVsdFBhdGhBcnJheTogZnVuY3Rpb24odGFiUGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS51dGlsaXRpZXMucGF0aFRvQXJyYXkoIG1vZHVsZS5nZXQuZGVmYXVsdFBhdGgodGFiUGF0aCkgKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZmF1bHRQYXRoOiBmdW5jdGlvbih0YWJQYXRoKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgJGRlZmF1bHROYXYgPSAkYWxsTW9kdWxlcy5maWx0ZXIoJ1tkYXRhLScgKyBtZXRhZGF0YS50YWIgKyAnXj1cIicgKyB0YWJQYXRoICsgJy9cIl0nKS5lcSgwKSxcbiAgICAgICAgICAgICAgZGVmYXVsdFRhYiAgPSAkZGVmYXVsdE5hdi5kYXRhKG1ldGFkYXRhLnRhYikgfHwgZmFsc2VcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKCBkZWZhdWx0VGFiICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0ZvdW5kIGRlZmF1bHQgdGFiJywgZGVmYXVsdFRhYik7XG4gICAgICAgICAgICAgIGlmKHJlY3Vyc2lvbkRlcHRoIDwgc2V0dGluZ3MubWF4RGVwdGgpIHtcbiAgICAgICAgICAgICAgICByZWN1cnNpb25EZXB0aCsrO1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2R1bGUuZ2V0LmRlZmF1bHRQYXRoKGRlZmF1bHRUYWIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5yZWN1cnNpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnTm8gZGVmYXVsdCB0YWJzIGZvdW5kIGZvcicsIHRhYlBhdGgsICR0YWJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY3Vyc2lvbkRlcHRoID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0YWJQYXRoO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbmF2RWxlbWVudDogZnVuY3Rpb24odGFiUGF0aCkge1xuICAgICAgICAgICAgdGFiUGF0aCA9IHRhYlBhdGggfHwgYWN0aXZlVGFiUGF0aDtcbiAgICAgICAgICAgIHJldHVybiAkYWxsTW9kdWxlcy5maWx0ZXIoJ1tkYXRhLScgKyBtZXRhZGF0YS50YWIgKyAnPVwiJyArIHRhYlBhdGggKyAnXCJdJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YWJFbGVtZW50OiBmdW5jdGlvbih0YWJQYXRoKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgJGZ1bGxQYXRoVGFiLFxuICAgICAgICAgICAgICAkc2ltcGxlUGF0aFRhYixcbiAgICAgICAgICAgICAgdGFiUGF0aEFycmF5LFxuICAgICAgICAgICAgICBsYXN0VGFiXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICB0YWJQYXRoICAgICAgICA9IHRhYlBhdGggfHwgYWN0aXZlVGFiUGF0aDtcbiAgICAgICAgICAgIHRhYlBhdGhBcnJheSAgID0gbW9kdWxlLnV0aWxpdGllcy5wYXRoVG9BcnJheSh0YWJQYXRoKTtcbiAgICAgICAgICAgIGxhc3RUYWIgICAgICAgID0gbW9kdWxlLnV0aWxpdGllcy5sYXN0KHRhYlBhdGhBcnJheSk7XG4gICAgICAgICAgICAkZnVsbFBhdGhUYWIgICA9ICR0YWJzLmZpbHRlcignW2RhdGEtJyArIG1ldGFkYXRhLnRhYiArICc9XCInICsgdGFiUGF0aCArICdcIl0nKTtcbiAgICAgICAgICAgICRzaW1wbGVQYXRoVGFiID0gJHRhYnMuZmlsdGVyKCdbZGF0YS0nICsgbWV0YWRhdGEudGFiICsgJz1cIicgKyBsYXN0VGFiICsgJ1wiXScpO1xuICAgICAgICAgICAgcmV0dXJuICgkZnVsbFBhdGhUYWIubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgPyAkZnVsbFBhdGhUYWJcbiAgICAgICAgICAgICAgOiAkc2ltcGxlUGF0aFRhYlxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFiOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVUYWJQYXRoO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1dGlsaXRpZXM6IHtcbiAgICAgICAgICBmaWx0ZXJBcnJheTogZnVuY3Rpb24oa2VlcEFycmF5LCByZW1vdmVBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuICQuZ3JlcChrZWVwQXJyYXksIGZ1bmN0aW9uKGtlZXBWYWx1ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gKCAkLmluQXJyYXkoa2VlcFZhbHVlLCByZW1vdmVBcnJheSkgPT0gLTEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsYXN0OiBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuICQuaXNBcnJheShhcnJheSlcbiAgICAgICAgICAgICAgPyBhcnJheVsgYXJyYXkubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF0aFRvQXJyYXk6IGZ1bmN0aW9uKHBhdGhOYW1lKSB7XG4gICAgICAgICAgICBpZihwYXRoTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHBhdGhOYW1lID0gYWN0aXZlVGFiUGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGF0aE5hbWUgPT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgPyBwYXRoTmFtZS5zcGxpdCgnLycpXG4gICAgICAgICAgICAgIDogW3BhdGhOYW1lXVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJyYXlUb1BhdGg6IGZ1bmN0aW9uKHBhdGhBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuICQuaXNBcnJheShwYXRoQXJyYXkpXG4gICAgICAgICAgICAgID8gcGF0aEFycmF5LmpvaW4oJy8nKVxuICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldHRpbmc6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdDaGFuZ2luZyBzZXR0aW5nJywgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QobmFtZSkgKSB7XG4gICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBzZXR0aW5ncywgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYoJC5pc1BsYWluT2JqZWN0KHNldHRpbmdzW25hbWVdKSkge1xuICAgICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBzZXR0aW5nc1tuYW1lXSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHNldHRpbmdzW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzW25hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW50ZXJuYWw6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChuYW1lKSApIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIG1vZHVsZSwgbmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbW9kdWxlW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVtuYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlYnVnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZighc2V0dGluZ3Muc2lsZW50ICYmIHNldHRpbmdzLmRlYnVnKSB7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHZlcmJvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQgJiYgc2V0dGluZ3MudmVyYm9zZSAmJiBzZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sIGNvbnNvbGUsIHNldHRpbmdzLm5hbWUgKyAnOicpO1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZS5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQpIHtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvciA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvciwgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICBtb2R1bGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgICAgbG9nOiBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUsXG4gICAgICAgICAgICAgIGV4ZWN1dGlvblRpbWUsXG4gICAgICAgICAgICAgIHByZXZpb3VzVGltZVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoc2V0dGluZ3MucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgICAgICAgY3VycmVudFRpbWUgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICBwcmV2aW91c1RpbWUgID0gdGltZSB8fCBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZSA9IGN1cnJlbnRUaW1lIC0gcHJldmlvdXNUaW1lO1xuICAgICAgICAgICAgICB0aW1lICAgICAgICAgID0gY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIHBlcmZvcm1hbmNlLnB1c2goe1xuICAgICAgICAgICAgICAgICdOYW1lJyAgICAgICAgICAgOiBtZXNzYWdlWzBdLFxuICAgICAgICAgICAgICAgICdBcmd1bWVudHMnICAgICAgOiBbXS5zbGljZS5jYWxsKG1lc3NhZ2UsIDEpIHx8ICcnLFxuICAgICAgICAgICAgICAgICdFbGVtZW50JyAgICAgICAgOiBlbGVtZW50LFxuICAgICAgICAgICAgICAgICdFeGVjdXRpb24gVGltZScgOiBleGVjdXRpb25UaW1lXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lcik7XG4gICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UudGltZXIgPSBzZXRUaW1lb3V0KG1vZHVsZS5wZXJmb3JtYW5jZS5kaXNwbGF5LCA1MDApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzcGxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgdGl0bGUgPSBzZXR0aW5ncy5uYW1lICsgJzonLFxuICAgICAgICAgICAgICB0b3RhbFRpbWUgPSAwXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICB0aW1lID0gZmFsc2U7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyKTtcbiAgICAgICAgICAgICQuZWFjaChwZXJmb3JtYW5jZSwgZnVuY3Rpb24oaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgICAgICAgdG90YWxUaW1lICs9IGRhdGFbJ0V4ZWN1dGlvbiBUaW1lJ107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpdGxlICs9ICcgJyArIHRvdGFsVGltZSArICdtcyc7XG4gICAgICAgICAgICBpZihtb2R1bGVTZWxlY3Rvcikge1xuICAgICAgICAgICAgICB0aXRsZSArPSAnIFxcJycgKyBtb2R1bGVTZWxlY3RvciArICdcXCcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIChjb25zb2xlLmdyb3VwICE9PSB1bmRlZmluZWQgfHwgY29uc29sZS50YWJsZSAhPT0gdW5kZWZpbmVkKSAmJiBwZXJmb3JtYW5jZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodGl0bGUpO1xuICAgICAgICAgICAgICBpZihjb25zb2xlLnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS50YWJsZShwZXJmb3JtYW5jZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKHBlcmZvcm1hbmNlLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVsnTmFtZSddICsgJzogJyArIGRhdGFbJ0V4ZWN1dGlvbiBUaW1lJ10rJ21zJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVyZm9ybWFuY2UgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludm9rZTogZnVuY3Rpb24ocXVlcnksIHBhc3NlZEFyZ3VtZW50cywgY29udGV4dCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgb2JqZWN0ID0gaW5zdGFuY2UsXG4gICAgICAgICAgICBtYXhEZXB0aCxcbiAgICAgICAgICAgIGZvdW5kLFxuICAgICAgICAgICAgcmVzcG9uc2VcbiAgICAgICAgICA7XG4gICAgICAgICAgcGFzc2VkQXJndW1lbnRzID0gcGFzc2VkQXJndW1lbnRzIHx8IHF1ZXJ5QXJndW1lbnRzO1xuICAgICAgICAgIGNvbnRleHQgICAgICAgICA9IGVsZW1lbnQgICAgICAgICB8fCBjb250ZXh0O1xuICAgICAgICAgIGlmKHR5cGVvZiBxdWVyeSA9PSAnc3RyaW5nJyAmJiBvYmplY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnkgICAgPSBxdWVyeS5zcGxpdCgvW1xcLiBdLyk7XG4gICAgICAgICAgICBtYXhEZXB0aCA9IHF1ZXJ5Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAkLmVhY2gocXVlcnksIGZ1bmN0aW9uKGRlcHRoLCB2YWx1ZSkge1xuICAgICAgICAgICAgICB2YXIgY2FtZWxDYXNlVmFsdWUgPSAoZGVwdGggIT0gbWF4RGVwdGgpXG4gICAgICAgICAgICAgICAgPyB2YWx1ZSArIHF1ZXJ5W2RlcHRoICsgMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBxdWVyeVtkZXB0aCArIDFdLnNsaWNlKDEpXG4gICAgICAgICAgICAgICAgOiBxdWVyeVxuICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgIGlmKCAkLmlzUGxhaW5PYmplY3QoIG9iamVjdFtjYW1lbENhc2VWYWx1ZV0gKSAmJiAoZGVwdGggIT0gbWF4RGVwdGgpICkge1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IG9iamVjdFtjYW1lbENhc2VWYWx1ZV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggJC5pc1BsYWluT2JqZWN0KCBvYmplY3RbdmFsdWVdICkgJiYgKGRlcHRoICE9IG1heERlcHRoKSApIHtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSBvYmplY3RbdmFsdWVdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYoIG9iamVjdFt2YWx1ZV0gIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IG9iamVjdFt2YWx1ZV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZS5lcnJvcihlcnJvci5tZXRob2QsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoICQuaXNGdW5jdGlvbiggZm91bmQgKSApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQuYXBwbHkoY29udGV4dCwgcGFzc2VkQXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihmb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGZvdW5kO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZigkLmlzQXJyYXkocmV0dXJuZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUucHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYocmV0dXJuZWRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gW3JldHVybmVkVmFsdWUsIHJlc3BvbnNlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gcmVzcG9uc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmKG1ldGhvZEludm9rZWQpIHtcbiAgICAgICAgaWYoaW5zdGFuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG1vZHVsZS5pbml0aWFsaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgbW9kdWxlLmludm9rZShxdWVyeSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYoaW5zdGFuY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGluc3RhbmNlLmludm9rZSgnZGVzdHJveScpO1xuICAgICAgICB9XG4gICAgICAgIG1vZHVsZS5pbml0aWFsaXplKCk7XG4gICAgICB9XG4gICAgfSlcbiAgO1xuICByZXR1cm4gKHJldHVybmVkVmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICA/IHJldHVybmVkVmFsdWVcbiAgICA6IHRoaXNcbiAgO1xuXG59O1xuXG4vLyBzaG9ydGN1dCBmb3IgdGFiYmVkIGNvbnRlbnQgd2l0aCBubyBkZWZpbmVkIG5hdmlnYXRpb25cbiQudGFiID0gZnVuY3Rpb24oKSB7XG4gICQod2luZG93KS50YWIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbiQuZm4udGFiLnNldHRpbmdzID0ge1xuXG4gIG5hbWUgICAgICAgICAgICA6ICdUYWInLFxuICBuYW1lc3BhY2UgICAgICAgOiAndGFiJyxcblxuICBzaWxlbnQgICAgICAgICAgOiBmYWxzZSxcbiAgZGVidWcgICAgICAgICAgIDogZmFsc2UsXG4gIHZlcmJvc2UgICAgICAgICA6IGZhbHNlLFxuICBwZXJmb3JtYW5jZSAgICAgOiB0cnVlLFxuXG4gIGF1dG8gICAgICAgICAgICA6IGZhbHNlLCAgICAgIC8vIHVzZXMgcGpheCBzdHlsZSBlbmRwb2ludHMgZmV0Y2hpbmcgY29udGVudCBmcm9tIHNhbWUgdXJsIHdpdGggcmVtb3RlLWNvbnRlbnQgaGVhZGVyc1xuICBoaXN0b3J5ICAgICAgICAgOiBmYWxzZSwgICAgICAvLyB1c2UgYnJvd3NlciBoaXN0b3J5XG4gIGhpc3RvcnlUeXBlICAgICA6ICdoYXNoJywgICAgIC8vICMvIG9yIGh0bWw1IHN0YXRlXG4gIHBhdGggICAgICAgICAgICA6IGZhbHNlLCAgICAgIC8vIGJhc2UgcGF0aCBvZiB1cmxcblxuICBjb250ZXh0ICAgICAgICAgOiBmYWxzZSwgICAgICAvLyBzcGVjaWZ5IGEgY29udGV4dCB0aGF0IHRhYnMgbXVzdCBhcHBlYXIgaW5zaWRlXG4gIGNoaWxkcmVuT25seSAgICA6IGZhbHNlLCAgICAgIC8vIHVzZSBvbmx5IHRhYnMgdGhhdCBhcmUgY2hpbGRyZW4gb2YgY29udGV4dFxuICBtYXhEZXB0aCAgICAgICAgOiAyNSwgICAgICAgICAvLyBtYXggZGVwdGggYSB0YWIgY2FuIGJlIG5lc3RlZFxuXG4gIGRlYWN0aXZhdGUgICAgICA6ICdzaWJsaW5ncycsIC8vIHdoZXRoZXIgdGFicyBzaG91bGQgZGVhY3RpdmF0ZSBzaWJsaW5nIG1lbnUgZWxlbWVudHMgb3IgYWxsIGVsZW1lbnRzIGluaXRpYWxpemVkIHRvZ2V0aGVyXG5cbiAgYWx3YXlzUmVmcmVzaCAgIDogZmFsc2UsICAgICAgLy8gbG9hZCB0YWIgY29udGVudCBuZXcgZXZlcnkgdGFiIGNsaWNrXG4gIGNhY2hlICAgICAgICAgICA6IHRydWUsICAgICAgIC8vIGNhY2hlIHRoZSBjb250ZW50IHJlcXVlc3RzIHRvIHB1bGwgbG9jYWxseVxuICBjYWNoZVR5cGUgICAgICAgOiAncmVzcG9uc2UnLCAvLyBXaGV0aGVyIHRvIGNhY2hlIGV4YWN0IHJlc3BvbnNlLCBvciB0byBodG1sIGNhY2hlIGNvbnRlbnRzIGFmdGVyIHNjcmlwdHMgZXhlY3V0ZVxuICBpZ25vcmVGaXJzdExvYWQgOiBmYWxzZSwgICAgICAvLyBkb24ndCBsb2FkIHJlbW90ZSBjb250ZW50IG9uIGZpcnN0IGxvYWRcblxuICBhcGlTZXR0aW5ncyAgICAgOiBmYWxzZSwgICAgICAvLyBzZXR0aW5ncyBmb3IgYXBpIGNhbGxcbiAgZXZhbHVhdGVTY3JpcHRzIDogJ29uY2UnLCAgICAgLy8gd2hldGhlciBpbmxpbmUgc2NyaXB0cyBzaG91bGQgYmUgcGFyc2VkICh0cnVlL2ZhbHNlL29uY2UpLiBPbmNlIHdpbGwgbm90IHJlLWV2YWx1YXRlIG9uIGNhY2hlZCBjb250ZW50XG5cbiAgb25GaXJzdExvYWQgOiBmdW5jdGlvbih0YWJQYXRoLCBwYXJhbWV0ZXJBcnJheSwgaGlzdG9yeUV2ZW50KSB7fSwgLy8gY2FsbGVkIGZpcnN0IHRpbWUgbG9hZGVkXG4gIG9uTG9hZCAgICAgIDogZnVuY3Rpb24odGFiUGF0aCwgcGFyYW1ldGVyQXJyYXksIGhpc3RvcnlFdmVudCkge30sIC8vIGNhbGxlZCBvbiBldmVyeSBsb2FkXG4gIG9uVmlzaWJsZSAgIDogZnVuY3Rpb24odGFiUGF0aCwgcGFyYW1ldGVyQXJyYXksIGhpc3RvcnlFdmVudCkge30sIC8vIGNhbGxlZCBldmVyeSB0aW1lIHRhYiB2aXNpYmxlXG4gIG9uUmVxdWVzdCAgIDogZnVuY3Rpb24odGFiUGF0aCwgcGFyYW1ldGVyQXJyYXksIGhpc3RvcnlFdmVudCkge30sIC8vIGNhbGxlZCBldmVyIHRpbWUgYSB0YWIgYmVpbmdzIGxvYWRpbmcgcmVtb3RlIGNvbnRlbnRcblxuICB0ZW1wbGF0ZXMgOiB7XG4gICAgZGV0ZXJtaW5lVGl0bGU6IGZ1bmN0aW9uKHRhYkFycmF5KSB7fSAvLyByZXR1cm5zIHBhZ2UgdGl0bGUgZm9yIHBhdGhcbiAgfSxcblxuICBlcnJvcjoge1xuICAgIGFwaSAgICAgICAgOiAnWW91IGF0dGVtcHRlZCB0byBsb2FkIGNvbnRlbnQgd2l0aG91dCBBUEkgbW9kdWxlJyxcbiAgICBtZXRob2QgICAgIDogJ1RoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZCcsXG4gICAgbWlzc2luZ1RhYiA6ICdBY3RpdmF0ZWQgdGFiIGNhbm5vdCBiZSBmb3VuZC4gVGFicyBhcmUgY2FzZS1zZW5zaXRpdmUuJyxcbiAgICBub0NvbnRlbnQgIDogJ1RoZSB0YWIgeW91IHNwZWNpZmllZCBpcyBtaXNzaW5nIGEgY29udGVudCB1cmwuJyxcbiAgICBwYXRoICAgICAgIDogJ0hpc3RvcnkgZW5hYmxlZCwgYnV0IG5vIHBhdGggd2FzIHNwZWNpZmllZCcsXG4gICAgcmVjdXJzaW9uICA6ICdNYXggcmVjdXJzaXZlIGRlcHRoIHJlYWNoZWQnLFxuICAgIGxlZ2FjeUluaXQgOiAnb25UYWJJbml0IGhhcyBiZWVuIHJlbmFtZWQgdG8gb25GaXJzdExvYWQgaW4gMi4wLCBwbGVhc2UgYWRqdXN0IHlvdXIgY29kZS4nLFxuICAgIGxlZ2FjeUxvYWQgOiAnb25UYWJMb2FkIGhhcyBiZWVuIHJlbmFtZWQgdG8gb25Mb2FkIGluIDIuMC4gUGxlYXNlIGFkanVzdCB5b3VyIGNvZGUnLFxuICAgIHN0YXRlICAgICAgOiAnSGlzdG9yeSByZXF1aXJlcyBBc3VhbFxcJ3MgQWRkcmVzcyBsaWJyYXJ5IDxodHRwczovL2dpdGh1Yi5jb20vYXN1YWwvanF1ZXJ5LWFkZHJlc3M+J1xuICB9LFxuXG4gIG1ldGFkYXRhIDoge1xuICAgIHRhYiAgICA6ICd0YWInLFxuICAgIGxvYWRlZCA6ICdsb2FkZWQnLFxuICAgIHByb21pc2U6ICdwcm9taXNlJ1xuICB9LFxuXG4gIGNsYXNzTmFtZSAgIDoge1xuICAgIGxvYWRpbmcgOiAnbG9hZGluZycsXG4gICAgYWN0aXZlICA6ICdhY3RpdmUnXG4gIH0sXG5cbiAgc2VsZWN0b3IgICAgOiB7XG4gICAgdGFicyA6ICcudWkudGFiJyxcbiAgICB1aSAgIDogJy51aSdcbiAgfVxuXG59O1xuXG59KSggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50ICk7XG4iXX0=
