!function(e,n,t,i){"use strict";n="undefined"!=typeof n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(o){var a,c=e(this),r=c.selector||"",d=(new Date).getTime(),l=[],s=arguments[0],u="string"==typeof s,b=[].slice.call(arguments,1);return c.each(function(){var c,h,g=e.extend(!0,{},e.fn.checkbox.settings,o),p=g.className,f=g.namespace,k=g.selector,m=g.error,v="."+f,y="module-"+f,C=e(this),x=e(this).children(k.label),w=e(this).children(k.input),I=w[0],D=!1,S=!1,E=C.data(y),O=this;h={initialize:function(){h.verbose("Initializing checkbox",g),h.create.label(),h.bind.events(),h.set.tabbable(),h.hide.input(),h.observeChanges(),h.instantiate(),h.setup()},instantiate:function(){h.verbose("Storing instance of module",h),E=h,C.data(y,h)},destroy:function(){h.verbose("Destroying module"),h.unbind.events(),h.show.input(),C.removeData(y)},fix:{reference:function(){C.is(k.input)&&(h.debug("Behavior called on <input> adjusting invoked element"),C=C.closest(k.checkbox),h.refresh())}},setup:function(){h.set.initialLoad(),h.is.indeterminate()?(h.debug("Initial value is indeterminate"),h.indeterminate()):h.is.checked()?(h.debug("Initial value is checked"),h.check()):(h.debug("Initial value is unchecked"),h.uncheck()),h.remove.initialLoad()},refresh:function(){x=C.children(k.label),w=C.children(k.input),I=w[0]},hide:{input:function(){h.verbose("Modifying <input> z-index to be unselectable"),w.addClass(p.hidden)}},show:{input:function(){h.verbose("Modifying <input> z-index to be selectable"),w.removeClass(p.hidden)}},observeChanges:function(){"MutationObserver"in n&&(c=new MutationObserver(function(e){h.debug("DOM tree modified, updating selector cache"),h.refresh()}),c.observe(O,{childList:!0,subtree:!0}),h.debug("Setting up mutation observer",c))},attachEvents:function(n,t){var i=e(n);t=e.isFunction(h[t])?h[t]:h.toggle,i.length>0?(h.debug("Attaching checkbox events to element",n,t),i.on("click"+v,t)):h.error(m.notFound)},event:{click:function(n){var t=e(n.target);return t.is(k.input)?void h.verbose("Using default check action on initialized checkbox"):t.is(k.link)?void h.debug("Clicking link inside checkbox, skipping toggle"):(h.toggle(),w.focus(),void n.preventDefault())},keydown:function(e){var n=e.which,t={enter:13,space:32,escape:27};n==t.escape?(h.verbose("Escape key pressed blurring field"),w.blur(),S=!0):e.ctrlKey||n!=t.space&&n!=t.enter?S=!1:(h.verbose("Enter/space key pressed, toggling checkbox"),h.toggle(),S=!0)},keyup:function(e){S&&e.preventDefault()}},check:function(){h.should.allowCheck()&&(h.debug("Checking checkbox",w),h.set.checked(),h.should.ignoreCallbacks()||(g.onChecked.call(I),g.onChange.call(I)))},uncheck:function(){h.should.allowUncheck()&&(h.debug("Unchecking checkbox"),h.set.unchecked(),h.should.ignoreCallbacks()||(g.onUnchecked.call(I),g.onChange.call(I)))},indeterminate:function(){return h.should.allowIndeterminate()?void h.debug("Checkbox is already indeterminate"):(h.debug("Making checkbox indeterminate"),h.set.indeterminate(),void(h.should.ignoreCallbacks()||(g.onIndeterminate.call(I),g.onChange.call(I))))},determinate:function(){return h.should.allowDeterminate()?void h.debug("Checkbox is already determinate"):(h.debug("Making checkbox determinate"),h.set.determinate(),void(h.should.ignoreCallbacks()||(g.onDeterminate.call(I),g.onChange.call(I))))},enable:function(){return h.is.enabled()?void h.debug("Checkbox is already enabled"):(h.debug("Enabling checkbox"),h.set.enabled(),g.onEnable.call(I),void g.onEnabled.call(I))},disable:function(){return h.is.disabled()?void h.debug("Checkbox is already disabled"):(h.debug("Disabling checkbox"),h.set.disabled(),g.onDisable.call(I),void g.onDisabled.call(I))},get:{radios:function(){var n=h.get.name();return e('input[name="'+n+'"]').closest(k.checkbox)},otherRadios:function(){return h.get.radios().not(C)},name:function(){return w.attr("name")}},is:{initialLoad:function(){return D},radio:function(){return w.hasClass(p.radio)||"radio"==w.attr("type")},indeterminate:function(){return w.prop("indeterminate")!==i&&w.prop("indeterminate")},checked:function(){return w.prop("checked")!==i&&w.prop("checked")},disabled:function(){return w.prop("disabled")!==i&&w.prop("disabled")},enabled:function(){return!h.is.disabled()},determinate:function(){return!h.is.indeterminate()},unchecked:function(){return!h.is.checked()}},should:{allowCheck:function(){return h.is.determinate()&&h.is.checked()&&!h.should.forceCallbacks()?(h.debug("Should not allow check, checkbox is already checked"),!1):g.beforeChecked.apply(I)!==!1||(h.debug("Should not allow check, beforeChecked cancelled"),!1)},allowUncheck:function(){return h.is.determinate()&&h.is.unchecked()&&!h.should.forceCallbacks()?(h.debug("Should not allow uncheck, checkbox is already unchecked"),!1):g.beforeUnchecked.apply(I)!==!1||(h.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1)},allowIndeterminate:function(){return h.is.indeterminate()&&!h.should.forceCallbacks()?(h.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):g.beforeIndeterminate.apply(I)!==!1||(h.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1)},allowDeterminate:function(){return h.is.determinate()&&!h.should.forceCallbacks()?(h.debug("Should not allow determinate, checkbox is already determinate"),!1):g.beforeDeterminate.apply(I)!==!1||(h.debug("Should not allow determinate, beforeDeterminate cancelled"),!1)},forceCallbacks:function(){return h.is.initialLoad()&&g.fireOnInit},ignoreCallbacks:function(){return D&&!g.fireOnInit}},can:{change:function(){return!(C.hasClass(p.disabled)||C.hasClass(p.readOnly)||w.prop("disabled")||w.prop("readonly"))},uncheck:function(){return"boolean"==typeof g.uncheckable?g.uncheckable:!h.is.radio()}},set:{initialLoad:function(){D=!0},checked:function(){return h.verbose("Setting class to checked"),C.removeClass(p.indeterminate).addClass(p.checked),h.is.radio()&&h.uncheckOthers(),!h.is.indeterminate()&&h.is.checked()?void h.debug("Input is already checked, skipping input property change"):(h.verbose("Setting state to checked",I),w.prop("indeterminate",!1).prop("checked",!0),void h.trigger.change())},unchecked:function(){return h.verbose("Removing checked class"),C.removeClass(p.indeterminate).removeClass(p.checked),!h.is.indeterminate()&&h.is.unchecked()?void h.debug("Input is already unchecked"):(h.debug("Setting state to unchecked"),w.prop("indeterminate",!1).prop("checked",!1),void h.trigger.change())},indeterminate:function(){return h.verbose("Setting class to indeterminate"),C.addClass(p.indeterminate),h.is.indeterminate()?void h.debug("Input is already indeterminate, skipping input property change"):(h.debug("Setting state to indeterminate"),w.prop("indeterminate",!0),void h.trigger.change())},determinate:function(){return h.verbose("Removing indeterminate class"),C.removeClass(p.indeterminate),h.is.determinate()?void h.debug("Input is already determinate, skipping input property change"):(h.debug("Setting state to determinate"),void w.prop("indeterminate",!1))},disabled:function(){return h.verbose("Setting class to disabled"),C.addClass(p.disabled),h.is.disabled()?void h.debug("Input is already disabled, skipping input property change"):(h.debug("Setting state to disabled"),w.prop("disabled","disabled"),void h.trigger.change())},enabled:function(){return h.verbose("Removing disabled class"),C.removeClass(p.disabled),h.is.enabled()?void h.debug("Input is already enabled, skipping input property change"):(h.debug("Setting state to enabled"),w.prop("disabled",!1),void h.trigger.change())},tabbable:function(){h.verbose("Adding tabindex to checkbox"),w.attr("tabindex")===i&&w.attr("tabindex",0)}},remove:{initialLoad:function(){D=!1}},trigger:{change:function(){var e=t.createEvent("HTMLEvents"),n=w[0];n&&(h.verbose("Triggering native change event"),e.initEvent("change",!0,!1),n.dispatchEvent(e))}},create:{label:function(){w.prevAll(k.label).length>0?(w.prev(k.label).detach().insertAfter(w),h.debug("Moving existing label",x)):h.has.label()||(x=e("<label>").insertAfter(w),h.debug("Creating label",x))}},has:{label:function(){return x.length>0}},bind:{events:function(){h.verbose("Attaching checkbox events"),C.on("click"+v,h.event.click).on("keydown"+v,k.input,h.event.keydown).on("keyup"+v,k.input,h.event.keyup)}},unbind:{events:function(){h.debug("Removing events"),C.off(v)}},uncheckOthers:function(){var e=h.get.otherRadios();h.debug("Unchecking other radios",e),e.removeClass(p.checked)},toggle:function(){return h.can.change()?void(h.is.indeterminate()||h.is.unchecked()?(h.debug("Currently unchecked"),h.check()):h.is.checked()&&h.can.uncheck()&&(h.debug("Currently checked"),h.uncheck())):void(h.is.radio()||h.debug("Checkbox is read-only or disabled, ignoring toggle"))},setting:function(n,t){if(h.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,g,n);else{if(t===i)return g[n];e.isPlainObject(g[n])?e.extend(!0,g[n],t):g[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,h,n);else{if(t===i)return h[n];h[n]=t}},debug:function(){!g.silent&&g.debug&&(g.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,g.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),h.verbose.apply(console,arguments)))},error:function(){g.silent||(h.error=Function.prototype.bind.call(console.error,console,g.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var n,t,i;g.performance&&(n=(new Date).getTime(),i=d||n,t=n-i,d=n,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":t})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var n=g.name+":",t=0;d=!1,clearTimeout(h.performance.timer),e.each(l,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",r&&(n+=" '"+r+"'"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(n,t,o){var c,r,d,l=E;return t=t||b,o=O||o,"string"==typeof n&&l!==i&&(n=n.split(/[\. ]/),c=n.length-1,e.each(n,function(t,o){var a=t!=c?o+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(l[a])&&t!=c)l=l[a];else{if(l[a]!==i)return r=l[a],!1;if(!e.isPlainObject(l[o])||t==c)return l[o]!==i?(r=l[o],!1):(h.error(m.method,n),!1);l=l[o]}})),e.isFunction(r)?d=r.apply(o,t):r!==i&&(d=r),e.isArray(a)?a.push(d):a!==i?a=[a,d]:d!==i&&(a=d),r}},u?(E===i&&h.initialize(),h.invoke(s)):(E!==i&&E.invoke("destroy"),h.initialize())}),a!==i?a:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9jaGVja2JveC5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiZG9jdW1lbnQiLCJ1bmRlZmluZWQiLCJNYXRoIiwic2VsZiIsIkZ1bmN0aW9uIiwiZm4iLCJjaGVja2JveCIsInBhcmFtZXRlcnMiLCJyZXR1cm5lZFZhbHVlIiwiJGFsbE1vZHVsZXMiLCJ0aGlzIiwibW9kdWxlU2VsZWN0b3IiLCJzZWxlY3RvciIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInBlcmZvcm1hbmNlIiwicXVlcnkiLCJhcmd1bWVudHMiLCJtZXRob2RJbnZva2VkIiwicXVlcnlBcmd1bWVudHMiLCJzbGljZSIsImNhbGwiLCJlYWNoIiwib2JzZXJ2ZXIiLCJtb2R1bGUiLCJzZXR0aW5ncyIsImV4dGVuZCIsImNsYXNzTmFtZSIsIm5hbWVzcGFjZSIsImVycm9yIiwiZXZlbnROYW1lc3BhY2UiLCJtb2R1bGVOYW1lc3BhY2UiLCIkbW9kdWxlIiwiJGxhYmVsIiwiY2hpbGRyZW4iLCJsYWJlbCIsIiRpbnB1dCIsImlucHV0IiwiaW5pdGlhbExvYWQiLCJzaG9ydGN1dFByZXNzZWQiLCJpbnN0YW5jZSIsImRhdGEiLCJlbGVtZW50IiwiaW5pdGlhbGl6ZSIsInZlcmJvc2UiLCJjcmVhdGUiLCJiaW5kIiwiZXZlbnRzIiwic2V0IiwidGFiYmFibGUiLCJoaWRlIiwib2JzZXJ2ZUNoYW5nZXMiLCJpbnN0YW50aWF0ZSIsInNldHVwIiwiZGVzdHJveSIsInVuYmluZCIsInNob3ciLCJyZW1vdmVEYXRhIiwiZml4IiwicmVmZXJlbmNlIiwiaXMiLCJkZWJ1ZyIsImNsb3Nlc3QiLCJyZWZyZXNoIiwiaW5kZXRlcm1pbmF0ZSIsImNoZWNrZWQiLCJjaGVjayIsInVuY2hlY2siLCJyZW1vdmUiLCJhZGRDbGFzcyIsImhpZGRlbiIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiYXR0YWNoRXZlbnRzIiwiZXZlbnQiLCIkZWxlbWVudCIsImlzRnVuY3Rpb24iLCJ0b2dnbGUiLCJsZW5ndGgiLCJvbiIsIm5vdEZvdW5kIiwiY2xpY2siLCIkdGFyZ2V0IiwidGFyZ2V0IiwibGluayIsImZvY3VzIiwicHJldmVudERlZmF1bHQiLCJrZXlkb3duIiwia2V5Iiwid2hpY2giLCJrZXlDb2RlIiwiZW50ZXIiLCJzcGFjZSIsImVzY2FwZSIsImJsdXIiLCJjdHJsS2V5Iiwia2V5dXAiLCJzaG91bGQiLCJhbGxvd0NoZWNrIiwiaWdub3JlQ2FsbGJhY2tzIiwib25DaGVja2VkIiwib25DaGFuZ2UiLCJhbGxvd1VuY2hlY2siLCJ1bmNoZWNrZWQiLCJvblVuY2hlY2tlZCIsImFsbG93SW5kZXRlcm1pbmF0ZSIsIm9uSW5kZXRlcm1pbmF0ZSIsImRldGVybWluYXRlIiwiYWxsb3dEZXRlcm1pbmF0ZSIsIm9uRGV0ZXJtaW5hdGUiLCJlbmFibGUiLCJlbmFibGVkIiwib25FbmFibGUiLCJvbkVuYWJsZWQiLCJkaXNhYmxlIiwiZGlzYWJsZWQiLCJvbkRpc2FibGUiLCJvbkRpc2FibGVkIiwiZ2V0IiwicmFkaW9zIiwibmFtZSIsIm90aGVyUmFkaW9zIiwibm90IiwiYXR0ciIsInJhZGlvIiwiaGFzQ2xhc3MiLCJwcm9wIiwiZm9yY2VDYWxsYmFja3MiLCJiZWZvcmVDaGVja2VkIiwiYXBwbHkiLCJiZWZvcmVVbmNoZWNrZWQiLCJiZWZvcmVJbmRldGVybWluYXRlIiwiYmVmb3JlRGV0ZXJtaW5hdGUiLCJmaXJlT25Jbml0IiwiY2FuIiwiY2hhbmdlIiwicmVhZE9ubHkiLCJ1bmNoZWNrYWJsZSIsInVuY2hlY2tPdGhlcnMiLCJ0cmlnZ2VyIiwiY3JlYXRlRXZlbnQiLCJpbnB1dEVsZW1lbnQiLCJpbml0RXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwicHJldkFsbCIsInByZXYiLCJkZXRhY2giLCJpbnNlcnRBZnRlciIsImhhcyIsIm9mZiIsIiRyYWRpb3MiLCJzZXR0aW5nIiwidmFsdWUiLCJpc1BsYWluT2JqZWN0IiwiaW50ZXJuYWwiLCJzaWxlbnQiLCJsb2ciLCJwcm90b3R5cGUiLCJjb25zb2xlIiwiaW5mbyIsIm1lc3NhZ2UiLCJjdXJyZW50VGltZSIsImV4ZWN1dGlvblRpbWUiLCJwcmV2aW91c1RpbWUiLCJwdXNoIiwiTmFtZSIsIkFyZ3VtZW50cyIsIkVsZW1lbnQiLCJFeGVjdXRpb24gVGltZSIsImNsZWFyVGltZW91dCIsInRpbWVyIiwic2V0VGltZW91dCIsImRpc3BsYXkiLCJ0aXRsZSIsInRvdGFsVGltZSIsImluZGV4IiwiZ3JvdXAiLCJ0YWJsZSIsImdyb3VwQ29sbGFwc2VkIiwiZ3JvdXBFbmQiLCJpbnZva2UiLCJwYXNzZWRBcmd1bWVudHMiLCJjb250ZXh0IiwibWF4RGVwdGgiLCJmb3VuZCIsInJlc3BvbnNlIiwib2JqZWN0Iiwic3BsaXQiLCJkZXB0aCIsImNhbWVsQ2FzZVZhbHVlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJtZXRob2QiLCJpc0FycmF5IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FVQyxTQUFXQSxFQUFHQyxFQUFRQyxFQUFVQyxHQUVqQyxZQUVBRixHQUEyQixtQkFBVkEsSUFBeUJBLEVBQU9HLE1BQVFBLEtBQ3JESCxFQUNnQixtQkFBUkksT0FBdUJBLEtBQUtELE1BQVFBLEtBQzFDQyxLQUNBQyxTQUFTLGlCQUdmTixFQUFFTyxHQUFHQyxTQUFXLFNBQVNDLEdBQ3ZCLEdBVUVDLEdBVEFDLEVBQWlCWCxFQUFFWSxNQUNuQkMsRUFBaUJGLEVBQVlHLFVBQVksR0FFekNDLEdBQWlCLEdBQUlDLE9BQU9DLFVBQzVCQyxLQUVBQyxFQUFpQkMsVUFBVSxHQUMzQkMsRUFBa0MsZ0JBQVRGLEdBQ3pCRyxLQUFvQkMsTUFBTUMsS0FBS0osVUFBVyxFQWl1QjVDLE9BN3RCQVQsR0FDR2MsS0FBSyxXQUNKLEdBb0JFQyxHQUVBQyxFQXJCQUMsRUFBa0I1QixFQUFFNkIsUUFBTyxLQUFVN0IsRUFBRU8sR0FBR0MsU0FBU29CLFNBQVVuQixHQUU3RHFCLEVBQWtCRixF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LFdBQ0VzQyxRQUFnQixVQUNoQkQsY0FBZ0IsZ0JBQ2hCdUQsU0FBZ0IsV0FDaEJqRCxPQUFnQixTQUNoQjBELE1BQWdCLFFBQ2hCWSxTQUFnQixhQUdsQi9HLE9BQ0V1SyxPQUFlLHdDQUdqQnpMLFVBQ0VOLFNBQVcsZUFDWDhCLE1BQVcsY0FDWEUsTUFBVyw4Q0FDWG1ELEtBQVcsYUFLWDhHLE9BQVF4TSxPQUFRQyIsImZpbGUiOiJ2ZW5kb3IvY2hlY2tib3guanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqICMgU2VtYW50aWMgVUkgMi4yLjcgLSBDaGVja2JveFxuICogaHR0cDovL2dpdGh1Yi5jb20vc2VtYW50aWMtb3JnL3NlbWFudGljLXVpL1xuICpcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqXG4gKi9cblxuOyhmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG53aW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoKVxuICA/IHdpbmRvd1xuICA6ICh0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aClcbiAgICA/IHNlbGZcbiAgICA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKClcbjtcblxuJC5mbi5jaGVja2JveCA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgdmFyXG4gICAgJGFsbE1vZHVsZXMgICAgPSAkKHRoaXMpLFxuICAgIG1vZHVsZVNlbGVjdG9yID0gJGFsbE1vZHVsZXMuc2VsZWN0b3IgfHwgJycsXG5cbiAgICB0aW1lICAgICAgICAgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgIHBlcmZvcm1hbmNlICAgID0gW10sXG5cbiAgICBxdWVyeSAgICAgICAgICA9IGFyZ3VtZW50c1swXSxcbiAgICBtZXRob2RJbnZva2VkICA9ICh0eXBlb2YgcXVlcnkgPT0gJ3N0cmluZycpLFxuICAgIHF1ZXJ5QXJndW1lbnRzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgIHJldHVybmVkVmFsdWVcbiAgO1xuXG4gICRhbGxNb2R1bGVzXG4gICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXJcbiAgICAgICAgc2V0dGluZ3MgICAgICAgID0gJC5leHRlbmQodHJ1ZSwge30sICQuZm4uY2hlY2tib3guc2V0dGluZ3MsIHBhcmFtZXRlcnMpLFxuXG4gICAgICAgIGNsYXNzTmFtZSAgICAgICA9IHNldHRpbmdzLmNsYXNzTmFtZSxcbiAgICAgICAgbmFtZXNwYWNlICAgICAgID0gc2V0dGluZ3MubmFtZXNwYWNlLFxuICAgICAgICBzZWxlY3RvciAgICAgICAgPSBzZXR0aW5ncy5zZWxlY3RvcixcbiAgICAgICAgZXJyb3IgICAgICAgICAgID0gc2V0dGluZ3MuZXJyb3IsXG5cbiAgICAgICAgZXZlbnROYW1lc3BhY2UgID0gJy4nICsgbmFtZXNwYWNlLFxuICAgICAgICBtb2R1bGVOYW1lc3BhY2UgPSAnbW9kdWxlLScgKyBuYW1lc3BhY2UsXG5cbiAgICAgICAgJG1vZHVsZSAgICAgICAgID0gJCh0aGlzKSxcbiAgICAgICAgJGxhYmVsICAgICAgICAgID0gJCh0aGlzKS5jaGlsZHJlbihzZWxlY3Rvci5sYWJlbCksXG4gICAgICAgICRpbnB1dCAgICAgICAgICA9ICQodGhpcykuY2hpbGRyZW4oc2VsZWN0b3IuaW5wdXQpLFxuICAgICAgICBpbnB1dCAgICAgICAgICAgPSAkaW5wdXRbMF0sXG5cbiAgICAgICAgaW5pdGlhbExvYWQgICAgID0gZmFsc2UsXG4gICAgICAgIHNob3J0Y3V0UHJlc3NlZCA9IGZhbHNlLFxuICAgICAgICBpbnN0YW5jZSAgICAgICAgPSAkbW9kdWxlLmRhdGEobW9kdWxlTmFtZXNwYWNlKSxcblxuICAgICAgICBvYnNlcnZlcixcbiAgICAgICAgZWxlbWVudCAgICAgICAgID0gdGhpcyxcbiAgICAgICAgbW9kdWxlXG4gICAgICA7XG5cbiAgICAgIG1vZHVsZSAgICAgID0ge1xuXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdJbml0aWFsaXppbmcgY2hlY2tib3gnLCBzZXR0aW5ncyk7XG5cbiAgICAgICAgICBtb2R1bGUuY3JlYXRlLmxhYmVsKCk7XG4gICAgICAgICAgbW9kdWxlLmJpbmQuZXZlbnRzKCk7XG5cbiAgICAgICAgICBtb2R1bGUuc2V0LnRhYmJhYmxlKCk7XG4gICAgICAgICAgbW9kdWxlLmhpZGUuaW5wdXQoKTtcblxuICAgICAgICAgIG1vZHVsZS5vYnNlcnZlQ2hhbmdlcygpO1xuICAgICAgICAgIG1vZHVsZS5pbnN0YW50aWF0ZSgpO1xuICAgICAgICAgIG1vZHVsZS5zZXR1cCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluc3RhbnRpYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU3RvcmluZyBpbnN0YW5jZSBvZiBtb2R1bGUnLCBtb2R1bGUpO1xuICAgICAgICAgIGluc3RhbmNlID0gbW9kdWxlO1xuICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgIC5kYXRhKG1vZHVsZU5hbWVzcGFjZSwgbW9kdWxlKVxuICAgICAgICAgIDtcbiAgICAgICAgfSxcblxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRGVzdHJveWluZyBtb2R1bGUnKTtcbiAgICAgICAgICBtb2R1bGUudW5iaW5kLmV2ZW50cygpO1xuICAgICAgICAgIG1vZHVsZS5zaG93LmlucHV0KCk7XG4gICAgICAgICAgJG1vZHVsZS5yZW1vdmVEYXRhKG1vZHVsZU5hbWVzcGFjZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZml4OiB7XG4gICAgICAgICAgcmVmZXJlbmNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCAkbW9kdWxlLmlzKHNlbGVjdG9yLmlucHV0KSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdCZWhhdmlvciBjYWxsZWQgb24gPGlucHV0PiBhZGp1c3RpbmcgaW52b2tlZCBlbGVtZW50Jyk7XG4gICAgICAgICAgICAgICRtb2R1bGUgPSAkbW9kdWxlLmNsb3Nlc3Qoc2VsZWN0b3IuY2hlY2tib3gpO1xuICAgICAgICAgICAgICBtb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kdWxlLnNldC5pbml0aWFsTG9hZCgpO1xuICAgICAgICAgIGlmKCBtb2R1bGUuaXMuaW5kZXRlcm1pbmF0ZSgpICkge1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdJbml0aWFsIHZhbHVlIGlzIGluZGV0ZXJtaW5hdGUnKTtcbiAgICAgICAgICAgIG1vZHVsZS5pbmRldGVybWluYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYoIG1vZHVsZS5pcy5jaGVja2VkKCkgKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0luaXRpYWwgdmFsdWUgaXMgY2hlY2tlZCcpO1xuICAgICAgICAgICAgbW9kdWxlLmNoZWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdJbml0aWFsIHZhbHVlIGlzIHVuY2hlY2tlZCcpO1xuICAgICAgICAgICAgbW9kdWxlLnVuY2hlY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kdWxlLnJlbW92ZS5pbml0aWFsTG9hZCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRsYWJlbCA9ICRtb2R1bGUuY2hpbGRyZW4oc2VsZWN0b3IubGFiZWwpO1xuICAgICAgICAgICRpbnB1dCA9ICRtb2R1bGUuY2hpbGRyZW4oc2VsZWN0b3IuaW5wdXQpO1xuICAgICAgICAgIGlucHV0ICA9ICRpbnB1dFswXTtcbiAgICAgICAgfSxcblxuICAgICAgICBoaWRlOiB7XG4gICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ01vZGlmeWluZyA8aW5wdXQ+IHotaW5kZXggdG8gYmUgdW5zZWxlY3RhYmxlJyk7XG4gICAgICAgICAgICAkaW5wdXQuYWRkQ2xhc3MoY2xhc3NOYW1lLmhpZGRlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzaG93OiB7XG4gICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ01vZGlmeWluZyA8aW5wdXQ+IHotaW5kZXggdG8gYmUgc2VsZWN0YWJsZScpO1xuICAgICAgICAgICAgJGlucHV0LnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5oaWRkZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvYnNlcnZlQ2hhbmdlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoJ011dGF0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdET00gdHJlZSBtb2RpZmllZCwgdXBkYXRpbmcgc2VsZWN0b3IgY2FjaGUnKTtcbiAgICAgICAgICAgICAgbW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50LCB7XG4gICAgICAgICAgICAgIGNoaWxkTGlzdCA6IHRydWUsXG4gICAgICAgICAgICAgIHN1YnRyZWUgICA6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTZXR0aW5nIHVwIG11dGF0aW9uIG9ic2VydmVyJywgb2JzZXJ2ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhdHRhY2hFdmVudHM6IGZ1bmN0aW9uKHNlbGVjdG9yLCBldmVudCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgJGVsZW1lbnQgPSAkKHNlbGVjdG9yKVxuICAgICAgICAgIDtcbiAgICAgICAgICBldmVudCA9ICQuaXNGdW5jdGlvbihtb2R1bGVbZXZlbnRdKVxuICAgICAgICAgICAgPyBtb2R1bGVbZXZlbnRdXG4gICAgICAgICAgICA6IG1vZHVsZS50b2dnbGVcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYoJGVsZW1lbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdBdHRhY2hpbmcgY2hlY2tib3ggZXZlbnRzIHRvIGVsZW1lbnQnLCBzZWxlY3RvciwgZXZlbnQpO1xuICAgICAgICAgICAgJGVsZW1lbnRcbiAgICAgICAgICAgICAgLm9uKCdjbGljaycgKyBldmVudE5hbWVzcGFjZSwgZXZlbnQpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm5vdEZvdW5kKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICBjbGljazogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAkdGFyZ2V0ID0gJChldmVudC50YXJnZXQpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZiggJHRhcmdldC5pcyhzZWxlY3Rvci5pbnB1dCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdVc2luZyBkZWZhdWx0IGNoZWNrIGFjdGlvbiBvbiBpbml0aWFsaXplZCBjaGVja2JveCcpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggJHRhcmdldC5pcyhzZWxlY3Rvci5saW5rKSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdDbGlja2luZyBsaW5rIGluc2lkZSBjaGVja2JveCwgc2tpcHBpbmcgdG9nZ2xlJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZS50b2dnbGUoKTtcbiAgICAgICAgICAgICRpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAga2V5ICAgICA9IGV2ZW50LndoaWNoLFxuICAgICAgICAgICAgICBrZXlDb2RlID0ge1xuICAgICAgICAgICAgICAgIGVudGVyICA6IDEzLFxuICAgICAgICAgICAgICAgIHNwYWNlICA6IDMyLFxuICAgICAgICAgICAgICAgIGVzY2FwZSA6IDI3XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKGtleSA9PSBrZXlDb2RlLmVzY2FwZSkge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRXNjYXBlIGtleSBwcmVzc2VkIGJsdXJyaW5nIGZpZWxkJyk7XG4gICAgICAgICAgICAgICRpbnB1dC5ibHVyKCk7XG4gICAgICAgICAgICAgIHNob3J0Y3V0UHJlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCFldmVudC5jdHJsS2V5ICYmICgga2V5ID09IGtleUNvZGUuc3BhY2UgfHwga2V5ID09IGtleUNvZGUuZW50ZXIpICkge1xuICAgICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnRW50ZXIvc3BhY2Uga2V5IHByZXNzZWQsIHRvZ2dsaW5nIGNoZWNrYm94Jyk7XG4gICAgICAgICAgICAgIG1vZHVsZS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgc2hvcnRjdXRQcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBzaG9ydGN1dFByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGtleXVwOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYoc2hvcnRjdXRQcmVzc2VkKSB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiggIW1vZHVsZS5zaG91bGQuYWxsb3dDaGVjaygpICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NoZWNraW5nIGNoZWNrYm94JywgJGlucHV0KTtcbiAgICAgICAgICBtb2R1bGUuc2V0LmNoZWNrZWQoKTtcbiAgICAgICAgICBpZiggIW1vZHVsZS5zaG91bGQuaWdub3JlQ2FsbGJhY2tzKCkgKSB7XG4gICAgICAgICAgICBzZXR0aW5ncy5vbkNoZWNrZWQuY2FsbChpbnB1dCk7XG4gICAgICAgICAgICBzZXR0aW5ncy5vbkNoYW5nZS5jYWxsKGlucHV0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdW5jaGVjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoICFtb2R1bGUuc2hvdWxkLmFsbG93VW5jaGVjaygpICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ1VuY2hlY2tpbmcgY2hlY2tib3gnKTtcbiAgICAgICAgICBtb2R1bGUuc2V0LnVuY2hlY2tlZCgpO1xuICAgICAgICAgIGlmKCAhbW9kdWxlLnNob3VsZC5pZ25vcmVDYWxsYmFja3MoKSApIHtcbiAgICAgICAgICAgIHNldHRpbmdzLm9uVW5jaGVja2VkLmNhbGwoaW5wdXQpO1xuICAgICAgICAgICAgc2V0dGluZ3Mub25DaGFuZ2UuY2FsbChpbnB1dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGluZGV0ZXJtaW5hdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCBtb2R1bGUuc2hvdWxkLmFsbG93SW5kZXRlcm1pbmF0ZSgpICkge1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdDaGVja2JveCBpcyBhbHJlYWR5IGluZGV0ZXJtaW5hdGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kdWxlLmRlYnVnKCdNYWtpbmcgY2hlY2tib3ggaW5kZXRlcm1pbmF0ZScpO1xuICAgICAgICAgIG1vZHVsZS5zZXQuaW5kZXRlcm1pbmF0ZSgpO1xuICAgICAgICAgIGlmKCAhbW9kdWxlLnNob3VsZC5pZ25vcmVDYWxsYmFja3MoKSApIHtcbiAgICAgICAgICAgIHNldHRpbmdzLm9uSW5kZXRlcm1pbmF0ZS5jYWxsKGlucHV0KTtcbiAgICAgICAgICAgIHNldHRpbmdzLm9uQ2hhbmdlLmNhbGwoaW5wdXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBkZXRlcm1pbmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIG1vZHVsZS5zaG91bGQuYWxsb3dEZXRlcm1pbmF0ZSgpICkge1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdDaGVja2JveCBpcyBhbHJlYWR5IGRldGVybWluYXRlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnTWFraW5nIGNoZWNrYm94IGRldGVybWluYXRlJyk7XG4gICAgICAgICAgbW9kdWxlLnNldC5kZXRlcm1pbmF0ZSgpO1xuICAgICAgICAgIGlmKCAhbW9kdWxlLnNob3VsZC5pZ25vcmVDYWxsYmFja3MoKSApIHtcbiAgICAgICAgICAgIHNldHRpbmdzLm9uRGV0ZXJtaW5hdGUuY2FsbChpbnB1dCk7XG4gICAgICAgICAgICBzZXR0aW5ncy5vbkNoYW5nZS5jYWxsKGlucHV0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZW5hYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiggbW9kdWxlLmlzLmVuYWJsZWQoKSApIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQ2hlY2tib3ggaXMgYWxyZWFkeSBlbmFibGVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnRW5hYmxpbmcgY2hlY2tib3gnKTtcbiAgICAgICAgICBtb2R1bGUuc2V0LmVuYWJsZWQoKTtcbiAgICAgICAgICBzZXR0aW5ncy5vbkVuYWJsZS5jYWxsKGlucHV0KTtcbiAgICAgICAgICAvLyBwcmVzZXJ2ZSBsZWdhY3kgY2FsbGJhY2tzXG4gICAgICAgICAgc2V0dGluZ3Mub25FbmFibGVkLmNhbGwoaW5wdXQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCBtb2R1bGUuaXMuZGlzYWJsZWQoKSApIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQ2hlY2tib3ggaXMgYWxyZWFkeSBkaXNhYmxlZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ0Rpc2FibGluZyBjaGVja2JveCcpO1xuICAgICAgICAgIG1vZHVsZS5zZXQuZGlzYWJsZWQoKTtcbiAgICAgICAgICBzZXR0aW5ncy5vbkRpc2FibGUuY2FsbChpbnB1dCk7XG4gICAgICAgICAgLy8gcHJlc2VydmUgbGVnYWN5IGNhbGxiYWNrc1xuICAgICAgICAgIHNldHRpbmdzLm9uRGlzYWJsZWQuY2FsbChpbnB1dCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgcmFkaW9zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBuYW1lID0gbW9kdWxlLmdldC5uYW1lKClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHJldHVybiAkKCdpbnB1dFtuYW1lPVwiJyArIG5hbWUgKyAnXCJdJykuY2xvc2VzdChzZWxlY3Rvci5jaGVja2JveCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvdGhlclJhZGlvczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlLmdldC5yYWRpb3MoKS5ub3QoJG1vZHVsZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkaW5wdXQuYXR0cignbmFtZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpczoge1xuICAgICAgICAgIGluaXRpYWxMb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsTG9hZDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJhZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoJGlucHV0Lmhhc0NsYXNzKGNsYXNzTmFtZS5yYWRpbykgfHwgJGlucHV0LmF0dHIoJ3R5cGUnKSA9PSAncmFkaW8nKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluZGV0ZXJtaW5hdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRpbnB1dC5wcm9wKCdpbmRldGVybWluYXRlJykgIT09IHVuZGVmaW5lZCAmJiAkaW5wdXQucHJvcCgnaW5kZXRlcm1pbmF0ZScpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hlY2tlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0LnByb3AoJ2NoZWNrZWQnKSAhPT0gdW5kZWZpbmVkICYmICRpbnB1dC5wcm9wKCdjaGVja2VkJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0LnByb3AoJ2Rpc2FibGVkJykgIT09IHVuZGVmaW5lZCAmJiAkaW5wdXQucHJvcCgnZGlzYWJsZWQnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVuYWJsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICFtb2R1bGUuaXMuZGlzYWJsZWQoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRldGVybWluYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAhbW9kdWxlLmlzLmluZGV0ZXJtaW5hdGUoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVuY2hlY2tlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gIW1vZHVsZS5pcy5jaGVja2VkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3VsZDoge1xuICAgICAgICAgIGFsbG93Q2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYobW9kdWxlLmlzLmRldGVybWluYXRlKCkgJiYgbW9kdWxlLmlzLmNoZWNrZWQoKSAmJiAhbW9kdWxlLnNob3VsZC5mb3JjZUNhbGxiYWNrcygpICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Nob3VsZCBub3QgYWxsb3cgY2hlY2ssIGNoZWNrYm94IGlzIGFscmVhZHkgY2hlY2tlZCcpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5iZWZvcmVDaGVja2VkLmFwcGx5KGlucHV0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTaG91bGQgbm90IGFsbG93IGNoZWNrLCBiZWZvcmVDaGVja2VkIGNhbmNlbGxlZCcpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsbG93VW5jaGVjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZihtb2R1bGUuaXMuZGV0ZXJtaW5hdGUoKSAmJiBtb2R1bGUuaXMudW5jaGVja2VkKCkgJiYgIW1vZHVsZS5zaG91bGQuZm9yY2VDYWxsYmFja3MoKSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTaG91bGQgbm90IGFsbG93IHVuY2hlY2ssIGNoZWNrYm94IGlzIGFscmVhZHkgdW5jaGVja2VkJyk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHNldHRpbmdzLmJlZm9yZVVuY2hlY2tlZC5hcHBseShpbnB1dCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2hvdWxkIG5vdCBhbGxvdyB1bmNoZWNrLCBiZWZvcmVVbmNoZWNrZWQgY2FuY2VsbGVkJyk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsb3dJbmRldGVybWluYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKG1vZHVsZS5pcy5pbmRldGVybWluYXRlKCkgJiYgIW1vZHVsZS5zaG91bGQuZm9yY2VDYWxsYmFja3MoKSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTaG91bGQgbm90IGFsbG93IGluZGV0ZXJtaW5hdGUsIGNoZWNrYm94IGlzIGFscmVhZHkgaW5kZXRlcm1pbmF0ZScpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5iZWZvcmVJbmRldGVybWluYXRlLmFwcGx5KGlucHV0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTaG91bGQgbm90IGFsbG93IGluZGV0ZXJtaW5hdGUsIGJlZm9yZUluZGV0ZXJtaW5hdGUgY2FuY2VsbGVkJyk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsb3dEZXRlcm1pbmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZihtb2R1bGUuaXMuZGV0ZXJtaW5hdGUoKSAmJiAhbW9kdWxlLnNob3VsZC5mb3JjZUNhbGxiYWNrcygpICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Nob3VsZCBub3QgYWxsb3cgZGV0ZXJtaW5hdGUsIGNoZWNrYm94IGlzIGFscmVhZHkgZGV0ZXJtaW5hdGUnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc2V0dGluZ3MuYmVmb3JlRGV0ZXJtaW5hdGUuYXBwbHkoaW5wdXQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1Nob3VsZCBub3QgYWxsb3cgZGV0ZXJtaW5hdGUsIGJlZm9yZURldGVybWluYXRlIGNhbmNlbGxlZCcpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcmNlQ2FsbGJhY2tzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAobW9kdWxlLmlzLmluaXRpYWxMb2FkKCkgJiYgc2V0dGluZ3MuZmlyZU9uSW5pdCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpZ25vcmVDYWxsYmFja3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChpbml0aWFsTG9hZCAmJiAhc2V0dGluZ3MuZmlyZU9uSW5pdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNhbjoge1xuICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gISggJG1vZHVsZS5oYXNDbGFzcyhjbGFzc05hbWUuZGlzYWJsZWQpIHx8ICRtb2R1bGUuaGFzQ2xhc3MoY2xhc3NOYW1lLnJlYWRPbmx5KSB8fCAkaW5wdXQucHJvcCgnZGlzYWJsZWQnKSB8fCAkaW5wdXQucHJvcCgncmVhZG9ubHknKSApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdW5jaGVjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBzZXR0aW5ncy51bmNoZWNrYWJsZSA9PT0gJ2Jvb2xlYW4nKVxuICAgICAgICAgICAgICA/IHNldHRpbmdzLnVuY2hlY2thYmxlXG4gICAgICAgICAgICAgIDogIW1vZHVsZS5pcy5yYWRpbygpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldDoge1xuICAgICAgICAgIGluaXRpYWxMb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGluaXRpYWxMb2FkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNoZWNrZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ1NldHRpbmcgY2xhc3MgdG8gY2hlY2tlZCcpO1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmluZGV0ZXJtaW5hdGUpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuY2hlY2tlZClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKCBtb2R1bGUuaXMucmFkaW8oKSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnVuY2hlY2tPdGhlcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFtb2R1bGUuaXMuaW5kZXRlcm1pbmF0ZSgpICYmIG1vZHVsZS5pcy5jaGVja2VkKCkpIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdJbnB1dCBpcyBhbHJlYWR5IGNoZWNrZWQsIHNraXBwaW5nIGlucHV0IHByb3BlcnR5IGNoYW5nZScpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU2V0dGluZyBzdGF0ZSB0byBjaGVja2VkJywgaW5wdXQpO1xuICAgICAgICAgICAgJGlucHV0XG4gICAgICAgICAgICAgIC5wcm9wKCdpbmRldGVybWluYXRlJywgZmFsc2UpXG4gICAgICAgICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS50cmlnZ2VyLmNoYW5nZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdW5jaGVja2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZW1vdmluZyBjaGVja2VkIGNsYXNzJyk7XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhjbGFzc05hbWUuaW5kZXRlcm1pbmF0ZSlcbiAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5jaGVja2VkKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoIW1vZHVsZS5pcy5pbmRldGVybWluYXRlKCkgJiYgIG1vZHVsZS5pcy51bmNoZWNrZWQoKSApIHtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdJbnB1dCBpcyBhbHJlYWR5IHVuY2hlY2tlZCcpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1NldHRpbmcgc3RhdGUgdG8gdW5jaGVja2VkJyk7XG4gICAgICAgICAgICAkaW5wdXRcbiAgICAgICAgICAgICAgLnByb3AoJ2luZGV0ZXJtaW5hdGUnLCBmYWxzZSlcbiAgICAgICAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS50cmlnZ2VyLmNoYW5nZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5kZXRlcm1pbmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU2V0dGluZyBjbGFzcyB0byBpbmRldGVybWluYXRlJyk7XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhjbGFzc05hbWUuaW5kZXRlcm1pbmF0ZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmKCBtb2R1bGUuaXMuaW5kZXRlcm1pbmF0ZSgpICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0lucHV0IGlzIGFscmVhZHkgaW5kZXRlcm1pbmF0ZSwgc2tpcHBpbmcgaW5wdXQgcHJvcGVydHkgY2hhbmdlJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2V0dGluZyBzdGF0ZSB0byBpbmRldGVybWluYXRlJyk7XG4gICAgICAgICAgICAkaW5wdXRcbiAgICAgICAgICAgICAgLnByb3AoJ2luZGV0ZXJtaW5hdGUnLCB0cnVlKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnRyaWdnZXIuY2hhbmdlKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXRlcm1pbmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnUmVtb3ZpbmcgaW5kZXRlcm1pbmF0ZSBjbGFzcycpO1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lLmluZGV0ZXJtaW5hdGUpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZiggbW9kdWxlLmlzLmRldGVybWluYXRlKCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnSW5wdXQgaXMgYWxyZWFkeSBkZXRlcm1pbmF0ZSwgc2tpcHBpbmcgaW5wdXQgcHJvcGVydHkgY2hhbmdlJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnU2V0dGluZyBzdGF0ZSB0byBkZXRlcm1pbmF0ZScpO1xuICAgICAgICAgICAgJGlucHV0XG4gICAgICAgICAgICAgIC5wcm9wKCdpbmRldGVybWluYXRlJywgZmFsc2UpXG4gICAgICAgICAgICA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2R1bGUudmVyYm9zZSgnU2V0dGluZyBjbGFzcyB0byBkaXNhYmxlZCcpO1xuICAgICAgICAgICAgJG1vZHVsZVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoY2xhc3NOYW1lLmRpc2FibGVkKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoIG1vZHVsZS5pcy5kaXNhYmxlZCgpICkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0lucHV0IGlzIGFscmVhZHkgZGlzYWJsZWQsIHNraXBwaW5nIGlucHV0IHByb3BlcnR5IGNoYW5nZScpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ1NldHRpbmcgc3RhdGUgdG8gZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICRpbnB1dFxuICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbW9kdWxlLnRyaWdnZXIuY2hhbmdlKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbmFibGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdSZW1vdmluZyBkaXNhYmxlZCBjbGFzcycpO1xuICAgICAgICAgICAgJG1vZHVsZS5yZW1vdmVDbGFzcyhjbGFzc05hbWUuZGlzYWJsZWQpO1xuICAgICAgICAgICAgaWYoIG1vZHVsZS5pcy5lbmFibGVkKCkgKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnSW5wdXQgaXMgYWxyZWFkeSBlbmFibGVkLCBza2lwcGluZyBpbnB1dCBwcm9wZXJ0eSBjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdTZXR0aW5nIHN0YXRlIHRvIGVuYWJsZWQnKTtcbiAgICAgICAgICAgICRpbnB1dFxuICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIG1vZHVsZS50cmlnZ2VyLmNoYW5nZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFiYmFibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UoJ0FkZGluZyB0YWJpbmRleCB0byBjaGVja2JveCcpO1xuICAgICAgICAgICAgaWYoICRpbnB1dC5hdHRyKCd0YWJpbmRleCcpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgJGlucHV0LmF0dHIoJ3RhYmluZGV4JywgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZToge1xuICAgICAgICAgIGluaXRpYWxMb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGluaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHRyaWdnZXI6IHtcbiAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGV2ZW50cyAgICAgICA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyksXG4gICAgICAgICAgICAgIGlucHV0RWxlbWVudCA9ICRpbnB1dFswXVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdUcmlnZ2VyaW5nIG5hdGl2ZSBjaGFuZ2UgZXZlbnQnKTtcbiAgICAgICAgICAgICAgZXZlbnRzLmluaXRFdmVudCgnY2hhbmdlJywgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICBpbnB1dEVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuXG4gICAgICAgIGNyZWF0ZToge1xuICAgICAgICAgIGxhYmVsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCRpbnB1dC5wcmV2QWxsKHNlbGVjdG9yLmxhYmVsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICRpbnB1dC5wcmV2KHNlbGVjdG9yLmxhYmVsKS5kZXRhY2goKS5pbnNlcnRBZnRlcigkaW5wdXQpO1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ01vdmluZyBleGlzdGluZyBsYWJlbCcsICRsYWJlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCAhbW9kdWxlLmhhcy5sYWJlbCgpICkge1xuICAgICAgICAgICAgICAkbGFiZWwgPSAkKCc8bGFiZWw+JykuaW5zZXJ0QWZ0ZXIoJGlucHV0KTtcbiAgICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdDcmVhdGluZyBsYWJlbCcsICRsYWJlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGhhczoge1xuICAgICAgICAgIGxhYmVsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoJGxhYmVsLmxlbmd0aCA+IDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBiaW5kOiB7XG4gICAgICAgICAgZXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlKCdBdHRhY2hpbmcgY2hlY2tib3ggZXZlbnRzJyk7XG4gICAgICAgICAgICAkbW9kdWxlXG4gICAgICAgICAgICAgIC5vbignY2xpY2snICAgKyBldmVudE5hbWVzcGFjZSwgbW9kdWxlLmV2ZW50LmNsaWNrKVxuICAgICAgICAgICAgICAub24oJ2tleWRvd24nICsgZXZlbnROYW1lc3BhY2UsIHNlbGVjdG9yLmlucHV0LCBtb2R1bGUuZXZlbnQua2V5ZG93bilcbiAgICAgICAgICAgICAgLm9uKCdrZXl1cCcgICArIGV2ZW50TmFtZXNwYWNlLCBzZWxlY3Rvci5pbnB1dCwgbW9kdWxlLmV2ZW50LmtleXVwKVxuICAgICAgICAgICAgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1bmJpbmQ6IHtcbiAgICAgICAgICBldmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kdWxlLmRlYnVnKCdSZW1vdmluZyBldmVudHMnKTtcbiAgICAgICAgICAgICRtb2R1bGVcbiAgICAgICAgICAgICAgLm9mZihldmVudE5hbWVzcGFjZSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdW5jaGVja090aGVyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICAkcmFkaW9zID0gbW9kdWxlLmdldC5vdGhlclJhZGlvcygpXG4gICAgICAgICAgO1xuICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnVW5jaGVja2luZyBvdGhlciByYWRpb3MnLCAkcmFkaW9zKTtcbiAgICAgICAgICAkcmFkaW9zLnJlbW92ZUNsYXNzKGNsYXNzTmFtZS5jaGVja2VkKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCAhbW9kdWxlLmNhbi5jaGFuZ2UoKSApIHtcbiAgICAgICAgICAgIGlmKCFtb2R1bGUuaXMucmFkaW8oKSkge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NoZWNrYm94IGlzIHJlYWQtb25seSBvciBkaXNhYmxlZCwgaWdub3JpbmcgdG9nZ2xlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCBtb2R1bGUuaXMuaW5kZXRlcm1pbmF0ZSgpIHx8IG1vZHVsZS5pcy51bmNoZWNrZWQoKSApIHtcbiAgICAgICAgICAgIG1vZHVsZS5kZWJ1ZygnQ3VycmVudGx5IHVuY2hlY2tlZCcpO1xuICAgICAgICAgICAgbW9kdWxlLmNoZWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYoIG1vZHVsZS5pcy5jaGVja2VkKCkgJiYgbW9kdWxlLmNhbi51bmNoZWNrKCkgKSB7XG4gICAgICAgICAgICBtb2R1bGUuZGVidWcoJ0N1cnJlbnRseSBjaGVja2VkJyk7XG4gICAgICAgICAgICBtb2R1bGUudW5jaGVjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0dGluZzogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICBtb2R1bGUuZGVidWcoJ0NoYW5naW5nIHNldHRpbmcnLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdChuYW1lKSApIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHNldHRpbmdzLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZigkLmlzUGxhaW5PYmplY3Qoc2V0dGluZ3NbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHNldHRpbmdzW25hbWVdLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0dGluZ3NbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0dGluZ3NbbmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnRlcm5hbDogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICBpZiggJC5pc1BsYWluT2JqZWN0KG5hbWUpICkge1xuICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgbW9kdWxlLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtb2R1bGVbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlW25hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVidWc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKCFzZXR0aW5ncy5zaWxlbnQgJiYgc2V0dGluZ3MuZGVidWcpIHtcbiAgICAgICAgICAgIGlmKHNldHRpbmdzLnBlcmZvcm1hbmNlKSB7XG4gICAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBtb2R1bGUuZGVidWcgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbywgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICAgIG1vZHVsZS5kZWJ1Zy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdmVyYm9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIXNldHRpbmdzLnNpbGVudCAmJiBzZXR0aW5ncy52ZXJib3NlICYmIHNldHRpbmdzLmRlYnVnKSB7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBtb2R1bGUucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kdWxlLnZlcmJvc2UgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbywgY29uc29sZSwgc2V0dGluZ3MubmFtZSArICc6Jyk7XG4gICAgICAgICAgICAgIG1vZHVsZS52ZXJib3NlLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoIXNldHRpbmdzLnNpbGVudCkge1xuICAgICAgICAgICAgbW9kdWxlLmVycm9yID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLCBjb25zb2xlLCBzZXR0aW5ncy5uYW1lICsgJzonKTtcbiAgICAgICAgICAgIG1vZHVsZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgICBsb2c6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBjdXJyZW50VGltZSxcbiAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZSxcbiAgICAgICAgICAgICAgcHJldmlvdXNUaW1lXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZihzZXR0aW5ncy5wZXJmb3JtYW5jZSkge1xuICAgICAgICAgICAgICBjdXJyZW50VGltZSAgID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgIHByZXZpb3VzVGltZSAgPSB0aW1lIHx8IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICBleGVjdXRpb25UaW1lID0gY3VycmVudFRpbWUgLSBwcmV2aW91c1RpbWU7XG4gICAgICAgICAgICAgIHRpbWUgICAgICAgICAgPSBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgcGVyZm9ybWFuY2UucHVzaCh7XG4gICAgICAgICAgICAgICAgJ05hbWUnICAgICAgICAgICA6IG1lc3NhZ2VbMF0sXG4gICAgICAgICAgICAgICAgJ0FyZ3VtZW50cycgICAgICA6IFtdLnNsaWNlLmNhbGwobWVzc2FnZSwgMSkgfHwgJycsXG4gICAgICAgICAgICAgICAgJ0VsZW1lbnQnICAgICAgICA6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgJ0V4ZWN1dGlvbiBUaW1lJyA6IGV4ZWN1dGlvblRpbWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLnRpbWVyKTtcbiAgICAgICAgICAgIG1vZHVsZS5wZXJmb3JtYW5jZS50aW1lciA9IHNldFRpbWVvdXQobW9kdWxlLnBlcmZvcm1hbmNlLmRpc3BsYXksIDUwMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNwbGF5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICB0aXRsZSA9IHNldHRpbmdzLm5hbWUgKyAnOicsXG4gICAgICAgICAgICAgIHRvdGFsVGltZSA9IDBcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHRpbWUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtb2R1bGUucGVyZm9ybWFuY2UudGltZXIpO1xuICAgICAgICAgICAgJC5lYWNoKHBlcmZvcm1hbmNlLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgICB0b3RhbFRpbWUgKz0gZGF0YVsnRXhlY3V0aW9uIFRpbWUnXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGl0bGUgKz0gJyAnICsgdG90YWxUaW1lICsgJ21zJztcbiAgICAgICAgICAgIGlmKG1vZHVsZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHRpdGxlICs9ICcgXFwnJyArIG1vZHVsZVNlbGVjdG9yICsgJ1xcJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggKGNvbnNvbGUuZ3JvdXAgIT09IHVuZGVmaW5lZCB8fCBjb25zb2xlLnRhYmxlICE9PSB1bmRlZmluZWQpICYmIHBlcmZvcm1hbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZCh0aXRsZSk7XG4gICAgICAgICAgICAgIGlmKGNvbnNvbGUudGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKHBlcmZvcm1hbmNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLmVhY2gocGVyZm9ybWFuY2UsIGZ1bmN0aW9uKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhWydOYW1lJ10gKyAnOiAnICsgZGF0YVsnRXhlY3V0aW9uIFRpbWUnXSsnbXMnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZXJmb3JtYW5jZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52b2tlOiBmdW5jdGlvbihxdWVyeSwgcGFzc2VkQXJndW1lbnRzLCBjb250ZXh0KSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBvYmplY3QgPSBpbnN0YW5jZSxcbiAgICAgICAgICAgIG1heERlcHRoLFxuICAgICAgICAgICAgZm91bmQsXG4gICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgIDtcbiAgICAgICAgICBwYXNzZWRBcmd1bWVudHMgPSBwYXNzZWRBcmd1bWVudHMgfHwgcXVlcnlBcmd1bWVudHM7XG4gICAgICAgICAgY29udGV4dCAgICAgICAgID0gZWxlbWVudCAgICAgICAgIHx8IGNvbnRleHQ7XG4gICAgICAgICAgaWYodHlwZW9mIHF1ZXJ5ID09ICdzdHJpbmcnICYmIG9iamVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeSAgICA9IHF1ZXJ5LnNwbGl0KC9bXFwuIF0vKTtcbiAgICAgICAgICAgIG1heERlcHRoID0gcXVlcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICQuZWFjaChxdWVyeSwgZnVuY3Rpb24oZGVwdGgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgIHZhciBjYW1lbENhc2VWYWx1ZSA9IChkZXB0aCAhPSBtYXhEZXB0aClcbiAgICAgICAgICAgICAgICA/IHZhbHVlICsgcXVlcnlbZGVwdGggKyAxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHF1ZXJ5W2RlcHRoICsgMV0uc2xpY2UoMSlcbiAgICAgICAgICAgICAgICA6IHF1ZXJ5XG4gICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgaWYoICQuaXNQbGFpbk9iamVjdCggb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXSApICYmIChkZXB0aCAhPSBtYXhEZXB0aCkgKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0W2NhbWVsQ2FzZVZhbHVlXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCBvYmplY3RbY2FtZWxDYXNlVmFsdWVdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSBvYmplY3RbY2FtZWxDYXNlVmFsdWVdO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKCAkLmlzUGxhaW5PYmplY3QoIG9iamVjdFt2YWx1ZV0gKSAmJiAoZGVwdGggIT0gbWF4RGVwdGgpICkge1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IG9iamVjdFt2YWx1ZV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiggb2JqZWN0W3ZhbHVlXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gb2JqZWN0W3ZhbHVlXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmVycm9yKGVycm9yLm1ldGhvZCwgcXVlcnkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggJC5pc0Z1bmN0aW9uKCBmb3VuZCApICkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBmb3VuZC5hcHBseShjb250ZXh0LCBwYXNzZWRBcmd1bWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKGZvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZm91bmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCQuaXNBcnJheShyZXR1cm5lZFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZS5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihyZXR1cm5lZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSBbcmV0dXJuZWRWYWx1ZSwgcmVzcG9uc2VdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSByZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZihtZXRob2RJbnZva2VkKSB7XG4gICAgICAgIGlmKGluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIG1vZHVsZS5pbnZva2UocXVlcnkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmKGluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpbnN0YW5jZS5pbnZva2UoJ2Rlc3Ryb3knKTtcbiAgICAgICAgfVxuICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIDtcblxuICByZXR1cm4gKHJldHVybmVkVmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICA/IHJldHVybmVkVmFsdWVcbiAgICA6IHRoaXNcbiAgO1xufTtcblxuJC5mbi5jaGVja2JveC5zZXR0aW5ncyA9IHtcblxuICBuYW1lICAgICAgICAgICAgICAgIDogJ0NoZWNrYm94JyxcbiAgbmFtZXNwYWNlICAgICAgICAgICA6ICdjaGVja2JveCcsXG5cbiAgc2lsZW50ICAgICAgICAgICAgICA6IGZhbHNlLFxuICBkZWJ1ZyAgICAgICAgICAgICAgIDogZmFsc2UsXG4gIHZlcmJvc2UgICAgICAgICAgICAgOiB0cnVlLFxuICBwZXJmb3JtYW5jZSAgICAgICAgIDogdHJ1ZSxcblxuICAvLyBkZWxlZ2F0ZWQgZXZlbnQgY29udGV4dFxuICB1bmNoZWNrYWJsZSAgICAgICAgIDogJ2F1dG8nLFxuICBmaXJlT25Jbml0ICAgICAgICAgIDogZmFsc2UsXG5cbiAgb25DaGFuZ2UgICAgICAgICAgICA6IGZ1bmN0aW9uKCl7fSxcblxuICBiZWZvcmVDaGVja2VkICAgICAgIDogZnVuY3Rpb24oKXt9LFxuICBiZWZvcmVVbmNoZWNrZWQgICAgIDogZnVuY3Rpb24oKXt9LFxuICBiZWZvcmVEZXRlcm1pbmF0ZSAgIDogZnVuY3Rpb24oKXt9LFxuICBiZWZvcmVJbmRldGVybWluYXRlIDogZnVuY3Rpb24oKXt9LFxuXG4gIG9uQ2hlY2tlZCAgICAgICAgICAgOiBmdW5jdGlvbigpe30sXG4gIG9uVW5jaGVja2VkICAgICAgICAgOiBmdW5jdGlvbigpe30sXG5cbiAgb25EZXRlcm1pbmF0ZSAgICAgICA6IGZ1bmN0aW9uKCkge30sXG4gIG9uSW5kZXRlcm1pbmF0ZSAgICAgOiBmdW5jdGlvbigpIHt9LFxuXG4gIG9uRW5hYmxlICAgICAgICAgICAgOiBmdW5jdGlvbigpe30sXG4gIG9uRGlzYWJsZSAgICAgICAgICAgOiBmdW5jdGlvbigpe30sXG5cbiAgLy8gcHJlc2VydmUgbWlzc3BlbGxlZCBjYWxsYmFja3MgKHdpbGwgYmUgcmVtb3ZlZCBpbiAzLjApXG4gIG9uRW5hYmxlZCAgICAgICAgICAgOiBmdW5jdGlvbigpe30sXG4gIG9uRGlzYWJsZWQgICAgICAgICAgOiBmdW5jdGlvbigpe30sXG5cbiAgY2xhc3NOYW1lICAgICAgIDoge1xuICAgIGNoZWNrZWQgICAgICAgOiAnY2hlY2tlZCcsXG4gICAgaW5kZXRlcm1pbmF0ZSA6ICdpbmRldGVybWluYXRlJyxcbiAgICBkaXNhYmxlZCAgICAgIDogJ2Rpc2FibGVkJyxcbiAgICBoaWRkZW4gICAgICAgIDogJ2hpZGRlbicsXG4gICAgcmFkaW8gICAgICAgICA6ICdyYWRpbycsXG4gICAgcmVhZE9ubHkgICAgICA6ICdyZWFkLW9ubHknXG4gIH0sXG5cbiAgZXJyb3IgICAgIDoge1xuICAgIG1ldGhvZCAgICAgICA6ICdUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWQnXG4gIH0sXG5cbiAgc2VsZWN0b3IgOiB7XG4gICAgY2hlY2tib3ggOiAnLnVpLmNoZWNrYm94JyxcbiAgICBsYWJlbCAgICA6ICdsYWJlbCwgLmJveCcsXG4gICAgaW5wdXQgICAgOiAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdLCBpbnB1dFt0eXBlPVwicmFkaW9cIl0nLFxuICAgIGxpbmsgICAgIDogJ2FbaHJlZl0nXG4gIH1cblxufTtcblxufSkoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCApO1xuIl19
