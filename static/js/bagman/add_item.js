$(function(){"use strict";function e(e,s,t,i){var c={};c[e.id]=s,$.ajax({url:"/api/v1.2/recommendorder/bagman/customer/"+r+"/cart",type:t,datatype:"jsonp",data:c,success:function(e){0===e.code?i(e):alert(e.error_msg),$.ajax({url:"/api/v1.2/recommendorder/bagman/customer/"+r+"/cart",type:"get",datatype:"jsonp",success:function(e){console.log(e);var s=[];0===e.items.length?($("#place-order i").html("(0)"),s=e.items):$("#place-order i").html("("+e.items.length+")")}})}})}function s(){var e=$("#search").val();0===e.length?($(".search-box label.no").css({display:"none"}),$(".show").css({display:"block"}),$(".hide").css({display:"none"})):($(".search-box label.no").css({display:"block"}),$(".show").css({display:"none"}),$(".hide").css({display:"block"})),o.query=e}var t=window.location.href,i=Number(t.match(/(dealer\/)\d+\//)[0].split("/")[1]),r=Number(t.match(/(customer\/)\d+\//)[0].split("/")[1]);setupCSRF();var c=new Vue({el:"#footer",data:{total:0},computed:{display_total:function(){return""+this.total.toFixed(2)}}}),n=(new Vue({el:"#banner",data:{dealer_id:i}}),new Vue({el:"#item-list",data:{sort:0,series:{},series_num:{},series_id:"",items:[],selected_items:{},source:$("#source").attr("name"),customer_id:$("#source").attr("customer_id"),cat_id:0,order:"-score",isGiftPage:t.search("add-gift")===-1,dealer_id:i},beforeCreated:function(){},ready:function(e){$.ajax({url:"/api/v1.1/recommendorder/customer/"+r+"/dealer-list",type:"get",success:function(e){for(var s=!1,t=0;t<e.dealers.length;t++)e.dealers[t].id==i&&e.dealers[t].orderable&&(s=!0);s||(window.location.href="/recommendorder/customer/"+r+"/dealer-list")}});var s=this;s.$watch("cat_id",function(){s.loadItems(s.sort,s.series_id,s.cat_id)}),s.$watch("series_id",function(){console.log(series_id),s.loadItems(s.sort,s.series_id,s.cat_id)}),s.$watch("sort",function(){s.loadItems(s.sort,s.series_id,s.cat_id)}),s.$watch("order",function(){"price"===s.order?($("#by-price .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow_down.png) no-repeat center",backgroundSize:"65%"}),s.items=s.items.sort(function(e,s){return e.price-s.price})):"-price"===s.order?($("#by-price .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow_up.png) no-repeat center",backgroundSize:"65%"}),s.items=s.items.sort(function(e,s){return s.price-e.price})):"score"===s.order?s.items=s.items.sort(function(e,s){return e.score-s.score}):"-score"===s.order?s.items=s.items.sort(function(e,s){return s.score-e.score}):"num"===s.order?($("#by-num .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow_down.png) no-repeat center",backgroundSize:"65%"}),s.items=s.items.sort(function(e,s){return e.num-s.num})):"-num"===s.order&&($("#by-num .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow_up.png) no-repeat center",backgroundSize:"65%"}),s.items=s.items.sort(function(e,s){return s.num-e.num}))}),$.ajax({url:"/api/v1.2/recommendorder/bagman/customer/"+r+"/cart",type:"get",datatype:"jsonp",success:function(e){console.log(e);var t=[];0!==e.items.length&&(0===e.items.length?($("#place-order i").html("(0)"),t=e.items):($("#place-order i").html("("+e.items.length+")"),t=e.items,t.forEach(function(e){s.selected_items[e.item_id]={num:Number(e.num).toFixed(0),price:e.price}}))),s.loadItems(s.sort,s.series_id,s.cat_id),s.refreshSelectedItems(s.items)}})},methods:{funtofixed:function(e){return""==e?e:isNaN(Number(e))?e:Number(e)},seriesChange:function(e){self.series_id=e,console.log(e)},refreshSelectedItems:function(e){var s=this;e.forEach(function(e){0!==e.selected_num?s.selected_items[e.id]={item_id:e.item_id,num:Number(e.selected_num).toFixed(0),price:e.price}:e.id in s.selected_items&&(s.selected_items[e.id].num=0)}),c.total=0;for(var t in s.selected_items){var i=s.selected_items[t];c.total+=i.num*i.price}},numChange:function(s){""===s.selected_num&&(s.selected_num=0),s.selected_num=parseInt(s.selected_num);var t=this;e(s,s.selected_num,"POST",function(e){s.selected_num=Number(e.num).toFixed(0),t.refreshSelectedItems(t.items)})},reduceClicked:function(s){var t=this;s.selected_num<=0?s.selected_num=0:e(s,-1,"PUT",function(e){s.selected_num=Number(e.num).toFixed(0),t.refreshSelectedItems(t.items)})},plusClicked:function(s){var t=this;e(s,1,"PUT",function(e){s.selected_num=Number(e.num).toFixed(0),t.refreshSelectedItems(t.items)})},itemFilter:function(e){var s=this;return console.log(e),e.forEach(function(e){e.id in s.selected_items?(console.log(s.selected_items[e.id]),e.selected_num=s.selected_items[e.id].num):e.selected_num=0,e.price=parseFloat(e.price),t.search("add-gift")!==-1&&(e.id="gift:"+e.id,e.price=0,e.id in s.selected_items?e.selected_num=s.selected_items[e.id].num:e.selected_num=0),e.display_price=e.price.toFixed(2),e.quantity=Number(e.quantity).toFixed(0)}),e},loadItems:function(e,s,t){t=parseInt(t);var i=this;i.items=[],$(".product-series").css("display","block"),""==s?$.ajax({url:"/api/v1.2/recommendorder/bagman/customer/"+r+"/category/"+t+"/items",type:"get",datatype:"json",success:function(e){console.log(e),i.items=i.itemFilter(e.items)}}):$.ajax({url:"/api/v1.2/recommendorder/bagman/series/"+s+"/items",type:"get",datatype:"jsonp",success:function(e){i.items=i.itemFilter(e.items)}})}}})),o=new Vue({el:"#search-results",data:{items:[],query:"",dealer_id:i},methods:{numChange:function(s){var t=this;""===s.selected_num&&(s.selected_num=0),s.selected_num=parseInt(s.selected_num),e(s,s.selected_num,"POST",function(e){s.selected_num=Number(e.num).toFixed(0),n.refreshSelectedItems(t.items)})},reduceClicked:function(s){var t=this;s.selected_num<=0?s.selected_num=0:e(s,-1,"PUT",function(e){s.selected_num=Number(e.num).toFixed(0),n.refreshSelectedItems(t.items)})},plusClicked:function(s){var t=this;e(s,1,"PUT",function(e){s.selected_num=Number(e.num).toFixed(0),n.refreshSelectedItems(t.items)})}}});$("#by-price").click(function(){$("#by-num .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow.png) no-repeat center",backgroundSize:"65%"}),"-price"===n.order?n.order="price":n.order="-price"}),$("#by-score").click(function(){$(".ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow.png) no-repeat center",backgroundSize:"65%"})}),$("#by-num").click(function(){$("#by-price .ic-arrow").css({background:"url(/static/images/recommendorder/ic_arrow.png) no-repeat center",backgroundSize:"65%"}),"-num"===n.order?n.order="num":n.order="-num"}),$(".home-info-nav-b").click(function(){$(".model").css({display:"block"}),$(".model .call").css({display:"block"})}),$(".cancel").click(function(){$(".model").css({display:"none"}),$(".model .call").css({display:"none"})}),$(".money").click(function(){$(".add").css({display:"block"}),$(".add .call").css({display:"block"})}),$("#place-order").click(function(){var e="/recommendorder/bagman/customer/"+r+"/cart";window.location.href=e});var a=$(".search").val().length;$(".home-info-nav-a").click(function(){0===a&&(window.location.href="/recommendorder/customer/"+r+"/dealer-list")}),$(".list").click(function(){$(this).addClass("active"),$(this).parent().siblings().children(".list").removeClass("active")}),$(".list").on("click",".imgBig",function(e){var s=$(e.target).attr("bigsrc");$(".imgBigShow img").attr("src",s),$(".modelImg").css({display:"block"}),$(".imgBigShow img").css({display:"block"})}),$(".modelImg").click(function(){$(this).css({display:"none"})}),$("#search").bind("input propertychange",function(){s()}),$(".no").click(function(){$("#search").val(""),s()}),$("#banner-img").click(function(){$(".search").val("燕京"),s()}),$("#banner-img1").click(function(){$(".search").val("偷吃熊"),s()}),$(document).ready(function(){$.ajax({url:"/api/v1.2/recommendorder/bagman/categories",type:"get",datatype:"jsonp",success:function(e){console.log(e),n.cat_id=e.categories[0].id,n.series=e.categories;for(var s in e.categories){var t=e.categories[s].name,i="<li class='nav-item item category-list'  cat_id="+e.categories[s].id+">"+t+"</li>";$("article .list").append(i)}}}),$("#item-list").on("click",".size",function(){$(this).addClass("series-active"),$(this).siblings().removeClass("series-active"),$(this).parent().parent().parent().children(".list-con").eq($(this).index()).css("display","block"),$(this).parent().parent().parent().children(".list-con").eq($(this).index()).siblings(".list-con").css("display","none")}),$(".list").on("click",".nav-item",function(){$("#by-price .ic-arrow").css("background",""),$(this).addClass("active"),$(this).siblings().removeClass("active"),$("#by-score span").addClass("active"),$("#by-score").siblings().children().removeClass("active"),$(".product-series .series-select").removeClass("series-active"),$(".product-series .series-select").eq(0).addClass("series-active"),n.sort=0,n.cat_id=$(this).attr("cat_id"),n.series_id="",n.series_num=n.series[$(this).index()]}),$("#by-score").click(function(){n.sort=0}),$("#by-price").click(function(){1==n.sort?n.sort=2:n.sort=1}),$("#by-num").click(function(){n.sort=3}),$(".product-series").on("click",".series-select",function(){$(this).addClass("series-active"),$(this).siblings().removeClass("series-active"),n.series_id=$(this).attr("series_id")}),$(".list").on("click",".category-list",function(){$("#banner").hide()}),$(".list").on("click","#rec",function(){$("#banner").show()}),$.ajax({url:"/api/v1.1/recommendorder/dealer/"+i,type:"get",datatype:"JSONP",success:function(e){$("#dealer_name").html(e.data.dealer_name),$(".model .call .phone-number").html(e.data.phone),$(".model .sure").click(function(){window.location.href="tel:"+e.data.phone})}})}),5===i&&($(".prompt").css({display:"block"}),$("nav").css({top:"1.56rem","z-index":667,"background-color":"#fcfdee"}),$("nav .search-box").css({"margin-top":"0.05rem"}),$("main").css({top:"2.24rem"}),$("main article .list").css({top:"2.24rem"}),$("main aside .ul-box").css({top:"2.24rem"}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhZ21hbi9hZGRfaXRlbS5qcyJdLCJuYW1lcyI6WyIkIiwic2V0SXRlbUNhcnROdW0iLCJpdGVtIiwibnVtIiwicmVxVHlwZSIsImNiIiwicGFyYW1zIiwiaWQiLCJhamF4IiwidXJsIiwiY3VzdG9tZXJfaWQiLCJ0eXBlIiwiZGF0YXR5cGUiLCJkYXRhIiwic3VjY2VzcyIsInJlcyIsImNvZGUiLCJhbGVydCIsImVycm9yX21zZyIsImNvbnNvbGUiLCJsb2ciLCJpdGVtcyIsImxlbmd0aCIsImh0bWwiLCJxdWVyeV9jaGFuZ2VkIiwicXVlcnkiLCJ2YWwiLCJjc3MiLCJkaXNwbGF5Iiwic2VhcmNoVnVlIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZGVhbGVyX2lkIiwiTnVtYmVyIiwibWF0Y2giLCJzcGxpdCIsInNldHVwQ1NSRiIsImZvb3RlciIsIlZ1ZSIsImVsIiwidG90YWwiLCJjb21wdXRlZCIsImRpc3BsYXlfdG90YWwiLCJ0aGlzIiwidG9GaXhlZCIsImFwcCIsInNvcnQiLCJzZXJpZXMiLCJzZXJpZXNfbnVtIiwic2VyaWVzX2lkIiwic2VsZWN0ZWRfaXRlbXMiLCJzb3VyY2UiLCJhdHRyIiwiY2F0X2lkIiwib3JkZXIiLCJpc0dpZnRQYWdlIiwic2VhcmNoIiwiYmVmb3JlQ3JlYXRlZCIsInJlYWR5IiwiaSIsIm9yZGVyYWJsZSIsImRlYWxlcnMiLCJzZWxmIiwiJHdhdGNoIiwibG9hZEl0ZW1zIiwiYmFja2dyb3VuZCIsImJhY2tncm91bmRTaXplIiwiYSIsImIiLCJwcmljZSIsInNjb3JlIiwiZm9yRWFjaCIsImQiLCJpdGVtX2lkIiwicmVmcmVzaFNlbGVjdGVkSXRlbXMiLCJtZXRob2RzIiwiZnVudG9maXhlZCIsImlzTmFOIiwic2VyaWVzQ2hhbmdlIiwiZWxlIiwic2VsZWN0ZWRfbnVtIiwia2V5IiwibnVtQ2hhbmdlIiwidiIsInBhcnNlSW50IiwicmVkdWNlQ2xpY2tlZCIsInBsdXNDbGlja2VkIiwiaXRlbUZpbHRlciIsInBhcnNlRmxvYXQiLCJkaXNwbGF5X3ByaWNlIiwicXVhbnRpdHkiLCJjbGljayIsIm5ld19ocmVmIiwic2VhcmNoVmFsTGVuIiwiYWRkQ2xhc3MiLCJwYXJlbnQiLCJzaWJsaW5ncyIsImNoaWxkcmVuIiwicmVtb3ZlQ2xhc3MiLCJvbiIsImV2IiwiYmlnSW1nU3JjIiwidGFyZ2V0IiwiYmluZCIsImRvY3VtZW50IiwiY2F0ZWdvcmllcyIsImNhdF9uYW1lIiwibmFtZSIsInVsX2xpc3QiLCJhcHBlbmQiLCJlcSIsImluZGV4IiwiaGlkZSIsInNob3ciLCJkZWFsZXJfbmFtZSIsInBob25lIiwidG9wIiwiei1pbmRleCIsImJhY2tncm91bmQtY29sb3IiLCJtYXJnaW4tdG9wIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRSxXQUNFLFlBWUEsU0FBU0MsR0FBZUMsRUFBTUMsRUFBS0MsRUFBU0MsR0FDeEMsR0FBSUMsS0FDSkEsR0FBT0osRUFBS0ssSUFBTUosRUFDbEJILEVBQUVRLE1BQ0VDLElBQUssNENBQThDQyxFQUFjLFFBQ2pFQyxLQUFNUCxFQUNOUSxTQUFVLFFBQ1ZDLEtBQU1QLEVBQ05RLFFBQVMsU0FBU0MsR0FDRyxJQUFiQSxFQUFJQyxLQUNKWCxFQUFHVSxHQUVIRSxNQUFNRixFQUFJRyxXQUVkbEIsRUFBRVEsTUFDRkMsSUFBSyw0Q0FBOENDLEVBQWMsUUFDakVDLEtBQU0sTUFDTkMsU0FBVSxRQUNWRSxRQUFTLFNBQVNELEdBQ2RNLFFBQVFDLElBQUlQLEVBQ1osSUFBSVEsS0FFNEIsS0FBcEJSLEVBQUtRLE1BQU1DLFFBQ1h0QixFQUFFLGtCQUFrQnVCLEtBQUssT0FDekJGLEVBQVFSLEVBQUtRLE9BRWJyQixFQUFFLGtCQUFrQnVCLEtBQUssSUFBSVYsRUFBS1EsTUFBTUMsT0FBTyxXQXNiM0UsUUFBU0UsS0FDTCxHQUFJQyxHQUFRekIsRUFBRSxXQUFXMEIsS0FDSixLQUFqQkQsRUFBTUgsUUFDTnRCLEVBQUUsd0JBQXdCMkIsS0FDdEJDLFFBQVUsU0FFZDVCLEVBQUUsU0FBUzJC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QyxFQUFFLFdBQVcyQixLQUNUQyxRQUFVLFVBRWQ1QixFQUFFLE9BQU8yQixLQUNMMEYsSUFBTyxVQUNQQyxVQUFXLElBQ1hDLG1CQUFvQixZQUV4QnZILEVBQUUsbUJBQW1CMkIsS0FDakI2RixhQUFjLFlBRWxCeEgsRUFBRSxRQUFRMkIsS0FDTjBGLElBQU0sWUFFVnJILEVBQUUsc0JBQXNCMkIsS0FDcEIwRixJQUFPLFlBRVhySCxFQUFFLHNCQUFzQjJCLEtBQ3BCMEYsSUFBTyIsImZpbGUiOiJiYWdtYW4vYWRkX2l0ZW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXG4gICAgdmFyIGRlYWxlcl9pZCA9IE51bWJlcih1cmwubWF0Y2goLyhkZWFsZXJcXC8pXFxkK1xcLy8pWzBdLnNwbGl0KCcvJylbMV0pO1xuICAgIHZhciBjdXN0b21lcl9pZCA9IE51bWJlcih1cmwubWF0Y2goLyhjdXN0b21lclxcLylcXGQrXFwvLylbMF0uc3BsaXQoJy8nKVsxXSk7XG4gICAgc2V0dXBDU1JGKCk7XG4gICAgLyoqXG4gICAgICogcmVxVHlwZTpcbiAgICAgKiAgIFBPU1QgLS0gc2V0IG51bWJlclxuICAgICAqICAgUFVUIC0tIGluY3JlbWVudC9kZWNyZW1lbnQgZGF0YVxuICAgICAqL1xuICAgICAvL+eCueWHu+aUueWPmOi+k+WFpeahhuS4reeahOaVsOWQjOaXtuWKoOWFpVxuICAgIGZ1bmN0aW9uIHNldEl0ZW1DYXJ0TnVtKGl0ZW0sIG51bSwgcmVxVHlwZSwgY2IpIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHt9O1xuICAgICAgICBwYXJhbXNbaXRlbS5pZF0gPSBudW07XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL2FwaS92MS4yL3JlY29tbWVuZG9yZGVyL2JhZ21hbi9jdXN0b21lci9cIiArIGN1c3RvbWVyX2lkICsgXCIvY2FydFwiLFxuICAgICAgICAgICAgdHlwZTogcmVxVHlwZSxcbiAgICAgICAgICAgIGRhdGF0eXBlOiBcImpzb25wXCIsXG4gICAgICAgICAgICBkYXRhOiBwYXJhbXMsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2IocmVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChyZXMuZXJyb3JfbXNnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2FwaS92MS4yL3JlY29tbWVuZG9yZGVyL2JhZ21hbi9jdXN0b21lci9cIiArIGN1c3RvbWVyX2lkICsgXCIvY2FydFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6IFwianNvbnBcIixcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLml0ZW1zLmxlbmd0aD09PTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3BsYWNlLW9yZGVyIGknKS5odG1sKFwiKDApXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGRhdGEuaXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwbGFjZS1vcmRlciBpJykuaHRtbChcIihcIitkYXRhLml0ZW1zLmxlbmd0aCtcIilcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdmFyIGZvb3RlciA9IG5ldyBWdWUoe1xuICAgICAgICBlbDogJyNmb290ZXInLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0b3RhbDogMFxuICAgICAgICB9LFxuICAgICAgICBjb21wdXRlZDoge1xuICAgICAgICAgICAgZGlzcGxheV90b3RhbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnICsgdGhpcy50b3RhbC50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGJhbm5lciA9IG5ldyBWdWUoe1xuICAgICAgICBlbDogJyNiYW5uZXInLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBkZWFsZXJfaWQ6IGRlYWxlcl9pZFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGFwcCA9IG5ldyBWdWUoe1xuICAgICAgICBlbDogJyNpdGVtLWxpc3QnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAvLyBzb3J05YC8XG4gICAgICAgICAgICBzb3J0OjAsXG4gICAgICAgICAgICAvLyDns7vliJfmlbDmja5cbiAgICAgICAgICAgIHNlcmllczp7fSxcbiAgICAgICAgICAgIHNlcmllc19udW06e30sXG4gICAgICAgICAgICBzZXJpZXNfaWQ6XCJcIixcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW1zOiB7fSxcbiAgICAgICAgICAgIHNvdXJjZTogJCgnI3NvdXJjZScpLmF0dHIoXCJuYW1lXCIpLFxuICAgICAgICAgICAgY3VzdG9tZXJfaWQ6ICQoJyNzb3VyY2UnKS5hdHRyKFwiY3VzdG9tZXJfaWRcIiksXG4gICAgICAgICAgICBjYXRfaWQ6IDAsXG4gICAgICAgICAgICBvcmRlcjogJy1zY29yZScsXG4gICAgICAgICAgICBpc0dpZnRQYWdlOiB1cmwuc2VhcmNoKCdhZGQtZ2lmdCcpID09PSAtMSxcbiAgICAgICAgICAgIGRlYWxlcl9pZDogZGVhbGVyX2lkXG4gICAgICAgIH0sXG4gICAgICAgIGJlZm9yZUNyZWF0ZWQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIH0sXG4gICAgICAgIHJlYWR5OiBmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogXCIvYXBpL3YxLjEvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvXCIgKyBjdXN0b21lcl9pZCArIFwiL2RlYWxlci1saXN0XCIsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2dldCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8ZGF0YS5kZWFsZXJzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRlYWxlcnNbaV0uaWQgPT0gZGVhbGVyX2lkICYmIGRhdGEuZGVhbGVyc1tpXS5vcmRlcmFibGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcmRlcmFibGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9yZWNvbW1lbmRvcmRlci9jdXN0b21lci9cIiArIGN1c3RvbWVyX2lkICsgXCIvZGVhbGVyLWxpc3RcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgc2VsZi4kd2F0Y2goJ2NhdF9pZCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5sb2FkSXRlbXMoc2VsZi5zb3J0LCBzZWxmLnNlcmllc19pZCAsIHNlbGYuY2F0X2lkICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGYuJHdhdGNoKCdzZXJpZXNfaWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VyaWVzX2lkKTtcbiAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSXRlbXMoc2VsZi5zb3J0LCBzZWxmLnNlcmllc19pZCAsIHNlbGYuY2F0X2lkICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGYuJHdhdGNoKCdzb3J0JywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSXRlbXMoc2VsZi5zb3J0LCBzZWxmLnNlcmllc19pZCAsIHNlbGYuY2F0X2lkICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGYuJHdhdGNoKCdvcmRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLm9yZGVyID09PSAncHJpY2UnKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNieS1wcmljZSAuaWMtYXJyb3cnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnOid1cmwoL3N0YXRpYy9pbWFnZXMvcmVjb21tZW5kb3JkZXIvaWNfYXJyb3dfZG93bi5wbmcpIG5vLXJlcGVhdCBjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmRTaXplJzonNjUlJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IHNlbGYuaXRlbXMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5wcmljZSAtIGIucHJpY2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZi5vcmRlciA9PT0gJy1wcmljZScpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2J5LXByaWNlIC5pYy1hcnJvdycpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6J3VybCgvc3RhdGljL2ltYWdlcy9yZWNvbW1lbmRvcmRlci9pY19hcnJvd191cC5wbmcpIG5vLXJlcGVhdCBjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmRTaXplJzonNjUlJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IHNlbGYuaXRlbXMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5wcmljZSAtIGEucHJpY2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZi5vcmRlciA9PT0gJ3Njb3JlJykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLml0ZW1zID0gc2VsZi5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnNjb3JlIC0gYi5zY29yZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLm9yZGVyID09PSAnLXNjb3JlJykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLml0ZW1zID0gc2VsZi5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLnNjb3JlIC0gYS5zY29yZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLm9yZGVyID09PSAnbnVtJykge1xuICAgICAgICAgICAgICAgICAgICAkKCcjYnktbnVtIC5pYy1hcnJvdycpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6J3VybCgvc3RhdGljL2ltYWdlcy9yZWNvbW1lbmRvcmRlci9pY19hcnJvd19kb3duLnBuZykgbm8tcmVwZWF0IGNlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZFNpemUnOic2NSUnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLml0ZW1zID0gc2VsZi5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLm51bSAtIGIubnVtO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYub3JkZXIgPT09ICctbnVtJykge1xuICAgICAgICAgICAgICAgICAgICAkKCcjYnktbnVtIC5pYy1hcnJvdycpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6J3VybCgvc3RhdGljL2ltYWdlcy9yZWNvbW1lbmRvcmRlci9pY19hcnJvd191cC5wbmcpIG5vLXJlcGVhdCBjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmRTaXplJzonNjUlJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IHNlbGYuaXRlbXMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5udW0gLSBhLm51bTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBsb2FkIGJhc2tldCBkYXRhXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogXCIvYXBpL3YxLjIvcmVjb21tZW5kb3JkZXIvYmFnbWFuL2N1c3RvbWVyL1wiICsgY3VzdG9tZXJfaWQgKyBcIi9jYXJ0XCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogXCJqc29ucFwiLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuaXRlbXMubGVuZ3RoIT09MCl7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pdGVtcy5sZW5ndGg9PT0wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcGxhY2Utb3JkZXIgaScpLmh0bWwoXCIoMClcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9ICBkYXRhLml0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwbGFjZS1vcmRlciBpJykuaHRtbChcIihcIitkYXRhLml0ZW1zLmxlbmd0aCtcIilcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9ICBkYXRhLml0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRfaXRlbXNbZC5pdGVtX2lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW06IE51bWJlcihkLm51bSkudG9GaXhlZCgwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogZC5wcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEl0ZW1zKHNlbGYuc29ydCwgc2VsZi5zZXJpZXNfaWQgLCBzZWxmLmNhdF9pZCApO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2hTZWxlY3RlZEl0ZW1zKHNlbGYuaXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBtZXRob2RzOiB7XG4gICAgICAgICAgICBmdW50b2ZpeGVkOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIGlmKGRhdGEgPT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmICggaXNOYU4oTnVtYmVyKGRhdGEpKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlcmllc0NoYW5nZTpmdW5jdGlvbihudW0pe1xuICAgICAgICAgICAgICAgICAgIHNlbGYuc2VyaWVzX2lkPW51bTtcbiAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhudW0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlZnJlc2hTZWxlY3RlZEl0ZW1zOiBmdW5jdGlvbihpdGVtcykge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUuc2VsZWN0ZWRfbnVtICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkX2l0ZW1zW2VsZS5pZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogZWxlLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtOiBOdW1iZXIoZWxlLnNlbGVjdGVkX251bSkudG9GaXhlZCgwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogZWxlLnByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZS5pZCBpbiBzZWxmLnNlbGVjdGVkX2l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkX2l0ZW1zW2VsZS5pZF0ubnVtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZm9vdGVyLnRvdGFsID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc2VsZi5zZWxlY3RlZF9pdGVtcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHNlbGYuc2VsZWN0ZWRfaXRlbXNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgZm9vdGVyLnRvdGFsICs9IGl0ZW0ubnVtICogaXRlbS5wcmljZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbnVtQ2hhbmdlOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgaWYgKHYuc2VsZWN0ZWRfbnVtID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB2LnNlbGVjdGVkX251bSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtPXBhcnNlSW50KHYuc2VsZWN0ZWRfbnVtKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2V0SXRlbUNhcnROdW0odiwgdi5zZWxlY3RlZF9udW0sIFwiUE9TVFwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtID0gTnVtYmVyKGRhdGEubnVtKS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2hTZWxlY3RlZEl0ZW1zKHNlbGYuaXRlbXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlZHVjZUNsaWNrZWQ6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYodi5zZWxlY3RlZF9udW08PTApe1xuICAgICAgICAgICAgICAgICAgICB2LnNlbGVjdGVkX251bSA9IDA7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgc2V0SXRlbUNhcnROdW0odiwgLTEsIFwiUFVUXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtID0gTnVtYmVyKGRhdGEubnVtKS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBsdXNDbGlja2VkOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHNldEl0ZW1DYXJ0TnVtKHYsIDEsIFwiUFVUXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSBOdW1iZXIoZGF0YS5udW0pLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVmcmVzaFNlbGVjdGVkSXRlbXMoc2VsZi5pdGVtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXRlbUZpbHRlcjogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW1zKVxuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5pZCBpbiBzZWxmLnNlbGVjdGVkX2l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLnNlbGVjdGVkX2l0ZW1zW2VsZS5pZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnNlbGVjdGVkX251bSA9IHNlbGYuc2VsZWN0ZWRfaXRlbXNbZWxlLmlkXS5udW07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuc2VsZWN0ZWRfbnVtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGUucHJpY2UgPSBwYXJzZUZsb2F0KGVsZS5wcmljZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwuc2VhcmNoKCdhZGQtZ2lmdCcpICE9PSAtMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmlkID0gXCJnaWZ0OlwiICsgZWxlLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnByaWNlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZS5pZCBpbiBzZWxmLnNlbGVjdGVkX2l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnNlbGVjdGVkX251bSA9IHNlbGYuc2VsZWN0ZWRfaXRlbXNbZWxlLmlkXS5udW07XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuc2VsZWN0ZWRfbnVtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGUuZGlzcGxheV9wcmljZSA9IGVsZS5wcmljZS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICBlbGUucXVhbnRpdHkgPSBOdW1iZXIoZWxlLnF1YW50aXR5KS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICAvLyBlbGUucGFja2luZ19zcGVjaWZpY2F0aW9uID0gTnVtYmVyKGVsZS5wYWNraW5nX3NwZWNpZmljYXRpb24pO1xuXG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gc2VyaWVzRmlsdGVyOiBmdW5jdGlvbihzZXJpZXMpe1xuICAgICAgICAgICAgLy8gICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIC8vICAgICAgc2VyaWVzLmNhdGVnb3JpZXNbMF0ubmFtZVxuICAgICAgICAgICAgLy8gfTtcbiAgICAgICAgICAgIGxvYWRJdGVtczogZnVuY3Rpb24oIHNvcnQsIHNlcmllc19pZCwgY2F0X2lkKSB7XG4gICAgICAgICAgICAgICAgY2F0X2lkID0gcGFyc2VJbnQoY2F0X2lkKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2VsZi5pdGVtcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAkKFwiLnByb2R1Y3Qtc2VyaWVzXCIpLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICggc2VyaWVzX2lkID09IFwiXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDpcIi9hcGkvdjEuMi9yZWNvbW1lbmRvcmRlci9iYWdtYW4vY3VzdG9tZXIvXCIrY3VzdG9tZXJfaWQrXCIvY2F0ZWdvcnkvXCIgKyBjYXRfaWQgKyBcIi9pdGVtc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6J2dldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXR5cGU6J2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXRlbXMgPSBzZWxmLml0ZW1GaWx0ZXIoZGF0YS5pdGVtcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOlwiL2FwaS92MS4yL3JlY29tbWVuZG9yZGVyL2JhZ21hbi9zZXJpZXMvXCIgKyBzZXJpZXNfaWQgKyBcIi9pdGVtc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOidnZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhdHlwZTonanNvbnAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXRlbXMgPSBzZWxmLml0ZW1GaWx0ZXIoZGF0YS5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIHNlYXJjaFZ1ZSA9IG5ldyBWdWUoe1xuICAgICAgICBlbDogJyNzZWFyY2gtcmVzdWx0cycsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgICAgIHF1ZXJ5OiAnJyxcbiAgICAgICAgICAgIGRlYWxlcl9pZDogZGVhbGVyX2lkXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZHM6IHtcblxuICAgICAgICAgICAgICBudW1DaGFuZ2U6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKHYuc2VsZWN0ZWRfbnVtID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB2LnNlbGVjdGVkX251bSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHYuc2VsZWN0ZWRfbnVtPXBhcnNlSW50KHYuc2VsZWN0ZWRfbnVtKTtcbiAgICAgICAgICAgICAgICBzZXRJdGVtQ2FydE51bSh2LCB2LnNlbGVjdGVkX251bSwgXCJQT1NUXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSBOdW1iZXIoZGF0YS5udW0pLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWR1Y2VDbGlja2VkOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlmKHYuc2VsZWN0ZWRfbnVtPD0wKXtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSAwO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgIHNldEl0ZW1DYXJ0TnVtKHYsIC0xLCBcIlBVVFwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2LnNlbGVjdGVkX251bSA9IE51bWJlcihkYXRhLm51bSkudG9GaXhlZCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBsdXNDbGlja2VkOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHNldEl0ZW1DYXJ0TnVtKHYsIDEsIFwiUFVUXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdi5zZWxlY3RlZF9udW0gPSBOdW1iZXIoZGF0YS5udW0pLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5yZWZyZXNoU2VsZWN0ZWRJdGVtcyhzZWxmLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy/mkJzntKLmlbDmja5cbiAgICAgICAgLy8gcmVhZHk6IGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vICAgICBzZWxmLiR3YXRjaCgncXVlcnknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgICAgICBpZiAoc2VsZi5xdWVyeS5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB1cmw6XCIvYXBpL3YxLjIvcmVjb21tZW5kb3JkZXIvY3VzdG9tZXIvXCIrY3VzdG9tZXJfaWQrXCIvZGVhbGVyL1wiK2RlYWxlcl9pZCtcIi9pdGVtc1wiLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGRhdGF0eXBlOiBcImpzb25wXCIsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgXCJrZXlcIjogc2VsZi5xdWVyeVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXRlbXMgPSBhcHAuaXRlbUZpbHRlcihkYXRhLml0ZW1zKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYuaXRlbXMpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gfVxuICAgIH0pO1xuICAgICQoJyNieS1wcmljZScpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICQoJyNieS1udW0gLmljLWFycm93JykuY3NzKHtcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kJzondXJsKC9zdGF0aWMvaW1hZ2VzL3JlY29tbWVuZG9yZGVyL2ljX2Fycm93LnBuZykgbm8tcmVwZWF0IGNlbnRlcicsXG4gICAgICAgICAgICAnYmFja2dyb3VuZFNpemUnOic2NSUnXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYXBwLm9yZGVyID09PSAnLXByaWNlJykge1xuICAgICAgICAgICAgYXBwLm9yZGVyID0gJ3ByaWNlJztcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBhcHAub3JkZXIgPSAnLXByaWNlJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJyNieS1zY29yZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuaWMtYXJyb3cnKS5jc3Moe1xuICAgICAgICAgICAgJ2JhY2tncm91bmQnOid1cmwoL3N0YXRpYy9pbWFnZXMvcmVjb21tZW5kb3JkZXIvaWNfYXJyb3cucG5nKSBuby1yZXBlYXQgY2VudGVyJyxcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kU2l6ZSc6JzY1JSdcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIChhcHAub3JkZXIgPT09ICctc2NvcmUnKSB7XG4gICAgICAgIC8vICAgICBhcHAub3JkZXIgPSAnc2NvcmUnO1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgYXBwLm9yZGVyID0gJy1zY29yZSc7XG4gICAgICAgIC8vIH1cbiAgICB9KTtcbiAgICAkKCcjYnktbnVtJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJyNieS1wcmljZSAuaWMtYXJyb3cnKS5jc3Moe1xuICAgICAgICAgICAgJ2JhY2tncm91bmQnOid1cmwoL3N0YXRpYy9pbWFnZXMvcmVjb21tZW5kb3JkZXIvaWNfYXJyb3cucG5nKSBuby1yZXBlYXQgY2VudGVyJyxcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kU2l6ZSc6JzY1JSdcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhcHAub3JkZXIgPT09ICctbnVtJykge1xuICAgICAgICAgICAgYXBwLm9yZGVyID0gJ251bSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHAub3JkZXIgPSAnLW51bSc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvL+eCueWHu+eUteivneaMiemSrlxuXG4gICAgJCgnLmhvbWUtaW5mby1uYXYtYicpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICQoJy5tb2RlbCcpLmNzcyh7XG4gICAgICAgICAgICAnZGlzcGxheSc6J2Jsb2NrJ1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLm1vZGVsIC5jYWxsJykuY3NzKHtcbiAgICAgICAgICAgICdkaXNwbGF5JzonYmxvY2snXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8v54K55Ye75Y+W5raI5oyJ6ZKu5qih5oCB5raI5aSxXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICQoJy5tb2RlbCcpLmNzcyh7XG4gICAgICAgICAgICAnZGlzcGxheSc6J25vbmUnXG4gICAgICAgIH0pO1xuICAgICAgICAkKCcubW9kZWwgLmNhbGwnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOidub25lJ1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvL+eCueWHu+a3u+WKoOaooeaAgeWHuueOsFxuICAgICQoJy5tb25leScpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICQoJy5hZGQnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaydcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5hZGQgLmNhbGwnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaydcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy/ngrnlh7vljrvotK3nianovabmjInpkq7pobXpnaLot7PovazlnKjotK3nianovabpobXpnaLlkIzml7bllYblk4Hlh7rnjrDlnKjotK3nianovabkuK1cbiAgICAkKCcjcGxhY2Utb3JkZXInKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgbmV3X2hyZWYgPSAnL3JlY29tbWVuZG9yZGVyL2JhZ21hbi9jdXN0b21lci8nICsgY3VzdG9tZXJfaWQgKyAnL2NhcnQnO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld19ocmVmO1xuICAgIH0pO1xuICAgIC8v54K55Ye76L+U5Zue5oyJ6ZKuKOe7meWQjOS4gOS4qui/lOWbnuaMiemSruS9huS4jeWQjOeahOaDheWGteS4i+e7meS4jeWQjOeahOi/lOWbnueVjOmdoilcbiAgICB2YXIgc2VhcmNoVmFsTGVuID0gJCgnLnNlYXJjaCcpLnZhbCgpLmxlbmd0aDtcbiAgICAkKCcuaG9tZS1pbmZvLW5hdi1hJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoc2VhcmNoVmFsTGVuID09PSAwKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj0nL3JlY29tbWVuZG9yZGVyL2N1c3RvbWVyLycgKyBjdXN0b21lcl9pZCArICcvZGVhbGVyLWxpc3QnO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLmxpc3QnKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLmNoaWxkcmVuKCcubGlzdCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICAvL+eCueWHu+WbvueJh+WHuueOsOaooeaAgeaYvuekuuWkp+WbvlxuICAgICQoJy5saXN0Jykub24oJ2NsaWNrJywnLmltZ0JpZycsZnVuY3Rpb24oZXYpe1xuICAgICAgICB2YXIgYmlnSW1nU3JjID0gJChldi50YXJnZXQpLmF0dHIoXCJiaWdzcmNcIik7XG4gICAgICAgICQoJy5pbWdCaWdTaG93IGltZycpLmF0dHIoXCJzcmNcIiwgYmlnSW1nU3JjKTtcbiAgICAgICAgJCgnLm1vZGVsSW1nJykuY3NzKHtcbiAgICAgICAgICAgICdkaXNwbGF5JzonYmxvY2snXG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuaW1nQmlnU2hvdyBpbWcnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaydcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy/ngrnlh7vku7vmhI/mjInpkq7mqKHmgIHmtojlpLFcbiAgICAkKCcubW9kZWxJbWcnKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmNzcyh7XG4gICAgICAgICAgICAnZGlzcGxheSc6J25vbmUnXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGZ1bmN0aW9uIHF1ZXJ5X2NoYW5nZWQoKSB7XG4gICAgICAgIHZhciBxdWVyeSA9ICQoJyNzZWFyY2gnKS52YWwoKTtcbiAgICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCA9PT0gMCl7XG4gICAgICAgICAgICAkKCcuc2VhcmNoLWJveCBsYWJlbC5ubycpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOidub25lJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcuc2hvdycpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLmhpZGUnKS5jc3Moe1xuICAgICAgICAgICAgICAgICdkaXNwbGF5Jzonbm9uZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICQoJy5zZWFyY2gtYm94IGxhYmVsLm5vJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnZGlzcGxheSc6J2Jsb2NrJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcuc2hvdycpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOidub25lJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcuaGlkZScpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNlYXJjaFZ1ZS5xdWVyeSA9IHF1ZXJ5O1xuICAgIH1cbiAgICAvL+agueaNruaQnOe0ouahhueahOWGheWuueWIpOaWreaYr+WQpuWHuueOsOaQnOe0ouWVhuWTgVxuICAgICQoJyNzZWFyY2gnKS5iaW5kKCdpbnB1dCBwcm9wZXJ0eWNoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHF1ZXJ5X2NoYW5nZWQoKTtcbiAgICB9KTtcbiAgICAvL+W9k+eCueWHu1jml7bmlofmnKzmoYbnmoTlgLzkuLow77ybXG4gICAgJCgnLm5vJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnI3NlYXJjaCcpLnZhbCgnJyk7XG4gICAgICAgIHF1ZXJ5X2NoYW5nZWQoKTtcbiAgICB9KTtcbiAgICAkKCcjYmFubmVyLWltZycpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuc2VhcmNoJykudmFsKCfnh5XkuqwnKTtcbiAgICAgICAgcXVlcnlfY2hhbmdlZCgpO1xuICAgIH0pO1xuICAgICQoJyNiYW5uZXItaW1nMScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuc2VhcmNoJykudmFsKCflgbflkIPnhoonKTtcbiAgICAgICAgcXVlcnlfY2hhbmdlZCgpO1xuICAgIH0pO1xuXG4gICAgLy8g5bem5L6n5YiX6KGoXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgdXJsOlwiL2FwaS92MS4yL3JlY29tbWVuZG9yZGVyL2JhZ21hbi9jYXRlZ29yaWVzXCIsXG4gICAgICAgICAgICB0eXBlIDogJ2dldCcsXG4gICAgICAgICAgICBkYXRhdHlwZTogJ2pzb25wJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG5cbiAgICAgICAgICAgICAgICAvLyDlrZjlgqjns7vliJfmlbDmja5cbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgICAgIGFwcC5jYXRfaWQgPSByZXMuY2F0ZWdvcmllc1swXS5pZDtcbiAgICAgICAgICAgICAgIGFwcC5zZXJpZXM9cmVzLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIHJlcy5jYXRlZ29yaWVzKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2F0X25hbWUgPSByZXMuY2F0ZWdvcmllc1tpXS5uYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB1bF9saXN0ID0gXCI8bGkgY2xhc3M9J25hdi1pdGVtIGl0ZW0gY2F0ZWdvcnktbGlzdCcgIGNhdF9pZD1cIisgcmVzLmNhdGVnb3JpZXNbaV0uaWQgK1wiPlwiK2NhdF9uYW1lK1wiPC9saT5cIjtcbiAgICAgICAgICAgICAgICAgICAgJCgnYXJ0aWNsZSAubGlzdCcpLmFwcGVuZCh1bF9saXN0KTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8v6KeE5qC85YiH5o2iXG5cbiAgICAgICAgJChcIiNpdGVtLWxpc3RcIikub24oJ2NsaWNrJywnLnNpemUnLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwic2VyaWVzLWFjdGl2ZVwiKVxuICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnc2VyaWVzLWFjdGl2ZScpO1xuICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmNoaWxkcmVuKFwiLmxpc3QtY29uXCIpLmVxKCQodGhpcykuaW5kZXgoKSkuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIilcbiAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5jaGlsZHJlbihcIi5saXN0LWNvblwiKS5lcSgkKHRoaXMpLmluZGV4KCkpLnNpYmxpbmdzKFwiLmxpc3QtY29uXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIilcbiAgICAgICAgfSlcblxuICAgICAgICAkKCcubGlzdCcpLm9uKCdjbGljaycsICcubmF2LWl0ZW0nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIOa4heepuuWwluWktOWbvueJh1xuICAgICAgICAgICAgJChcIiNieS1wcmljZSAuaWMtYXJyb3dcIikuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpXG5cblxuXG5cbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIC8vIOaOkuW6j+agt+W8j1xuICAgICAgICAgICAgJCgnI2J5LXNjb3JlIHNwYW4nKS5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgICAgICQoJyNieS1zY29yZScpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAvLyDmoLflvI/pu5jorqTlhajpg6jllYblk4FcbiAgICAgICAgICAgICQoJy5wcm9kdWN0LXNlcmllcyAuc2VyaWVzLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdzZXJpZXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcucHJvZHVjdC1zZXJpZXMgLnNlcmllcy1zZWxlY3QnKS5lcSgwKS5hZGRDbGFzcygnc2VyaWVzLWFjdGl2ZScpO1xuICAgICAgICAgICAgLy/pu5jorqTnu7zlkIjmjpLluo9zZXJpZXNcbiAgICAgICAgICAgIGFwcC5zb3J0ID0gMCA7XG4gICAgICAgICAgICBhcHAuY2F0X2lkID0gJCh0aGlzKS5hdHRyKFwiY2F0X2lkXCIpO1xuICAgICAgICAgICAgYXBwLnNlcmllc19pZCA9IFwiXCJcbiAgICAgICAgICAgIGFwcC5zZXJpZXNfbnVtID0gYXBwLnNlcmllc1skKHRoaXMpLmluZGV4KCldO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+aOkuWIl+mhuuW6j1xuICAgICAgICAkKCcjYnktc2NvcmUnKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgYXBwLnNvcnQgPSAwO1xuICAgICAgICB9KSA7XG4gICAgICAgICAkKCcjYnktcHJpY2UnKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYgKGFwcC5zb3J0ID09IDEpIHtcbiAgICAgICAgICAgICAgICBhcHAuc29ydCA9IDI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBhcHAuc29ydCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcjYnktbnVtJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGFwcC5zb3J0ID0gMztcbiAgICAgICAgfSlcbiAgICAgICAgLy8g57O75YiX5qC35byP5YiH5o2iXG4gICAgICAgICQoJy5wcm9kdWN0LXNlcmllcycpLm9uKCdjbGljaycsICcuc2VyaWVzLXNlbGVjdCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdzZXJpZXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ3Nlcmllcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIC8vIOabtOaUuXNlcmllc19pZFxuICAgICAgICAgICAgYXBwLnNlcmllc19pZCA9ICQodGhpcykuYXR0cihcInNlcmllc19pZFwiKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAkKCcubGlzdCcpLm9uKCdjbGljaycsICcuY2F0ZWdvcnktbGlzdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI2Jhbm5lcicpLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5saXN0Jykub24oJ2NsaWNrJywgJyNyZWMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJyNiYW5uZXInKS5zaG93KCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBsb2FkIGRlYWxlciBpbmZvXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL2FwaS92MS4xL3JlY29tbWVuZG9yZGVyL2RlYWxlci9cIiArIGRlYWxlcl9pZCxcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhdHlwZTogXCJKU09OUFwiLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgJCgnI2RlYWxlcl9uYW1lJykuaHRtbChkYXRhLmRhdGEuZGVhbGVyX25hbWUpO1xuICAgICAgICAgICAgICAgICQoJy5tb2RlbCAuY2FsbCAucGhvbmUtbnVtYmVyJykuaHRtbChkYXRhLmRhdGEucGhvbmUpO1xuICAgICAgICAgICAgICAgIC8v54K55Ye756Gu5a6a5oyJ6ZKu5Y+v5Lul5omT55S16K+dXG4gICAgICAgICAgICAgICAgJCgnLm1vZGVsIC5zdXJlJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJ0ZWw6XCIrZGF0YS5kYXRhLnBob25lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvL+WmguaenOaYr+S4lue6quWQm+Wuj+WImeagt+W8j+eojeWKoOS/ruaUuVxuICAgIGlmKGRlYWxlcl9pZCA9PT0gNSl7XG4gICAgICAgICQoJy5wcm9tcHQnKS5jc3Moe1xuICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaydcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ25hdicpLmNzcyh7XG4gICAgICAgICAgICAndG9wJzogJzEuNTZyZW0nLFxuICAgICAgICAgICAgJ3otaW5kZXgnOiA2NjcsXG4gICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcjZmNmZGVlJ1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnbmF2IC5zZWFyY2gtYm94JykuY3NzKHtcbiAgICAgICAgICAgICdtYXJnaW4tdG9wJzogJzAuMDVyZW0nXG4gICAgICAgIH0pO1xuICAgICAgICAkKCdtYWluJykuY3NzKHtcbiAgICAgICAgICAgICd0b3AnOicyLjI0cmVtJ1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnbWFpbiBhcnRpY2xlIC5saXN0JykuY3NzKHtcbiAgICAgICAgICAgICd0b3AnOiAnMi4yNHJlbSdcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ21haW4gYXNpZGUgLnVsLWJveCcpLmNzcyh7XG4gICAgICAgICAgICAndG9wJzogJzIuMjRyZW0nXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4iXX0=
