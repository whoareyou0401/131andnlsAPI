function fillData(){var t=$(".select-page").val()||1,e=$(".search input").val(),a=$("th .ascending").parent().attr("value")||$("th .descending").parent().attr("value"),i=$(".ascending").attr("class")||$(".descending").attr("class");""!==$.trim(e)&&(t=1),"main"==$(".star").attr("value")&&(e="is_mainline"),$.ajax({url:"/api/v1.0/dailystatement/goods",data:{page:t,arg:e,sort:a,order:i},type:"GET",success:function(e){if(1==e.success){$(".pagination p span").eq(0).text(e.data.pages),$(".pagination p span").eq(1).text(e.data.count),$(".select-page option").remove();for(var a=1;a<=e.data.pages;a++)$(".select-page").append("<option value="+a+">第"+num2Chinese(a)+"页</option>");$(".select-page").val(t);var i="<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>";$("table tbody tr").remove();for(var l=0;l<e.data.data.length;l++){$("table tbody").append(i),ii=l+1;var s=e.data.data[l].name||"无",n=e.data.data[l].barcode||"无",c=e.data.data[l].price||0,r=e.data.data[l].commission||0,d=e.data.data[l].is_mainline,o="";o=d?'<img class="mainline" src="/static/images/dailystatement/star_main.png" alt="1">':'<img class="mainline" src="/static/images/dailystatement/star.png" alt="0">',$("table tr:eq("+ii+")").attr("value",e.data.data[l].id),$("table tr:eq("+ii+") td:eq(0)").html('<input class="checkbox" type="checkbox">'),$("table tr:eq("+ii+") td:eq(1)").html(o),$("table tr:eq("+ii+") td:eq(2)").text(s),$("table tr:eq("+ii+") td:eq(3)").text(n),$("table tr:eq("+ii+") td:eq(4)").text(c),$("table tr:eq("+ii+") td:eq(5)").text(r)}$(".checkbox_all").is(":checked")?$(".checkbox").prop("checked","checked"):$(".checkbox").removeAttr("checked"),setTbaleWidth()}else location.href="/logout"}})}function insRow(){var t=document.getElementById("myTable").insertRow(1),e=t.insertCell(0),a=t.insertCell(1),i=t.insertCell(2),l=t.insertCell(3),s=t.insertCell(4),n=t.insertCell(5);i.innerHTML="<input class='require'>",l.innerHTML="<input class='require'>",s.innerHTML="<input class='require'>",n.innerHTML="<input class='require'>",e.innerHTML='<img class="sure" src="/static/images/dailystatement/ic_tick.png" alt="">',a.innerHTML='<img class="cancel" src="/static/images/dailystatement/close.png" alt="">'}$("tbody").on("click",".sure",function(){setupCSRF();var t=check_input();if(0==t){var e=$(this).parent().parent().children("td").children("input")[0].value,a=$(this).parent().parent().children("td").children("input")[1].value,i=$(this).parent().parent().children("td").children("input")[2].value,l=$(this).parent().parent().children("td").children("input")[3].value,s=$(this).parent().parent().attr("value");console.log(e,a,s),$.ajax({url:"/api/v1.0/dailystatement/goods",data:{name:e,barcode:a,price:i,commission:l,goods_id:s},type:"POST",success:function(t){}})}else alert("error")}),$("tbody").on("click",".cancel",function(){$(this).parent().parent().remove()}),$("tbody").on("dblclick","tr",function(){var t=$(this).children("td"),e='<img class="sure" src="/static/images/dailystatement/ic_tick.png" alt="">',a='<img class="cancel" src="/static/images/dailystatement/close.png" alt="">',i="<input class='require'";t.eq(0).html(a),t.eq(1).html(e),t.eq(2).html(i+'value="'+t.eq(2).text()+'">'),t.eq(3).html(i+'value="'+t.eq(3).text()+'">'),t.eq(4).html(i+'value="'+t.eq(4).text()+'">'),t.eq(5).html(i+'value="'+t.eq(5).text()+'">')}),$(document).ready(function(){setupCSRF(),$(".sidebar li").eq(3).addClass("active").siblings().removeClass("active");var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-1",a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();$("#startTime").attr("value",e),$("#endTime").attr("value",a),fillData(),$(".select-page").change(function(){fillData()}),$(".page-turing.prev").click(function(){1!=$(".select-page").val()&&($(".select-page").val($(".select-page").val()-1),fillData())}),$(".page-turing.next").click(function(){$(".select-page").val()!=$(".select-page option").length&&($(".select-page").val(Number($(".select-page").val())+1),fillData())}),$(".add-image:eq(0)").click(function(){del_table("goods")}),$(".add-image:eq(1)").click(function(){insRow()}),$(".search img").click(function(){""!==$.trim($(".search input").val())&&fillData()}),$(".search input").keydown(function(t){13==t.which&&fillData()}),$("table").tablesort({func:function(){fillData()}}),$(".download").click(function(){$("table").tableExport({headings:!0,fileName:"stores",formats:["csv"],position:"bottom",ignoreCSS:"[style*='display: none']"})}),$(".table-border").scroll(function(){var t=$(this).scrollLeft();$("table th").eq(0).css("left",t),$("table th").eq(1).css("left",t),$("table th").eq(2).css("left",t),$("table th").eq(3).css("left",t).addClass("box-shadow"),$("table td:nth-child(1)").css("left",t),$("table td:nth-child(2)").css("left",t),$("table td:nth-child(3)").css("left",t),$("table td:nth-child(4)").css("left",t).addClass("box-shadow"),0===Number($(this).scrollLeft())&&($("table th").eq(3).removeClass("box-shadow"),$("table td:nth-child(4)").removeClass("box-shadow"))}),$(".star").click(function(){main_src="/static/images/dailystatement/big_star_main.png",all_src="/static/images/dailystatement/big_star.png";var t=$(this).attr("value");"all"==t?($(this).children("img").eq(0).attr("src",main_src),$(this).attr("value","main"),$(".search input").attr("value","")):($(this).children("img").eq(0).attr("src",all_src),$(this).attr("value","all")),fillData()}),$(".checkbox_all").click(function(){$(this).is(":checked")?$(".checkbox").prop("checked","checked"):$(".checkbox").removeAttr("checked")}),$("tbody").on("click",".mainline",function(){var t=$(this).attr("alt");true_src="/static/images/dailystatement/star_main.png",false_src="/static/images/dailystatement/star.png",0==t?($(this).attr("src",true_src),$(this).attr("alt",1),t=1):($(this).attr("src",false_src),$(this).attr("alt",0),t=0),goods_id=$(this).parent().parent().attr("value"),$.ajax({url:"/api/v1.0/dailystatement/goods",data:{is_mainline:t,goods_id:goods_id},type:"PATCH",success:function(t){}})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhaWx5c3RhdGVtZW50L2dvb2RzLW1hbmFnZS5qcyJdLCJuYW1lcyI6WyJmaWxsRGF0YSIsInBhZ2UiLCIkIiwidmFsIiwiYXJnIiwic29ydCIsInBhcmVudCIsImF0dHIiLCJvcmRlciIsInRyaW0iLCJhamF4IiwidXJsIiwiZGF0YSIsInR5cGUiLCJzdWNjZXNzIiwiZXEiLCJ0ZXh0IiwicGFnZXMiLCJjb3VudCIsInJlbW92ZSIsImoiLCJhcHBlbmQiLCJudW0yQ2hpbmVzZSIsIm5ld1JvdyIsImkiLCJsZW5ndGgiLCJpaSIsIm5hbWUiLCJiYXJjb2RlIiwicHJpY2UiLCJjb21taXNzaW9uIiwiaXNfbWFpbmxpbmUiLCJtYWlubGluZSIsImlkIiwiaHRtbCIsImlzIiwicHJvcCIsInJlbW92ZUF0dHIiLCJzZXRUYmFsZVdpZHRoIiwibG9jYXRpb24iLCJocmVmIiwiaW5zUm93IiwieCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbnNlcnRSb3ciLCJhIiwiaW5zZXJ0Q2VsbCIsImIiLCJjIiwiZCIsImUiLCJmIiwiaW5uZXJIVE1MIiwib24iLCJzZXR1cENTUkYiLCJmbGFnIiwiY2hlY2tfaW5wdXQiLCJ0aGlzIiwiY2hpbGRyZW4iLCJ2YWx1ZSIsImdvb2RzX2lkIiwiY29uc29sZSIsImxvZyIsImFsZXJ0IiwidGQiLCJ0aWNrIiwiY2FuY2VsIiwiaW5wdXQiLCJyZWFkeSIsImFkZENsYXNzIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsIkRhdGUiLCJzdGFydF90aW1lIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImVuZF90aW1lIiwiZ2V0RGF0ZSIsImNoYW5nZSIsImNsaWNrIiwiTnVtYmVyIiwiZGVsX3RhYmxlIiwia2V5ZG93biIsImV2ZW50Iiwid2hpY2giLCJ0YWJsZXNvcnQiLCJmdW5jIiwidGFibGVFeHBvcnQiLCJoZWFkaW5ncyIsImZpbGVOYW1lIiwiZm9ybWF0cyIsInBvc2l0aW9uIiwiaWdub3JlQ1NTIiwic2Nyb2xsIiwiX2xlZnQiLCJzY3JvbGxMZWZ0IiwiY3NzIiwibWFpbl9zcmMiLCJhbGxfc3JjIiwidHJ1ZV9zcmMiLCJmYWxzZV9zcmMiXSwibWFwcGluZ3MiOiJBQUFBLFFBQVNBLFlBQ0wsR0FBSUMsR0FBT0MsRUFBRSxnQkFBZ0JDLE9BQVMsRUFDbENDLEVBQU1GLEVBQUUsaUJBQWlCQyxNQUN6QkUsRUFBT0gsRUFBRSxpQkFBaUJJLFNBQVNDLEtBQUssVUFBWUwsRUFBRSxrQkFBa0JJLFNBQVNDLEtBQUssU0FDdEZDLEVBQVFOLEVBQUUsY0FBY0ssS0FBSyxVQUFZTCxFQUFFLGVBQWVLLEtBQUssUUFDL0MsTUFBaEJMLEVBQUVPLEtBQUtMLEtBQ1BILEVBQU8sR0FHa0IsUUFBMUJDLEVBQUUsU0FBU0ssS0FBSyxXQUNmSCxFQUFNLGVBR1ZGLEVBQUVRLE1BQ0VDLElBQUssaUNBQ0xDLE1BQU9YLEtBQU9BLEVBQU1HLElBQU1BLEVBQUtDLEtBQVFBLEVBQU1HLE1BQVNBLEdBQ3RESyxLQUFNLE1BQ05DLFFBQVMsU0FBVUYsR0FDZixHQUFvQixHQUFoQkEsRUFBS0UsUUFBYyxDQUNuQlosRUFBRSxzQkFBc0JhLEdBQUcsR0FBR0MsS0FBS0osRUFBS0EsS0FBS0ssT0FDN0NmLEVBQUUsc0JBQXNCYSxHQUFHLEdBQUdDLEtBQUtKLEVBQUtBLEtBQUtNLE9BQzdDaEIsRUFBRSx1QkFBdUJpQixRQUN6QixLQUFLLEdBQUlDLEdBQUksRUFBR0EsR0FBS1IsRUFBS0EsS0FBS0ssTUFBT0csSUFDbENsQixFQUFFLGdCQUFnQm1CLE9BQU8saUJBQWlCRCxFQUFFLEtBQU9FLFlBQVlGLEdBQUssYUFFeEVsQixHQUFFLGdCQUFnQkMsSUFBSUYsRUFDdEIsSUFBSXNCLEdBQVMsaUVBQ2JyQixHQUFFLGtCQUFrQmlCLFFBQ3BCLEtBQUssR0FBSUssR0FBSSxFQUFHQSxFQUFJWixFQUFLQSxLQUFLQSxLQUFLYSxPQUFRRCxJQUFLLENBQzVDdEIsRUFBRSxlQUFlbUIsT0FBT0UsR0FDeEJHLEdBQUtGLEVBQUksQ0FDVCxJQUFJ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SyxRQUFRLE1BR2hDTCxFQUFFd0QsTUFBTUMsU0FBUyxPQUFPNUMsR0FBRyxHQUFHUixLQUFLLE1BQU00RixTQUN6Q2pHLEVBQUV3RCxNQUFNbkQsS0FBSyxRQUFRLFFBRXpCUCxhQUdKRSxFQUFFLGlCQUFpQjhFLE1BQU0sV0FDbEI5RSxFQUFFd0QsTUFBTXZCLEdBQUcsWUFDVmpDLEVBQUUsYUFBYWtDLEtBQUssVUFBVSxXQUc5QmxDLEVBQUUsYUFBYW1DLFdBQVcsYUFJbENuQyxFQUFFLFNBQVNvRCxHQUFHLFFBQVMsWUFBYSxXQUNoQyxHQUFJRSxHQUFPdEQsRUFBRXdELE1BQU1uRCxLQUFLLE1BQ3hCNkYsVUFBVyw4Q0FDWEMsVUFBWSx5Q0FDRCxHQUFSN0MsR0FDQ3RELEVBQUV3RCxNQUFNbkQsS0FBSyxNQUFNNkYsVUFDbkJsRyxFQUFFd0QsTUFBTW5ELEtBQUssTUFBTSxHQUNuQmlELEVBQU8sSUFHUHRELEVBQUV3RCxNQUFNbkQsS0FBSyxNQUFNOEYsV0FDbkJuRyxFQUFFd0QsTUFBTW5ELEtBQUssTUFBTSxHQUNuQmlELEVBQU8sR0FFWEssU0FBVzNELEVBQUV3RCxNQUFNcEQsU0FBU0EsU0FBU0MsS0FBSyxTQUMxQ0wsRUFBRVEsTUFDTUMsSUFBSyxpQ0FDTEMsTUFBT21CLFlBQWN5QixFQUFNSyxTQUFXQSxVQUN0Q2hELEtBQU0sUUFDTkMsUUFBUyxTQUFVRiIsImZpbGUiOiJkYWlseXN0YXRlbWVudC9nb29kcy1tYW5hZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBmaWxsRGF0YSgpe1xuICAgIHZhciBwYWdlID0gJChcIi5zZWxlY3QtcGFnZVwiKS52YWwoKSB8fCAxO1xuICAgIHZhciBhcmcgPSAkKFwiLnNlYXJjaCBpbnB1dFwiKS52YWwoKTtcbiAgICB2YXIgc29ydCA9ICQoXCJ0aCAuYXNjZW5kaW5nXCIpLnBhcmVudCgpLmF0dHIoXCJ2YWx1ZVwiKSB8fCAkKFwidGggLmRlc2NlbmRpbmdcIikucGFyZW50KCkuYXR0cihcInZhbHVlXCIpO1xuICAgIHZhciBvcmRlciA9ICQoXCIuYXNjZW5kaW5nXCIpLmF0dHIoXCJjbGFzc1wiKSB8fCAkKFwiLmRlc2NlbmRpbmdcIikuYXR0cihcImNsYXNzXCIpO1xuICAgIGlmICgkLnRyaW0oYXJnKSAhPT0gXCJcIil7XG4gICAgICAgIHBhZ2UgPSAxO1xuICAgIH1cblxuICAgIGlmKCQoXCIuc3RhclwiKS5hdHRyKFwidmFsdWVcIik9PSdtYWluJyl7XG4gICAgICAgIGFyZyA9ICdpc19tYWlubGluZSdcbiAgICB9XG5cbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6IFwiL2FwaS92MS4wL2RhaWx5c3RhdGVtZW50L2dvb2RzXCIsXG4gICAgICAgIGRhdGE6IHtcInBhZ2VcIjpwYWdlLCBcImFyZ1wiOmFyZywgXCJzb3J0XCI6IHNvcnQsIFwib3JkZXJcIjogb3JkZXJ9LFxuICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcyA9PSAxKSB7XG4gICAgICAgICAgICAgICAgJChcIi5wYWdpbmF0aW9uIHAgc3BhblwiKS5lcSgwKS50ZXh0KGRhdGEuZGF0YS5wYWdlcyk7XG4gICAgICAgICAgICAgICAgJChcIi5wYWdpbmF0aW9uIHAgc3BhblwiKS5lcSgxKS50ZXh0KGRhdGEuZGF0YS5jb3VudCk7XG4gICAgICAgICAgICAgICAgJChcIi5zZWxlY3QtcGFnZSBvcHRpb25cIikucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gZGF0YS5kYXRhLnBhZ2VzOyBqKyspe1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnNlbGVjdC1wYWdlXCIpLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9XCIraitcIj7nrKxcIiArIG51bTJDaGluZXNlKGopICsgXCLpobU8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0LXBhZ2VcIikudmFsKHBhZ2UpO1xuICAgICAgICAgICAgICAgIHZhciBuZXdSb3cgPSBcIjx0cj48dGQ+PC90ZD48dGQ+PC90ZD48dGQ+PC90ZD48dGQ+PC90ZD48dGQ+PC90ZD48dGQ+PC90ZD48L3RyPlwiO1xuICAgICAgICAgICAgICAgICQoXCJ0YWJsZSB0Ym9keSB0clwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZGF0YS5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJ0YWJsZSB0Ym9keVwiKS5hcHBlbmQobmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgaWkgPSBpICsgMVxuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZGF0YS5kYXRhW2ldLm5hbWUgfHwgJ+aXoCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXJjb2RlID0gZGF0YS5kYXRhLmRhdGFbaV0uYmFyY29kZSB8fCAn5pegJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gZGF0YS5kYXRhLmRhdGFbaV0ucHJpY2UgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1pc3Npb24gPSBkYXRhLmRhdGEuZGF0YVtpXS5jb21taXNzaW9uIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc19tYWlubGluZSA9IGRhdGEuZGF0YS5kYXRhW2ldLmlzX21haW5saW5lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFpbmxpbmUgPSAnJ1xuICAgICAgICAgICAgICAgICAgICBpZihpc19tYWlubGluZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWlubGluZSA9ICc8aW1nIGNsYXNzPVwibWFpbmxpbmVcIiBzcmM9XCIvc3RhdGljL2ltYWdlcy9kYWlseXN0YXRlbWVudC9zdGFyX21haW4ucG5nXCIgYWx0PVwiMVwiPidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmxpbmUgPSAnPGltZyBjbGFzcz1cIm1haW5saW5lXCIgc3JjPVwiL3N0YXRpYy9pbWFnZXMvZGFpbHlzdGF0ZW1lbnQvc3Rhci5wbmdcIiBhbHQ9XCIwXCI+J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoXCJ0YWJsZSB0cjplcShcIiArIGlpICsgXCIpXCIpLmF0dHIoXCJ2YWx1ZVwiLCBkYXRhLmRhdGEuZGF0YVtpXS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICQoXCJ0YWJsZSB0cjplcShcIiArIGlpICsgXCIpIHRkOmVxKDApXCIpLmh0bWwoJzxpbnB1dCBjbGFzcz1cImNoZWNrYm94XCIgdHlwZT1cImNoZWNrYm94XCI+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoXCJ0YWJsZSB0cjplcShcIiArIGlpICsgXCIpIHRkOmVxKDEpXCIpLmh0bWwobWFpbmxpbmUpO1xuICAgICAgICAgICAgICAgICAgICAkKFwidGFibGUgdHI6ZXEoXCIgKyBpaSArIFwiKSB0ZDplcSgyKVwiKS50ZXh0KG5hbWUpICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgJChcInRhYmxlIHRyOmVxKFwiICsgaWkgKyBcIikgdGQ6ZXEoMylcIikudGV4dChiYXJjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgJChcInRhYmxlIHRyOmVxKFwiICsgaWkgKyBcIikgdGQ6ZXEoNClcIikudGV4dChwcmljZSk7XG4gICAgICAgICAgICAgICAgICAgICQoXCJ0YWJsZSB0cjplcShcIiArIGlpICsgXCIpIHRkOmVxKDUpXCIpLnRleHQoY29tbWlzc2lvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCQoXCIuY2hlY2tib3hfYWxsXCIpLmlzKCc6Y2hlY2tlZCcpKXtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jaGVja2JveFwiKS5wcm9wKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jaGVja2JveFwiKS5yZW1vdmVBdHRyKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0VGJhbGVXaWR0aCgpO1xuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIi9sb2dvdXRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBpbnNSb3coKVxue1xuICB2YXIgeD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlUYWJsZScpLmluc2VydFJvdygxKVxuICB2YXIgYT14Lmluc2VydENlbGwoMClcbiAgdmFyIGI9eC5pbnNlcnRDZWxsKDEpXG4gIHZhciBjPXguaW5zZXJ0Q2VsbCgyKVxuICB2YXIgZD14Lmluc2VydENlbGwoMylcbiAgdmFyIGU9eC5pbnNlcnRDZWxsKDQpXG4gIHZhciBmPXguaW5zZXJ0Q2VsbCg1KVxuICBjLmlubmVySFRNTD1cIjxpbnB1dCBjbGFzcz0ncmVxdWlyZSc+XCJcbiAgZC5pbm5lckhUTUw9XCI8aW5wdXQgY2xhc3M9J3JlcXVpcmUnPlwiXG4gIGUuaW5uZXJIVE1MPVwiPGlucHV0IGNsYXNzPSdyZXF1aXJlJz5cIlxuICBmLmlubmVySFRNTD1cIjxpbnB1dCBjbGFzcz0ncmVxdWlyZSc+XCJcbiAgYS5pbm5lckhUTUw9JzxpbWcgY2xhc3M9XCJzdXJlXCIgc3JjPVwiL3N0YXRpYy9pbWFnZXMvZGFpbHlzdGF0ZW1lbnQvaWNfdGljay5wbmdcIiBhbHQ9XCJcIj4nXG4gIGIuaW5uZXJIVE1MPSc8aW1nIGNsYXNzPVwiY2FuY2VsXCIgc3JjPVwiL3N0YXRpYy9pbWFnZXMvZGFpbHlzdGF0ZW1lbnQvY2xvc2UucG5nXCIgYWx0PVwiXCI+J1xufVxuXG5cbiQoXCJ0Ym9keVwiKS5vbignY2xpY2snLCAnLnN1cmUnLCBmdW5jdGlvbigpe1xuICAgIHNldHVwQ1NSRigpO1xuICAgIHZhciBmbGFnID0gY2hlY2tfaW5wdXQoKVxuICAgIGlmKGZsYWc9PTApe1xuICAgICAgICB2YXIgbmFtZSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oJ3RkJykuY2hpbGRyZW4oJ2lucHV0JylbMF0udmFsdWVcbiAgICAgICAgdmFyIGJhcmNvZGUgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmNoaWxkcmVuKCd0ZCcpLmNoaWxkcmVuKCdpbnB1dCcpWzFdLnZhbHVlXG4gICAgICAgIHZhciBwcmljZSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oJ3RkJykuY2hpbGRyZW4oJ2lucHV0JylbMl0udmFsdWVcbiAgICAgICAgdmFyIGNvbW1pc3Npb24gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmNoaWxkcmVuKCd0ZCcpLmNoaWxkcmVuKCdpbnB1dCcpWzNdLnZhbHVlXG4gICAgICAgIHZhciBnb29kc19pZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cigndmFsdWUnKTtcbiAgICAgICAgY29uc29sZS5sb2cobmFtZSxiYXJjb2RlLGdvb2RzX2lkKVxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcIi9hcGkvdjEuMC9kYWlseXN0YXRlbWVudC9nb29kc1wiLFxuICAgICAgICAgICAgZGF0YToge1wibmFtZVwiOm5hbWUsIFwiYmFyY29kZVwiOmJhcmNvZGUsIFwicHJpY2VcIjogcHJpY2UsIFwiY29tbWlzc2lvblwiOiBjb21taXNzaW9uLCBcImdvb2RzX2lkXCI6Z29vZHNfaWR9LFxuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgYWxlcnQoJ2Vycm9yJylcbiAgICB9XG4gICBcbiAgICAgICAgXG59KTtcblxuJChcInRib2R5XCIpLm9uKCdjbGljaycsICcuY2FuY2VsJywgZnVuY3Rpb24oKXtcbiAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZSgpO1xufSk7XG5cbiQoXCJ0Ym9keVwiKS5vbignZGJsY2xpY2snLCd0cicsZnVuY3Rpb24oKXtcbiAgICB2YXIgdGQgPSAkKHRoaXMpLmNoaWxkcmVuKCd0ZCcpO1xuICAgIHZhciB0aWNrID0gJzxpbWcgY2xhc3M9XCJzdXJlXCIgc3JjPVwiL3N0YXRpYy9pbWFnZXMvZGFpbHlzdGF0ZW1lbnQvaWNfdGljay5wbmdcIiBhbHQ9XCJcIj4nO1xuICAgIHZhciBjYW5jZWwgPSAnPGltZyBjbGFzcz1cImNhbmNlbFwiIHNyYz1cIi9zdGF0aWMvaW1hZ2VzL2RhaWx5c3RhdGVtZW50L2Nsb3NlLnBuZ1wiIGFsdD1cIlwiPic7XG4gICAgdmFyIGlucHV0ID0gXCI8aW5wdXQgY2xhc3M9J3JlcXVpcmUnXCJcbiAgICB0ZC5lcSgwKS5odG1sKGNhbmNlbCk7XG4gICAgdGQuZXEoMSkuaHRtbCh0aWNrKTtcbiAgICB0ZC5lcSgyKS5odG1sKGlucHV0Kyd2YWx1ZT1cIicrdGQuZXEoMikudGV4dCgpKydcIj4nKTtcbiAgICB0ZC5lcSgzKS5odG1sKGlucHV0Kyd2YWx1ZT1cIicrdGQuZXEoMykudGV4dCgpKydcIj4nKTtcbiAgICB0ZC5lcSg0KS5odG1sKGlucHV0Kyd2YWx1ZT1cIicrdGQuZXEoNCkudGV4dCgpKydcIj4nKTtcbiAgICB0ZC5lcSg1KS5odG1sKGlucHV0Kyd2YWx1ZT1cIicrdGQuZXEoNSkudGV4dCgpKydcIj4nKTtcbn0pO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgIHNldHVwQ1NSRigpO1xuICAgICQoXCIuc2lkZWJhciBsaVwiKS5lcSgzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICB2YXIgc3RhcnRfdGltZSA9IGQuZ2V0RnVsbFllYXIoKStcIi1cIisoZC5nZXRNb250aCgpKzEpK1wiLTFcIjtcbiAgICB2YXIgZW5kX3RpbWUgPSBkLmdldEZ1bGxZZWFyKCkrXCItXCIrKGQuZ2V0TW9udGgoKSsxKStcIi1cIitkLmdldERhdGUoKTtcbiAgICAkKFwiI3N0YXJ0VGltZVwiKS5hdHRyKFwidmFsdWVcIixzdGFydF90aW1lKTtcbiAgICAkKFwiI2VuZFRpbWVcIikuYXR0cihcInZhbHVlXCIsZW5kX3RpbWUpO1xuICAgIGZpbGxEYXRhKCk7XG4gICAgXG4gICAgJChcIi5zZWxlY3QtcGFnZVwiKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgZmlsbERhdGEoKTtcbiAgICB9KTtcbiAgICAkKFwiLnBhZ2UtdHVyaW5nLnByZXZcIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKCQoXCIuc2VsZWN0LXBhZ2VcIikudmFsKCkgPT0gMSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgJChcIi5zZWxlY3QtcGFnZVwiKS52YWwoJChcIi5zZWxlY3QtcGFnZVwiKS52YWwoKSAtIDEpO1xuICAgICAgICBmaWxsRGF0YSgpO1xuICAgIH0pO1xuICAgICQoXCIucGFnZS10dXJpbmcubmV4dFwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICBpZiAoJChcIi5zZWxlY3QtcGFnZVwiKS52YWwoKSA9PSAkKFwiLnNlbGVjdC1wYWdlIG9wdGlvblwiKS5sZW5ndGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAkKFwiLnNlbGVjdC1wYWdlXCIpLnZhbChOdW1iZXIoJChcIi5zZWxlY3QtcGFnZVwiKS52YWwoKSkgKyAxKTtcbiAgICAgICAgZmlsbERhdGEoKTtcbiAgICB9KTtcbiAgICAkKFwiLmFkZC1pbWFnZTplcSgwKVwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICBkZWxfdGFibGUoXCJnb29kc1wiKVxuICAgIH0pO1xuICAgICQoXCIuYWRkLWltYWdlOmVxKDEpXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpbnNSb3coKTtcbiAgICAgICAgfSk7XG5cbiAgICAkKFwiLnNlYXJjaCBpbWdcIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKCQudHJpbSgkKFwiLnNlYXJjaCBpbnB1dFwiKS52YWwoKSkgIT09IFwiXCIpe1xuICAgICAgICAgICAgZmlsbERhdGEoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChcIi5zZWFyY2ggaW5wdXRcIikua2V5ZG93bihmdW5jdGlvbihldmVudCl7XG4gICAgICAgIGlmIChldmVudC53aGljaCA9PSAxMyl7XG4gICAgICAgICAgICBmaWxsRGF0YSgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKFwidGFibGVcIikudGFibGVzb3J0KHtmdW5jOiBmdW5jdGlvbigpe2ZpbGxEYXRhKCk7fX0pO1xuXG4gICAgJChcIi5kb3dubG9hZFwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAkKFwidGFibGVcIikudGFibGVFeHBvcnQoe1xuICAgICAgICAgICAgaGVhZGluZ3M6IHRydWUsXG4gICAgICAgICAgICBmaWxlTmFtZTogXCJzdG9yZXNcIixcbiAgICAgICAgICAgIGZvcm1hdHM6IFtcImNzdlwiXSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgaWdub3JlQ1NTOiBcIltzdHlsZSo9J2Rpc3BsYXk6IG5vbmUnXVwiXG4gICAgICAgIH0pO1xuICAgIH0pOyAgICBcblxuICAgICQoJy50YWJsZS1ib3JkZXInKS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfbGVmdCA9ICQodGhpcykuc2Nyb2xsTGVmdCgpO1xuICAgICAgICAkKCd0YWJsZSB0aCcpLmVxKDApLmNzcygnbGVmdCcsIF9sZWZ0KTtcbiAgICAgICAgJCgndGFibGUgdGgnKS5lcSgxKS5jc3MoJ2xlZnQnLCBfbGVmdCk7XG4gICAgICAgICQoJ3RhYmxlIHRoJykuZXEoMikuY3NzKCdsZWZ0JywgX2xlZnQpO1xuICAgICAgICAkKCd0YWJsZSB0aCcpLmVxKDMpLmNzcygnbGVmdCcsIF9sZWZ0KS5hZGRDbGFzcygnYm94LXNoYWRvdycpO1xuICAgICAgICAkKCd0YWJsZSB0ZDpudGgtY2hpbGQoMSknKS5jc3MoJ2xlZnQnLCBfbGVmdCk7XG4gICAgICAgICQoJ3RhYmxlIHRkOm50aC1jaGlsZCgyKScpLmNzcygnbGVmdCcsIF9sZWZ0KTtcbiAgICAgICAgJCgndGFibGUgdGQ6bnRoLWNoaWxkKDMpJykuY3NzKCdsZWZ0JywgX2xlZnQpO1xuICAgICAgICAkKCd0YWJsZSB0ZDpudGgtY2hpbGQoNCknKS5jc3MoJ2xlZnQnLCBfbGVmdCkuYWRkQ2xhc3MoJ2JveC1zaGFkb3cnKTtcbiAgICAgICAgaWYgKE51bWJlcigkKHRoaXMpLnNjcm9sbExlZnQoKSkgPT09IDApIHtcbiAgICAgICAgICAgICQoJ3RhYmxlIHRoJykuZXEoMykucmVtb3ZlQ2xhc3MoJ2JveC1zaGFkb3cnKTtcbiAgICAgICAgICAgICQoJ3RhYmxlIHRkOm50aC1jaGlsZCg0KScpLnJlbW92ZUNsYXNzKCdib3gtc2hhZG93Jyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoXCIuc3RhclwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICBtYWluX3NyYyA9IFwiL3N0YXRpYy9pbWFnZXMvZGFpbHlzdGF0ZW1lbnQvYmlnX3N0YXJfbWFpbi5wbmdcIlxuICAgICAgICBhbGxfc3JjID0gXCIvc3RhdGljL2ltYWdlcy9kYWlseXN0YXRlbWVudC9iaWdfc3Rhci5wbmdcIlxuICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS5hdHRyKCd2YWx1ZScpO1xuICAgICAgICBpZih2YWwgPT0gJ2FsbCcpe1xuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignaW1nJykuZXEoMCkuYXR0cihcInNyY1wiLG1haW5fc3JjKTtcbiAgICAgICAgICAgICQodGhpcykuYXR0cigndmFsdWUnLCdtYWluJyk7XG4gICAgICAgICAgICAkKFwiLnNlYXJjaCBpbnB1dFwiKS5hdHRyKCd2YWx1ZScsJycpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpbWcnKS5lcSgwKS5hdHRyKFwic3JjXCIsYWxsX3NyYyk7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3ZhbHVlJywnYWxsJyk7XG4gICAgICAgIH1cbiAgICAgICAgZmlsbERhdGEoKTtcbiAgICB9KTtcblxuICAgICQoXCIuY2hlY2tib3hfYWxsXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKCQodGhpcykuaXMoJzpjaGVja2VkJykpe1xuICAgICAgICAgICAgJChcIi5jaGVja2JveFwiKS5wcm9wKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgJChcIi5jaGVja2JveFwiKS5yZW1vdmVBdHRyKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgICQoXCJ0Ym9keVwiKS5vbignY2xpY2snLCAnLm1haW5saW5lJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGZsYWcgPSAkKHRoaXMpLmF0dHIoXCJhbHRcIik7XG4gICAgICAgIHRydWVfc3JjID0gXCIvc3RhdGljL2ltYWdlcy9kYWlseXN0YXRlbWVudC9zdGFyX21haW4ucG5nXCJcbiAgICAgICAgZmFsc2Vfc3JjID0gXCIvc3RhdGljL2ltYWdlcy9kYWlseXN0YXRlbWVudC9zdGFyLnBuZ1wiXG4gICAgICAgIGlmKGZsYWcgPT0gMCl7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJzcmNcIix0cnVlX3NyYyk7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJhbHRcIiwxKTtcbiAgICAgICAgICAgIGZsYWcgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJzcmNcIixmYWxzZV9zcmMpO1xuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiYWx0XCIsMCk7XG4gICAgICAgICAgICBmbGFnID0gMDtcbiAgICAgICAgfVxuICAgICAgICBnb29kc19pZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cigndmFsdWUnKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2FwaS92MS4wL2RhaWx5c3RhdGVtZW50L2dvb2RzXCIsXG4gICAgICAgICAgICAgICAgZGF0YToge1wiaXNfbWFpbmxpbmVcIjpmbGFnLCBcImdvb2RzX2lkXCI6Z29vZHNfaWR9LFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn0pOyJdfQ==
