!function(e,t){"object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("FileSaver requires a window with a document");return t(e)}:t(e)}(window||this,function(e,t){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var n=e.document,o=function(){return e.URL||e.webkitURL||e},r=n.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},c=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},d="application/octet-stream",s=4e4,l=function(e){var t=function(){"string"==typeof e?o().revokeObjectURL(e):e.remove()};setTimeout(t,s)},p=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(a){u(a)}}},v=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},w=function(t,n,u){u||(t=v(t));var s,w=this,m=t.type,y=m===d,h=function(){p(w,"writestart progress write writeend".split(" "))},S=function(){if((f||y&&c)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=f?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;"),o=e.open(t,"_blank");o||(e.location.href=t),t=void 0,w.readyState=w.DONE,h()},n.readAsDataURL(t),void(w.readyState=w.INIT)}if(s||(s=o().createObjectURL(t)),y)e.location.href=s;else{var r=e.open(s,"_blank");r||(e.location.href=s)}w.readyState=w.DONE,h(),l(s)};return w.readyState=w.INIT,a?(s=o().createObjectURL(t),void setTimeout(function(){r.href=s,r.download=n,i(r),h(),l(s),w.readyState=w.DONE})):void S()},m=w.prototype,y=function(e,t,n){return new w(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=v(e)),navigator.msSaveOrOpenBlob(e,t)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,"function"==typeof define&&define.amd&&define("file-saverjs",[],function(){return y}),"undefined"==typeof t&&(e.saveAs=y),y)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi9maWxlc2F2ZXIuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibm9kZU5hbWUiLCJtb2R1bGUiLCJkb2N1bWVudCIsInciLCJFcnJvciIsIndpbmRvdyIsInRoaXMiLCJub0dsb2JhbCIsIm5hdmlnYXRvciIsInRlc3QiLCJ1c2VyQWdlbnQiLCJkb2MiLCJnZXRfVVJMIiwiVVJMIiwid2Via2l0VVJMIiwic2F2ZV9saW5rIiwiY3JlYXRlRWxlbWVudE5TIiwiY2FuX3VzZV9zYXZlX2xpbmsiLCJjbGljayIsIm5vZGUiLCJldmVudCIsIk1vdXNlRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiaXNfc2FmYXJpIiwiSFRNTEVsZW1lbnQiLCJzYWZhcmkiLCJpc19jaHJvbWVfaW9zIiwidGhyb3dfb3V0c2lkZSIsImV4Iiwic2V0SW1tZWRpYXRlIiwic2V0VGltZW91dCIsImZvcmNlX3NhdmVhYmxlX3R5cGUiLCJhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQiLCJyZXZva2UiLCJmaWxlIiwicmV2b2tlciIsInJldm9rZU9iamVjdFVSTCIsInJlbW92ZSIsImRpc3BhdGNoIiwiZmlsZXNhdmVyIiwiZXZlbnRfdHlwZXMiLCJjb25jYXQiLCJpIiwibGVuZ3RoIiwibGlzdGVuZXIiLCJjYWxsIiwiYXV0b19ib20iLCJibG9iIiwidHlwZSIsIkJsb2IiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJGaWxlU2F2ZXIiLCJuYW1lIiwibm9fYXV0b19ib20iLCJvYmplY3RfdXJsIiwiZm9yY2UiLCJkaXNwYXRjaF9hbGwiLCJzcGxpdCIsImZzX2Vycm9yIiwiRmlsZVJlYWRlciIsInJlYWRlciIsIm9ubG9hZGVuZCIsInVybCIsInJlc3VsdCIsInJlcGxhY2UiLCJwb3B1cCIsIm9wZW4iLCJsb2NhdGlvbiIsImhyZWYiLCJ1bmRlZmluZWQiLCJyZWFkeVN0YXRlIiwiRE9ORSIsInJlYWRBc0RhdGFVUkwiLCJJTklUIiwiY3JlYXRlT2JqZWN0VVJMIiwib3BlbmVkIiwiZG93bmxvYWQiLCJGU19wcm90byIsInByb3RvdHlwZSIsInNhdmVBcyIsIm1zU2F2ZU9yT3BlbkJsb2IiLCJhYm9ydCIsIldSSVRJTkciLCJlcnJvciIsIm9ud3JpdGVzdGFydCIsIm9ucHJvZ3Jlc3MiLCJvbndyaXRlIiwib25hYm9ydCIsIm9uZXJyb3IiLCJvbndyaXRlZW5kIiwiZGVmaW5lIiwiYW1kIl0sIm1hcHBpbmdzIjoiQ0FDRSxTQUFVQSxFQUFNQyxHQUNTLGdCQUFaQyxVQUFvRCxnQkFBckJBLFNBQVFDLFNBQzlDQyxPQUFPRixRQUFVRixFQUFLSyxTQUFXSixFQUFRRCxHQUFNLEdBQVEsU0FBVU0sR0FDN0QsSUFBS0EsRUFBRUQsU0FDSCxLQUFNLElBQUlFLE9BQU0sOENBRXBCLE9BQU9OLEdBQVFLLElBR25CTCxFQUFRRCxJQUVkUSxRQUFVQyxLQUFNLFNBQVVELEVBQVFFLEdBQzVCLFlBRUEsTUFBc0IsbUJBQVhGLElBQStDLG1CQUFkRyxZQUE2QixlQUFlQyxLQUFLRCxVQUFVRSxZQUF2RyxDQUdBLEdBQUlDLEdBQU1OLEVBQU9ILFNBRVhVLEVBQVUsV0FDUixNQUFPUCxHQUFPUSxLQUFPUixFQUFPUyxXQUFhVCxHQUUzQ1UsRUFBWUosRUFBSUssZ0JBQWdCLCtCQUFnQyxLQUNoRUMsRUFBb0IsWUFBY0YsR0FDbENHLEVBQVEsU0FBVUMsR0FDaEIsR0FBSUMsR0FBUSxHQUFJQyxZQUFXLFFBQzNCRixHQUFLRyxjQUFjRixJQUVyQkcsRUFBWSxlQUFlZCxLQUFLSixFQUFPbUIsY0FBZ0JuQixFQUFPb0IsT0FDOURDLEVBQWdCLGVBQWVqQixLQUFLRCxVQUFVRSxXQUM5Q2lCLEVBQWdCLFNBQVVDLElBQ3ZCdkIsRUFBT3dCLGNBQWdCeEIsRUFBT3lCLFlBQVksV0FDdkMsS0FBTUYsSUFDUCxJQUVMRyxFQUFzQiwyQkFFdEJDLEVBQTJCLElBQzNCQyxFQUFTLFNBQVVDLEdBQ2pCLEdBQUlDLEdBQVUsV0FDVSxnQkFBVEQsR0FDUHRCLElBQVV3QixnQkFB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b250ZW50IjpbIlxuOyhmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGV4cG9ydHMubm9kZU5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gcm9vdC5kb2N1bWVudCA/IGZhY3Rvcnkocm9vdCwgdHJ1ZSkgOiBmdW5jdGlvbiAodykge1xuICAgICAgICAgICAgaWYgKCF3LmRvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmlsZVNhdmVyIHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KHcpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3Rvcnkocm9vdCk7XG4gICAgfVxufSh3aW5kb3cgfHwgdGhpcywgZnVuY3Rpb24gKHdpbmRvdywgbm9HbG9iYWwpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIC8vIElFIDwxMCBpcyBleHBsaWNpdGx5IHVuc3VwcG9ydGVkXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgWzEtOV1cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZG9jID0gd2luZG93LmRvY3VtZW50XG4gICAgICAgICAgICAvLyBvbmx5IGdldCBVUkwgd2hlbiBuZWNlc3NhcnkgaW4gY2FzZSBCbG9iLmpzIGhhc24ndCBvdmVycmlkZGVuIGl0IHlldFxuICAgICAgICAgICAgLCBnZXRfVVJMID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkwgfHwgd2luZG93O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLCBzYXZlX2xpbmsgPSBkb2MuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLCBcImFcIilcbiAgICAgICAgICAgICwgY2FuX3VzZV9zYXZlX2xpbmsgPSBcImRvd25sb2FkXCIgaW4gc2F2ZV9saW5rXG4gICAgICAgICAgICAsIGNsaWNrID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgTW91c2VFdmVudChcImNsaWNrXCIpO1xuICAgICAgICAgICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAsIGlzX3NhZmFyaSA9IC9jb25zdHJ1Y3Rvci9pLnRlc3Qod2luZG93LkhUTUxFbGVtZW50KSB8fCB3aW5kb3cuc2FmYXJpXG4gICAgICAgICAgICAsIGlzX2Nocm9tZV9pb3MgPSAvQ3JpT1NcXC9bXFxkXSsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgICAgICAgICAgICwgdGhyb3dfb3V0c2lkZSA9IGZ1bmN0aW9uIChleCkge1xuICAgICAgICAgICAgICAgICh3aW5kb3cuc2V0SW1tZWRpYXRlIHx8IHdpbmRvdy5zZXRUaW1lb3V0KShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLCBmb3JjZV9zYXZlYWJsZV90eXBlID0gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIlxuICAgICAgICAgICAgLy8gdGhlIEJsb2IgQVBJIGlzIGZ1bmRhbWVudGFsbHkgYnJva2VuIGFzIHRoZXJlIGlzIG5vIFwiZG93bmxvYWRmaW5pc2hlZFwiIGV2ZW50IHRvIHN1YnNjcmliZSB0b1xuICAgICAgICAgICAgLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQgPSAxMDAwICogNDAgLy8gaW4gbXNcbiAgICAgICAgICAgICwgcmV2b2tlID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV2b2tlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSB7IC8vIGZpbGUgaXMgYW4gb2JqZWN0IFVSTFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X1VSTCgpLnJldm9rZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gZmlsZSBpcyBhIEZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocmV2b2tlciwgYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICwgZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudF90eXBlcyA9IFtdLmNvbmNhdChldmVudF90eXBlcyk7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBldmVudF90eXBlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBmaWxlc2F2ZXJbXCJvblwiICsgZXZlbnRfdHlwZXNbaV1dO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbChmaWxlc2F2ZXIsIGV2ZW50IHx8IGZpbGVzYXZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93X291dHNpZGUoZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLCBhdXRvX2JvbSA9IGZ1bmN0aW9uIChibG9iKSB7XG4gICAgICAgICAgICAgICAgLy8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcbiAgICAgICAgICAgICAgICAvLyBub3RlOiB5b3VyIGJyb3dzZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgVVRGLTE2IFUrRkVGRiB0byBFRiBCQiBCRlxuICAgICAgICAgICAgICAgIGlmICgvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpLCBibG9iXSwge3R5cGU6IGJsb2IudHlwZX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICwgRmlsZVNhdmVyID0gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub19hdXRvX2JvbSkge1xuICAgICAgICAgICAgICAgICAgICBibG9iID0gYXV0b19ib20oYmxvYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZpcnN0IHRyeSBhLmRvd25sb2FkLCB0aGVuIHdlYiBmaWxlc3lzdGVtLCB0aGVuIG9iamVjdCBVUkxzXG4gICAgICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVzYXZlciA9IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLCB0eXBlID0gYmxvYi50eXBlXG4gICAgICAgICAgICAgICAgICAgICwgZm9yY2UgPSB0eXBlID09PSBmb3JjZV9zYXZlYWJsZV90eXBlXG4gICAgICAgICAgICAgICAgICAgICwgb2JqZWN0X3VybFxuICAgICAgICAgICAgICAgICAgICAsIGRpc3BhdGNoX2FsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGZpbGVzYXZlciwgXCJ3cml0ZXN0YXJ0IHByb2dyZXNzIHdyaXRlIHdyaXRlZW5kXCIuc3BsaXQoXCIgXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBhbnkgZmlsZXN5cyBlcnJvcnMgcmV2ZXJ0IHRvIHNhdmluZyB3aXRoIG9iamVjdCBVUkxzXG4gICAgICAgICAgICAgICAgICAgICwgZnNfZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlzX2Nocm9tZV9pb3MgfHwgKGZvcmNlICYmIGlzX3NhZmFyaSkpICYmIHdpbmRvdy5GaWxlUmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiB1cmxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGlzX2Nocm9tZV9pb3MgPyByZWFkZXIucmVzdWx0IDogcmVhZGVyLnJlc3VsdC5yZXBsYWNlKC9eZGF0YTpbXjtdKjsvLCAnZGF0YTphdHRhY2htZW50L2ZpbGU7Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBvcHVwKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdW5kZWZpbmVkOyAvLyByZWxlYXNlIHJlZmVyZW5jZSBiZWZvcmUgZGlzcGF0Y2hpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hfYWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGNyZWF0ZSBtb3JlIG9iamVjdCBVUkxzIHRoYW4gbmVlZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9iamVjdF91cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RfdXJsID0gZ2V0X1VSTCgpLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gb2JqZWN0X3VybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5lZCA9IHdpbmRvdy5vcGVuKG9iamVjdF91cmwsIFwiX2JsYW5rXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGxlIGRvZXMgbm90IGFsbG93IHdpbmRvdy5vcGVuLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvc2FmYXJpL2RvY3VtZW50YXRpb24vVG9vbHMvQ29uY2VwdHVhbC9TYWZhcmlFeHRlbnNpb25HdWlkZS9Xb3JraW5nd2l0aFdpbmRvd3NhbmRUYWJzL1dvcmtpbmd3aXRoV2luZG93c2FuZFRhYnMuaHRtbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoX2FsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2b2tlKG9iamVjdF91cmwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVfbGluay5ocmVmID0gb2JqZWN0X3VybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVfbGluay5kb3dubG9hZCA9IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljayhzYXZlX2xpbmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hfYWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXZva2Uob2JqZWN0X3VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZzX2Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAsIEZTX3Byb3RvID0gRmlsZVNhdmVyLnByb3RvdHlwZVxuICAgICAgICAgICAgLCBzYXZlQXMgPSBmdW5jdGlvbiAoYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpbGVTYXZlcihibG9iLCBuYW1lIHx8IGJsb2IubmFtZSB8fCBcImRvd25sb2FkXCIsIG5vX2F1dG9fYm9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgLy8gSUUgMTArIChuYXRpdmUgc2F2ZUFzKVxuICAgICAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lIHx8IGJsb2IubmFtZSB8fCBcImRvd25sb2FkXCI7XG5cbiAgICAgICAgICAgICAgICBpZiAoIW5vX2F1dG9fYm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2IgPSBhdXRvX2JvbShibG9iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIEZTX3Byb3RvLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBGU19wcm90by5yZWFkeVN0YXRlID0gRlNfcHJvdG8uSU5JVCA9IDA7XG4gICAgICAgIEZTX3Byb3RvLldSSVRJTkcgPSAxO1xuICAgICAgICBGU19wcm90by5ET05FID0gMjtcblxuICAgICAgICBGU19wcm90by5lcnJvciA9XG4gICAgICAgICAgICBGU19wcm90by5vbndyaXRlc3RhcnQgPVxuICAgICAgICAgICAgICAgIEZTX3Byb3RvLm9ucHJvZ3Jlc3MgPVxuICAgICAgICAgICAgICAgICAgICBGU19wcm90by5vbndyaXRlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIEZTX3Byb3RvLm9uYWJvcnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZTX3Byb3RvLm9uZXJyb3IgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGU19wcm90by5vbndyaXRlZW5kID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgICAgICBkZWZpbmUoXCJmaWxlLXNhdmVyanNcIiwgW10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2F2ZUFzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG5vR2xvYmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgd2luZG93LnNhdmVBcyA9IHNhdmVBcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2F2ZUFzO1xuICAgIH1cbikpO1xuIl19
