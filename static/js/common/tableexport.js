!function(t,e){"function"==typeof define&&define.amd?define(["exports","jquery","blobjs","file-saverjs","xlsx-js"],e):"object"==typeof exports&&"string"!=typeof exports.nodeName?e(exports,require("jquery"),require("blobjs"),require("file-saverjs"),require("xlsx-js")):e(t,t.jQuery,t.Blob,t.saveAs,t.XLSX)}(this,function(t,e,o,n,i){"use strict";var r=function(t,o,n){var s=this;s.settings=n?o:e.extend({},r.prototype.defaults,o),s.selectors=t;var a,p,f,l=r.prototype.rowDel,u=s.settings.ignoreRows instanceof Array?s.settings.ignoreRows:[s.settings.ignoreRows],x=s.settings.ignoreCols instanceof Array?s.settings.ignoreCols:[s.settings.ignoreCols],c=s.settings.ignoreCSS instanceof Array?s.settings.ignoreCSS.join(", "):s.settings.ignoreCSS,d=s.settings.emptyCSS instanceof Array?s.settings.emptyCSS.join(", "):s.settings.emptyCSS;return s.settings.bootstrap?(a=r.prototype.bootstrap[0]+" ",p=r.prototype.bootstrap[1]+" ",f=r.prototype.bootstrap[2]+" "):(a=r.prototype.defaultButton+" ",p=f=""),s.selectors.each(function(){function t(t,o,n){e(".download").attr("data-fileblob",t);var i=e(".download").data("fileblob"),s=i.data,a=i.fileName,p=i.mimeType,f=i.fileExtension;r.prototype.export2file(s,p,a,f)}var o=e(this);n&&o.find("caption:not(.head)").remove();var a=o.find("tbody").find("tr"),a=s.settings.headings?a.add(o.find("thead>tr")):a,a=s.settings.footers?a.add(o.find("tfoot>tr")):a,p=s.settings.headings?o.find("thead>tr").length:0,f="id"===s.settings.fileName?o.attr("id")?o.attr("id"):r.prototype.defaultFileName:s.settings.fileName,y={xlsx:function(o,n){var i={},s=a.map(function(t,o){if(!~u.indexOf(t-p)&&!e(o).is(c)){var n=e(o).find("th, td");return[n.map(function(o,n){if(!~x.indexOf(o)&&!e(n).is(c)){if(e(n).is(d))return" ";if(n.hasAttribute("colspan")&&(i[t]=i[t]||{},i[t][o+1]=n.getAttribute("colspan")-1),n.hasAttribute("rowspan"))for(var r=1;r<n.getAttribute("rowspan");r++)i[t+r]=i[t+r]||{},i[t+r][o]=1;return i[t]&&i[t][o]?new Array(i[t][o]).concat(e(n).text()):e(n).text()}}).get()]}}).get(),f=r.prototype.escapeHtml(JSON.stringify({data:s,fileName:n,mimeType:r.prototype.xlsx.mimeType,fileExtension:r.prototype.xlsx.fileExtension})),l=r.prototype.xlsx.buttonContent,y=r.prototype.xlsx.defaultClass;t(f,l,y)},xlsm:function(o,n){var i={},s=a.map(function(t,o){if(!~u.indexOf(t-p)&&!e(o).is(c)){var n=e(o).find("th, td");return[n.map(function(o,n){if(!~x.indexOf(o)&&!e(n).is(c)){if(e(n).is(d))return" ";if(n.hasAttribute("colspan")&&(i[t]=i[t]||{},i[t][o+1]=n.getAttribute("colspan")-1),n.hasAttribute("rowspan"))for(var r=1;r<n.getAttribute("rowspan");r++)i[t+r]=i[t+r]||{},i[t+r][o]=1;return i[t]&&i[t][o]?new Array(i[t][o]).concat(e(n).text()):e(n).text()}}).get()]}}).get(),f=r.prototype.escapeHtml(JSON.stringify({data:s,fileName:n,mimeType:r.prototype.xls.mimeType,fileExtension:r.prototype.xls.fileExtension})),l=r.prototype.xls.buttonContent,y=r.prototype.xls.defaultClass;t(f,l,y)},xls:function(o,n){var i=r.prototype.xls.separator,s=a.map(function(t,o){if(!~u.indexOf(t-p)&&!e(o).is(c)){var n=e(o).find("th, td");return n.map(function(t,o){if(!~x.indexOf(t)&&!e(o).is(c))return e(o).is(d)?" ":e(o).text()}).get().join(i)}}).get().join(o),f=r.prototype.escapeHtml(JSON.stringify({data:s,fileName:n,mimeType:r.prototype.xls.mimeType,fileExtension:r.prototype.xls.fileExtension})),l=r.prototype.xls.buttonContent,y=r.prototype.xls.defaultClass;t(f,l,y)},csv:function(o,n){var i=r.prototype.csv.separator,s=a.map(function(t,o){if(!~u.indexOf(t-p)&&!e(o).is(c)){var n=e(o).find("th, td");return n.map(function(t,o){if(!~x.indexOf(t)&&!e(o).is(c))return e(o).is(d)?" ":'"'+e(o).text().replace(/"/g,'""')+'"'}).get().join(i)}}).get().join(o),f=r.prototype.escapeHtml(JSON.stringify({data:s,fileName:n,mimeType:r.prototype.csv.mimeType,fileExtension:r.prototype.csv.fileExtension})),l=r.prototype.csv.buttonContent,y=r.prototype.csv.defaultClass;t(f,l,y)},txt:function(o,n){var i=r.prototype.txt.separator,s=a.map(function(t,o){if(!~u.indexOf(t-p)&&!e(o).is(c)){var n=e(o).find("th, td");return n.map(function(t,o){if(!~x.indexOf(t)&&!e(o).is(c))return e(o).is(d)?" ":e(o).text()}).get().join(i)}}).get().join(o),f=r.prototype.escapeHtml(JSON.stringify({data:s,fileName:n,mimeType:r.prototype.txt.mimeType,fileExtension:r.prototype.txt.fileExtension})),l=r.prototype.txt.buttonContent,y=r.prototype.txt.defaultClass;t(f,l,y)}};s.settings.formats.forEach(function(t){!(!i||"xls"!==t)&&(t="xlsm"),!i&&"xlsx"===t&&(t=null),t&&y[t](l,f)})}),e(".download").off("click").on("click",function(){var t=e(this).data("fileblob"),o=t.data,n=t.fileName,i=t.mimeType,s=t.fileExtension;r.prototype.export2file(o,i,n,s)}),s};r.prototype={version:"3.3.5",defaults:{headings:!0,footers:!0,formats:["xls","csv","txt"],fileName:"id",bootstrap:!0,position:"bottom",ignoreRows:null,ignoreCols:null,ignoreCSS:".tableexport-ignore",emptyCSS:".tableexport-empty"},charset:"charset=utf-8",defaultFileName:"myDownload",defaultButton:"button-default",bootstrap:["btn","btn-default","btn-toolbar"],rowDel:"\r\n",entityMap:{"&":"&#38;","<":"&#60;",">":"&#62;","'":"&#39;","/":"&#47;"},xlsx:{defaultClass:"xlsx",buttonContent:"Export to xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",fileExtension:".xlsx"},xls:{defaultClass:"xls",buttonContent:"Export to xls",separator:"\t",mimeType:"application/vnd.ms-excel",fileExtension:".xls"},csv:{defaultClass:"csv",buttonContent:"Export to csv",separator:",",mimeType:"text/csv",fileExtension:".csv"},txt:{defaultClass:"txt",buttonContent:"Export to txt",separator:"  ",mimeType:"text/plain",fileExtension:".txt"},escapeHtml:function(t){return String(t).replace(/[&<>'\/]/g,function(t){return r.prototype.entityMap[t]})},dateNum:function(t,e){e&&(t+=1462);var o=Date.parse(t);return(o-new Date(Date.UTC(1899,11,30)))/864e5},createSheet:function(t){for(var e={},o={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=t.length;++n)for(var r=0;r!=t[n].length;++r){o.s.r>n&&(o.s.r=n),o.s.c>r&&(o.s.c=r),o.e.r<n&&(o.e.r=n),o.e.c<r&&(o.e.c=r);var s={v:t[n][r]};if(null!==s.v){var a=i.utils.encode_cell({c:r,r:n});"number"==typeof s.v?s.t="n":"boolean"==typeof s.v?s.t="b":s.v instanceof Date?(s.t="n",s.z=i.SSF._table[14],s.v=this.dateNum(s.v)):s.t="s",e[a]=s}}return o.s.c<1e7&&(e["!ref"]=i.utils.encode_range(o)),e},Workbook:function(){this.SheetNames=[],this.Sheets={}},string2ArrayBuffer:function(t){for(var e=new ArrayBuffer(t.length),o=new Uint8Array(e),n=0;n!=t.length;++n)o[n]=255&t.charCodeAt(n);return e},export2file:function(t,e,r,s){if(i&&".xls"==s.substr(0,4)){var a=new this.Workbook,p=this.createSheet(t);a.SheetNames.push(r),a.Sheets[r]=p;var f={bookType:s.substr(1,3)+(s.substr(4)||"m"),bookSST:!1,type:"binary"},l=i.write(a,f);t=this.string2ArrayBuffer(l)}n(new o(["\ufeff"+t],{type:e+";"+this.charset}),r+s,!0)},update:function(t){return new r(this.selectors,e.extend({},this.settings,t),(!0))},reset:function(){return new r(this.selectors,settings,(!0))},remove:function(){this.selectors.each(function(){e(this).find("caption:not(.head)").remove()})}},e.fn.tableExport=function(t,e){return new r(this,t,e)};for(var s in r.prototype)e.fn.tableExport[s]=r.prototype[s];return t["default"]=t.TableExport=r});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi90YWJsZWV4cG9ydC5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJub2RlTmFtZSIsInJlcXVpcmUiLCJqUXVlcnkiLCJCbG9iIiwic2F2ZUFzIiwiWExTWCIsInRoaXMiLCIkIiwiVGFibGVFeHBvcnQiLCJzZWxlY3RvcnMiLCJvcHRpb25zIiwiaXNVcGRhdGUiLCJzZWxmIiwic2V0dGluZ3MiLCJleHRlbmQiLCJwcm90b3R5cGUiLCJkZWZhdWx0cyIsImJvb3RzdHJhcENsYXNzIiwiYm9vdHN0cmFwVGhlbWUiLCJib290c3RyYXBTcGFjaW5nIiwicm93RCIsInJvd0RlbCIsImlnbm9yZVJvd3MiLCJBcnJheSIsImlnbm9yZUNvbHMiLCJpZ25vcmVDU1MiLCJqb2luIiwiZW1wdHlDU1MiLCJib290c3RyYXAiLCJkZWZhdWx0QnV0dG9uIiwiZWFjaCIsImNyZWF0ZU9iakJ1dHRvbiIsImRhdGFPYmplY3QiLCJteUNvbnRlbnQiLCJteUNsYXNzIiwiYXR0ciIsIm9iamVjdCIsImRhdGEiLCJmaWxlTmFtZSIsIm1pbWVUeXBlIiwiZmlsZUV4dGVuc2lvbiIsImV4cG9ydDJmaWxlIiwiJGVsIiwiZmluZCIsInJlbW92ZSIsIiRyb3dzIiwiaGVhZGluZ3MiLCJhZGQiLCJmb290ZXJzIiwidGhBZGoiLCJsZW5ndGgiLCJkZWZhdWx0RmlsZU5hbWUiLCJleHBvcnRlcnMiLCJ4bHN4IiwickRlbCIsIm5hbWUiLCJyY01hcCIsImRhdGFVUkwiLCJtYXAiLCJpciIsInZhbCIsImluZGV4T2YiLCJpcyIsIiRjb2xzIiwiaWMiLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJpIiwiY29uY2F0IiwidGV4dCIsImdldCIsImVzY2FwZUh0bWwiLCJKU09OIiwic3RyaW5naWZ5IiwiYnV0dG9uQ29udGVudCIsImRlZmF1bHRDbGFzcyIsInhsc20iLCJ4bHMiLCJyZGVsIiwiY29sRCIsInNlcGFyYXRvciIsImNzdiIsInJlcGxhY2UiLCJ0eHQiLCJmb3JtYXRzIiwiZm9yRWFjaCIsImtleSIsIm9mZiIsIm9uIiwidmVyc2lvbiIsInBvc2l0aW9uIiwiY2hhcnNldCIsImVudGl0eU1hcCIsIiYiLCI8IiwiPiIsIiciLCIvIiwic3RyaW5nIiwiU3RyaW5nIiwicyIsImRhdGVOdW0iLCJ2IiwiZGF0ZTE5MDQiLCJlcG9jaCIsIkRhdGUiLCJwYXJzZSIsIlVUQyIsImNyZWF0ZVNoZWV0Iiwid3MiLCJyYW5nZSIsImMiLCJyIiwiZSIsIlIiLCJDIiwiY2VsbCIsImNlbGxfcmVmIiwidXRpbHMiLCJlbmNvZGVfY2VsbCIsInQiLCJ6IiwiU1NGIiwiX3RhYmxlIiwiZW5jb2RlX3JhbmdlIiwiV29ya2Jvb2siLCJTaGVldE5hbWVzIiwiU2hlZXRzIiwic3RyaW5nMkFycmF5QnVmZmVyIiwiYnVmIiwiQXJyYXlCdWZmZXIiLCJ2aWV3IiwiVWludDhBcnJheSIsImNoYXJDb2RlQXQiLCJtaW1lIiwiZXh0ZW5zaW9uIiwic3Vic3RyIiwid2IiLCJwdXNoIiwid29wdHMiLCJib29rVHlwZSIsImJvb2tTU1QiLCJ0eXBlIiwid2JvdXQiLCJ3cml0ZSIsInVwZGF0ZSIsInJlc2V0IiwiZm4iLCJ0YWJsZUV4cG9ydCIsInByb3AiXSwibWFwcGluZ3MiOiJDQUVFLFNBQVVBLEVBQU1DLEdBQ1Esa0JBQVhDLFNBQXlCQSxPQUFPQyxJQUV2Q0QsUUFBUSxVQUFXLFNBQVUsU0FBVSxlQUFnQixXQUFZRCxHQUN6QyxnQkFBWkcsVUFBb0QsZ0JBQXJCQSxTQUFRQyxTQUVyREosRUFBUUcsUUFBU0UsUUFBUSxVQUFXQSxRQUFRLFVBQVdBLFFBQVEsZ0JBQWlCQSxRQUFRLFlBR3hGTCxFQUFRRCxFQUFNQSxFQUFLTyxPQUFRUCxFQUFLUSxLQUFNUixFQUFLUyxPQUFRVCxFQUFLVSxPQUU5REMsS0FBTSxTQUFVUCxFQUFTUSxFQUFHSixFQUFNQyxFQUFRQyxHQUNwQyxZQVFBLElBQUlHLEdBQWMsU0FBVUMsRUFBV0MsRUFBU0MsR0FF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Z0IsQ0FDNUMsR0FBSUMsR0FBSyxHQUFJbkksTUFBS3VILFNBQ2RoQixFQUFLdkcsS0FBS3NHLFlBQVl2RSxFQUUxQm9HLEdBQUdYLFdBQVdZLEtBQUtuRixHQUNuQmtGLEVBQUdWLE9BQU94RSxHQUFRc0QsQ0FDbEIsSUFBSThCLElBQ0lDLFNBQVVMLEVBQVVDLE9BQU8sRUFBRyxJQUFNRCxFQUFVQyxPQUFPLElBQU0sS0FDM0RLLFNBQVMsRUFDVEMsS0FBTSxVQUVWQyxFQUFRMUksRUFBSzJJLE1BQU1QLEVBQUlFLEVBRTNCdEcsR0FBTy9CLEtBQUswSCxtQkFBbUJlLEdBRW5DM0ksRUFBTyxHQUFJRCxJQUFNLFNBQVdrQyxJQUN2QnlHLEtBQU1SLEVBQU8sSUFBTWhJLEtBQUtxRixVQUN6QnBDLEVBQU9nRixHQUFXLElBTzFCVSxPQUFRLFNBQVV2SSxHQUNkLE1BQU8sSUFBSUYsR0FBWUYsS0FBS0csVUFBV0YsRUFBRU8sVUFBV1IsS0FBS08sU0FBVUgsS0FBVSxLQU1qRndJLE1BQU8sV0FDSCxNQUFPLElBQUkxSSxHQUFZRixLQUFLRyxVQUFXSSxXQUFVLEtBS3JEK0IsT0FBUSxXQUNKdEMsS0FBS0csVUFBVXFCLEtBQUssV0FDaEJ2QixFQUFFRCxNQUFNcUMsS0FBSyxzQkFBc0JDLGFBVy9DckMsRUFBRTRJLEdBQUdDLFlBQWMsU0FBVTFJLEVBQVNDLEdBQ2xDLE1BQU8sSUFBSUgsR0FBWUYsS0FBTUksRUFBU0MsR0FJMUMsS0FBSyxHQUFJMEksS0FBUTdJLEdBQVlPLFVBQ3pCUixFQUFFNEksR0FBR0MsWUFBWUMsR0FBUTdJLEVBQVlPLFVBQVVzSSxFQUduRCxPQUFPdEosR0FBQUEsV0FBa0JBLEVBQVFTLFlBQWNBIiwiZmlsZSI6ImNvbW1vbi90YWJsZWV4cG9ydC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG47KGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbJ2V4cG9ydHMnLCAnanF1ZXJ5JywgJ2Jsb2JqcycsICdmaWxlLXNhdmVyanMnLCAneGxzeC1qcyddLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZXhwb3J0cy5ub2RlTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgZmFjdG9yeShleHBvcnRzLCByZXF1aXJlKCdqcXVlcnknKSwgcmVxdWlyZSgnYmxvYmpzJyksIHJlcXVpcmUoJ2ZpbGUtc2F2ZXJqcycpLCByZXF1aXJlKCd4bHN4LWpzJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgICAgICBmYWN0b3J5KHJvb3QsIHJvb3QualF1ZXJ5LCByb290LkJsb2IsIHJvb3Quc2F2ZUFzLCByb290LlhMU1gpO1xuICAgIH1cbn0odGhpcywgZnVuY3Rpb24gKGV4cG9ydHMsICQsIEJsb2IsIHNhdmVBcywgWExTWCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYWJsZUV4cG9ydCBtYWluIHBsdWdpbiBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0gc2VsZWN0b3JzIHtqUXVlcnl9IGpRdWVyeSBzZWxlY3RvcihzKVxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBUYWJsZUV4cG9ydCBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICAgICAgICogQHBhcmFtIGlzVXBkYXRlIHtCb29sZWFufVxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIHZhciBUYWJsZUV4cG9ydCA9IGZ1bmN0aW9uIChzZWxlY3RvcnMsIG9wdGlvbnMsIGlzVXBkYXRlKSB7XG5cbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGFibGVFeHBvcnQgY29uZmlndXJhdGlvbiBvcHRpb25zICh1c2VyLWRlZmluZWQgdy8gZGVmYXVsdCBmYWxsYmFjaylcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2VsZi5zZXR0aW5ncyA9IGlzVXBkYXRlID8gb3B0aW9ucyA6ICQuZXh0ZW5kKHt9LCBUYWJsZUV4cG9ydC5wcm90b3R5cGUuZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBqUXVlcnkgc2VsZWN0b3JzICh0YWJsZXMpIHRvIGFwcGx5IHRoZSBwbHVnaW4gdG9cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RvcnMgPSBzZWxlY3RvcnM7XG5cbiAgICAgICAgICAgIHZhciByb3dEID0gVGFibGVFeHBvcnQucHJvdG90eXBlLnJvd0RlbCxcbiAgICAgICAgICAgICAgICBpZ25vcmVSb3dzID0gc2VsZi5zZXR0aW5ncy5pZ25vcmVSb3dzIGluc3RhbmNlb2YgQXJyYXkgPyBzZWxmLnNldHRpbmdzLmlnbm9yZVJvd3MgOiBbc2VsZi5zZXR0aW5ncy5pZ25vcmVSb3dzXSxcbiAgICAgICAgICAgICAgICBpZ25vcmVDb2xzID0gc2VsZi5zZXR0aW5ncy5pZ25vcmVDb2xzIGluc3RhbmNlb2YgQXJyYXkgPyBzZWxmLnNldHRpbmdzLmlnbm9yZUNvbHMgOiBbc2VsZi5zZXR0aW5ncy5pZ25vcmVDb2xzXSxcbiAgICAgICAgICAgICAgICBpZ25vcmVDU1MgPSBzZWxmLnNldHRpbmdzLmlnbm9yZUNTUyBpbnN0YW5jZW9mIEFycmF5ID8gc2VsZi5zZXR0aW5ncy5pZ25vcmVDU1Muam9pbihcIiwgXCIpIDogc2VsZi5zZXR0aW5ncy5pZ25vcmVDU1MsXG4gICAgICAgICAgICAgICAgZW1wdHlDU1MgPSBzZWxmLnNldHRpbmdzLmVtcHR5Q1NTIGluc3RhbmNlb2YgQXJyYXkgPyBzZWxmLnNldHRpbmdzLmVtcHR5Q1NTLmpvaW4oXCIsIFwiKSA6IHNlbGYuc2V0dGluZ3MuZW1wdHlDU1MsXG4gICAgICAgICAgICAgICAgYm9vdHN0cmFwQ2xhc3MsIGJvb3RzdHJhcFRoZW1lLCBib290c3RyYXBTcGFjaW5nO1xuXG4gICAgICAgICAgICBpZiAoc2VsZi5zZXR0aW5ncy5ib290c3RyYXApIHtcbiAgICAgICAgICAgICAgICBib290c3RyYXBDbGFzcyA9IFRhYmxlRXhwb3J0LnByb3RvdHlwZS5ib290c3RyYXBbMF0gKyBcIiBcIjtcbiAgICAgICAgICAgICAgICBib290c3RyYXBUaGVtZSA9IFRhYmxlRXhwb3J0LnByb3RvdHlwZS5ib290c3RyYXBbMV0gKyBcIiBcIjtcbiAgICAgICAgICAgICAgICBib290c3RyYXBTcGFjaW5nID0gVGFibGVFeHBvcnQucHJvdG90eXBlLmJvb3RzdHJhcFsyXSArIFwiIFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib290c3RyYXBDbGFzcyA9IFRhYmxlRXhwb3J0LnByb3RvdHlwZS5kZWZhdWx0QnV0dG9uICsgXCIgXCI7XG4gICAgICAgICAgICAgICAgYm9vdHN0cmFwVGhlbWUgPSBib290c3RyYXBTcGFjaW5nID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5zZWxlY3RvcnMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRlbCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICRlbC5maW5kKCdjYXB0aW9uOm5vdCguaGVhZCknKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyICRyb3dzID0gJGVsLmZpbmQoJ3Rib2R5JykuZmluZCgndHInKSxcbiAgICAgICAgICAgICAgICAgICAgJHJvd3MgPSBzZWxmLnNldHRpbmdzLmhlYWRpbmdzID8gJHJvd3MuYWRkKCRlbC5maW5kKCd0aGVhZD50cicpKSA6ICRyb3dzLFxuICAgICAgICAgICAgICAgICAgICAkcm93cyA9IHNlbGYuc2V0dGluZ3MuZm9vdGVycyA/ICRyb3dzLmFkZCgkZWwuZmluZCgndGZvb3Q+dHInKSkgOiAkcm93cyxcbiAgICAgICAgICAgICAgICAgICAgdGhBZGogPSBzZWxmLnNldHRpbmdzLmhlYWRpbmdzID8gJGVsLmZpbmQoJ3RoZWFkPnRyJykubGVuZ3RoIDogMCxcbiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBzZWxmLnNldHRpbmdzLmZpbGVOYW1lID09PSBcImlkXCIgPyAoJGVsLmF0dHIoJ2lkJykgPyAkZWwuYXR0cignaWQnKSA6IFRhYmxlRXhwb3J0LnByb3RvdHlwZS5kZWZhdWx0RmlsZU5hbWUpIDogc2VsZi5zZXR0aW5ncy5maWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0ZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeGxzeDogZnVuY3Rpb24gKHJEZWwsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmNNYXAgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVVSTCA9ICRyb3dzLm1hcChmdW5jdGlvbiAoaXIsIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhfmlnbm9yZVJvd3MuaW5kZXhPZihpciAtIHRoQWRqKSB8fCAkKHZhbCkuaXMoaWdub3JlQ1NTKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY29scyA9ICQodmFsKS5maW5kKCd0aCwgdGQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbJGNvbHMubWFwKGZ1bmN0aW9uIChpYywgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhfmlnbm9yZUNvbHMuaW5kZXhPZihpYykgfHwgJCh2YWwpLmlzKGlnbm9yZUNTUykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh2YWwpLmlzKGVtcHR5Q1NTKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuaGFzQXR0cmlidXRlKCdjb2xzcGFuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNNYXBbaXJdID0gcmNNYXBbaXJdIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByY01hcFtpcl1baWMgKyAxXSA9IHZhbC5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuaGFzQXR0cmlidXRlKCdyb3dzcGFuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB2YWwuZ2V0QXR0cmlidXRlKCdyb3dzcGFuJyk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNNYXBbaXIgKyBpXSA9IHJjTWFwW2lyICsgaV0gfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByY01hcFtpciArIGldW2ljXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJjTWFwW2lyXSAmJiByY01hcFtpcl1baWNdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkocmNNYXBbaXJdW2ljXSkuY29uY2F0KCQodmFsKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh2YWwpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldCgpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZ2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUuZXNjYXBlSHRtbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhVVJMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzeC5taW1lVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlRXh0ZW5zaW9uOiBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzeC5maWxlRXh0ZW5zaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15Q29udGVudCA9IFRhYmxlRXhwb3J0LnByb3RvdHlwZS54bHN4LmJ1dHRvbkNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15Q2xhc3MgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzeC5kZWZhdWx0Q2xhc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT2JqQnV0dG9uKGRhdGFPYmplY3QsIG15Q29udGVudCwgbXlDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgeGxzbTogZnVuY3Rpb24gKHJEZWwsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmNNYXAgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVVSTCA9ICRyb3dzLm1hcChmdW5jdGlvbiAoaXIsIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhfmlnbm9yZVJvd3MuaW5kZXhPZihpciAtIHRoQWRqKSB8fCAkKHZhbCkuaXMoaWdub3JlQ1NTKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY29scyA9ICQodmFsKS5maW5kKCd0aCwgdGQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbJGNvbHMubWFwKGZ1bmN0aW9uIChpYywgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhfmlnbm9yZUNvbHMuaW5kZXhPZihpYykgfHwgJCh2YWwpLmlzKGlnbm9yZUNTUykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh2YWwpLmlzKGVtcHR5Q1NTKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuaGFzQXR0cmlidXRlKCdjb2xzcGFuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNNYXBbaXJdID0gcmNNYXBbaXJdIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByY01hcFtpcl1baWMgKyAxXSA9IHZhbC5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuaGFzQXR0cmlidXRlKCdyb3dzcGFuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB2YWwuZ2V0QXR0cmlidXRlKCdyb3dzcGFuJyk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNNYXBbaXIgKyBpXSA9IHJjTWFwW2lyICsgaV0gfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByY01hcFtpciArIGldW2ljXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJjTWFwW2lyXSAmJiByY01hcFtpcl1baWNdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkocmNNYXBbaXJdW2ljXSkuY29uY2F0KCQodmFsKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh2YWwpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldCgpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZ2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUuZXNjYXBlSHRtbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhVVJMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzLm1pbWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVFeHRlbnNpb246IFRhYmxlRXhwb3J0LnByb3RvdHlwZS54bHMuZmlsZUV4dGVuc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUNvbnRlbnQgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzLmJ1dHRvbkNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15Q2xhc3MgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzLmRlZmF1bHRDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVPYmpCdXR0b24oZGF0YU9iamVjdCwgbXlDb250ZW50LCBteUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB4bHM6IGZ1bmN0aW9uIChyZGVsLCBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbEQgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzLnNlcGFyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVVSTCA9ICRyb3dzLm1hcChmdW5jdGlvbiAoaSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF+aWdub3JlUm93cy5pbmRleE9mKGkgLSB0aEFkaikgfHwgJCh2YWwpLmlzKGlnbm9yZUNTUykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGNvbHMgPSAkKHZhbCkuZmluZCgndGgsIHRkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbHMubWFwKGZ1bmN0aW9uIChpLCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF+aWdub3JlQ29scy5pbmRleE9mKGkpIHx8ICQodmFsKS5pcyhpZ25vcmVDU1MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodmFsKS5pcyhlbXB0eUNTUykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh2YWwpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldCgpLmpvaW4oY29sRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldCgpLmpvaW4ocmRlbCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUuZXNjYXBlSHRtbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhVVJMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzLm1pbWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVFeHRlbnNpb246IFRhYmxlRXhwb3J0LnByb3RvdHlwZS54bHMuZmlsZUV4dGVuc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUNvbnRlbnQgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzLmJ1dHRvbkNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15Q2xhc3MgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUueGxzLmRlZmF1bHRDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVPYmpCdXR0b24oZGF0YU9iamVjdCwgbXlDb250ZW50LCBteUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3Y6IGZ1bmN0aW9uIChyZGVsLCBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbEQgPSBUYWJsZUV4cG9ydC5wcm90b3R5cGUuY3N2LnNlcGFyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVVSTCA9ICRyb3dzLm1hcChmdW5jdGlvbiAoaSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF+aWdub3JlUm93cy5pbmRleE9mKGkgLSB0aEFkaikgfHwgJCh2YWwpLmlzKGlnbm9yZUNTUykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGNvbHMgPSAkKHZhbCkuZmluZCgndGgsIHRkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbHMubWFwKGZ1bmN0aW9uIChpLCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF+aWdub3JlQ29scy5pbmRleE9mKGkpIHx8ICQodmFsKS5pcyhpZ25vcmVDU1MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodmFsKS5pcyhlbXB0eUNTUykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1wiJyArICQodmFsKS50ZXh0KCkucmVwbGFjZSgvXCIvZywgJ1wiXCInKSArICdcIic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXQoKS5qb2luKGNvbEQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXQoKS5qb2luKHJkZWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2JqZWN0ID0gVGFibGVFeHBvcnQucHJvdG90eXBlLmVzY2FwZUh0bWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVVSTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogVGFibGVFeHBvcnQucHJvdG90eXBlLmNzdi5taW1lVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlRXh0ZW5zaW9uOiBUYWJsZUV4cG9ydC5wcm90b3R5cGUuY3N2LmZpbGVFeHRlbnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlDb250ZW50ID0gVGFibGVFeHBvcnQucHJvdG90eXBlLmNzdi5idXR0b25Db250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUNsYXNzID0gVGFibGVFeHBvcnQucHJvdG90eXBlLmNzdi5kZWZhdWx0Q2xhc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT2JqQnV0dG9uKGRhdGFPYmplY3QsIG15Q29udGVudCwgbXlDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdHh0OiBmdW5jdGlvbiAocmRlbCwgbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xEID0gVGFibGVFeHBvcnQucHJvdG90eXBlLnR4dC5zZXBhcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFVUkwgPSAkcm93cy5tYXAoZnVuY3Rpb24gKGksIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhfmlnbm9yZVJvd3MuaW5kZXhPZihpIC0gdGhBZGopIHx8ICQodmFsKS5pcyhpZ25vcmVDU1MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjb2xzID0gJCh2YWwpLmZpbmQoJ3RoLCB0ZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRjb2xzLm1hcChmdW5jdGlvbiAoaSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhfmlnbm9yZUNvbHMuaW5kZXhPZihpKSB8fCAkKHZhbCkuaXMoaWdub3JlQ1NTKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHZhbCkuaXMoZW1wdHlDU1MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodmFsKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXQoKS5qb2luKGNvbEQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5nZXQoKS5qb2luKHJkZWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2JqZWN0ID0gVGFibGVFeHBvcnQucHJvdG90eXBlLmVzY2FwZUh0bWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVVSTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogVGFibGVFeHBvcnQucHJvdG90eXBlLnR4dC5taW1lVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlRXh0ZW5zaW9uOiBUYWJsZUV4cG9ydC5wcm90b3R5cGUudHh0LmZpbGVFeHRlbnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlDb250ZW50ID0gVGFibGVFeHBvcnQucHJvdG90eXBlLnR4dC5idXR0b25Db250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUNsYXNzID0gVGFibGVFeHBvcnQucHJvdG90eXBlLnR4dC5kZWZhdWx0Q2xhc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT2JqQnV0dG9uKGRhdGFPYmplY3QsIG15Q29udGVudCwgbXlDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBzZWxmLnNldHRpbmdzLmZvcm1hdHMuZm9yRWFjaChcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgWExTWCAmJiBrZXkgPT09ICd4bHMnID8ga2V5ID0gJ3hsc20nIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAhWExTWCAmJiBrZXkgPT09ICd4bHN4JyA/IGtleSA9IG51bGwgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSAmJiBleHBvcnRlcnNba2V5XShyb3dELCBmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tDYXB0aW9uKGV4cG9ydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGNhcHRpb24gPSAkKCdjYXB0aW9uOm5vdCguaGVhZCknKTtcbiAgICAgICAgICAgICAgICAgICAgJGNhcHRpb24ubGVuZ3RoID8gJGNhcHRpb24uYXBwZW5kKGV4cG9ydEJ1dHRvbikgOiAkZWwucHJlcGVuZCgnPGNhcHRpb24gY2xhc3M9XCInICsgYm9vdHN0cmFwU3BhY2luZyArIHNlbGYuc2V0dGluZ3MucG9zaXRpb24gKyAnXCI+JyArIGV4cG9ydEJ1dHRvbiArICc8L2NhcHRpb24+Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlT2JqQnV0dG9uKGRhdGFPYmplY3QsIG15Q29udGVudCwgbXlDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgZXhwb3J0QnV0dG9uID0gXCI8YnV0dG9uIGRhdGEtZmlsZWJsb2I9J1wiICsgZGF0YU9iamVjdCArIFwiJyBjbGFzcz0nXCIgKyBib290c3RyYXBDbGFzcyArIGJvb3RzdHJhcFRoZW1lICsgbXlDbGFzcyArIFwiJz5cIiArIG15Q29udGVudCArIFwiPC9idXR0b24+XCI7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrQ2FwdGlvbihleHBvcnRCdXR0b24pO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLmRvd25sb2FkXCIpLmF0dHIoXCJkYXRhLWZpbGVibG9iXCIsIGRhdGFPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gJChcIi5kb3dubG9hZFwiKS5kYXRhKFwiZmlsZWJsb2JcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gb2JqZWN0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IG9iamVjdC5maWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlID0gb2JqZWN0Lm1pbWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUV4dGVuc2lvbiA9IG9iamVjdC5maWxlRXh0ZW5zaW9uO1xuICAgICAgICAgICAgICAgICAgICBUYWJsZUV4cG9ydC5wcm90b3R5cGUuZXhwb3J0MmZpbGUoZGF0YSwgbWltZVR5cGUsIGZpbGVOYW1lLCBmaWxlRXh0ZW5zaW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJChcIi5kb3dubG9hZFwiKVxuICAgICAgICAgICAgICAgIC5vZmYoXCJjbGlja1wiKVxuICAgICAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9ICQodGhpcykuZGF0YShcImZpbGVibG9iXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG9iamVjdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBvYmplY3QuZmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZSA9IG9iamVjdC5taW1lVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVFeHRlbnNpb24gPSBvYmplY3QuZmlsZUV4dGVuc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgVGFibGVFeHBvcnQucHJvdG90eXBlLmV4cG9ydDJmaWxlKGRhdGEsIG1pbWVUeXBlLCBmaWxlTmFtZSwgZmlsZUV4dGVuc2lvbik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgVGFibGVFeHBvcnQucHJvdG90eXBlID0ge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJzaW9uLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2ZXJzaW9uOiBcIjMuMy41XCIsXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlZmF1bHQgcGx1Z2luIG9wdGlvbnMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVGFibGVFeHBvcnQucHJvdG90eXBlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgaGVhZGluZ3M6IHRydWUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoQm9vbGVhbiksIGRpc3BsYXkgdGFibGUgaGVhZGluZ3MgKHRoIG9yIHRkIGVsZW1lbnRzKSBpbiB0aGUgPHRoZWFkPiwgKGRlZmF1bHQ6IHRydWUpXG4gICAgICAgICAgICAgICAgZm9vdGVyczogdHJ1ZSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoQm9vbGVhbiksIGRpc3BsYXkgdGFibGUgZm9vdGVycyAodGggb3IgdGQgZWxlbWVudHMpIGluIHRoZSA8dGZvb3Q+LCAoZGVmYXVsdDogZmFsc2UpXG4gICAgICAgICAgICAgICAgZm9ybWF0czogW1wieGxzXCIsIFwiY3N2XCIsIFwidHh0XCJdLCAgICAgICAgICAgICAvLyAoU3RyaW5nW10pLCBmaWxldHlwZShzKSBmb3IgdGhlIGV4cG9ydCwgKGRlZmF1bHQ6IFtcInhsc1wiLCBcImNzdlwiLCBcInR4dFwiXSlcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogXCJpZFwiLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKGlkLCBTdHJpbmcpLCBmaWxlbmFtZSBmb3IgdGhlIGRvd25sb2FkZWQgZmlsZSwgKGRlZmF1bHQ6IFwiaWRcIilcbiAgICAgICAgICAgICAgICBib290c3RyYXA6IHRydWUsICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChCb29sZWFuKSwgc3R5bGUgYnV0dG9ucyB1c2luZyBib290c3RyYXAsIChkZWZhdWx0OiB0cnVlKVxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImJvdHRvbVwiLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyAodG9wLCBib3R0b20pLCBwb3NpdGlvbiBvZiB0aGUgY2FwdGlvbiBlbGVtZW50IHJlbGF0aXZlIHRvIHRhYmxlLCAoZGVmYXVsdDogXCJib3R0b21cIilcbiAgICAgICAgICAgICAgICBpZ25vcmVSb3dzOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChOdW1iZXIsIE51bWJlcltdKSwgcm93IGluZGljZXMgdG8gZXhjbHVkZSBmcm9tIHRoZSBleHBvcnRlZCBmaWxlIChkZWZhdWx0OiBudWxsKVxuICAgICAgICAgICAgICAgIGlnbm9yZUNvbHM6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKE51bWJlciwgTnVtYmVyW10pLCBjb2x1bW4gaW5kaWNlcyB0byBleGNsdWRlIGZyb20gdGhlIGV4cG9ydGVkIGZpbGUgKGRlZmF1bHQ6IG51bGwpXG4gICAgICAgICAgICAgICAgaWdub3JlQ1NTOiBcIi50YWJsZWV4cG9ydC1pZ25vcmVcIiwgICAgICAgICAgIC8vIChzZWxlY3Rvciwgc2VsZWN0b3JbXSksIHNlbGVjdG9yKHMpIHRvIGV4Y2x1ZGUgY2VsbHMgZnJvbSB0aGUgZXhwb3J0ZWQgZmlsZSAoZGVmYXVsdDogXCIudGFibGVleHBvcnQtaWdub3JlXCIpXG4gICAgICAgICAgICAgICAgZW1wdHlDU1M6IFwiLnRhYmxlZXhwb3J0LWVtcHR5XCIgICAgICAgICAgICAgIC8vIChzZWxlY3Rvciwgc2VsZWN0b3JbXSksIHNlbGVjdG9yKHMpIHRvIHJlcGxhY2UgY2VsbHMgd2l0aCBhbiBlbXB0eSBzdHJpbmcgaW4gdGhlIGV4cG9ydGVkIGZpbGUgKGRlZmF1bHQ6IFwiLnRhYmxlZXhwb3J0LWVtcHR5XCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDaGFyYWN0ZXIgc2V0IChjaGFyYWN0ZXIgZW5jb2RpbmcpIG9mIHRoZSBIVE1MLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjaGFyc2V0OiBcImNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmlsZW5hbWUgZmFsbGJhY2sgZm9yIGV4cG9ydGVkIGZpbGVzLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkZWZhdWx0RmlsZU5hbWU6IFwibXlEb3dubG9hZFwiLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDbGFzcyBhcHBsaWVkIHRvIGVhY2ggZXhwb3J0IGJ1dHRvbiBlbGVtZW50LlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkZWZhdWx0QnV0dG9uOiBcImJ1dHRvbi1kZWZhdWx0XCIsXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJvb3RzdHJhcCBjb25maWd1cmF0aW9uIGNsYXNzZXMgW1wiYmFzZVwiLCBcInRoZW1lXCIsIFwiY29udGFpbmVyXCJdLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBib290c3RyYXA6IFtcImJ0blwiLCBcImJ0bi1kZWZhdWx0XCIsIFwiYnRuLXRvb2xiYXJcIl0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJvdyBkZWxpbWV0ZXJcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUYWJsZUV4cG9ydC5wcm90b3R5cGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcm93RGVsOiBcIlxcclxcblwiLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBIVE1MIGVudGl0eSBtYXBwaW5nIGZvciBzcGVjaWFsIGNoYXJhY3RlcnMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVGFibGVFeHBvcnQucHJvdG90eXBlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGVudGl0eU1hcDoge1wiJlwiOiBcIiYjMzg7XCIsIFwiPFwiOiBcIiYjNjA7XCIsIFwiPlwiOiBcIiYjNjI7XCIsIFwiJ1wiOiAnJiMzOTsnLCBcIi9cIjogJyYjNDc7J30sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFhMU1ggKE9wZW4gWE1MIHNwcmVhZHNoZWV0KSBmaWxlIGV4dGVuc2lvbiBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVGFibGVFeHBvcnQucHJvdG90eXBlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHhsc3g6IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0Q2xhc3M6IFwieGxzeFwiLFxuICAgICAgICAgICAgICAgIGJ1dHRvbkNvbnRlbnQ6IFwiRXhwb3J0IHRvIHhsc3hcIixcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldFwiLFxuICAgICAgICAgICAgICAgIGZpbGVFeHRlbnNpb246IFwiLnhsc3hcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogWExTIChCaW5hcnkgc3ByZWFkc2hlZXQpIGZpbGUgZXh0ZW5zaW9uIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUYWJsZUV4cG9ydC5wcm90b3R5cGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgeGxzOiB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdENsYXNzOiBcInhsc1wiLFxuICAgICAgICAgICAgICAgIGJ1dHRvbkNvbnRlbnQ6IFwiRXhwb3J0IHRvIHhsc1wiLFxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogXCJcXHRcIixcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWxcIixcbiAgICAgICAgICAgICAgICBmaWxlRXh0ZW5zaW9uOiBcIi54bHNcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ1NWIChDb21tYSBTZXBhcmF0ZWQgVmFsdWVzKSBmaWxlIGV4dGVuc2lvbiBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgVGFibGVFeHBvcnQucHJvdG90eXBlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNzdjoge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRDbGFzczogXCJjc3ZcIixcbiAgICAgICAgICAgICAgICBidXR0b25Db250ZW50OiBcIkV4cG9ydCB0byBjc3ZcIixcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3I6IFwiLFwiLFxuICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBcInRleHQvY3N2XCIsXG4gICAgICAgICAgICAgICAgZmlsZUV4dGVuc2lvbjogXCIuY3N2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRYVCAoUGxhaW4gVGV4dCkgZmlsZSBleHRlbnNpb24gY29uZmlndXJhdGlvblxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0eHQ6IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0Q2xhc3M6IFwidHh0XCIsXG4gICAgICAgICAgICAgICAgYnV0dG9uQ29udGVudDogXCJFeHBvcnQgdG8gdHh0XCIsXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBcIiAgXCIsXG4gICAgICAgICAgICAgICAgbWltZVR5cGU6IFwidGV4dC9wbGFpblwiLFxuICAgICAgICAgICAgICAgIGZpbGVFeHRlbnNpb246IFwiLnR4dFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFc2NhcGVzIHNwZWNpYWwgY2hhcmFjdGVycyB3aXRoIEhUTUwgZW50aXRpZXNcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUYWJsZUV4cG9ydC5wcm90b3R5cGVcbiAgICAgICAgICAgICAqIEBwYXJhbSBzdHJpbmcge1N0cmluZ31cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IGVzY2FwZWQgc3RyaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGVzY2FwZUh0bWw6IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHN0cmluZykucmVwbGFjZSgvWyY8PidcXC9dL2csIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUYWJsZUV4cG9ydC5wcm90b3R5cGUuZW50aXR5TWFwW3NdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRm9ybWF0cyBkYXRldGltZXMgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBFeGNlbFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICogQHBhcmFtIHYge051bWJlcn1cbiAgICAgICAgICAgICAqIEBwYXJhbSBkYXRlMTkwNCB7RGF0ZX1cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IGVwb2NoIHRpbWVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGF0ZU51bTogZnVuY3Rpb24gKHYsIGRhdGUxOTA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGUxOTA0KSB2ICs9IDE0NjI7XG4gICAgICAgICAgICAgICAgdmFyIGVwb2NoID0gRGF0ZS5wYXJzZSh2KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGVwb2NoIC0gbmV3IERhdGUoRGF0ZS5VVEMoMTg5OSwgMTEsIDMwKSkpIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhbiBFeGNlbCBzcHJlYWRzaGVldCBmcm9tIGEgZGF0YSBzdHJpbmdcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUYWJsZUV4cG9ydC5wcm90b3R5cGVcbiAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhIHtTdHJpbmd9XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBlcG9jaCB0aW1lXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNyZWF0ZVNoZWV0OiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciB3cyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHtzOiB7YzogMTAwMDAwMDAsIHI6IDEwMDAwMDAwfSwgZToge2M6IDAsIHI6IDB9fTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBSID0gMDsgUiAhPSBkYXRhLmxlbmd0aDsgKytSKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIEMgPSAwOyBDICE9IGRhdGFbUl0ubGVuZ3RoOyArK0MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS5zLnIgPiBSKSByYW5nZS5zLnIgPSBSO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLnMuYyA+IEMpIHJhbmdlLnMuYyA9IEM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZS5yIDwgUikgcmFuZ2UuZS5yID0gUjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS5lLmMgPCBDKSByYW5nZS5lLmMgPSBDO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSB7djogZGF0YVtSXVtDXX07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC52ID09PSBudWxsKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsX3JlZiA9IFhMU1gudXRpbHMuZW5jb2RlX2NlbGwoe2M6IEMsIHI6IFJ9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjZWxsLnYgPT09ICdudW1iZXInKSBjZWxsLnQgPSAnbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY2VsbC52ID09PSAnYm9vbGVhbicpIGNlbGwudCA9ICdiJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNlbGwudiBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnQgPSAnbic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC56ID0gWExTWC5TU0YuX3RhYmxlWzE0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnYgPSB0aGlzLmRhdGVOdW0oY2VsbC52KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY2VsbC50ID0gJ3MnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB3c1tjZWxsX3JlZl0gPSBjZWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5zLmMgPCAxMDAwMDAwMCkgd3NbJyFyZWYnXSA9IFhMU1gudXRpbHMuZW5jb2RlX3JhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFeGNlbCBXb3JrYm9vayBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFdvcmtib29rOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5TaGVldE5hbWVzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5TaGVldHMgPSB7fTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIGEgc3RyaW5nIHRvIGFuIGFycmF5YnVmZmVyXG4gICAgICAgICAgICAgKiBAcGFyYW0gcyB7U3RyaW5nfVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIFRhYmxlRXhwb3J0LnByb3RvdHlwZVxuICAgICAgICAgICAgICogQHJldHVybnMge0FycmF5QnVmZmVyfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzdHJpbmcyQXJyYXlCdWZmZXI6IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpICE9IHMubGVuZ3RoOyArK2kpIHZpZXdbaV0gPSBzLmNoYXJDb2RlQXQoaSkgJiAweEZGO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFeHBvcnRzIGFuZCBkb3dubG9hZHMgdGhlIGZpbGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBUYWJsZUV4cG9ydC5wcm90b3R5cGVcbiAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhIHtTdHJpbmd9XG4gICAgICAgICAgICAgKiBAcGFyYW0gbWltZSB7U3RyaW5nfSBtaW1lIHR5cGVcbiAgICAgICAgICAgICAqIEBwYXJhbSBuYW1lIHtTdHJpbmd9IGZpbGVuYW1lXG4gICAgICAgICAgICAgKiBAcGFyYW0gZXh0ZW5zaW9uIHtTdHJpbmd9IGZpbGUgZXh0ZW5zaW9uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGV4cG9ydDJmaWxlOiBmdW5jdGlvbiAoZGF0YSwgbWltZSwgbmFtZSwgZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKFhMU1ggJiYgZXh0ZW5zaW9uLnN1YnN0cigwLCA0KSA9PSAoXCIueGxzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3YiA9IG5ldyB0aGlzLldvcmtib29rKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB3cyA9IHRoaXMuY3JlYXRlU2hlZXQoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2IuU2hlZXROYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB3Yi5TaGVldHNbbmFtZV0gPSB3cztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdvcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tUeXBlOiBleHRlbnNpb24uc3Vic3RyKDEsIDMpICsgKGV4dGVuc2lvbi5zdWJzdHIoNCkgfHwgJ20nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rU1NUOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYmluYXJ5J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdib3V0ID0gWExTWC53cml0ZSh3Yiwgd29wdHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLnN0cmluZzJBcnJheUJ1ZmZlcih3Ym91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNhdmVBcyhuZXcgQmxvYihbXCJcXHVGRUZGXCIgKyBkYXRhXSxcbiAgICAgICAgICAgICAgICAgICAge3R5cGU6IG1pbWUgKyBcIjtcIiArIHRoaXMuY2hhcnNldH0pLFxuICAgICAgICAgICAgICAgICAgICBuYW1lICsgZXh0ZW5zaW9uLCB0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFVwZGF0ZXMgdGhlIHBsdWdpbiBpbnN0YW5jZSB3aXRoIG5ldy91cGRhdGVkIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFRhYmxlRXhwb3J0IGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge1RhYmxlRXhwb3J0fSB1cGRhdGVkIFRhYmxlRXhwb3J0IGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRhYmxlRXhwb3J0KHRoaXMuc2VsZWN0b3JzLCAkLmV4dGVuZCh7fSwgdGhpcy5zZXR0aW5ncywgb3B0aW9ucyksIHRydWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVzZXQgdGhlIHBsdWdpbiBpbnN0YW5jZSB0byBpdHMgb3JpZ2luYWwgc3RhdGVcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUYWJsZUV4cG9ydH0gb3JpZ2luYWwgVGFibGVFeHBvcnQgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRhYmxlRXhwb3J0KHRoaXMuc2VsZWN0b3JzLCBzZXR0aW5ncywgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZW1vdmUgdGhlIGluc3RhbmNlIChpLmUuIGNhcHRpb24gY29udGFpbmluZyB0aGUgZXhwb3J0IGJ1dHRvbnMpXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2NhcHRpb246bm90KC5oZWFkKScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBqUXVlcnkgVGFibGVFeHBvcnQgd3JhcHBlclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBUYWJsZUV4cG9ydCBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICAgICAgICogQHBhcmFtIGlzVXBkYXRlIHtCb29sZWFufVxuICAgICAgICAgKiBAcmV0dXJucyB7VGFibGVFeHBvcnR9IFRhYmxlRXhwb3J0IGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICAkLmZuLnRhYmxlRXhwb3J0ID0gZnVuY3Rpb24gKG9wdGlvbnMsIGlzVXBkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRhYmxlRXhwb3J0KHRoaXMsIG9wdGlvbnMsIGlzVXBkYXRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBhbGlhcyB0aGUgVGFibGVFeHBvcnQgcHJvdG90eXBlXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gVGFibGVFeHBvcnQucHJvdG90eXBlKSB7XG4gICAgICAgICAgICAkLmZuLnRhYmxlRXhwb3J0W3Byb3BdID0gVGFibGVFeHBvcnQucHJvdG90eXBlW3Byb3BdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuZGVmYXVsdCA9IGV4cG9ydHMuVGFibGVFeHBvcnQgPSBUYWJsZUV4cG9ydDtcblxuICAgIH1cbikpOyJdfQ==
