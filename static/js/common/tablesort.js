$.tablesort=function(t,e){var s=this;this.$table=t,this.settings=$.extend({},$.tablesort.defaults,e),this.$table.find("thead th").bind("click.tablesort",function(){$(".pagination select option").length>1&&e.func?($.extend(e),s.sortBackEnd($(this))):$(this).hasClass("disabled")||s.sort($(this))}),this.index=null,this.$th=null,this.direction=[]},$.tablesort.prototype={sortBackEnd:function(t,e){var s=this,i=this.$table,a=(i.find("tbody tr"),t.index(),t.children("div")),n=a.hasClass(s.settings.asc)?s.settings.desc:s.settings.asc;s.$table.find("thead th div").removeClass(s.settings.asc+" "+s.settings.desc),a.addClass(n),$.func()},sort:function(t,e){var s=new Date,i=this,a=this.$table,n=a.find("tbody tr"),r=t.index(),o=t.children("div"),d=[],l=$("<div/>"),c=function(t,e,s){var i;return t.data().sortBy?(i=t.data().sortBy,"function"==typeof i?i(t,e,s):i):e.data("sort")?e.data("sort"):e.text()},h=function(t,e){var s,i,a,n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,r=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,l=/^0/,c=function(t){return(""+t).toLowerCase().replace(",","")},h=c(t).replace(r,"")||"",$=c(e).replace(r,"")||"",f=h.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),u=$.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=Math.max(f.length,u.length),g=parseInt(h.match(d),10)||1!=f.length&&h.match(o)&&Date.parse(h),p=parseInt($.match(d),10)||g&&$.match(o)&&Date.parse($)||null;if(p){if(g<p)return-1;if(g>p)return 1}for(a=0;a<b;a++){if(s=!(f[a]||"").match(l)&&parseFloat(f[a])||f[a]||0,i=!(u[a]||"").match(l)&&parseFloat(u[a])||u[a]||0,isNaN(s)!==isNaN(i))return isNaN(s)?1:-1;if(typeof s!=typeof i&&(s+="",i+=""),s<i)return-1;if(s>i)return 1}return 0};0!==n.length&&(i.$table.find("thead th div").removeClass(i.settings.asc+" "+i.settings.desc),this.$th=t,this.index!=r?this.direction[r]="desc":"asc"!==e&&"desc"!==e?this.direction[r]="desc"===this.direction[r]?"asc":"desc":this.direction[r]=e,this.index=r,e="asc"==this.direction[r]?1:-1,i.$table.trigger("tablesort:start",[i]),i.log("Sorting by "+this.index+" "+this.direction[r]),n.sort(function(s,a){var n=$(s),r=$(a),o=n.index(),l=r.index();return d[o]?s=d[o]:(s=c(t,i.cellToSort(s),i),d[o]=s),d[l]?a=d[l]:(a=c(t,i.cellToSort(a),i),d[l]=a),h(s,a)*e}),n.each(function(t,e){l.append(e)}),a.append(l.html()),o.addClass(i.settings[i.direction[r]]),i.log("Sort finished in "+((new Date).getTime()-s.getTime())+"ms"),i.$table.trigger("tablesort:complete",[i]))},cellToSort:function(t){return $($(t).find("td").get(this.index))},log:function(t){($.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+t)},destroy:function(){return this.$table.find("thead th").unbind("click.tablesort"),this.$table.data("tablesort",null),null}},$.tablesort.DEBUG=!1,$.tablesort.defaults={debug:$.tablesort.DEBUG,asc:"ascending",desc:"descending"},$.fn.tablesort=function(t){var e,s;return this.each(function(){e=$(this),s=e.data("tablesort"),s&&s.destroy(),e.data("tablesort",new $.tablesort(e,t))})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi90YWJsZXNvcnQuanMiXSwibmFtZXMiOlsiJCIsInRhYmxlc29ydCIsIiR0YWJsZSIsInNldHRpbmdzIiwic2VsZiIsInRoaXMiLCJleHRlbmQiLCJkZWZhdWx0cyIsImZpbmQiLCJiaW5kIiwibGVuZ3RoIiwiZnVuYyIsInNvcnRCYWNrRW5kIiwiaGFzQ2xhc3MiLCJzb3J0IiwiaW5kZXgiLCIkdGgiLCJkaXJlY3Rpb24iLCJwcm90b3R5cGUiLCJ0aCIsInRhYmxlIiwiZGl2IiwiY2hpbGRyZW4iLCJkciIsImFzYyIsImRlc2MiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic3RhcnQiLCJEYXRlIiwicm93cyIsImNhY2hlIiwiZnJhZ21lbnQiLCJzb3J0VmFsdWVGb3JDZWxsIiwidGQiLCJzb3J0ZXIiLCJzb3J0QnkiLCJkYXRhIiwidGV4dCIsIm5hdHVyYWxTb3J0IiwiYSIsImIiLCJ4SGV4VmFsdWUiLCJ5SGV4VmFsdWUiLCJjaHVua1JlZ0V4cCIsInN0cmlwUmVnRXhwIiwiZGF0ZVJlZ0V4cCIsIm51bWVyaWNSZWdFeHAiLCJvUmVnRXhwIiwidXNlSW5zZW5zaXRpdmUiLCJzdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ4IiwieSIsInhDaHVua2VkIiwic3BsaXQiLCJ5Q2h1bmtlZCIsImNodW5rTGVuZ3RoIiwiTWF0aCIsIm1heCIsInhEYXRlIiwicGFyc2VJbnQiLCJtYXRjaCIsInBhcnNlIiwieURhdGUiLCJwYXJzZUZsb2F0IiwiaXNOYU4iLCJ0cmlnZ2VyIiwibG9nIiwiYVJvdyIsImJSb3ciLCJhSW5kZXgiLCJiSW5kZXgiLCJjZWxsVG9Tb3J0IiwiZWFjaCIsImkiLCJ0ciIsImFwcGVuZCIsImh0bWwiLCJnZXRUaW1lIiwicm93IiwiZ2V0IiwibXNnIiwiREVCVUciLCJkZWJ1ZyIsImNvbnNvbGUiLCJkZXN0cm95IiwidW5iaW5kIiwiZm4iLCJwcmV2aW91cyJdLCJtYXBwaW5ncyI6IkFBQ0FBLEVBQUVDLFVBQVks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b24vdGFibGVzb3J0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4kLnRhYmxlc29ydCA9IGZ1bmN0aW9uICgkdGFibGUsIHNldHRpbmdzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuJHRhYmxlID0gJHRhYmxlO1xuICAgIHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgJC50YWJsZXNvcnQuZGVmYXVsdHMsIHNldHRpbmdzKTtcbiAgICB0aGlzLiR0YWJsZS5maW5kKCd0aGVhZCB0aCcpLmJpbmQoJ2NsaWNrLnRhYmxlc29ydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQoXCIucGFnaW5hdGlvbiBzZWxlY3Qgb3B0aW9uXCIpLmxlbmd0aCA+IDEgJiYgc2V0dGluZ3MuZnVuYyl7XG4gICAgICAgICAgICAkLmV4dGVuZChzZXR0aW5ncyk7XG4gICAgICAgICAgICBzZWxmLnNvcnRCYWNrRW5kKCQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICBzZWxmLnNvcnQoJCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmluZGV4ID0gbnVsbDtcbiAgICB0aGlzLiR0aCA9IG51bGw7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBbXTtcbn07XG5cbiQudGFibGVzb3J0LnByb3RvdHlwZSA9IHtcbiAgICBzb3J0QmFja0VuZDogZnVuY3Rpb24odGgsIGRpcmVjdGlvbil7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgIHRhYmxlID0gdGhpcy4kdGFibGUsXG4gICAgICAgICAgICByb3dzID0gdGFibGUuZmluZCgndGJvZHkgdHInKSxcbiAgICAgICAgICAgIGluZGV4ID0gdGguaW5kZXgoKSxcbiAgICAgICAgICAgIGRpdiA9IHRoLmNoaWxkcmVuKFwiZGl2XCIpLFxuICAgICAgICAgICAgZHIgPSBkaXYuaGFzQ2xhc3Moc2VsZi5zZXR0aW5ncy5hc2MpID8gc2VsZi5zZXR0aW5ncy5kZXNjOnNlbGYuc2V0dGluZ3MuYXNjO1xuXG4gICAgICAgIHNlbGYuJHRhYmxlLmZpbmQoJ3RoZWFkIHRoIGRpdicpLnJlbW92ZUNsYXNzKHNlbGYuc2V0dGluZ3MuYXNjICsgJyAnICsgc2VsZi5zZXR0aW5ncy5kZXNjKTtcbiAgICAgICAgZGl2LmFkZENsYXNzKGRyKTtcbiAgICAgICAgJC5mdW5jKCk7XG4gICAgfSxcblxuICAgIHNvcnQ6IGZ1bmN0aW9uICh0aCwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgIHRhYmxlID0gdGhpcy4kdGFibGUsXG4gICAgICAgICAgICByb3dzID0gdGFibGUuZmluZCgndGJvZHkgdHInKSxcbiAgICAgICAgICAgIGluZGV4ID0gdGguaW5kZXgoKSxcbiAgICAgICAgICAgIGRpdiA9IHRoLmNoaWxkcmVuKFwiZGl2XCIpLFxuICAgICAgICAgICAgY2FjaGUgPSBbXSxcbiAgICAgICAgICAgIGZyYWdtZW50ID0gJCgnPGRpdi8+JyksXG4gICAgICAgICAgICBzb3J0VmFsdWVGb3JDZWxsID0gZnVuY3Rpb24gKHRoLCB0ZCwgc29ydGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvcnRCeTtcbiAgICAgICAgICAgICAgICBpZiAodGguZGF0YSgpLnNvcnRCeSkge1xuICAgICAgICAgICAgICAgICAgICBzb3J0QnkgPSB0aC5kYXRhKCkuc29ydEJ5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBzb3J0QnkgPT09ICdmdW5jdGlvbicpID8gc29ydEJ5KHRoLCB0ZCwgc29ydGVyKSA6IHNvcnRCeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICggdGQuZGF0YSgnc29ydCcpKSA/IHRkLmRhdGEoJ3NvcnQnKSA6IHRkLnRleHQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYXR1cmFsU29ydCA9IGZ1bmN0aW9uIG5hdHVyYWxTb3J0KGEsIGIpIHtcbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtSZWdFeHAgPSAvKF4tP1swLTldKyhcXC4/WzAtOV0qKVtkZl0/ZT9bMC05XT8kfF4weFswLTlhLWZdKyR8WzAtOV0rKS9naSxcbiAgICAgICAgICAgICAgICAgICAgc3RyaXBSZWdFeHAgPSAvKF5bIF0qfFsgXSokKS9nLFxuICAgICAgICAgICAgICAgICAgICBkYXRlUmVnRXhwID0gLyheKFtcXHcgXSssP1tcXHcgXSspP1tcXHcgXSssP1tcXHcgXStcXGQrOlxcZCsoOlxcZCspP1tcXHcgXT98XlxcZHsxLDR9W1xcL1xcLV1cXGR7MSw0fVtcXC9cXC1dXFxkezEsNH18XlxcdyssIFxcdysgXFxkKywgXFxkezR9KS8sXG4gICAgICAgICAgICAgICAgICAgIG51bWVyaWNSZWdFeHAgPSAvXjB4WzAtOWEtZl0rJC9pLFxuICAgICAgICAgICAgICAgICAgICBvUmVnRXhwID0gL14wLyxcbiAgICAgICAgICAgICAgICAgICAgY0xvYyA9IDAsXG4gICAgICAgICAgICAgICAgICAgIHVzZUluc2Vuc2l0aXZlID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgnJyArIHN0cmluZykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcsJywgJycpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IGFsbCB0byBzdHJpbmdzIHN0cmlwIHdoaXRlc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgeCA9IHVzZUluc2Vuc2l0aXZlKGEpLnJlcGxhY2Uoc3RyaXBSZWdFeHAsICcnKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgeSA9IHVzZUluc2Vuc2l0aXZlKGIpLnJlcGxhY2Uoc3RyaXBSZWdFeHAsICcnKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2h1bmsvdG9rZW5pemVcbiAgICAgICAgICAgICAgICAgICAgeENodW5rZWQgPSB4LnJlcGxhY2UoY2h1bmtSZWdFeHAsICdcXDAkMVxcMCcpLnJlcGxhY2UoL1xcMCQvLCAnJykucmVwbGFjZSgvXlxcMC8sICcnKS5zcGxpdCgnXFwwJyksXG4gICAgICAgICAgICAgICAgICAgIHlDaHVua2VkID0geS5yZXBsYWNlKGNodW5rUmVnRXhwLCAnXFwwJDFcXDAnKS5yZXBsYWNlKC9cXDAkLywgJycpLnJlcGxhY2UoL15cXDAvLCAnJykuc3BsaXQoJ1xcMCcpLFxuICAgICAgICAgICAgICAgICAgICBjaHVua0xlbmd0aCA9IE1hdGgubWF4KHhDaHVua2VkLmxlbmd0aCwgeUNodW5rZWQubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbnVtZXJpYywgaGV4IG9yIGRhdGUgZGV0ZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIHhEYXRlID0gcGFyc2VJbnQoeC5tYXRjaChudW1lcmljUmVnRXhwKSwgMTApIHx8ICh4Q2h1bmtlZC5sZW5ndGggIT0gMSAmJiB4Lm1hdGNoKGRhdGVSZWdFeHApICYmIERhdGUucGFyc2UoeCkpLFxuICAgICAgICAgICAgICAgICAgICB5RGF0ZSA9IHBhcnNlSW50KHkubWF0Y2gobnVtZXJpY1JlZ0V4cCksIDEwKSB8fCB4RGF0ZSAmJiB5Lm1hdGNoKGRhdGVSZWdFeHApICYmIERhdGUucGFyc2UoeSkgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgeEhleFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB5SGV4VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4O1xuICAgICAgICAgICAgICAgIGlmICh5RGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeERhdGUgPCB5RGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHhEYXRlID4geURhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNodW5rTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgZmxvYXRzIG5vdCBzdGFydGluZyB3aXRoICcwJywgc3RyaW5nIG9yIDAgaWYgbm90IGRlZmluZWQgKENsaW50IFByaWVzdClcbiAgICAgICAgICAgICAgICAgICAgeEhleFZhbHVlID0gISh4Q2h1bmtlZFtpbmRleF0gfHwgJycpLm1hdGNoKG9SZWdFeHApICYmIHBhcnNlRmxvYXQoeENodW5rZWRbaW5kZXhdKSB8fCB4Q2h1bmtlZFtpbmRleF0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgeUhleFZhbHVlID0gISh5Q2h1bmtlZFtpbmRleF0gfHwgJycpLm1hdGNoKG9SZWdFeHApICYmIHBhcnNlRmxvYXQoeUNodW5rZWRbaW5kZXhdKSB8fCB5Q2h1bmtlZFtpbmRleF0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIG51bWVyaWMgdnMgc3RyaW5nIGNvbXBhcmlzb24gLSBudW1iZXIgPCBzdHJpbmcgLSAoS3lsZSBBZGFtcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHhIZXhWYWx1ZSkgIT09IGlzTmFOKHlIZXhWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoIGlzTmFOKHhIZXhWYWx1ZSkgKSA/IDEgOiAtMSA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVseSBvbiBzdHJpbmcgY29tcGFyaXNvbiBpZiBkaWZmZXJlbnQgdHlwZXMgLSBpLmUuICcwMicgPCAyICE9ICcwMicgPCAnMidcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHhIZXhWYWx1ZSAhPT0gdHlwZW9mIHlIZXhWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeEhleFZhbHVlICs9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgeUhleFZhbHVlICs9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh4SGV4VmFsdWUgPCB5SGV4VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoeEhleFZhbHVlID4geUhleFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcblxuICAgICAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuJHRhYmxlLmZpbmQoJ3RoZWFkIHRoIGRpdicpLnJlbW92ZUNsYXNzKHNlbGYuc2V0dGluZ3MuYXNjICsgJyAnICsgc2VsZi5zZXR0aW5ncy5kZXNjKTtcblxuICAgICAgICB0aGlzLiR0aCA9IHRoO1xuICAgICAgICBpZiAodGhpcy5pbmRleCAhPSBpbmRleCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25baW5kZXhdID0gJ2Rlc2MnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiAhPT0gJ2FzYycgJiYgZGlyZWN0aW9uICE9PSAnZGVzYycpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uW2luZGV4XSA9IHRoaXMuZGlyZWN0aW9uW2luZGV4XSA9PT0gJ2Rlc2MnID8gJ2FzYycgOiAnZGVzYyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbltpbmRleF0gPSBkaXJlY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbltpbmRleF0gPT0gJ2FzYycgPyAxIDogLTE7XG5cbiAgICAgICAgc2VsZi4kdGFibGUudHJpZ2dlcigndGFibGVzb3J0OnN0YXJ0JywgW3NlbGZdKTtcbiAgICAgICAgc2VsZi5sb2coXCJTb3J0aW5nIGJ5IFwiICsgdGhpcy5pbmRleCArICcgJyArIHRoaXMuZGlyZWN0aW9uW2luZGV4XSk7XG5cbiAgICAgICAgcm93cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgYVJvdyA9ICQoYSk7XG4gICAgICAgICAgICB2YXIgYlJvdyA9ICQoYik7XG4gICAgICAgICAgICB2YXIgYUluZGV4ID0gYVJvdy5pbmRleCgpO1xuICAgICAgICAgICAgdmFyIGJJbmRleCA9IGJSb3cuaW5kZXgoKTtcblxuICAgICAgICAgICAgLy8gU29ydCB2YWx1ZSBBXG4gICAgICAgICAgICBpZiAoY2FjaGVbYUluZGV4XSkge1xuICAgICAgICAgICAgICAgIGEgPSBjYWNoZVthSW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYSA9IHNvcnRWYWx1ZUZvckNlbGwodGgsIHNlbGYuY2VsbFRvU29ydChhKSwgc2VsZik7XG4gICAgICAgICAgICAgICAgY2FjaGVbYUluZGV4XSA9IGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTb3J0IFZhbHVlIEJcbiAgICAgICAgICAgIGlmIChjYWNoZVtiSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgYiA9IGNhY2hlW2JJbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBiID0gc29ydFZhbHVlRm9yQ2VsbCh0aCwgc2VsZi5jZWxsVG9Tb3J0KGIpLCBzZWxmKTtcbiAgICAgICAgICAgICAgICBjYWNoZVtiSW5kZXhdID0gYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAobmF0dXJhbFNvcnQoYSwgYikgKiBkaXJlY3Rpb24pO1xuICAgICAgICB9KTtcblxuICAgICAgICByb3dzLmVhY2goZnVuY3Rpb24gKGksIHRyKSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmQodHIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGFibGUuYXBwZW5kKGZyYWdtZW50Lmh0bWwoKSk7XG5cbiAgICAgICAgZGl2LmFkZENsYXNzKHNlbGYuc2V0dGluZ3Nbc2VsZi5kaXJlY3Rpb25baW5kZXhdXSk7XG5cbiAgICAgICAgc2VsZi5sb2coJ1NvcnQgZmluaXNoZWQgaW4gJyArICgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC0gc3RhcnQuZ2V0VGltZSgpKSArICdtcycpO1xuICAgICAgICBzZWxmLiR0YWJsZS50cmlnZ2VyKCd0YWJsZXNvcnQ6Y29tcGxldGUnLCBbc2VsZl0pO1xuXG4gICAgfSxcblxuICAgIGNlbGxUb1NvcnQ6IGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgcmV0dXJuICQoJChyb3cpLmZpbmQoJ3RkJykuZ2V0KHRoaXMuaW5kZXgpKTtcbiAgICB9LFxuXG5cbiAgICBsb2c6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgaWYgKCgkLnRhYmxlc29ydC5ERUJVRyB8fCB0aGlzLnNldHRpbmdzLmRlYnVnKSAmJiBjb25zb2xlICYmIGNvbnNvbGUubG9nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW3RhYmxlc29ydF0gJyArIG1zZyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLiR0YWJsZS5maW5kKCd0aGVhZCB0aCcpLnVuYmluZCgnY2xpY2sudGFibGVzb3J0Jyk7XG4gICAgICAgIHRoaXMuJHRhYmxlLmRhdGEoJ3RhYmxlc29ydCcsIG51bGwpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbn07XG5cbiQudGFibGVzb3J0LkRFQlVHID0gZmFsc2U7XG5cbiQudGFibGVzb3J0LmRlZmF1bHRzID0ge1xuICAgIGRlYnVnOiAkLnRhYmxlc29ydC5ERUJVRyxcbiAgICBhc2M6ICdhc2NlbmRpbmcnLFxuICAgIGRlc2M6ICdkZXNjZW5kaW5nJ1xufTtcblxuJC5mbi50YWJsZXNvcnQgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcbiAgICB2YXIgdGFibGUsIHNvcnRhYmxlLCBwcmV2aW91cztcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGFibGUgPSAkKHRoaXMpO1xuICAgICAgICBwcmV2aW91cyA9IHRhYmxlLmRhdGEoJ3RhYmxlc29ydCcpO1xuICAgICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgICAgIHByZXZpb3VzLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICB0YWJsZS5kYXRhKCd0YWJsZXNvcnQnLCBuZXcgJC50YWJsZXNvcnQodGFibGUsIHNldHRpbmdzKSk7XG4gICAgfSk7XG59O1xuXG5cbiJdfQ==
